/*!
* ONNX Runtime Web v1.16.0
* Copyright (c) Microsoft Corporation. All rights reserved.
* Licensed under the MIT License.
*/
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.ort=t():e.ort=t()}(self,(()=>{return e={818:(e,t,r)=>{"use strict";t.c8=t.rX=void 0;const n=r(235),o=r(381),a=r(544),i=r(640);t.rX=()=>{if(("number"!=typeof n.env.wasm.initTimeout||n.env.wasm.initTimeout<0)&&(n.env.wasm.initTimeout=0),"boolean"!=typeof n.env.wasm.simd&&(n.env.wasm.simd=!0),"boolean"!=typeof n.env.wasm.proxy&&(n.env.wasm.proxy=!1),"number"!=typeof n.env.wasm.numThreads||!Number.isInteger(n.env.wasm.numThreads)||n.env.wasm.numThreads<=0){const e="undefined"==typeof navigator?(0,o.cpus)().length:navigator.hardwareConcurrency;n.env.wasm.numThreads=Math.min(4,Math.ceil((e||1)/2))}},t.c8=new class{async init(){(0,t.rX)(),await(0,a.initializeWebAssemblyInstance)()}async createSessionHandler(e,t){const r=new i.OnnxruntimeWebAssemblySessionHandler;return await r.loadModel(e,t),Promise.resolve(r)}}},57:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(235),t);const a=r(235),i=r(408);{const e=r(818).c8;(0,a.registerBackend)("cpu",e,10),(0,a.registerBackend)("wasm",e,10),(0,a.registerBackend)("xnnpack",e,9),(0,a.registerBackend)("webnn",e,9)}a.env.versions.web=i.version},408:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.version=void 0,t.version="1.16.0"},544:function(e,t,r){"use strict";var n,o=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&o(t,e,r);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.endProfiling=t.run=t.releaseSession=t.createSession=t.createSessionFinalize=t.createSessionAllocate=t.initializeRuntime=t.initializeWebAssemblyInstance=void 0;const s=r(235),u=i(r(259)),c=r(263);"undefined"!=typeof document&&(null===(n=null===document||void 0===document?void 0:document.currentScript)||void 0===n||n.src),t.initializeWebAssemblyInstance=async()=>(0,c.initializeWebAssembly)(s.env.wasm),t.initializeRuntime=async e=>{await u.initRuntime(e)},t.createSessionAllocate=async e=>u.createSessionAllocate(e),t.createSessionFinalize=async(e,t)=>u.createSessionFinalize(e,t),t.createSession=async(e,t)=>u.createSession(e,t),t.releaseSession=async e=>{u.releaseSession(e)},t.run=async(e,t,r,n,o)=>u.run(e,t,r,n,o),t.endProfiling=async e=>{u.endProfiling(e)}},918:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setRunOptions=void 0;const n=r(263),o=r(497);t.setRunOptions=e=>{const t=(0,n.getInstance)();let r=0;const a=[],i=e||{};try{if(void 0===(null==e?void 0:e.logSeverityLevel))i.logSeverityLevel=2;else if("number"!=typeof e.logSeverityLevel||!Number.isInteger(e.logSeverityLevel)||e.logSeverityLevel<0||e.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${e.logSeverityLevel}`);if(void 0===(null==e?void 0:e.logVerbosityLevel))i.logVerbosityLevel=0;else if("number"!=typeof e.logVerbosityLevel||!Number.isInteger(e.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${e.logVerbosityLevel}`);void 0===(null==e?void 0:e.terminate)&&(i.terminate=!1);let n=0;return void 0!==(null==e?void 0:e.tag)&&(n=(0,o.allocWasmString)(e.tag,a)),r=t._OrtCreateRunOptions(i.logSeverityLevel,i.logVerbosityLevel,!!i.terminate,n),0===r&&(0,o.checkLastError)("Can't create run options."),void 0!==(null==e?void 0:e.extra)&&(0,o.iterateExtraOptions)(e.extra,"",new WeakSet,((e,n)=>{const i=(0,o.allocWasmString)(e,a),s=(0,o.allocWasmString)(n,a);0!==t._OrtAddRunConfigEntry(r,i,s)&&(0,o.checkLastError)(`Can't set a run config entry: ${e} - ${n}.`)})),[r,a]}catch(e){throw 0!==r&&t._OrtReleaseRunOptions(r),a.forEach((e=>t._free(e))),e}}},640:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OnnxruntimeWebAssemblySessionHandler=void 0;const n=r(806),o=r(235),a=r(850),i=r(544);let s;t.OnnxruntimeWebAssemblySessionHandler=class{async createSessionAllocate(e){const t=await fetch(e),r=await t.arrayBuffer();return(0,i.createSessionAllocate)(new Uint8Array(r))}async loadModel(e,t){if(s||(await(0,i.initializeRuntime)(o.env),s=!0),"string"==typeof e)if("undefined"!=typeof process&&process.versions&&process.versions.node){const r=await(0,a.promisify)(n.readFile)(e);[this.sessionId,this.inputNames,this.outputNames]=await(0,i.createSession)(r,t)}else{const r=await this.createSessionAllocate(e);[this.sessionId,this.inputNames,this.outputNames]=await(0,i.createSessionFinalize)(r,t)}else[this.sessionId,this.inputNames,this.outputNames]=await(0,i.createSession)(e,t)}async dispose(){return(0,i.releaseSession)(this.sessionId)}async run(e,t,r){const n=[],a=[];Object.entries(e).forEach((e=>{const t=e[0],r=e[1],o=this.inputNames.indexOf(t);if(-1===o)throw new Error(`invalid input '${t}'`);n.push(r),a.push(o)}));const s=[];Object.entries(t).forEach((e=>{const t=e[0],r=this.outputNames.indexOf(t);if(-1===r)throw new Error(`invalid output '${t}'`);s.push(r)}));const u=await(0,i.run)(this.sessionId,a,n.map((e=>[e.type,e.dims,e.data])),s,r),c={};for(let e=0;e<u.length;e++)c[this.outputNames[s[e]]]=new o.Tensor(u[e][0],u[e][2],u[e][1]);return c}startProfiling(){}endProfiling(){(0,i.endProfiling)(this.sessionId)}}},622:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setSessionOptions=void 0;const n=r(263),o=r(497);t.setSessionOptions=e=>{var t,r,a,i;const s=(0,n.getInstance)();let u=0;const c=[],l=e||{};(e=>{e.extra||(e.extra={}),e.extra.session||(e.extra.session={});const t=e.extra.session;t.use_ort_model_bytes_directly||(t.use_ort_model_bytes_directly="1"),e.executionProviders&&e.executionProviders.some((e=>"webgpu"===("string"==typeof e?e:e.name)))&&(e.enableMemPattern=!1)})(l);try{const e=(e=>{switch(e){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${e}`)}})(null!==(t=l.graphOptimizationLevel)&&void 0!==t?t:"all"),f=(e=>{switch(e){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${e}`)}})(null!==(r=l.executionMode)&&void 0!==r?r:"sequential"),d="string"==typeof l.logId?(0,o.allocWasmString)(l.logId,c):0,p=null!==(a=l.logSeverityLevel)&&void 0!==a?a:2;if(!Number.isInteger(p)||p<0||p>4)throw new Error(`log serverity level is not valid: ${p}`);const y=null!==(i=l.logVerbosityLevel)&&void 0!==i?i:0;if(!Number.isInteger(y)||y<0||y>4)throw new Error(`log verbosity level is not valid: ${y}`);const m="string"==typeof l.optimizedModelFilePath?(0,o.allocWasmString)(l.optimizedModelFilePath,c):0;return u=s._OrtCreateSessionOptions(e,!!l.enableCpuMemArena,!!l.enableMemPattern,f,!!l.enableProfiling,0,d,p,y,m),0===u&&(0,o.checkLastError)("Can't create session options."),l.executionProviders&&((e,t,r)=>{for(const a of t){let t="string"==typeof a?a:a.name;switch(t){case"xnnpack":t="XNNPACK";break;case"webnn":if(t="WEBNN","string"!=typeof a){const t=a;if(null==t?void 0:t.deviceType){const a=(0,o.allocWasmString)("deviceType",r),i=(0,o.allocWasmString)(t.deviceType,r);0!==(0,n.getInstance)()._OrtAddSessionConfigEntry(e,a,i)&&(0,o.checkLastError)(`Can't set a session config entry: 'deviceType' - ${t.deviceType}.`)}if(null==t?void 0:t.powerPreference){const a=(0,o.allocWasmString)("powerPreference",r),i=(0,o.allocWasmString)(t.powerPreference,r);0!==(0,n.getInstance)()._OrtAddSessionConfigEntry(e,a,i)&&(0,o.checkLastError)(`Can't set a session config entry: 'powerPreference' - ${t.powerPreference}.`)}}break;case"webgpu":t="JS";break;case"wasm":case"cpu":continue;default:throw new Error(`not supported execution provider: ${t}`)}const i=(0,o.allocWasmString)(t,r);0!==(0,n.getInstance)()._OrtAppendExecutionProvider(e,i)&&(0,o.checkLastError)(`Can't append execution provider: ${t}.`)}})(u,l.executionProviders,c),void 0!==l.extra&&(0,o.iterateExtraOptions)(l.extra,"",new WeakSet,((e,t)=>{const r=(0,o.allocWasmString)(e,c),n=(0,o.allocWasmString)(t,c);0!==s._OrtAddSessionConfigEntry(u,r,n)&&(0,o.checkLastError)(`Can't set a session config entry: ${e} - ${t}.`)})),[u,c]}catch(e){throw 0!==u&&s._OrtReleaseSessionOptions(u),c.forEach((e=>s._free(e))),e}}},917:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logLevelStringToEnum=t.tensorTypeToTypedArrayConstructor=t.getTensorElementSize=t.tensorDataTypeEnumToString=t.tensorDataTypeStringToEnum=void 0,t.tensorDataTypeStringToEnum=e=>{switch(e){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float16":return 10;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${e}`)}},t.tensorDataTypeEnumToString=e=>{switch(e){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 10:return"float16";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${e}`)}},t.getTensorElementSize=e=>[void 0,4,1,1,2,2,4,8,void 0,1,2,8,4,8,void 0,void 0,void 0][e],t.tensorTypeToTypedArrayConstructor=e=>{switch(e){case"float16":case"uint16":return Uint16Array;case"float32":return Float32Array;case"uint8":case"bool":return Uint8Array;case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${e}`)}},t.logLevelStringToEnum=e=>{switch(e){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error(`unsupported logging level: ${e}`)}}},259:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extractTransferableBuffers=t.endProfiling=t.run=t.releaseSession=t.createSession=t.createSessionFinalize=t.createSessionAllocate=t.initRuntime=void 0;const n=r(918),o=r(622),a=r(917),i=r(263),s=r(497);t.initRuntime=async e=>{var t,r;t=e.wasm.numThreads,r=(0,a.logLevelStringToEnum)(e.logLevel),0!==(0,i.getInstance)()._OrtInit(t,r)&&(0,s.checkLastError)("Can't initialize onnxruntime.")};const u=new Map;t.createSessionAllocate=e=>{const t=(0,i.getInstance)(),r=t._malloc(e.byteLength);if(0===r)throw new Error(`Can't create a session. failed to allocate a buffer of size ${e.byteLength}.`);return t.HEAPU8.set(e,r),[r,e.byteLength]},t.createSessionFinalize=(e,t)=>{const r=(0,i.getInstance)();let n=0,a=0,c=[];const l=[],f=[];try{[a,c]=(0,o.setSessionOptions)(t),n=r._OrtCreateSession(e[0],e[1],a),0===n&&(0,s.checkLastError)("Can't create a session.");const[d,p]=(e=>{const t=(0,i.getInstance)(),r=t.stackSave();try{const r=t.stackAlloc(8);return 0!==t._OrtGetInputOutputCount(e,r,r+4)&&(0,s.checkLastError)("Can't get session input/output count."),[t.HEAP32[r/4],t.HEAP32[r/4+1]]}finally{t.stackRestore(r)}})(n),y=[],m=[];for(let e=0;e<d;e++){const t=r._OrtGetInputName(n,e);0===t&&(0,s.checkLastError)("Can't get an input name."),l.push(t),y.push(r.UTF8ToString(t))}for(let e=0;e<p;e++){const t=r._OrtGetOutputName(n,e);0===t&&(0,s.checkLastError)("Can't get an output name."),f.push(t),m.push(r.UTF8ToString(t))}return u.set(n,[n,l,f]),[n,y,m]}catch(e){throw l.forEach((e=>r._OrtFree(e))),f.forEach((e=>r._OrtFree(e))),0!==n&&r._OrtReleaseSession(n),e}finally{r._free(e[0]),0!==a&&r._OrtReleaseSessionOptions(a),c.forEach((e=>r._free(e)))}},t.createSession=(e,r)=>{const n=(0,t.createSessionAllocate)(e);return(0,t.createSessionFinalize)(n,r)},t.releaseSession=e=>{const t=(0,i.getInstance)(),r=u.get(e);if(!r)throw new Error(`cannot release session. invalid session id: ${e}`);const[n,o,a]=r;o.forEach((e=>t._OrtFree(e))),a.forEach((e=>t._OrtFree(e))),t._OrtReleaseSession(n),u.delete(e)},t.run=async(e,t,r,o,c)=>{const l=(0,i.getInstance)(),f=u.get(e);if(!f)throw new Error(`cannot run inference. invalid session id: ${e}`);const[d,p,y]=f,m=t.length,g=o.length;let h=0,v=[];const w=[],b=[];try{[h,v]=(0,n.setRunOptions)(c);for(let e=0;e<m;e++){const t=r[e][0],n=r[e][1],o=r[e][2];let i,u;if(Array.isArray(o)){u=4*o.length,i=l._malloc(u),b.push(i);let e=i/4;for(let t=0;t<o.length;t++){if("string"!=typeof o[t])throw new TypeError(`tensor data at index ${t} is not a string`);l.HEAPU32[e++]=(0,s.allocWasmString)(o[t],b)}}else u=o.byteLength,i=l._malloc(u),b.push(i),l.HEAPU8.set(new Uint8Array(o.buffer,o.byteOffset,u),i);const c=l.stackSave(),f=l.stackAlloc(4*n.length);try{let r=f/4;n.forEach((e=>l.HEAP32[r++]=e));const o=l._OrtCreateTensor((0,a.tensorDataTypeStringToEnum)(t),i,u,f,n.length);0===o&&(0,s.checkLastError)(`Can't create tensor for input[${e}].`),w.push(o)}finally{l.stackRestore(c)}}const e=l.stackSave(),i=l.stackAlloc(4*m),u=l.stackAlloc(4*m),f=l.stackAlloc(4*g),A=l.stackAlloc(4*g);try{let e=i/4,r=u/4,n=f/4,c=A/4;for(let n=0;n<m;n++)l.HEAPU32[e++]=w[n],l.HEAPU32[r++]=p[t[n]];for(let e=0;e<g;e++)l.HEAPU32[n++]=0,l.HEAPU32[c++]=y[o[e]];let v=l._OrtRun(d,u,i,m,A,g,f,h);const b=l.jsepRunPromise;b&&void 0!==b.then&&(v=await b);const T=[];0!==v&&(0,s.checkLastError)("failed to call OrtRun().");for(let e=0;e<g;e++){const t=l.HEAPU32[f/4+e],r=l.stackSave(),n=l.stackAlloc(16);let o,i=0;try{v=l._OrtGetTensorData(t,n,n+4,n+8,n+12),0!==v&&(0,s.checkLastError)(`Can't access output tensor data on index ${e}.`);let r=n/4;const u=l.HEAPU32[r++];i=l.HEAPU32[r++];const c=l.HEAPU32[r++],f=l.HEAPU32[r++],d=[];for(let e=0;e<f;e++)d.push(l.HEAPU32[c/4+e]);l._OrtFree(c);const p=0===d.length?1:d.reduce(((e,t)=>e*t));if(o=(0,a.tensorDataTypeEnumToString)(u),"string"===o){const e=[];let t=i/4;for(let r=0;r<p;r++){const n=l.HEAPU32[t++],o=r===p-1?void 0:l.HEAPU32[t]-n;e.push(l.UTF8ToString(n,o))}T.push([o,d,e])}else{const e=new((0,a.tensorTypeToTypedArrayConstructor)(o))(p);new Uint8Array(e.buffer,e.byteOffset,e.byteLength).set(l.HEAPU8.subarray(i,i+e.byteLength)),T.push([o,d,e])}}finally{l.stackRestore(r),"string"===o&&i&&l._free(i),l._OrtReleaseTensor(t)}}return T}finally{l.stackRestore(e)}}finally{w.forEach((e=>l._OrtReleaseTensor(e))),b.forEach((e=>l._free(e))),0!==h&&l._OrtReleaseRunOptions(h),v.forEach((e=>l._free(e)))}},t.endProfiling=e=>{const t=(0,i.getInstance)(),r=u.get(e);if(!r)throw new Error("invalid session id");const n=r[0],o=t._OrtEndProfiling(n);0===o&&(0,s.checkLastError)("Can't get an profile file name."),t._OrtFree(o)},t.extractTransferableBuffers=e=>{const t=[];for(const r of e){const e=r[2];!Array.isArray(e)&&e.buffer&&t.push(e.buffer)}return t}},263:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.dispose=t.getInstance=t.initializeWebAssembly=void 0,a(r(449));const i=r(932),s=i;let u,c=!1,l=!1,f=!1;t.initializeWebAssembly=async e=>{if(c)return Promise.resolve();if(l)throw new Error("multiple calls to 'initializeWebAssembly()' detected.");if(f)throw new Error("previous call to 'initializeWebAssembly()' failed.");l=!0;const t=e.initTimeout,r=e.numThreads,n=e.simd,o=r>1&&(()=>{try{return"undefined"!=typeof SharedArrayBuffer&&("undefined"!=typeof MessageChannel&&(new MessageChannel).port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])))}catch(e){return!1}})(),a=n&&(()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch(e){return!1}})(),d=e.wasmPaths,p="string"==typeof d?d:void 0,y=((e,t)=>t?e?"ort-wasm-simd-threaded.wasm":"ort-wasm-threaded.wasm":e?"ort-wasm-simd.wasm":"ort-wasm.wasm")(a,o),m="object"==typeof d?d[y]:void 0;let g=!1;const h=[];if(t>0&&h.push(new Promise((e=>{setTimeout((()=>{g=!0,e()}),t)}))),h.push(new Promise(((e,t)=>{(o?s:i)({locateFile:(e,t)=>e.endsWith(".wasm")?m||(null!=p?p:t)+y:t+e}).then((t=>{l=!1,c=!0,u=t,e()}),(e=>{l=!1,f=!0,t(e)}))}))),await Promise.race(h),g)throw new Error(`WebAssembly backend initializing failed due to timeout: ${t}ms`)},t.getInstance=()=>{if(c&&u)return u;throw new Error("WebAssembly is not initialized yet.")},t.dispose=()=>{var e;!c||l||f||(l=!0,null===(e=u.PThread)||void 0===e||e.terminateAllThreads(),u=void 0,l=!1,c=!1,f=!0)}},497:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.checkLastError=t.iterateExtraOptions=t.allocWasmString=void 0;const n=r(263);t.allocWasmString=(e,t)=>{const r=(0,n.getInstance)(),o=r.lengthBytesUTF8(e)+1,a=r._malloc(o);return r.stringToUTF8(e,a,o),t.push(a),a},t.iterateExtraOptions=(e,r,n,o)=>{if("object"==typeof e&&null!==e){if(n.has(e))throw new Error("Circular reference in options");n.add(e)}Object.entries(e).forEach((([e,a])=>{const i=r?r+e:e;if("object"==typeof a)(0,t.iterateExtraOptions)(a,i+".",n,o);else if("string"==typeof a||"number"==typeof a)o(i,a.toString());else{if("boolean"!=typeof a)throw new Error("Can't handle extra config type: "+typeof a);o(i,a?"1":"0")}}))},t.checkLastError=e=>{const t=(0,n.getInstance)(),r=t.stackSave();try{const r=t.stackAlloc(8);t._OrtGetLastError(r,r+4);const n=t.HEAP32[r/4],o=t.HEAPU32[r/4+1],a=o?t.UTF8ToString(o):"";throw new Error(`${e} ERROR_CODE: ${n}, ERROR_MESSAGE: ${a}`)}finally{t.stackRestore(r)}}},932:(e,t,r)=>{var _scriptDir,n=(_scriptDir="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0,"undefined"!=typeof __filename&&(_scriptDir=_scriptDir||__filename),function(e={}){var t,n,o;t||(t=void 0!==e?e:{}),t.ready=new Promise(((e,t)=>{n=e,o=t}));var a,i,s,u=Object.assign({},t),c="./this.program",l="object"==typeof window,f="function"==typeof importScripts,d="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,p="";if(d){var y=r(384),m=r(908);p=f?m.dirname(p)+"/":__dirname+"/",a=(e,t)=>(e=e.startsWith("file://")?new URL(e):m.normalize(e),y.readFileSync(e,t?void 0:"utf8")),s=e=>((e=a(e,!0)).buffer||(e=new Uint8Array(e)),e),i=(e,t,r,n=!0)=>{e=e.startsWith("file://")?new URL(e):m.normalize(e),y.readFile(e,n?void 0:"utf8",((e,o)=>{e?r(e):t(n?o.buffer:o)}))},!t.thisProgram&&1<process.argv.length&&(c=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),t.inspect=()=>"[Emscripten Module object]"}else(l||f)&&(f?p=self.location.href:"undefined"!=typeof document&&document.currentScript&&(p=document.currentScript.src),_scriptDir&&(p=_scriptDir),p=0!==p.indexOf("blob:")?p.substr(0,p.replace(/[?#].*/,"").lastIndexOf("/")+1):"",a=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},f&&(s=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),i=(e,t,r)=>{var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="arraybuffer",n.onload=()=>{200==n.status||0==n.status&&n.response?t(n.response):r()},n.onerror=r,n.send(null)});var g,h=t.print||console.log.bind(console),v=t.printErr||console.warn.bind(console);Object.assign(t,u),u=null,t.thisProgram&&(c=t.thisProgram),t.wasmBinary&&(g=t.wasmBinary),t.noExitRuntime,"object"!=typeof WebAssembly&&B("no native wasm support detected");var w,b,A,T,O,E,_,S,P,R,I,C=!1;function U(){var e=w.buffer;t.HEAP8=b=new Int8Array(e),t.HEAP16=T=new Int16Array(e),t.HEAP32=E=new Int32Array(e),t.HEAPU8=A=new Uint8Array(e),t.HEAPU16=O=new Uint16Array(e),t.HEAPU32=_=new Uint32Array(e),t.HEAPF32=S=new Float32Array(e),t.HEAPF64=I=new Float64Array(e),t.HEAP64=P=new BigInt64Array(e),t.HEAPU64=R=new BigUint64Array(e)}var k=[],F=[],M=[];function j(){var e=t.preRun.shift();k.unshift(e)}var W,x=0,D=null,L=null;function B(e){throw t.onAbort&&t.onAbort(e),v(e="Aborted("+e+")"),C=!0,e=new WebAssembly.RuntimeError(e+". Build with -sASSERTIONS for more info."),o(e),e}function H(e){return e.startsWith("data:application/octet-stream;base64,")}if(!H(W="ort-wasm.wasm")){var z=W;W=t.locateFile?t.locateFile(z,p):p+z}function N(e){try{if(e==W&&g)return new Uint8Array(g);if(s)return s(e);throw"both async and sync fetching of the wasm failed"}catch(e){B(e)}}function $(e,t,r){return function(e){if(!g&&(l||f)){if("function"==typeof fetch&&!e.startsWith("file://"))return fetch(e,{credentials:"same-origin"}).then((t=>{if(!t.ok)throw"failed to load wasm binary file at '"+e+"'";return t.arrayBuffer()})).catch((()=>N(e)));if(i)return new Promise(((t,r)=>{i(e,(e=>t(new Uint8Array(e))),r)}))}return Promise.resolve().then((()=>N(e)))}(e).then((e=>WebAssembly.instantiate(e,t))).then((e=>e)).then(r,(e=>{v("failed to asynchronously prepare wasm: "+e),B(e)}))}function G(e){for(;0<e.length;)e.shift()(t)}function Y(e){this.Ja=e-24,this.Wa=function(e){_[this.Ja+4>>2>>>0]=e},this.Va=function(e){_[this.Ja+8>>2>>>0]=e},this.Ra=function(e,t){this.Sa(),this.Wa(e),this.Va(t)},this.Sa=function(){_[this.Ja+16>>2>>>0]=0}}var V="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function J(e,t,r){var n=(t>>>=0)+r;for(r=t;e[r]&&!(r>=n);)++r;if(16<r-t&&e.buffer&&V)return V.decode(e.subarray(t,r));for(n="";t<r;){var o=e[t++];if(128&o){var a=63&e[t++];if(192==(224&o))n+=String.fromCharCode((31&o)<<6|a);else{var i=63&e[t++];65536>(o=224==(240&o)?(15&o)<<12|a<<6|i:(7&o)<<18|a<<12|i<<6|63&e[t++])?n+=String.fromCharCode(o):(o-=65536,n+=String.fromCharCode(55296|o>>10,56320|1023&o))}}else n+=String.fromCharCode(o)}return n}function X(e,t){return(e>>>=0)?J(A,e,t):""}function q(e){for(var t=0,r=0;r<e.length;++r){var n=e.charCodeAt(r);127>=n?t++:2047>=n?t+=2:55296<=n&&57343>=n?(t+=4,++r):t+=3}return t}function Q(e,t,r,n){if(!(0<n))return 0;var o=r>>>=0;n=r+n-1;for(var a=0;a<e.length;++a){var i=e.charCodeAt(a);if(55296<=i&&57343>=i&&(i=65536+((1023&i)<<10)|1023&e.charCodeAt(++a)),127>=i){if(r>=n)break;t[r++>>>0]=i}else{if(2047>=i){if(r+1>=n)break;t[r++>>>0]=192|i>>6}else{if(65535>=i){if(r+2>=n)break;t[r++>>>0]=224|i>>12}else{if(r+3>=n)break;t[r++>>>0]=240|i>>18,t[r++>>>0]=128|i>>12&63}t[r++>>>0]=128|i>>6&63}t[r++>>>0]=128|63&i}}return t[r>>>0]=0,r-o}function Z(e,t,r){return Q(e,A,t,r)}function K(e){if(null===e)return"null";var t=typeof e;return"object"===t||"array"===t||"function"===t?e.toString():""+e}var ee=void 0;function te(e){for(var t="";A[e>>>0];)t+=ee[A[e++>>>0]];return t}var re={},ne={},oe={};function ae(e){if(void 0===e)return"_unknown";var t=(e=e.replace(/[^a-zA-Z0-9_]/g,"$")).charCodeAt(0);return 48<=t&&57>=t?"_"+e:e}function ie(e,t){return{[e=ae(e)]:function(){return t.apply(this,arguments)}}[e]}function se(e){var t=Error,r=ie(e,(function(t){this.name=e,this.message=t,void 0!==(t=Error(t).stack)&&(this.stack=this.toString()+"\n"+t.replace(/^Error(:[^\n]*)?\n/,""))}));return r.prototype=Object.create(t.prototype),r.prototype.constructor=r,r.prototype.toString=function(){return void 0===this.message?this.name:this.name+": "+this.message},r}var ue=void 0;function ce(e){throw new ue(e)}function le(e,t,r={}){if(!("argPackAdvance"in t))throw new TypeError("registerType registeredInstance requires argPackAdvance");var n=t.name;if(e||ce('type "'+n+'" must have a positive integer typeid pointer'),ne.hasOwnProperty(e)){if(r.Za)return;ce("Cannot register type '"+n+"' twice")}ne[e]=t,delete oe[e],re.hasOwnProperty(e)&&(t=re[e],delete re[e],t.forEach((e=>e())))}function fe(e,t,r){switch(t){case 0:return r?function(e){return b[e>>>0]}:function(e){return A[e>>>0]};case 1:return r?function(e){return T[e>>>1]}:function(e){return O[e>>>1]};case 2:return r?function(e){return E[e>>>2]}:function(e){return _[e>>>2]};case 3:return r?function(e){return P[e>>3]}:function(e){return R[e>>3]};default:throw new TypeError("Unknown integer type: "+e)}}function de(e){switch(e){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+e)}}var pe=new function(){this.Ja=[void 0],this.Ra=[],this.get=function(e){return this.Ja[e]},this.Va=function(e){let t=this.Ra.pop()||this.Ja.length;return this.Ja[t]=e,t},this.Wa=function(e){this.Ja[e]=void 0,this.Ra.push(e)}};function ye(e){e>=pe.Sa&&0==--pe.get(e).Ya&&pe.Wa(e)}var me=e=>(e||ce("Cannot use deleted val. handle = "+e),pe.get(e).value),ge=e=>{switch(e){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:return pe.Va({Ya:1,value:e})}};function he(e){return this.fromWireType(E[e>>2>>>0])}function ve(e,t){switch(t){case 2:return function(e){return this.fromWireType(S[e>>>2])};case 3:return function(e){return this.fromWireType(I[e>>>3])};default:throw new TypeError("Unknown float type: "+e)}}var we="undefined"!=typeof TextDecoder?new TextDecoder("utf-16le"):void 0;function be(e,t){for(var r=e>>1,n=r+t/2;!(r>=n)&&O[r>>>0];)++r;if(32<(r<<=1)-e&&we)return we.decode(A.subarray(e>>>0,r>>>0));for(r="",n=0;!(n>=t/2);++n){var o=T[e+2*n>>1>>>0];if(0==o)break;r+=String.fromCharCode(o)}return r}function Ae(e,t,r){if(void 0===r&&(r=2147483647),2>r)return 0;var n=t;r=(r-=2)<2*e.length?r/2:e.length;for(var o=0;o<r;++o)T[t>>1>>>0]=e.charCodeAt(o),t+=2;return T[t>>1>>>0]=0,t-n}function Te(e){return 2*e.length}function Oe(e,t){for(var r=0,n="";!(r>=t/4);){var o=E[e+4*r>>2>>>0];if(0==o)break;++r,65536<=o?(o-=65536,n+=String.fromCharCode(55296|o>>10,56320|1023&o)):n+=String.fromCharCode(o)}return n}function Ee(e,t,r){if(void 0===r&&(r=2147483647),4>r)return 0;var n=t>>>=0;r=n+r-4;for(var o=0;o<e.length;++o){var a=e.charCodeAt(o);if(55296<=a&&57343>=a&&(a=65536+((1023&a)<<10)|1023&e.charCodeAt(++o)),E[t>>2>>>0]=a,(t+=4)+4>r)break}return E[t>>2>>>0]=0,t-n}function _e(e){for(var t=0,r=0;r<e.length;++r){var n=e.charCodeAt(r);55296<=n&&57343>=n&&++r,t+=4}return t}function Se(e,t){var r=ne[e];if(void 0===r){var n=te(e=Ze(e));Qe(e),ce(t+" has unknown type "+n)}return r}var Pe={};function Re(e){var t=Pe[e];return void 0===t?te(e):t}var Ie=[];function Ce(){return"object"==typeof globalThis?globalThis:Function("return this")()}var Ue=[],ke={};function Fe(e){return 0==e%4&&(0!=e%100||0==e%400)}var Me,je=[0,31,60,91,121,152,182,213,244,274,305,335],We=[0,31,59,90,120,151,181,212,243,273,304,334];function xe(e){return(Fe(e.getFullYear())?je:We)[e.getMonth()]+e.getDate()-1}function De(e){var t=q(e)+1,r=qe(t);return r&&Z(e,r,t),r}Me=d?()=>{var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}:()=>performance.now();var Le={};function Be(){if(!He){var e,t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:c||"./this.program"};for(e in Le)void 0===Le[e]?delete t[e]:t[e]=Le[e];var r=[];for(e in t)r.push(e+"="+t[e]);He=r}return He}var He,ze=[null,[],[]],Ne=[31,29,31,30,31,30,31,31,30,31,30,31],$e=[31,28,31,30,31,30,31,31,30,31,30,31];function Ge(e,t,r,n){function o(e,t,r){for(e="number"==typeof e?e.toString():e||"";e.length<t;)e=r[0]+e;return e}function a(e,t){return o(e,t,"0")}function i(e,t){function r(e){return 0>e?-1:0<e?1:0}var n;return 0===(n=r(e.getFullYear()-t.getFullYear()))&&0===(n=r(e.getMonth()-t.getMonth()))&&(n=r(e.getDate()-t.getDate())),n}function s(e){switch(e.getDay()){case 0:return new Date(e.getFullYear()-1,11,29);case 1:return e;case 2:return new Date(e.getFullYear(),0,3);case 3:return new Date(e.getFullYear(),0,2);case 4:return new Date(e.getFullYear(),0,1);case 5:return new Date(e.getFullYear()-1,11,31);case 6:return new Date(e.getFullYear()-1,11,30)}}function u(e){var t=e.Oa;for(e=new Date(new Date(e.Pa+1900,0,1).getTime());0<t;){var r=e.getMonth(),n=(Fe(e.getFullYear())?Ne:$e)[r];if(!(t>n-e.getDate())){e.setDate(e.getDate()+t);break}t-=n-e.getDate()+1,e.setDate(1),11>r?e.setMonth(r+1):(e.setMonth(0),e.setFullYear(e.getFullYear()+1))}return r=new Date(e.getFullYear()+1,0,4),t=s(new Date(e.getFullYear(),0,4)),r=s(r),0>=i(t,e)?0>=i(r,e)?e.getFullYear()+1:e.getFullYear():e.getFullYear()-1}var c=E[n+40>>2>>>0];for(var l in n={cb:E[n>>2>>>0],bb:E[n+4>>2>>>0],Ta:E[n+8>>2>>>0],Xa:E[n+12>>2>>>0],Ua:E[n+16>>2>>>0],Pa:E[n+20>>2>>>0],Na:E[n+24>>2>>>0],Oa:E[n+28>>2>>>0],fb:E[n+32>>2>>>0],ab:E[n+36>>2>>>0],eb:c?X(c):""},r=X(r),c={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})r=r.replace(new RegExp(l,"g"),c[l]);var f="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),d="January February March April May June July August September October November December".split(" ");for(l in c={"%a":function(e){return f[e.Na].substring(0,3)},"%A":function(e){return f[e.Na]},"%b":function(e){return d[e.Ua].substring(0,3)},"%B":function(e){return d[e.Ua]},"%C":function(e){return a((e.Pa+1900)/100|0,2)},"%d":function(e){return a(e.Xa,2)},"%e":function(e){return o(e.Xa,2," ")},"%g":function(e){return u(e).toString().substring(2)},"%G":function(e){return u(e)},"%H":function(e){return a(e.Ta,2)},"%I":function(e){return 0==(e=e.Ta)?e=12:12<e&&(e-=12),a(e,2)},"%j":function(e){for(var t=0,r=0;r<=e.Ua-1;t+=(Fe(e.Pa+1900)?Ne:$e)[r++]);return a(e.Xa+t,3)},"%m":function(e){return a(e.Ua+1,2)},"%M":function(e){return a(e.bb,2)},"%n":function(){return"\n"},"%p":function(e){return 0<=e.Ta&&12>e.Ta?"AM":"PM"},"%S":function(e){return a(e.cb,2)},"%t":function(){return"\t"},"%u":function(e){return e.Na||7},"%U":function(e){return a(Math.floor((e.Oa+7-e.Na)/7),2)},"%V":function(e){var t=Math.floor((e.Oa+7-(e.Na+6)%7)/7);if(2>=(e.Na+371-e.Oa-2)%7&&t++,t)53==t&&(4==(r=(e.Na+371-e.Oa)%7)||3==r&&Fe(e.Pa)||(t=1));else{t=52;var r=(e.Na+7-e.Oa-1)%7;(4==r||5==r&&Fe(e.Pa%400-1))&&t++}return a(t,2)},"%w":function(e){return e.Na},"%W":function(e){return a(Math.floor((e.Oa+7-(e.Na+6)%7)/7),2)},"%y":function(e){return(e.Pa+1900).toString().substring(2)},"%Y":function(e){return e.Pa+1900},"%z":function(e){var t=0<=(e=e.ab);return e=Math.abs(e)/60,(t?"+":"-")+String("0000"+(e/60*100+e%60)).slice(-4)},"%Z":function(e){return e.eb},"%%":function(){return"%"}},r=r.replace(/%%/g,"\0\0"),c)r.includes(l)&&(r=r.replace(new RegExp(l,"g"),c[l](n)));return l=function(e){var t=Array(q(e)+1);return Q(e,t,0,t.length),t}(r=r.replace(/\0\0/g,"%")),l.length>t?0:(b.set(l,e>>>0),l.length-1)}for(var Ye=Array(256),Ve=0;256>Ve;++Ve)Ye[Ve]=String.fromCharCode(Ve);ee=Ye,ue=t.BindingError=se("BindingError"),t.InternalError=se("InternalError"),pe.Ja.push({value:void 0},{value:null},{value:!0},{value:!1}),pe.Sa=pe.Ja.length,t.count_emval_handles=function(){for(var e=0,t=pe.Sa;t<pe.Ja.length;++t)void 0!==pe.Ja[t]&&++e;return e};var Je={a:function(e,t,r){throw new Y(e).Ra(t,r),e},da:function(){B("To use dlopen, you need enable dynamic linking, see https://emscripten.org/docs/compiling/Dynamic-Linking.html")},v:function(){return 0},ba:function(){},N:function(){},P:function(){},H:function(){return 0},$:function(){},V:function(){},_:function(){},A:function(){},O:function(){},L:function(){},aa:function(){},M:function(){},D:function(e,t,r,n,o){t=te(t),r=de(r);var a=-1!=t.indexOf("u");a&&(o=(1n<<64n)-1n),le(e,{name:t,fromWireType:function(e){return e},toWireType:function(e,r){if("bigint"!=typeof r&&"number"!=typeof r)throw new TypeError('Cannot convert "'+K(r)+'" to '+this.name);if(r<n||r>o)throw new TypeError('Passing a number "'+K(r)+'" from JS side to C/C++ side to an argument of type "'+t+'", which is outside the valid range ['+n+", "+o+"]!");return r},argPackAdvance:8,readValueFromPointer:fe(t,r,!a),Qa:null})},ga:function(e,t,r,n,o){var a=de(r);le(e,{name:t=te(t),fromWireType:function(e){return!!e},toWireType:function(e,t){return t?n:o},argPackAdvance:8,readValueFromPointer:function(e){if(1===r)var n=b;else if(2===r)n=T;else{if(4!==r)throw new TypeError("Unknown boolean type size: "+t);n=E}return this.fromWireType(n[e>>>a])},Qa:null})},fa:function(e,t){le(e,{name:t=te(t),fromWireType:function(e){var t=me(e);return ye(e),t},toWireType:function(e,t){return ge(t)},argPackAdvance:8,readValueFromPointer:he,Qa:null})},C:function(e,t,r){r=de(r),le(e,{name:t=te(t),fromWireType:function(e){return e},toWireType:function(e,t){return t},argPackAdvance:8,readValueFromPointer:ve(t,r),Qa:null})},p:function(e,t,r,n,o){t=te(t),-1===o&&(o=4294967295),o=de(r);var a=e=>e;if(0===n){var i=32-8*r;a=e=>e<<i>>>i}r=t.includes("unsigned")?function(e,t){return t>>>0}:function(e,t){return t},le(e,{name:t,fromWireType:a,toWireType:r,argPackAdvance:8,readValueFromPointer:fe(t,o,0!==n),Qa:null})},l:function(e,t,r){function n(e){e>>=2;var t=_;return new o(t.buffer,t[e+1>>>0],t[e>>>0])}var o=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,BigInt64Array,BigUint64Array][t];le(e,{name:r=te(r),fromWireType:n,argPackAdvance:8,readValueFromPointer:n},{Za:!0})},E:function(e,t){var r="std::string"===(t=te(t));le(e,{name:t,fromWireType:function(e){var t=_[e>>2>>>0],n=e+4;if(r)for(var o=n,a=0;a<=t;++a){var i=n+a;if(a==t||0==A[i>>>0]){if(o=X(o,i-o),void 0===s)var s=o;else s+=String.fromCharCode(0),s+=o;o=i+1}}else{for(s=Array(t),a=0;a<t;++a)s[a]=String.fromCharCode(A[n+a>>>0]);s=s.join("")}return Qe(e),s},toWireType:function(e,t){t instanceof ArrayBuffer&&(t=new Uint8Array(t));var n="string"==typeof t;n||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int8Array||ce("Cannot pass non-string to std::string");var o=r&&n?q(t):t.length,a=qe(4+o+1),i=a+4>>>0;if(_[a>>2>>>0]=o,r&&n)Z(t,i,o+1);else if(n)for(n=0;n<o;++n){var s=t.charCodeAt(n);255<s&&(Qe(i),ce("String has UTF-16 code units that do not fit in 8 bits")),A[i+n>>>0]=s}else for(n=0;n<o;++n)A[i+n>>>0]=t[n];return null!==e&&e.push(Qe,a),a},argPackAdvance:8,readValueFromPointer:he,Qa:function(e){Qe(e)}})},x:function(e,t,r){if(r=te(r),2===t)var n=be,o=Ae,a=Te,i=()=>O,s=1;else 4===t&&(n=Oe,o=Ee,a=_e,i=()=>_,s=2);le(e,{name:r,fromWireType:function(e){for(var r,o=_[e>>>2],a=i(),u=e+4,c=0;c<=o;++c){var l=e+4+c*t;c!=o&&0!=a[l>>>s]||(u=n(u,l-u),void 0===r?r=u:(r+=String.fromCharCode(0),r+=u),u=l+t)}return Qe(e),r},toWireType:function(e,n){"string"!=typeof n&&ce("Cannot pass non-string to C++ string type "+r);var i=a(n),u=qe(4+i+t);return _[(u>>>=0)>>>2]=i>>s,o(n,u+4,i+t),null!==e&&e.push(Qe,u),u},argPackAdvance:8,readValueFromPointer:he,Qa:function(e){Qe(e)}})},ha:function(e,t){le(e,{$a:!0,name:t=te(t),argPackAdvance:0,fromWireType:function(){},toWireType:function(){}})},ca:function(){return!0},o:function(e,t,r){e=me(e),t=Se(t,"emval::as");var n=[],o=ge(n);return _[r>>2>>>0]=o,t.toWireType(n,e)},h:function(e,t,r,n,o){e=Ie[e],t=me(t),r=Re(r);var a=[];return _[n>>2>>>0]=ge(a),e(t,r,a,o)},q:function(e,t,r,n){(e=Ie[e])(t=me(t),r=Re(r),null,n)},b:ye,F:function(e,t){return(e=me(e))==me(t)},u:function(e){return 0===e?ge(Ce()):(e=Re(e),ge(Ce()[e]))},g:function(e,t){var r=function(e,t){for(var r=Array(e),n=0;n<e;++n)r[n]=Se(_[t+4*n>>2>>>0],"parameter "+n);return r}(e,t),n=r[0];t=n.name+"_$"+r.slice(1).map((function(e){return e.name})).join("_")+"$";var o=Ue[t];if(void 0!==o)return o;o=["retType"];for(var a=[n],i="",s=0;s<e-1;++s)i+=(0!==s?", ":"")+"arg"+s,o.push("argType"+s),a.push(r[1+s]);var u="return function "+ae("methodCaller_"+t)+"(handle, name, destructors, args) {\n",c=0;for(s=0;s<e-1;++s)u+="    var arg"+s+" = argType"+s+".readValueFromPointer(args"+(c?"+"+c:"")+");\n",c+=r[s+1].argPackAdvance;for(u+="    var rv = handle[name]("+i+");\n",s=0;s<e-1;++s)r[s+1].deleteObject&&(u+="    argType"+s+".deleteObject(arg"+s+");\n");return n.$a||(u+="    return retType.toWireType(destructors, rv);\n"),o.push(u+"};\n"),e=function(e){var t=Function;if(!(t instanceof Function))throw new TypeError("new_ called with constructor type "+typeof t+" which is not a function");var r=ie(t.name||"unknownFunctionName",(function(){}));return r.prototype=t.prototype,r=new r,(e=t.apply(r,e))instanceof Object?e:r}(o).apply(null,a),o=function(e){var t=Ie.length;return Ie.push(e),t}(e),Ue[t]=o},r:function(e,t){return e=me(e),t=me(t),ge(e[t])},c:function(e){4<e&&(pe.get(e).Ya+=1)},G:function(e,r,n,o){e=me(e);var a=ke[r];return a||(a=function(e){for(var r="",n=0;n<e;++n)r+=(0!==n?", ":"")+"arg"+n;var o="return function emval_allocator_"+e+"(constructor, argTypes, args) {\n  var HEAPU32 = getMemory();\n";for(n=0;n<e;++n)o+="var argType"+n+" = requireRegisteredType(HEAPU32[((argTypes)>>2)], 'parameter "+n+"');\nvar arg"+n+" = argType"+n+".readValueFromPointer(args);\nargs += argType"+n+"['argPackAdvance'];\nargTypes += 4;\n";return new Function("requireRegisteredType","Module","valueToHandle","getMemory",o+"var obj = new constructor("+r+");\nreturn valueToHandle(obj);\n}\n")(Se,t,ge,(()=>_))}(r),ke[r]=a),a(e,n,o)},s:function(){return ge([])},k:function(e){e=me(e);for(var t=Array(e.length),r=0;r<e.length;r++)t[r]=e[r];return ge(t)},d:function(e){return ge(Re(e))},j:function(){return ge({})},f:function(e){for(var t=me(e);t.length;){var r=t.pop();t.pop()(r)}ye(e)},i:function(e,t,r){e=me(e),t=me(t),r=me(r),e[t]=r},e:function(e,t){return e=(e=Se(e,"_emval_take_value")).readValueFromPointer(t),ge(e)},S:function(e,t){e=new Date(1e3*(_[e>>>2]+4294967296*E[e+4>>>2])),E[t>>2>>>0]=e.getUTCSeconds(),E[t+4>>2>>>0]=e.getUTCMinutes(),E[t+8>>2>>>0]=e.getUTCHours(),E[t+12>>2>>>0]=e.getUTCDate(),E[t+16>>2>>>0]=e.getUTCMonth(),E[t+20>>2>>>0]=e.getUTCFullYear()-1900,E[t+24>>2>>>0]=e.getUTCDay(),E[t+28>>2>>>0]=(e.getTime()-Date.UTC(e.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},T:function(e,t){e=new Date(1e3*(_[e>>>2]+4294967296*E[e+4>>>2])),E[t>>2>>>0]=e.getSeconds(),E[t+4>>2>>>0]=e.getMinutes(),E[t+8>>2>>>0]=e.getHours(),E[t+12>>2>>>0]=e.getDate(),E[t+16>>2>>>0]=e.getMonth(),E[t+20>>2>>>0]=e.getFullYear()-1900,E[t+24>>2>>>0]=e.getDay(),E[t+28>>2>>>0]=0|xe(e),E[t+36>>2>>>0]=-60*e.getTimezoneOffset();var r=new Date(e.getFullYear(),6,1).getTimezoneOffset(),n=new Date(e.getFullYear(),0,1).getTimezoneOffset();E[t+32>>2>>>0]=0|(r!=n&&e.getTimezoneOffset()==Math.min(n,r))},U:function(e){var t=new Date(E[e+20>>2>>>0]+1900,E[e+16>>2>>>0],E[e+12>>2>>>0],E[e+8>>2>>>0],E[e+4>>2>>>0],E[e>>2>>>0],0),r=E[e+32>>2>>>0],n=t.getTimezoneOffset(),o=new Date(t.getFullYear(),6,1).getTimezoneOffset(),a=new Date(t.getFullYear(),0,1).getTimezoneOffset(),i=Math.min(a,o);return 0>r?E[e+32>>2>>>0]=Number(o!=a&&i==n):0<r!=(i==n)&&(o=Math.max(a,o),t.setTime(t.getTime()+6e4*((0<r?i:o)-n))),E[e+24>>2>>>0]=t.getDay(),E[e+28>>2>>>0]=0|xe(t),E[e>>2>>>0]=t.getSeconds(),E[e+4>>2>>>0]=t.getMinutes(),E[e+8>>2>>>0]=t.getHours(),E[e+12>>2>>>0]=t.getDate(),E[e+16>>2>>>0]=t.getMonth(),E[e+20>>2>>>0]=t.getYear(),t.getTime()/1e3|0},Q:function(){return-52},R:function(){},J:function(e,t,r){function n(e){return(e=e.toTimeString().match(/\(([A-Za-z ]+)\)$/))?e[1]:"GMT"}var o=(new Date).getFullYear(),a=new Date(o,0,1),i=new Date(o,6,1);o=a.getTimezoneOffset();var s=i.getTimezoneOffset();_[e>>2>>>0]=60*Math.max(o,s),E[t>>2>>>0]=Number(o!=s),e=n(a),t=n(i),e=De(e),t=De(t),s<o?(_[r>>2>>>0]=e,_[r+4>>2>>>0]=t):(_[r>>2>>>0]=t,_[r+4>>2>>>0]=e)},t:function(){B("")},ia:function(){B("To use dlopen, you need enable dynamic linking, see https://emscripten.org/docs/compiling/Dynamic-Linking.html")},B:function(){return Date.now()},K:function(){return 4294901760},n:Me,Z:function(e,t,r){A.copyWithin(e>>>0,t>>>0,t+r>>>0)},I:function(e){var t=A.length;if(4294901760<(e>>>=0))return!1;for(var r=1;4>=r;r*=2){var n=t*(1+.2/r);n=Math.min(n,e+100663296);var o=Math,a=o.min;n=Math.max(e,n),n+=(65536-n%65536)%65536;e:{var i=w.buffer;try{w.grow(a.call(o,4294901760,n)-i.byteLength+65535>>>16),U();var s=1;break e}catch(e){}s=void 0}if(s)return!0}return!1},X:function(e,t){var r=0;return Be().forEach((function(n,o){var a=t+r;for(o=_[e+4*o>>2>>>0]=a,a=0;a<n.length;++a)b[o++>>0>>>0]=n.charCodeAt(a);b[o>>0>>>0]=0,r+=n.length+1})),0},Y:function(e,t){var r=Be();_[e>>2>>>0]=r.length;var n=0;return r.forEach((function(e){n+=e.length+1})),_[t>>2>>>0]=n,0},w:function(){return 52},z:function(){return 52},W:function(){return 70},y:function(e,t,r,n){for(var o=0,a=0;a<r;a++){var i=_[t>>2>>>0],s=_[t+4>>2>>>0];t+=8;for(var u=0;u<s;u++){var c=A[i+u>>>0],l=ze[e];0===c||10===c?((1===e?h:v)(J(l,0)),l.length=0):l.push(c)}o+=s}return _[n>>2>>>0]=o,0},ea:Ge,m:function(e,t,r,n){return Ge(e,t,r,n)}};!function(){function e(e){if(e=e.exports,t.asm=e,w=t.asm.ja,U(),F.unshift(t.asm.ka),x--,t.monitorRunDependencies&&t.monitorRunDependencies(x),0==x&&(null!==D&&(clearInterval(D),D=null),L)){var r=L;L=null,r()}return e}var r={a:Je};if(x++,t.monitorRunDependencies&&t.monitorRunDependencies(x),t.instantiateWasm)try{return t.instantiateWasm(r,e)}catch(e){v("Module.instantiateWasm callback failed with error: "+e),o(e)}(function(e,t){var r=W;return g||"function"!=typeof WebAssembly.instantiateStreaming||H(r)||r.startsWith("file://")||d||"function"!=typeof fetch?$(r,e,t):fetch(r,{credentials:"same-origin"}).then((n=>WebAssembly.instantiateStreaming(n,e).then(t,(function(n){return v("wasm streaming compile failed: "+n),v("falling back to ArrayBuffer instantiation"),$(r,e,t)}))))})(r,(function(t){e(t.instance)})).catch(o)}(),t._OrtInit=function(){return(t._OrtInit=t.asm.la).apply(null,arguments)},t._OrtGetLastError=function(){return(t._OrtGetLastError=t.asm.ma).apply(null,arguments)},t._OrtCreateSessionOptions=function(){return(t._OrtCreateSessionOptions=t.asm.na).apply(null,arguments)},t._OrtAppendExecutionProvider=function(){return(t._OrtAppendExecutionProvider=t.asm.oa).apply(null,arguments)},t._OrtAddSessionConfigEntry=function(){return(t._OrtAddSessionConfigEntry=t.asm.pa).apply(null,arguments)},t._OrtReleaseSessionOptions=function(){return(t._OrtReleaseSessionOptions=t.asm.qa).apply(null,arguments)},t._OrtCreateSession=function(){return(t._OrtCreateSession=t.asm.ra).apply(null,arguments)},t._OrtReleaseSession=function(){return(t._OrtReleaseSession=t.asm.sa).apply(null,arguments)},t._OrtGetInputOutputCount=function(){return(t._OrtGetInputOutputCount=t.asm.ta).apply(null,arguments)},t._OrtGetInputName=function(){return(t._OrtGetInputName=t.asm.ua).apply(null,arguments)},t._OrtGetOutputName=function(){return(t._OrtGetOutputName=t.asm.va).apply(null,arguments)},t._OrtFree=function(){return(t._OrtFree=t.asm.wa).apply(null,arguments)},t._OrtCreateTensor=function(){return(t._OrtCreateTensor=t.asm.xa).apply(null,arguments)},t._OrtGetTensorData=function(){return(t._OrtGetTensorData=t.asm.ya).apply(null,arguments)},t._OrtReleaseTensor=function(){return(t._OrtReleaseTensor=t.asm.za).apply(null,arguments)},t._OrtCreateRunOptions=function(){return(t._OrtCreateRunOptions=t.asm.Aa).apply(null,arguments)},t._OrtAddRunConfigEntry=function(){return(t._OrtAddRunConfigEntry=t.asm.Ba).apply(null,arguments)},t._OrtReleaseRunOptions=function(){return(t._OrtReleaseRunOptions=t.asm.Ca).apply(null,arguments)},t._OrtRun=function(){return(t._OrtRun=t.asm.Da).apply(null,arguments)},t._OrtEndProfiling=function(){return(t._OrtEndProfiling=t.asm.Ea).apply(null,arguments)};var Xe,qe=t._malloc=function(){return(qe=t._malloc=t.asm.Fa).apply(null,arguments)},Qe=t._free=function(){return(Qe=t._free=t.asm.Ga).apply(null,arguments)};function Ze(){return(Ze=t.asm.Ha).apply(null,arguments)}function Ke(){return(Ke=t.asm.Ka).apply(null,arguments)}function et(){return(et=t.asm.La).apply(null,arguments)}function tt(){return(tt=t.asm.Ma).apply(null,arguments)}function rt(){function e(){if(!Xe&&(Xe=!0,t.calledRun=!0,!C)){if(G(F),n(t),t.onRuntimeInitialized&&t.onRuntimeInitialized(),t.postRun)for("function"==typeof t.postRun&&(t.postRun=[t.postRun]);t.postRun.length;){var e=t.postRun.shift();M.unshift(e)}G(M)}}if(!(0<x)){if(t.preRun)for("function"==typeof t.preRun&&(t.preRun=[t.preRun]);t.preRun.length;)j();G(k),0<x||(t.setStatus?(t.setStatus("Running..."),setTimeout((function(){setTimeout((function(){t.setStatus("")}),1),e()}),1)):e())}}if(t.__embind_initialize_bindings=function(){return(t.__embind_initialize_bindings=t.asm.Ia).apply(null,arguments)},t.stackAlloc=tt,t.stackSave=Ke,t.stackRestore=et,t.UTF8ToString=X,t.stringToUTF8=Z,t.lengthBytesUTF8=q,L=function e(){Xe||rt(),Xe||(L=e)},t.preInit)for("function"==typeof t.preInit&&(t.preInit=[t.preInit]);0<t.preInit.length;)t.preInit.pop()();return rt(),e.ready});e.exports=n},384:()=>{},908:()=>{},806:()=>{},449:()=>{},850:()=>{},381:()=>{},685:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resolveBackend=t.registerBackend=void 0;const r={},n=[];t.registerBackend=(e,t,o)=>{if(!t||"function"!=typeof t.init||"function"!=typeof t.createSessionHandler)throw new TypeError("not a valid backend");{const a=r[e];if(void 0===a)r[e]={backend:t,priority:o};else{if(a.priority>o)return;if(a.priority===o&&a.backend!==t)throw new Error(`cannot register backend "${e}" using priority ${o}`)}if(o>=0){const t=n.indexOf(e);-1!==t&&n.splice(t,1);for(let t=0;t<n.length;t++)if(r[n[t]].priority<=o)return void n.splice(t,0,e);n.push(e)}}},t.resolveBackend=async e=>{const t=0===e.length?n:e,o=[];for(const e of t){const t=r[e];if(t){if(t.initialized)return t.backend;if(t.aborted)continue;const r=!!t.initPromise;try{return r||(t.initPromise=t.backend.init()),await t.initPromise,t.initialized=!0,t.backend}catch(n){r||o.push({name:e,err:n}),t.aborted=!0}finally{delete t.initPromise}}}throw new Error(`no available backend found. ERR: ${o.map((e=>`[${e.name}] ${e.err}`)).join(", ")}`)}},798:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerBackend=void 0;var n=r(685);Object.defineProperty(t,"registerBackend",{enumerable:!0,get:function(){return n.registerBackend}})},121:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.env=void 0;const n=r(104);let o="warning";t.env={wasm:{},webgl:{},webgpu:{},versions:{common:n.version},set logLevel(e){if(void 0!==e){if("string"!=typeof e||-1===["verbose","info","warning","error","fatal"].indexOf(e))throw new Error(`Unsupported logging level: ${e}`);o=e}},get logLevel(){return o}},Object.defineProperty(t.env,"logLevel",{enumerable:!0})},457:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.env=void 0;const n=r(121);t.env=n.env},235:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(798),t),o(r(457),t),o(r(974),t),o(r(963),t),o(r(852),t)},36:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InferenceSession=void 0;const n=r(685),o=r(963);class a{constructor(e){this.handler=e}async run(e,t,r){const n={};let a={};if("object"!=typeof e||null===e||e instanceof o.Tensor||Array.isArray(e))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let i=!0;if("object"==typeof t){if(null===t)throw new TypeError("Unexpected argument[1]: cannot be null.");if(t instanceof o.Tensor)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(t)){if(0===t.length)throw new TypeError("'fetches' cannot be an empty array.");i=!1;for(const e of t){if("string"!=typeof e)throw new TypeError("'fetches' must be a string array or an object.");if(-1===this.outputNames.indexOf(e))throw new RangeError(`'fetches' contains invalid output name: ${e}.`);n[e]=null}if("object"==typeof r&&null!==r)a=r;else if(void 0!==r)throw new TypeError("'options' must be an object.")}else{let e=!1;const s=Object.getOwnPropertyNames(t);for(const r of this.outputNames)if(-1!==s.indexOf(r)){const a=t[r];(null===a||a instanceof o.Tensor)&&(e=!0,i=!1,n[r]=a)}if(e){if("object"==typeof r&&null!==r)a=r;else if(void 0!==r)throw new TypeError("'options' must be an object.")}else a=t}}else if(void 0!==t)throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(const t of this.inputNames)if(void 0===e[t])throw new Error(`input '${t}' is missing in 'feeds'.`);if(i)for(const e of this.outputNames)n[e]=null;const s=await this.handler.run(e,n,a),u={};for(const e in s)Object.hasOwnProperty.call(s,e)&&(u[e]=new o.Tensor(s[e].type,s[e].data,s[e].dims));return u}async release(){return this.handler.dispose()}static async create(e,t,r,o){let i,s={};if("string"==typeof e){if(i=e,"object"==typeof t&&null!==t)s=t;else if(void 0!==t)throw new TypeError("'options' must be an object.")}else if(e instanceof Uint8Array){if(i=e,"object"==typeof t&&null!==t)s=t;else if(void 0!==t)throw new TypeError("'options' must be an object.")}else{if(!(e instanceof ArrayBuffer||"undefined"!=typeof SharedArrayBuffer&&e instanceof SharedArrayBuffer))throw new TypeError("Unexpected argument[0]: must be 'path' or 'buffer'.");{const n=e;let a=0,u=e.byteLength;if("object"==typeof t&&null!==t)s=t;else if("number"==typeof t){if(a=t,!Number.isSafeInteger(a))throw new RangeError("'byteOffset' must be an integer.");if(a<0||a>=n.byteLength)throw new RangeError(`'byteOffset' is out of range [0, ${n.byteLength}).`);if(u=e.byteLength-a,"number"==typeof r){if(u=r,!Number.isSafeInteger(u))throw new RangeError("'byteLength' must be an integer.");if(u<=0||a+u>n.byteLength)throw new RangeError(`'byteLength' is out of range (0, ${n.byteLength-a}].`);if("object"==typeof o&&null!==o)s=o;else if(void 0!==o)throw new TypeError("'options' must be an object.")}else if(void 0!==r)throw new TypeError("'byteLength' must be a number.")}else if(void 0!==t)throw new TypeError("'options' must be an object.");i=new Uint8Array(n,a,u)}}const u=(s.executionProviders||[]).map((e=>"string"==typeof e?e:e.name)),c=await(0,n.resolveBackend)(u),l=await c.createSessionHandler(i,s);return new a(l)}startProfiling(){this.handler.startProfiling()}endProfiling(){this.handler.endProfiling()}get inputNames(){return this.handler.inputNames}get outputNames(){return this.handler.outputNames}}t.InferenceSession=a},974:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InferenceSession=void 0;const n=r(36);t.InferenceSession=n.InferenceSession},852:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},350:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tensorToImageData=t.tensorToDataURL=void 0,t.tensorToDataURL=(e,t)=>{const r=document.createElement("canvas");r.width=e.dims[3],r.height=e.dims[2];const n=r.getContext("2d");if(null!=n){let o,a;void 0!==t?.tensorLayout&&"NHWC"===t.tensorLayout?(o=e.dims[2],a=e.dims[3]):(o=e.dims[3],a=e.dims[2]);const i=void 0!==t?.format?t.format:"RGB",s=t?.norm;let u,c;void 0===s||void 0===s.mean?u=[255,255,255,255]:"number"==typeof s.mean?u=[s.mean,s.mean,s.mean,s.mean]:(u=[s.mean[0],s.mean[1],s.mean[2],0],void 0!==s.mean[3]&&(u[3]=s.mean[3])),void 0===s||void 0===s.bias?c=[0,0,0,0]:"number"==typeof s.bias?c=[s.bias,s.bias,s.bias,s.bias]:(c=[s.bias[0],s.bias[1],s.bias[2],0],void 0!==s.bias[3]&&(c[3]=s.bias[3]));const l=a*o;let f=0,d=l,p=2*l,y=-1;"RGBA"===i?(f=0,d=l,p=2*l,y=3*l):"RGB"===i?(f=0,d=l,p=2*l):"RBG"===i&&(f=0,p=l,d=2*l);for(let t=0;t<a;t++)for(let r=0;r<o;r++){const o=(e.data[f++]-c[0])*u[0],a=(e.data[d++]-c[1])*u[1],i=(e.data[p++]-c[2])*u[2],s=-1===y?255:(e.data[y++]-c[3])*u[3];n.fillStyle="rgba("+o+","+a+","+i+","+s+")",n.fillRect(r,t,1,1)}return r.toDataURL()}throw new Error("Can not access image data")},t.tensorToImageData=(e,t)=>{const r=document.createElement("canvas").getContext("2d");let n;if(null==r)throw new Error("Can not access image data");{let o,a,i;void 0!==t?.tensorLayout&&"NHWC"===t.tensorLayout?(o=e.dims[2],a=e.dims[1],i=e.dims[3]):(o=e.dims[3],a=e.dims[2],i=e.dims[1]);const s=void 0!==t&&void 0!==t.format?t.format:"RGB",u=t?.norm;let c,l;void 0===u||void 0===u.mean?c=[255,255,255,255]:"number"==typeof u.mean?c=[u.mean,u.mean,u.mean,u.mean]:(c=[u.mean[0],u.mean[1],u.mean[2],255],void 0!==u.mean[3]&&(c[3]=u.mean[3])),void 0===u||void 0===u.bias?l=[0,0,0,0]:"number"==typeof u.bias?l=[u.bias,u.bias,u.bias,u.bias]:(l=[u.bias[0],u.bias[1],u.bias[2],0],void 0!==u.bias[3]&&(l[3]=u.bias[3]));const f=a*o;if(void 0!==t&&(void 0!==t.format&&4===i&&"RGBA"!==t.format||3===i&&"RGB"!==t.format&&"BGR"!==t.format))throw new Error("Tensor format doesn't match input tensor dims");const d=4;let p=0,y=1,m=2,g=3,h=0,v=f,w=2*f,b=-1;"RGBA"===s?(h=0,v=f,w=2*f,b=3*f):"RGB"===s?(h=0,v=f,w=2*f):"RBG"===s&&(h=0,w=f,v=2*f),n=r.createImageData(o,a);for(let t=0;t<a*o;p+=d,y+=d,m+=d,g+=d,t++)n.data[p]=(e.data[h++]-l[0])*c[0],n.data[y]=(e.data[v++]-l[1])*c[1],n.data[m]=(e.data[w++]-l[2])*c[2],n.data[g]=-1===b?255:(e.data[b++]-l[3])*c[3]}return n}},866:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tensorFromImage=t.bufferToTensor=void 0;const n=r(963);t.bufferToTensor=(e,t)=>{if(void 0===e)throw new Error("Image buffer must be defined");if(void 0===t.height||void 0===t.width)throw new Error("Image height and width must be defined");if("NHWC"===t.tensorLayout)throw new Error("NHWC Tensor layout is not supported yet");const{height:r,width:o}=t,a=t.norm??{mean:255,bias:0};let i,s;i="number"==typeof a.mean?[a.mean,a.mean,a.mean,a.mean]:[a.mean[0],a.mean[1],a.mean[2],a.mean[3]??255],s="number"==typeof a.bias?[a.bias,a.bias,a.bias,a.bias]:[a.bias[0],a.bias[1],a.bias[2],a.bias[3]??0];const u=void 0!==t.format?t.format:"RGBA",c=void 0!==t.tensorFormat&&void 0!==t.tensorFormat?t.tensorFormat:"RGB",l=r*o,f="RGBA"===c?new Float32Array(4*l):new Float32Array(3*l);let d=4,p=0,y=1,m=2,g=3,h=0,v=l,w=2*l,b=-1;"RGB"===u&&(d=3,p=0,y=1,m=2,g=-1),"RGBA"===c?b=3*l:"RBG"===c?(h=0,w=l,v=2*l):"BGR"===c&&(w=0,v=l,h=2*l);for(let t=0;t<l;t++,p+=d,m+=d,y+=d,g+=d)f[h++]=(e[p]+s[0])/i[0],f[v++]=(e[y]+s[1])/i[1],f[w++]=(e[m]+s[2])/i[2],-1!==b&&-1!==g&&(f[b++]=(e[g]+s[3])/i[3]);return"RGBA"===c?new n.Tensor("float32",f,[1,4,r,o]):new n.Tensor("float32",f,[1,3,r,o])},t.tensorFromImage=async(e,r)=>{const n="undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement,o="undefined"!=typeof ImageData&&e instanceof ImageData,a="undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap,i="string"==typeof e;let s,u=r??{};if(n){const t=document.createElement("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");if(null==n)throw new Error("Can not access image data");{let t=e.height,o=e.width;if(void 0!==r&&void 0!==r.resizedHeight&&void 0!==r.resizedWidth&&(t=r.resizedHeight,o=r.resizedWidth),void 0!==r){if(u=r,void 0!==r.tensorFormat)throw new Error("Image input config format must be RGBA for HTMLImageElement");u.tensorFormat="RGBA",u.height=t,u.width=o}else u.tensorFormat="RGBA",u.height=t,u.width=o;n.drawImage(e,0,0),s=n.getImageData(0,0,o,t).data}}else{if(!o){if(a){if(void 0===r)throw new Error("Please provide image config with format for Imagebitmap");const n=document.createElement("canvas").getContext("2d");if(null!=n){const r=e.height,o=e.width;return n.drawImage(e,0,0,o,r),s=n.getImageData(0,0,o,r).data,u.height=r,u.width=o,(0,t.bufferToTensor)(s,u)}throw new Error("Can not access image data")}if(i)return new Promise(((r,n)=>{const o=document.createElement("canvas"),a=o.getContext("2d");if(!e||!a)return n();const i=new Image;i.crossOrigin="Anonymous",i.src=e,i.onload=()=>{o.width=i.width,o.height=i.height,a.drawImage(i,0,0,o.width,o.height);const e=a.getImageData(0,0,o.width,o.height);u.height=o.height,u.width=o.width,r((0,t.bufferToTensor)(e.data,u))}}));throw new Error("Input data provided is not supported - aborted tensor creation")}{let t,n;if(void 0!==r&&void 0!==r.resizedWidth&&void 0!==r.resizedHeight?(t=r.resizedHeight,n=r.resizedWidth):(t=e.height,n=e.width),void 0!==r&&(u=r),u.format="RGBA",u.height=t,u.width=n,void 0!==r){const r=document.createElement("canvas");r.width=n,r.height=t;const o=r.getContext("2d");if(null==o)throw new Error("Can not access image data");o.putImageData(e,0,0),s=o.getImageData(0,0,n,t).data}else s=e.data}}if(void 0!==s)return(0,t.bufferToTensor)(s,u);throw new Error("Input data provided is not supported - aborted tensor creation")}},957:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Tensor=void 0;const n=r(350),o=r(866),a=r(106),i=new Map([["float32",Float32Array],["uint8",Uint8Array],["int8",Int8Array],["uint16",Uint16Array],["float16",Uint16Array],["int16",Int16Array],["int32",Int32Array],["bool",Uint8Array],["float64",Float64Array],["uint32",Uint32Array]]),s=new Map([[Float32Array,"float32"],[Uint8Array,"uint8"],[Int8Array,"int8"],[Uint16Array,"uint16"],[Int16Array,"int16"],[Int32Array,"int32"],[Float64Array,"float64"],[Uint32Array,"uint32"]]);let u=!1;t.Tensor=class{constructor(e,t,r){let n,o,c;if((()=>{if(!u){u=!0;const e="undefined"!=typeof BigInt64Array&&"function"==typeof BigInt64Array.from,t="undefined"!=typeof BigUint64Array&&"function"==typeof BigUint64Array.from;e&&(i.set("int64",BigInt64Array),s.set(BigInt64Array,"int64")),t&&(i.set("uint64",BigUint64Array),s.set(BigUint64Array,"uint64"))}})(),"string"==typeof e)if(n=e,c=r,"string"===e){if(!Array.isArray(t))throw new TypeError("A string tensor's data must be a string array.");o=t}else{const r=i.get(e);if(void 0===r)throw new TypeError(`Unsupported tensor type: ${e}.`);if(Array.isArray(t)){if("float16"===e)throw new TypeError("Creating a float16 tensor from number array is not supported. Please use Uint16Array as data.");o="uint64"===e||"int64"===e?r.from(t,BigInt):r.from(t)}else{if(!(t instanceof r))throw new TypeError(`A ${n} tensor's data must be type of ${r}`);o=t}}else if(c=t,Array.isArray(e)){if(0===e.length)throw new TypeError("Tensor type cannot be inferred from an empty array.");const t=typeof e[0];if("string"===t)n="string",o=e;else{if("boolean"!==t)throw new TypeError(`Invalid element type of data array: ${t}.`);n="bool",o=Uint8Array.from(e)}}else{const t=s.get(e.constructor);if(void 0===t)throw new TypeError(`Unsupported type for tensor data: ${e.constructor}.`);n=t,o=e}if(void 0===c)c=[o.length];else if(!Array.isArray(c))throw new TypeError("A tensor's dims must be a number array");const l=(0,a.calculateSize)(c);if(l!==o.length)throw new Error(`Tensor's size(${l}) does not match data length(${o.length}).`);this.dims=c,this.type=n,this.data=o,this.size=l}static async fromImage(e,t){return(0,o.tensorFromImage)(e,t)}toDataURL(e){return(0,n.tensorToDataURL)(this,e)}toImageData(e){return(0,n.tensorToImageData)(this,e)}reshape(e){return(0,a.tensorReshape)(this,e)}}},106:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tensorReshape=t.calculateSize=void 0;const n=r(963);t.calculateSize=e=>{let t=1;for(let r=0;r<e.length;r++){const n=e[r];if("number"!=typeof n||!Number.isSafeInteger(n))throw new TypeError(`dims[${r}] must be an integer, got: ${n}`);if(n<0)throw new RangeError(`dims[${r}] must be a non-negative integer, got: ${n}`);t*=n}return t},t.tensorReshape=(e,t)=>new n.Tensor(e.type,e.data,t)},963:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Tensor=void 0;const n=r(957);t.Tensor=n.Tensor},104:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.version=void 0,t.version="1.16.0"}},t={},function r(n){var o=t[n];if(void 0!==o)return o.exports;var a=t[n]={exports:{}};return e[n].call(a.exports,a,a.exports,r),a.exports}(57);var e,t}));
//# sourceMappingURL=ort.wasm-core.min.js.map