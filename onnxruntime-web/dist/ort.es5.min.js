/*!
* ONNX Runtime Web v1.16.0
* Copyright (c) Microsoft Corporation. All rights reserved.
* Licensed under the MIT License.
*/
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.ort=t():e.ort=t()}(self,(function(){return function(){var __webpack_modules__={5716:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function u(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,u)}s((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(s){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,r=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){a=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){a.label=u[1];break}if(6===u[0]&&a.label<o[1]){a.label=o[1],o=u;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(u);break}o[2]&&a.ops.pop(),a.trys.pop();continue}u=t.call(e,a)}catch(e){u=[6,e],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.onnxjsBackend=void 0;var i=n(6027),a=n(1723),u=function(){function e(){}return e.prototype.init=function(){return r(this,void 0,void 0,(function(){return o(this,(function(e){return[2]}))}))},e.prototype.createSessionHandler=function(e,t){return r(this,void 0,void 0,(function(){var n;return o(this,(function(r){switch(r.label){case 0:return n=new i.Session(t),"string"!=typeof e?[3,2]:[4,n.loadModel(e)];case 1:return r.sent(),[3,4];case 2:return[4,n.loadModel(e)];case 3:r.sent(),r.label=4;case 4:return[2,new a.OnnxjsSessionHandler(n)]}}))}))},e}();t.onnxjsBackend=new u},2818:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function u(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,u)}s((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(s){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,r=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){a=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){a.label=u[1];break}if(6===u[0]&&a.label<o[1]){a.label=o[1],o=u;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(u);break}o[2]&&a.ops.pop(),a.trys.pop();continue}u=t.call(e,a)}catch(e){u=[6,e],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.wasmBackend=t.initializeFlags=void 0;var i=n(2235),a=n(5381),u=n(9544),s=n(6640);t.initializeFlags=function(){if(("number"!=typeof i.env.wasm.initTimeout||i.env.wasm.initTimeout<0)&&(i.env.wasm.initTimeout=0),"boolean"!=typeof i.env.wasm.simd&&(i.env.wasm.simd=!0),"boolean"!=typeof i.env.wasm.proxy&&(i.env.wasm.proxy=!1),"number"!=typeof i.env.wasm.numThreads||!Number.isInteger(i.env.wasm.numThreads)||i.env.wasm.numThreads<=0){var e="undefined"==typeof navigator?(0,a.cpus)().length:navigator.hardwareConcurrency;i.env.wasm.numThreads=Math.min(4,Math.ceil((e||1)/2))}};var c=function(){function e(){}return e.prototype.init=function(){return r(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return(0,t.initializeFlags)(),[4,(0,u.initializeWebAssemblyInstance)()];case 1:return e.sent(),[2]}}))}))},e.prototype.createSessionHandler=function(e,t){return r(this,void 0,void 0,(function(){var n;return o(this,(function(r){switch(r.label){case 0:return[4,(n=new s.OnnxruntimeWebAssemblySessionHandler).loadModel(e,t)];case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))},e}();t.wasmBackend=new c},1057:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(2235),t);var i=n(2235),a=n(8408),u=n(5716).onnxjsBackend;(0,i.registerBackend)("webgl",u,-10);var s=n(2818).wasmBackend;(0,i.registerBackend)("cpu",s,10),(0,i.registerBackend)("wasm",s,10),(0,i.registerBackend)("xnnpack",s,9),(0,i.registerBackend)("webnn",s,9),i.env.versions.web=a.version},4910:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createAttributeWithCacheKey=void 0;var n=function(){function e(e){Object.assign(this,e)}return Object.defineProperty(e.prototype,"cacheKey",{get:function(){var e=this;return this._cacheKey||(this._cacheKey=Object.getOwnPropertyNames(this).sort().map((function(t){return"".concat(e[t])})).join(";")),this._cacheKey},enumerable:!1,configurable:!0}),e}();t.createAttributeWithCacheKey=function(e){return new n(e)}},6874:function(e,t,n){"use strict";var r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.Attribute=void 0;var o=n(5127),i=n(2446),a=n(9240),u=n(7273),s=o.onnxruntime.experimental.fbs,c=function(){function e(t){var n,o;if(this._attributes=new Map,null!=t){try{for(var a=r(t),u=a.next();!u.done;u=a.next()){var c=u.value;c instanceof i.onnx.AttributeProto?this._attributes.set(c.name,[e.getValue(c),e.getType(c)]):c instanceof s.Attribute&&this._attributes.set(c.name(),[e.getValue(c),e.getType(c)])}}catch(e){n={error:e}}finally{try{u&&!u.done&&(o=a.return)&&o.call(a)}finally{if(n)throw n.error}}if(this._attributes.size<t.length)throw new Error("duplicated attribute names")}}return e.prototype.set=function(e,t,n){this._attributes.set(e,[n,t])},e.prototype.delete=function(e){this._attributes.delete(e)},e.prototype.getFloat=function(e,t){return this.get(e,"float",t)},e.prototype.getInt=function(e,t){return this.get(e,"int",t)},e.prototype.getString=function(e,t){return this.get(e,"string",t)},e.prototype.getTensor=function(e,t){return this.get(e,"tensor",t)},e.prototype.getFloats=function(e,t){return this.get(e,"floats",t)},e.prototype.getInts=function(e,t){return this.get(e,"ints",t)},e.prototype.getStrings=function(e,t){return this.get(e,"strings",t)},e.prototype.getTensors=function(e,t){return this.get(e,"tensors",t)},e.prototype.get=function(e,t,n){var r=this._attributes.get(e);if(void 0===r){if(void 0!==n)return n;throw new Error("required attribute not found: ".concat(e))}if(r[1]!==t)throw new Error("type mismatch: expected ".concat(t," but got ").concat(r[1]));return r[0]},e.getType=function(e){var t=e instanceof i.onnx.AttributeProto?e.type:e.type();switch(t){case i.onnx.AttributeProto.AttributeType.FLOAT:return"float";case i.onnx.AttributeProto.AttributeType.INT:return"int";case i.onnx.AttributeProto.AttributeType.STRING:return"string";case i.onnx.AttributeProto.AttributeType.TENSOR:return"tensor";case i.onnx.AttributeProto.AttributeType.FLOATS:return"floats";case i.onnx.AttributeProto.AttributeType.INTS:return"ints";case i.onnx.AttributeProto.AttributeType.STRINGS:return"strings";case i.onnx.AttributeProto.AttributeType.TENSORS:return"tensors";default:throw new Error("attribute type is not supported yet: ".concat(i.onnx.AttributeProto.AttributeType[t]))}},e.getValue=function(e){var t=e instanceof i.onnx.AttributeProto?e.type:e.type();if(t===i.onnx.AttributeProto.AttributeType.GRAPH||t===i.onnx.AttributeProto.AttributeType.GRAPHS)throw new Error("graph attribute is not supported yet");var n=this.getValueNoCheck(e);if(t===i.onnx.AttributeProto.AttributeType.INT&&u.LongUtil.isLong(n))return u.LongUtil.longToNumber(n);if(t===i.onnx.AttributeProto.AttributeType.INTS){for(var r=n,o=new Array(r.length),c=0;c<r.length;c++){var l=r[c];o[c]=u.LongUtil.longToNumber(l)}return o}if(t===i.onnx.AttributeProto.AttributeType.TENSOR)return e instanceof i.onnx.AttributeProto?a.Tensor.fromProto(n):a.Tensor.fromOrtTensor(n);if(t===i.onnx.AttributeProto.AttributeType.TENSORS){if(e instanceof i.onnx.AttributeProto)return n.map((function(e){return a.Tensor.fromProto(e)}));if(e instanceof s.Attribute)return n.map((function(e){return a.Tensor.fromOrtTensor(e)}))}if(t===i.onnx.AttributeProto.AttributeType.STRING&&e instanceof i.onnx.AttributeProto){var p=n;return(0,u.decodeUtf8String)(p)}return t===i.onnx.AttributeProto.AttributeType.STRINGS&&e instanceof i.onnx.AttributeProto?n.map(u.decodeUtf8String):n},e.getValueNoCheck=function(e){return e instanceof i.onnx.AttributeProto?this.getValueNoCheckFromOnnxFormat(e):this.getValueNoCheckFromOrtFormat(e)},e.getValueNoCheckFromOnnxFormat=function(e){switch(e.type){case i.onnx.AttributeProto.AttributeType.FLOAT:return e.f;case i.onnx.AttributeProto.AttributeType.INT:return e.i;case i.onnx.AttributeProto.AttributeType.STRING:return e.s;case i.onnx.AttributeProto.AttributeType.TENSOR:return e.t;case i.onnx.AttributeProto.AttributeType.GRAPH:return e.g;case i.onnx.AttributeProto.AttributeType.FLOATS:return e.floats;case i.onnx.AttributeProto.AttributeType.INTS:return e.ints;case i.onnx.AttributeProto.AttributeType.STRINGS:return e.strings;case i.onnx.AttributeProto.AttributeType.TENSORS:return e.tensors;case i.onnx.AttributeProto.AttributeType.GRAPHS:return e.graphs;default:throw new Error("unsupported attribute type: ".concat(i.onnx.AttributeProto.AttributeType[e.type]))}},e.getValueNoCheckFromOrtFormat=function(e){switch(e.type()){case s.AttributeType.FLOAT:return e.f();case s.AttributeType.INT:return e.i();case s.AttributeType.STRING:return e.s();case s.AttributeType.TENSOR:return e.t();case s.AttributeType.GRAPH:return e.g();case s.AttributeType.FLOATS:return e.floatsArray();case s.AttributeType.INTS:for(var t=[],n=0;n<e.intsLength();n++)t.push(e.ints(n));return t;case s.AttributeType.STRINGS:var r=[];for(n=0;n<e.stringsLength();n++)r.push(e.strings(n));return r;case s.AttributeType.TENSORS:var o=[];for(n=0;n<e.tensorsLength();n++)o.push(e.tensors(n));return o;default:throw new Error("unsupported attribute type: ".concat(s.AttributeType[e.type()]))}},e}();t.Attribute=c},1975:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function u(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,u)}s((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(s){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,r=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){a=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){a.label=u[1];break}if(6===u[0]&&a.label<o[1]){a.label=o[1],o=u;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(u);break}o[2]&&a.ops.pop(),a.trys.pop();continue}u=t.call(e,a)}catch(e){u=[6,e],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,s])}}},i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.resolveBackend=t.backend=void 0;var a=n(4418),u=new Map;function s(e){return r(this,void 0,void 0,(function(){var n,r,i;return o(this,(function(o){switch(o.label){case 0:return void 0!==(n=t.backend)[e]&&(a=n[e],"initialize"in(s=a)&&"function"==typeof s.initialize&&"createSessionHandler"in s&&"function"==typeof s.createSessionHandler&&"dispose"in s&&"function"==typeof s.dispose)?(r=n[e],"object"==typeof(i=r.initialize())&&"then"in i?[4,i]:[3,2]):[3,3];case 1:i=o.sent(),o.label=2;case 2:if(i)return u.set(e,r),[2,r];o.label=3;case 3:return[2,void 0]}var a,s}))}))}t.backend={webgl:new a.WebGLBackend},t.resolveBackend=function e(t){return r(this,void 0,void 0,(function(){var n,r,a,c,l,p,f,d,h;return o(this,(function(o){switch(o.label){case 0:return t?[3,1]:[2,e(["webgl"])];case 1:n="string"==typeof t?[t]:t,o.label=2;case 2:o.trys.push([2,7,8,9]),r=i(n),a=r.next(),o.label=3;case 3:return a.done?[3,6]:(c=a.value,(l=u.get(c))?[2,l]:[4,s(c)]);case 4:if(p=o.sent())return[2,p];o.label=5;case 5:return a=r.next(),[3,3];case 6:return[3,9];case 7:return f=o.sent(),d={error:f},[3,9];case 8:try{a&&!a.done&&(h=r.return)&&h.call(r)}finally{if(d)throw d.error}return[7];case 9:throw new Error("no available backend to use")}}))}))}},4418:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebGLBackend=void 0;var r=n(2235),o=n(1315),i=n(2171),a=n(3389),u=function(){function e(){}return Object.defineProperty(e.prototype,"contextId",{get:function(){return r.env.webgl.contextId},set:function(e){r.env.webgl.contextId=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"matmulMaxBatchSize",{get:function(){return r.env.webgl.matmulMaxBatchSize},set:function(e){r.env.webgl.matmulMaxBatchSize=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textureCacheMode",{get:function(){return r.env.webgl.textureCacheMode},set:function(e){r.env.webgl.textureCacheMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pack",{get:function(){return r.env.webgl.pack},set:function(e){r.env.webgl.pack=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"async",{get:function(){return r.env.webgl.async},set:function(e){r.env.webgl.async=e},enumerable:!1,configurable:!0}),e.prototype.initialize=function(){try{return this.glContext=(0,a.createWebGLContext)(this.contextId),"number"!=typeof this.matmulMaxBatchSize&&(this.matmulMaxBatchSize=16),"string"!=typeof this.textureCacheMode&&(this.textureCacheMode="full"),"boolean"!=typeof this.pack&&(this.pack=!1),"boolean"!=typeof this.async&&(this.async=!1),o.Logger.setWithEnv(r.env),o.Logger.verbose("WebGLBackend","Created WebGLContext: ".concat(typeof this.glContext," with matmulMaxBatchSize: ").concat(this.matmulMaxBatchSize,"; textureCacheMode: ").concat(this.textureCacheMode,"; pack: ").concat(this.pack,"; async: ").concat(this.async,".")),!0}catch(e){return o.Logger.warning("WebGLBackend","Unable to initialize WebGLBackend. ".concat(e)),!1}},e.prototype.createSessionHandler=function(e){return new i.WebGLSessionHandler(this,e)},e.prototype.dispose=function(){this.glContext.dispose()},e}();t.WebGLBackend=u},6859:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i.apply(this,arguments)},a=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};Object.defineProperty(t,"__esModule",{value:!0}),t.CoordsGlslLib=void 0;var u=n(7273),s=n(1997),c=n(6757),l=n(7618),p=n(432),f=function(e){function t(t){return e.call(this,t)||this}return o(t,e),t.prototype.getFunctions=function(){return i(i(i(i(i(i(i({},this.offsetToCoords()),this.coordsToOffset()),this.toVec()),this.valueFrom()),this.getCommonUtilFuncs()),this.getInputsSamplingSnippets()),this.getOutputSamplingSnippet())},t.prototype.getCustomTypes=function(){return{}},t.prototype.offsetToCoords=function(){return{offsetToCoords:new s.GlslLibRoutine("\n      vec2 ".concat("offsetToCoords","(int offset, int width, int height) {\n        int t = offset / width;\n        int s = offset - t*width;\n        vec2 coords = (vec2(s,t) + vec2(0.5,0.5)) / vec2(width, height);\n        return coords;\n      }\n      "))}},t.prototype.coordsToOffset=function(){return{coordsToOffset:new s.GlslLibRoutine("\n      int ".concat("coordsToOffset","(vec2 coords, int width, int height) {\n        float s = coords.s * float(width);\n        float t = coords.t * float(height);\n        int offset = int(t) * width + int(s);\n        return offset;\n      }\n      "))}},t.prototype.getOutputSamplingSnippet=function(){var e=this.context.outputTextureLayout;return e.isPacked?this.getPackedOutputSamplingSnippet(e):this.getUnpackedOutputSamplingSnippet(e)},t.prototype.getPackedOutputSamplingSnippet=function(e){var t=e.unpackedShape,n=[e.width,e.height],r={},o="getOutputCoords";switch(t.length){case 0:r[o]=this.getOutputScalarCoords();break;case 1:r[o]=this.getOutputPacked1DCoords(t,n);break;case 2:r[o]=this.getOutputPacked2DCoords(t,n);break;case 3:r[o]=this.getOutputPacked3DCoords(t,n);break;default:r[o]=this.getOutputPackedNDCoords(t,n)}var i=(0,c.getGlsl)(this.context.glContext.version),a="\n      void setOutput(vec4 val) {\n        ".concat(i.output," = val;\n      }\n    ");return r.floatTextureSetRGBA=new s.GlslLibRoutine(a),r},t.prototype.getUnpackedOutputSamplingSnippet=function(e){var t=e.unpackedShape,n=[e.width,e.height],r={},o="getOutputCoords";switch(t.length){case 0:r[o]=this.getOutputScalarCoords();break;case 1:r[o]=this.getOutputUnpacked1DCoords(t,n);break;case 2:r[o]=this.getOutputUnpacked2DCoords(t,n);break;case 3:r[o]=this.getOutputUnpacked3DCoords(t,n);break;case 4:r[o]=this.getOutputUnpacked4DCoords(t,n);break;case 5:r[o]=this.getOutputUnpacked5DCoords(t,n);break;case 6:r[o]=this.getOutputUnpacked6DCoords(t,n);break;default:throw new Error("Unsupported output dimensionality: ".concat(t.length))}var i=(0,c.getGlsl)(this.context.glContext.version),a="\n        void setOutput(float val) {\n          ".concat(i.output," = vec4(val, 0, 0, 0);\n        }\n    ");return r.floatTextureSetR=new s.GlslLibRoutine(a),r},t.prototype.getOutputScalarCoords=function(){return new s.GlslLibRoutine("\n      int getOutputCoords() {\n        return 0;\n      }\n    ")},t.prototype.getOutputPacked1DCoords=function(e,t){var n=t,r="";return 1===n[0]?(r="\n          int getOutputCoords() {\n            return 2 * int(TexCoords.y * ".concat(n[1],".0);\n          }\n        "),new s.GlslLibRoutine(r)):1===n[1]?(r="\n          int getOutputCoords() {\n            return 2 * int(TexCoords.x * ".concat(n[0],".0);\n          }\n        "),new s.GlslLibRoutine(r)):(r="\n        int getOutputCoords() {\n          ivec2 resTexRC = ivec2(TexCoords.xy *\n                                 vec2(".concat(n[0],", ").concat(n[1],"));\n          return 2 * (resTexRC.y * ").concat(n[0]," + resTexRC.x);\n        }\n      "),new s.GlslLibRoutine(r))},t.prototype.getOutputPacked2DCoords=function(e,t){var n="";if(u.ArrayUtil.arraysEqual(e,t))return n="\n        ivec2 getOutputCoords() {\n          return 2 * ivec2(TexCoords.xy * vec2(".concat(t[0],", ").concat(t[1],"));\n        }\n      "),new s.GlslLibRoutine(n);var r=t,o=Math.ceil(e[1]/2);return n="\n        ivec2 getOutputCoords() {\n          ivec2 resTexRC = ivec2(TexCoords.xy *\n                                vec2(".concat(r[0],", ").concat(r[1],"));\n\n          int index = resTexRC.y * ").concat(r[0]," + resTexRC.x;\n\n          // reverse r and c order for packed texture\n          int r = imod(index, ").concat(o,") * 2;\n          int c = 2 * (index / ").concat(o,");\n\n          return ivec2(r, c);\n        }\n      "),new s.GlslLibRoutine(n)},t.prototype.getOutputPacked3DCoords=function(e,t){var n=[t[0],t[1]],r=Math.ceil(e[2]/2),o=r*Math.ceil(e[1]/2),i="\n        ivec3 getOutputCoords() {\n          ivec2 resTexRC = ivec2(TexCoords.xy *\n                                vec2(".concat(n[0],", ").concat(n[1],"));\n          int index = resTexRC.y * ").concat(n[0]," + resTexRC.x;\n\n          int b = index / ").concat(o,";\n          index -= b * ").concat(o,";\n\n          // reverse r and c order for packed texture\n          int r = imod(index, ").concat(r,") * 2;\n          int c = 2 * (index / ").concat(r,");\n\n          return ivec3(b, r, c);\n        }\n      ");return new s.GlslLibRoutine(i)},t.prototype.getOutputPackedNDCoords=function(e,t){for(var n=[t[0],t[1]],r=Math.ceil(e[e.length-1]/2),o=r*Math.ceil(e[e.length-2]/2),i=o,a="",u="b, r, c",c=2;c<e.length-1;c++)i*=e[e.length-c-1],a="\n      int b".concat(c," = index / ").concat(i,";\n      index -= b").concat(c," * ").concat(i,";\n    ")+a,u="b".concat(c,", ")+u;var l="\n      ivec".concat(e.length," getOutputCoords() {\n        ivec2 resTexRC = ivec2(TexCoords.xy *\n                              vec2(").concat(n[0],", ").concat(n[1],"));\n        int index = resTexRC.y * ").concat(n[0]," + resTexRC.x;\n\n        ").concat(a,"\n\n        int b = index / ").concat(o,";\n        index -= b * ").concat(o,";\n\n        // reverse r and c order for packed texture\n        int r = imod(index, ").concat(r,") * 2;\n        int c = 2 * (index / ").concat(r,");\n\n        return ivec").concat(e.length,"(").concat(u,");\n      }\n    ");return new s.GlslLibRoutine(l)},t.prototype.getOutputUnpacked1DCoords=function(e,t){var n="\n        int getOutputCoords() {\n          ivec2 resTexRC = ivec2(TexCoords.xy *\n                                vec2(".concat(t[0],", ").concat(t[1],"));\n          return resTexRC.y * ").concat(t[0]," + resTexRC.x;\n        }\n      ");return new s.GlslLibRoutine(n)},t.prototype.getOutputUnpacked2DCoords=function(e,t){var n="\n        ivec2 getOutputCoords() {\n          ivec2 resTexRC = ivec2(TexCoords.xy *\n                                vec2(".concat(t[0],", ").concat(t[1],"));\n          int index = resTexRC.y * ").concat(t[0]," + resTexRC.x;\n          int r = index / ").concat(e[1],";\n          int c = index - r * ").concat(e[1],";\n          return ivec2(r, c);\n        }\n      ");return new s.GlslLibRoutine(n)},t.prototype.getOutputUnpacked3DCoords=function(e,t){var n,r=e.length,o=null;r<2&&(o=[]),(o=new Array(r-1))[r-2]=e[r-1];for(var i=r-3;i>=0;--i)o[i]=o[i+1]*e[i+1];var a=["r","c","d"],u=o.map((function(e,t){var n="int ".concat(a[t]," = index / ").concat(e),r=t===o.length-1?"int ".concat(a[t+1]," = index - ").concat(a[t]," * ").concat(e):"index -= ".concat(a[t]," * ").concat(e);return"".concat(n,"; ").concat(r,";")})).join("");return n="\n        ivec3 getOutputCoords() {\n          ivec2 resTexRC = ivec2(TexCoords.xy *\n                                vec2(".concat(t[0],", ").concat(t[1],"));\n          int index = resTexRC.y * ").concat(t[0]," + resTexRC.x;\n          ").concat(u,"\n          return ivec3(r, c, d);\n        }\n      "),new s.GlslLibRoutine(n)},t.prototype.getOutputUnpacked4DCoords=function(e,t){var n,r=e.length,o=null;r<2&&(o=[]),(o=new Array(r-1))[r-2]=e[r-1];for(var i=r-3;i>=0;--i)o[i]=o[i+1]*e[i+1];var a=["r","c","d","d2"],u=o.map((function(e,t){var n="int ".concat(a[t]," = index / ").concat(e),r=t===o.length-1?"int ".concat(a[t+1]," = index - ").concat(a[t]," * ").concat(e):"index -= ".concat(a[t]," * ").concat(e);return"".concat(n,"; ").concat(r,";")})).join("");return n="\n      ivec4 getOutputCoords() {\n          ivec2 resTexRC = ivec2(TexCoords.xy *\n                                vec2(".concat(t[0],", ").concat(t[1],"));\n          int index = resTexRC.y * ").concat(t[0]," + resTexRC.x;\n          ").concat(u,"\n          return ivec4(r, c, d, d2);\n        }\n      "),new s.GlslLibRoutine(n)},t.prototype.getOutputUnpacked5DCoords=function(e,t){var n,r=e.length,o=null;r<2&&(o=[]),(o=new Array(r-1))[r-2]=e[r-1];for(var i=r-3;i>=0;--i)o[i]=o[i+1]*e[i+1];var a=["r","c","d","d2","d3"],u=o.map((function(e,t){var n="int ".concat(a[t]," = index / ").concat(e),r=t===o.length-1?"int ".concat(a[t+1]," = index - ").concat(a[t]," * ").concat(e):"index -= ".concat(a[t]," * ").concat(e);return"".concat(n,"; ").concat(r,";")})).join("");return n="\n      ivec5 getOutputCoords() {\n          ivec2 resTexRC = ivec2(TexCoords.xy *\n                                vec2(".concat(t[0],", ").concat(t[1],"));\n          int index = resTexRC.y * ").concat(t[0]," + resTexRC.x;\n          ").concat(u,"\n          return ivec5(r, c, d, d2, d3);\n        }\n      "),new s.GlslLibRoutine(n)},t.prototype.getOutputUnpacked6DCoords=function(e,t){var n,r=e.length,o=null;r<2&&(o=[]),(o=new Array(r-1))[r-2]=e[r-1];for(var i=r-3;i>=0;--i)o[i]=o[i+1]*e[i+1];var a=["r","c","d","d2","d3","d4"],u=o.map((function(e,t){var n="int ".concat(a[t]," = index / ").concat(e),r=t===o.length-1?"int ".concat(a[t+1]," = index - ").concat(a[t]," * ").concat(e):"index -= ".concat(a[t]," * ").concat(e);return"".concat(n,"; ").concat(r,";")})).join("");return n="\n     ivec6 getOutputCoords() {\n         ivec2 resTexRC = ivec2(TexCoords.xy *\n                               vec2(".concat(t[0],", ").concat(t[1],"));\n         int index = resTexRC.y * ").concat(t[0]," + resTexRC.x;\n         ").concat(u,"\n         return ivec6(r, c, d, d2, d3, d4);\n       }\n     "),new s.GlslLibRoutine(n)},t.prototype.getCommonUtilFuncs=function(){var e={},t="uvFromFlat";e[t]=new s.GlslLibRoutine("\n    vec2 uvFromFlat(int texNumR, int texNumC, int index) {\n      int texC = index / texNumR;\n      int texR = index - texC * texNumR;\n      // TODO: swap texR, texC order in following function so row is corresponding to u and column is corresponding to\n      //       v.\n      return (vec2(texR, texC) + halfCR) / vec2(texNumR, texNumC);\n    }\n    "),e[t="packedUVfrom1D"]=new s.GlslLibRoutine("\n      vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n        int texelIndex = index / 2;\n        int texR = texelIndex / texNumC;\n        int texC = texelIndex - texR * texNumC;\n        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n      }\n      "),e[t="packedUVfrom2D"]=new s.GlslLibRoutine("\n      vec2 packedUVfrom2D(int texNumR, int texNumC, int texelsInLogicalRow, int row, int col) {\n        int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n        int texR = texelIndex / texNumC;\n        int texC = texelIndex - texR * texNumC;\n        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n      }\n      "),e[t="packedUVfrom3D"]=new s.GlslLibRoutine("\n      vec2 packedUVfrom3D(int texNumR, int texNumC,\n          int texelsInBatch, int texelsInLogicalRow, int b,\n          int row, int col) {\n        int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n        int texR = index / texNumC;\n        int texC = index - texR * texNumC;\n        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n      }\n      "),t="sampleTexture";var n=(0,c.getGlsl)(this.context.glContext.version);return e[t]=new s.GlslLibRoutine("\n        float sampleTexture(sampler2D textureSampler, vec2 uv) {\n            return ".concat(n.texture2D,"(textureSampler, uv).r;\n        }")),e},t.prototype.getInputsSamplingSnippets=function(){var e=this,t={},n=this.context.outputTextureLayout;return this.context.programInfo.inputNames.forEach((function(r,o){var i=e.context.inputTextureLayouts[o],a=(0,p.generateShaderFuncNameFromInputSamplerName)(r);i.isPacked?t[a]=e.getPackedSamplerFromInput(a,r,i):t[a]=e.getUnpackedSamplerFromInput(a,r,i);var u=(0,p.generateShaderFuncNameFromInputSamplerNameAtOutCoords)(r);i.unpackedShape.length<=n.unpackedShape.length&&(i.isPacked?t[u]=e.getPackedSamplerAtOutputCoords(u,i,n,r):t[u]=e.getUnpackedSamplerAtOutputCoords(u,i,n,r))})),t},t.prototype.getPackedSamplerAtOutputCoords=function(e,t,n,r){var o,i=t.unpackedShape,a=n.unpackedShape,c=r,l=(0,p.generateShaderFuncNameFromInputSamplerName)(c),f=i.length,d=a.length,h=u.BroadcastUtil.getBroadcastDims(i,a),g=(0,p.getCoordsDataType)(d),y=d-f,m=(0,p.getGlChannels)();o=0===f?"":d<2&&h.length>=1?"coords = 0;":h.map((function(e){return"coords.".concat(m[e+y]," = 0;")})).join("\n");var v;v=d<2&&f>0?"coords":i.map((function(e,t){return"coords.".concat(m[t+y])})).join(", ");var b="return outputValue;",w=1===u.ShapeUtil.size(i),_=1===u.ShapeUtil.size(a);if(1!==f||w||_){if(w&&!_)b=1===d?"\n          return vec4(outputValue.x, outputValue.x, 0., 0.);\n        ":"\n          return vec4(outputValue.x);\n        ";else if(h.length){var x=f-2,T=f-1;h.indexOf(x)>-1&&h.indexOf(T)>-1?b="return vec4(outputValue.x);":h.indexOf(x)>-1?b="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":h.indexOf(T)>-1&&(b="return vec4(outputValue.xx, outputValue.zz);")}}else b="\n        return vec4(outputValue.xy, outputValue.xy);\n      ";var S="\n        int lastDim = coords.".concat(m[d-1],";\n        coords.").concat(m[d-1]," = coords.").concat(m[d-2],";\n        coords.").concat(m[d-2]," = lastDim;\n      "),P="\n      vec4 ".concat(e,"() {\n        ").concat(g," coords = getOutputCoords();\n        ").concat(S,"\n        ").concat(o,"\n        vec4 outputValue = ").concat(l,"(").concat(v,");\n        ").concat(b,"\n      }\n    ");return new s.GlslLibRoutine(P,["coordinates.getOutputCoords"])},t.prototype.getUnpackedSamplerAtOutputCoords=function(e,t,n,r){var o=[n.width,n.height],i=[t.width,t.height],a=t.unpackedShape.length,c=n.unpackedShape.length,l=t.unpackedShape,f=n.unpackedShape,d=(0,p.generateShaderFuncNameFromInputSamplerName)(r);if(a===c&&u.ArrayUtil.arraysEqual(i,o)){var h="\n          float ".concat(e,"() {\n            return sampleTexture(").concat(r,", TexCoords);\n          }\n        ");return new s.GlslLibRoutine(h,["coordinates.sampleTexture"])}var g,y=(0,p.getCoordsDataType)(c),m=u.BroadcastUtil.getBroadcastDims(l,f),v=c-a,b=(0,p.getGlChannels)();g=0===a?"":c<2&&m.length>=1?"coords = 0;":m.map((function(e){return"coords.".concat(b[e+v]," = 0;")})).join("\n");var w;w=c<2&&a>0?"coords":t.unpackedShape.map((function(e,t){return"coords.".concat(b[t+v])})).join(", ");var _="\n        float ".concat(e,"() {\n          ").concat(y," coords = getOutputCoords();\n          ").concat(g,"\n          return ").concat(d,"(").concat(w,");\n        }\n      ");return new s.GlslLibRoutine(_,["coordinates.getOutputCoords"])},t.prototype.getPackedSamplerFromInput=function(e,t,n){switch(n.unpackedShape.length){case 0:return this.getPackedSamplerScalar(e,t);case 1:return this.getPackedSampler1D(e,t,n);case 2:return this.getPackedSampler2D(e,t,n);case 3:return this.getPackedSampler3D(e,t,n);default:return this.getPackedSamplerND(e,t,n)}},t.prototype.getUnpackedSamplerFromInput=function(e,t,n){var r=n.unpackedShape;switch(r.length){case 0:return this.getUnpackedSamplerScalar(e,t,n);case 1:return this.getUnpackedSampler1D(e,t,n);case 2:return this.getUnpackedSampler2D(e,t,n);case 3:return this.getUnpackedSampler3D(e,t,n);case 4:return this.getUnpackedSampler4D(e,t,n);case 5:return this.getUnpackedSampler5D(e,t,n);case 6:return this.getUnpackedSampler6D(e,t,n);default:throw new Error("Unsupported dimension ".concat(r.length,"-D"))}},t.prototype.getPackedSamplerScalar=function(e,t){var n=(0,c.getGlsl)(this.context.glContext.version),r="\n          vec4 ".concat(e,"() {\n            return ").concat(n.texture2D,"(").concat(t,", halfCR);\n          }\n        ");return new s.GlslLibRoutine(r)},t.prototype.getPackedSampler1D=function(e,t,n){var r=[n.width,n.height],o=[r[1],r[0]],i=(0,c.getGlsl)(this.context.glContext.version),a="vec4 ".concat(e,"(int index) {\n      vec2 uv = packedUVfrom1D(\n      ").concat(o[0],", ").concat(o[1],", index);\n      return ").concat(i.texture2D,"(").concat(t,", uv);\n    }");return new s.GlslLibRoutine(a,["coordinates.packedUVfrom1D"])},t.prototype.getPackedSampler2D=function(e,t,n){var r=n.unpackedShape,o=[n.width,n.height],i=(0,c.getGlsl)(this.context.glContext.version),a=o[0],l=o[1];if(null!=o&&u.ArrayUtil.arraysEqual(r,o)){var p="vec4 ".concat(e,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(l,".0, ").concat(a,".0);\n        return ").concat(i.texture2D,"(").concat(t,", uv);\n      }");return new s.GlslLibRoutine(p)}var f=o,d=Math.ceil(r[1]/2),h="vec4 ".concat(e,"(int row, int col) {\n      vec2 uv = packedUVfrom2D(").concat(f[1],", ").concat(f[0],", ").concat(d,", row, col);\n      return ").concat(i.texture2D,"(").concat(t,", uv);\n    }");return new s.GlslLibRoutine(h,["coordinates.packedUVfrom2D"])},t.prototype.getPackedSampler3D=function(e,t,n){var r=n.unpackedShape,o=[n.width,n.height],i=[o[0],o[1]],a=(0,c.getGlsl)(this.context.glContext.version);if(1===r[0]){var u=r.slice(1),l=(0,p.squeezeInputShape)(r,u),f=JSON.parse(JSON.stringify(n));f.unpackedShape=l;var d=this.getPackedSamplerFromInput(e,t,f),h="".concat(d.routineBody,"\n      vec4 ").concat(e,"(int b, int row, int col) {\n        return ").concat(e,"(").concat((0,p.getSqueezedParams)(["b","row","col"],[1,2]),");\n      } ");return new s.GlslLibRoutine(h,d.dependencies)}var g=i[0],y=i[1],m=Math.ceil(r[2]/2),v=m*Math.ceil(r[1]/2),b="vec4 ".concat(e,"(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        ").concat(y,", ").concat(g,", ").concat(v,", ").concat(m,", b, row, col);\n      return ").concat(a.texture2D,"(").concat(t,", uv);}");return new s.GlslLibRoutine(b,["coordinates.packedUVfrom3D"])},t.prototype.getPackedSamplerND=function(e,t,n){for(var r=n.unpackedShape,o=r.length,i=[n.width,n.height],a=(0,c.getGlsl)(this.context.glContext.version),u=[i[0],i[1]],l=u[1],p=u[0],f=Math.ceil(r[o-1]/2),d=f*Math.ceil(r[o-2]/2),h="int b, int row, int col",g="b * ".concat(d," + (row / 2) * ").concat(f," + (col / 2)"),y=2;y<o-1;y++)h="int b".concat(y,", ")+h,d*=r[o-y-1],g="b".concat(y," * ").concat(d," + ")+g;var m="vec4 ".concat(e,"(").concat(h,") {\n      int index = ").concat(g,";\n      int texR = index / ").concat(p,";\n      int texC = index - texR * ").concat(p,";\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(p,", ").concat(l,");\n      return ").concat(a.texture2D,"(").concat(t,", uv);\n    }");return new s.GlslLibRoutine(m)},t.prototype.getUnpackedSamplerScalar=function(e,t,n){var r=a([n.width,n.height],2),o=r[0],i=r[1];if(1===o&&1===i){var u="\n          float ".concat(e,"() {\n            return sampleTexture(").concat(t,", halfCR);\n          }\n        ");return new s.GlslLibRoutine(u,["coordinates.sampleTexture"])}var c="\n        float ".concat(e,"() {\n          int offset_").concat(t," = coordsToOffset(TexCoords, ").concat(o,", ").concat(i,");\n          vec2 uv = uvFromFlat(").concat(o,", ").concat(i,", offset_").concat(t,");\n          return sampleTexture(").concat(t,", uv);\n        }\n      ");return new s.GlslLibRoutine(c,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])},t.prototype.getUnpackedSampler1D=function(e,t,n){var r=n.width,o=n.height;if(1===o&&1===r){var i="\n        float ".concat(e,"(int index) {\n          return sampleTexture(").concat(t,", halfCR);\n        }\n      ");return new s.GlslLibRoutine(i,["coordinates.sampleTexture"])}if(1===o){var a="\n          float ".concat(e,"(int index) {\n            vec2 uv = vec2((float(index) + 0.5) / ").concat(r,".0, 0.5);\n            return sampleTexture(").concat(t,", uv);\n          }\n        ");return new s.GlslLibRoutine(a,["coordinates.sampleTexture"])}if(1===r){var u="\n          float ".concat(e,"(int index) {\n            vec2 uv = vec2(0.5, (float(index) + 0.5) / ").concat(o,".0);\n            return sampleTexture(").concat(t,", uv);\n          }\n        ");return new s.GlslLibRoutine(u,["coordinates.sampleTexture"])}var c="\n        float ".concat(e,"(int index) {\n          vec2 uv = uvFromFlat(").concat(r,", ").concat(o,", index);\n          return sampleTexture(").concat(t,", uv);\n        }\n      ");return new s.GlslLibRoutine(c,["coordinates.uvFromFlat","coordinates.sampleTexture"])},t.prototype.getUnpackedSampler2D=function(e,t,n){var r=n.unpackedShape,o=[n.height,n.width];if(null!=o&&u.ArrayUtil.arraysEqual(r,o)){var i=o[1],a=o[0],c="\n          float ".concat(e,"(int row, int col) {\n            vec2 uv = (vec2(row, col) + halfCR) / vec2(").concat(i,".0, ").concat(a,".0);\n            return sampleTexture(").concat(t,", uv);\n          }\n        ");return new s.GlslLibRoutine(c,["coordinates.sampleTexture"])}var f=(0,l.squeezeShape)(r),d=f.newShape,h=f.keptDims,g=d;if(g.length<r.length){var y=(0,p.squeezeInputShape)(r,g),m=JSON.parse(JSON.stringify(n));m.unpackedShape=y;var v="\n          ".concat(this.getUnpackedSamplerFromInput(e,t,m).routineBody,"\n          float ").concat(e,"(int row, int col) {\n            return ").concat(e,"(").concat((0,p.getSqueezedParams)(["col","row"],h),");\n          }\n        ");return new s.GlslLibRoutine(v,["coordinates.sampleTexture"])}var b=o[1],w=o[0];if(1===w){var _="\n          float ".concat(e,"(int row, int col) {\n            int offset_").concat(t," = coordsToOffset(TexCoords, ").concat(b,", ").concat(w,");\n            float index = dot(vec3(row, col, offset_").concat(t,"), vec3(").concat(r[1],", 1, 1));\n            vec2 uv = vec2(0.5, (index + 0.5) / ").concat(b,".0);\n            return sampleTexture(").concat(t,", uv);\n          }\n        ");return new s.GlslLibRoutine(_,["coordinates.sampleTexture","coordinates.coordsToOffset"])}if(1===b){var x="\n          float ".concat(e,"(int row, int col) {\n            int offset_").concat(t," = coordsToOffset(TexCoords, ").concat(b,", ").concat(w,");\n            float index = dot(vec3(row, col, offset_").concat(t,"), vec3(").concat(r[1],", 1, 1));\n            vec2 uv = vec2((index + 0.5) / ").concat(w,".0, 0.5);\n            return sampleTexture(").concat(t,", uv);\n          }\n        ");return new s.GlslLibRoutine(x,["coordinates.sampleTexture","coordinates.coordsToOffset"])}var T="\n        float ".concat(e,"(int row, int col) {\n          int index = col * ").concat(r[1]," + row;\n          vec2 uv = uvFromFlat(").concat(b,", ").concat(w,", index);\n          return sampleTexture(").concat(t,", uv);\n        }\n      ");return new s.GlslLibRoutine(T,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])},t.prototype.getUnpackedSampler3D=function(e,t,n){var r=n.unpackedShape,o=r[1]*r[2],i=r[2],a=(0,l.squeezeShape)(r),u=a.newShape,c=a.keptDims,f=u;if(f.length<r.length){var d=(0,p.squeezeInputShape)(r,f),h=JSON.parse(JSON.stringify(n));h.unpackedShape=d;var g=this.getUnpackedSamplerFromInput(e,t,h),y=c.reverse(),m="\n          ".concat(g.routineBody,"\n          float ").concat(e,"(int batch, int row, int col) {\n            return ").concat(e,"(").concat((0,p.getSqueezedParams)(["batch","col","row"],y),");\n          }\n        ");return new s.GlslLibRoutine(m,g.dependencies)}var v=n.width,b=n.height,w="\n          float ".concat(e,"(int depth, int row, int col) {\n            // Explicitly use integer operations as dot() only works on floats.\n            int index = depth * ").concat(o," + col * ").concat(i," + row;\n            vec2 uv = uvFromFlat(").concat(v,", ").concat(b,", index);\n            return sampleTexture(").concat(t,", uv);\n          }\n      ");return new s.GlslLibRoutine(w,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])},t.prototype.getUnpackedSampler4D=function(e,t,n){var r=n.unpackedShape,o=r[3],i=r[2]*o,a=r[1]*i,u=n.width,c=n.height,l="\n        float ".concat(e,"(int row, int col, int depth, int depth2) {\n          int index = row * ").concat(a," + col * ").concat(i," +\n              depth2 * ").concat(o," + depth;\n          vec2 uv = uvFromFlat(").concat(u,", ").concat(c,", index);\n          return sampleTexture(").concat(t,", uv);\n        }\n      ");return new s.GlslLibRoutine(l,["coordinates.uvFromFlat","coordinates.sampleTexture"])},t.prototype.getUnpackedSampler5D=function(e,t,n){var r=n.unpackedShape,o=r[4],i=r[3]*o,a=r[2]*i,u=r[1]*a,c=(0,l.squeezeShape)(r),f=c.newShape,d=c.keptDims;if(f.length<r.length){var h=(0,p.squeezeInputShape)(r,f),g=JSON.parse(JSON.stringify(n));g.unpackedShape=h;var y="\n          ".concat(this.getUnpackedSamplerFromInput(e,t,g).routineBody,"\n          float ").concat(e,"(int row, int col, int depth, int depth2, int depth3) {\n            return ").concat(e,"(").concat((0,p.getSqueezedParams)(["row","col","depth","depth2","depth3"],d),");\n          }\n        ");return new s.GlslLibRoutine(y,["coordinates.sampleTexture","coordinates.uvFromFlat"])}var m=n.width,v=n.height,b="\n        float ".concat(e,"(int row, int col, int depth, int depth2, int depth3) {\n          int index = row * ").concat(u," + col * ").concat(a," + depth * ").concat(i," +\n          depth3 * ").concat(o," + depth2;\n          vec2 uv = uvFromFlat(").concat(m,", ").concat(v,", index);\n          return sampleTexture(").concat(t,", uv);\n        }\n      ");return new s.GlslLibRoutine(b,["coordinates.sampleTexture","coordinates.uvFromFlat"])},t.prototype.getUnpackedSampler6D=function(e,t,n){var r=n.unpackedShape,o=r[5],i=r[4]*o,a=r[3]*i,u=r[2]*a,c=r[1]*u,f=(0,l.squeezeShape)(r),d=f.newShape,h=f.keptDims;if(d.length<r.length){var g=(0,p.squeezeInputShape)(r,d),y=JSON.parse(JSON.stringify(n));y.unpackedShape=g;var m="\n            ".concat(this.getUnpackedSamplerFromInput(e,t,y).routineBody,"\n            float ").concat(e,"(int row, int col, int depth,\n              int depth2, int depth3, int depth4) {\n              return ").concat(e,"(").concat((0,p.getSqueezedParams)(["row","col","depth","depth2","depth3","depth4"],h),");\n            }\n          ");return new s.GlslLibRoutine(m,["coordinates.sampleTexture","coordinates.uvFromFlat"])}var v=n.width,b=n.height,w="\n          float ".concat(e,"(int row, int col, int depth,\n            int depth2, int depth3, int depth4) {\n            int index = row * ").concat(c," + col * ").concat(u," + depth * ").concat(a," +\n            depth2 * ").concat(i," + depth3 * ").concat(o," + depth4;\n            vec2 uv = uvFromFlat(").concat(v,", ").concat(b,", index);\n            return sampleTexture(").concat(t,", uv);\n          }\n        ");return new s.GlslLibRoutine(w,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])},t.prototype.toVec=function(){for(var e=this.context.outputTextureLayout,t=e.shape.length,n=e.strides,r=e.width,o=e.height,i=[],a=0;a<t-1;++a)i.push("\n        c[".concat(a,"] = offset / ").concat(n[a],";")),i.push("\n        offset -= c[".concat(a,"] * ").concat(n[a],";"));i.push("\n        c[".concat(t-1,"] = offset;"));var u="\n      void toVec(vec2 texCoords, out int c[".concat(t,"]) {\n        int offset = coordsToOffset(texCoords, ").concat(r,", ").concat(o,");\n        ").concat(i.join(""),"\n      }\n      void toVec(int offset, out int c[").concat(t,"]) {\n        ").concat(i.join(""),"\n      }\n    ");return{toVec:new s.GlslLibRoutine(u,["coordinates.coordsToOffset"])}},t.prototype.valueFrom=function(){var e=this,t={};return this.context.programInfo.inputNames.forEach((function(n,r){var o=e.context.inputTextureLayouts[r],i=(o.unpackedShape.length>0?o.unpackedShape:o.shape).length,a="_".concat(n);t[a]=new s.GlslLibRoutine(e.getValueFromSingle(n,i,o.width,o.height,!1),["shapeUtils.indicesToOffset".concat(a),"coordinates.offsetToCoords","fragcolor.getColorAsFloat"]),t[a+="_T"]=new s.GlslLibRoutine(e.getValueFromSingle(n,i,o.width,o.height,!0),["shapeUtils.indicesToOffset".concat(a),"coordinates.offsetToCoords","fragcolor.getColorAsFloat"])})),t},t.prototype.getValueFromSingle=function(e,t,n,r,o){var i="_".concat(e);o&&(i+="_T");var a=(0,c.getGlsl)(this.context.glContext.version);return"\n        float ".concat(i,"(int m[").concat(t,"]) {\n          int offset = indicesToOffset").concat(i,"(m);\n          vec2 coords = offsetToCoords(offset, ").concat(n,", ").concat(r,");\n          float value = getColorAsFloat(").concat(a.texture2D,"(").concat(e,", coords));\n          return value;\n        }\n        ")},t.prototype.getPackedValueFrom=function(e,t,n,r,o){var i="_".concat(e,"_Pack");o&&(i+="_T");var a=(0,c.getGlsl)(this.context.glContext.version);return"\n        vec4 ".concat(i,"(int m[").concat(t,"]) {\n          int offset = indicesToOffset_").concat(e,"(m);\n          vec2 coords = offsetToCoords(offset, ").concat(n,", ").concat(r,");\n          return ").concat(a.texture2D,"(").concat(e,", coords);\n        }\n        ")},t}(s.GlslLib);t.CoordsGlslLib=f},1997:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.TopologicalSortGlslRoutines=t.GlslLibRoutineNode=t.GlslLibRoutine=t.GlslLib=t.GlslContext=t.FunctionType=void 0,(n=t.FunctionType||(t.FunctionType={}))[n.ValueBased=0]="ValueBased",n[n.Positional=1]="Positional";t.GlslContext=function(e,t,n,r){this.glContext=e,this.programInfo=t,this.inputTextureLayouts=n,this.outputTextureLayout=r};t.GlslLib=function(e){this.context=e};t.GlslLibRoutine=function(e,t){this.routineBody=e,this.dependencies=t};var r=function(){function e(e,t,n){this.name=e,this.dependencies=n||[],t&&(this.routineBody=t)}return e.prototype.addDependency=function(e){e&&this.dependencies.push(e)},e}();t.GlslLibRoutineNode=r;var o=function(){function e(){}return e.returnOrderedNodes=function(e){if(!e||0===e.length)return[];if(1===e.length)return e;var t=new Set,n=new Set,r=new Array;return this.createOrderedNodes(e,t,n,r),r},e.createOrderedNodes=function(e,t,n,r){for(var o=0;o<e.length;++o)this.dfsTraverse(e[o],t,n,r)},e.dfsTraverse=function(e,t,n,r){if(e&&!n.has(e.name)){if(t.has(e.name))throw new Error("Cyclic dependency detected. Can't topologically sort routines needed for shader.");t.add(e.name);var o=e.dependencies;if(o&&o.length>0)for(var i=0;i<o.length;++i)this.dfsTraverse(o[i],t,n,r);r.push(e),n.add(e.name),t.delete(e.name)}},e}();t.TopologicalSortGlslRoutines=o},1371:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.EncodingGlslLib=void 0;var a=n(1997),u=function(e){function t(t){return e.call(this,t)||this}return o(t,e),t.prototype.getFunctions=function(){return i(i({},this.encodeFloat32()),this.decodeFloat32())},t.prototype.getCustomTypes=function(){return{}},t.prototype.encodeFloat32=function(){return{encode:new a.GlslLibRoutine("highp vec4 encode(highp float f) {\n        return vec4(f, 0.0, 0.0, 0.0);\n      }\n        ")}},t.prototype.decodeFloat32=function(){return{decode:new a.GlslLibRoutine("highp float decode(highp vec4 rgba) {\n        return rgba.r;\n      }\n        ")}},t.prototype.encodeUint8=function(){var e=t.isLittleEndian()?"rgba.rgba=rgba.abgr;":"";return{encode:new a.GlslLibRoutine("\n      highp vec4 encode(highp float f) {\n        highp float F = abs(f);\n        highp float Sign = step(0.0,-f);\n        highp float Exponent = floor(log2(F));\n        highp float Mantissa = (exp2(- Exponent) * F);\n        Exponent = floor(log2(F) + 127.0) + floor(log2(Mantissa));\n        highp vec4 rgba;\n        rgba[0] = 128.0 * Sign  + floor(Exponent*exp2(-1.0));\n        rgba[1] = 128.0 * mod(Exponent,2.0) + mod(floor(Mantissa*128.0),128.0);\n        rgba[2] = floor(mod(floor(Mantissa*exp2(23.0 -8.0)),exp2(8.0)));\n        rgba[3] = floor(exp2(23.0)*mod(Mantissa,exp2(-15.0)));\n        ".concat(e,"\n        rgba = rgba / 255.0; // values need to be normalized to [0,1]\n        return rgba;\n    }\n        "))}},t.prototype.decodeUint8=function(){var e=t.isLittleEndian()?"rgba.rgba=rgba.abgr;":"";return{decode:new a.GlslLibRoutine("\n        highp float decode(highp vec4 rgba) {\n          rgba = rgba * 255.0; // values need to be de-normalized from [0,1] to [0,255]\n          ".concat(e,"\n          highp float Sign = 1.0 - step(128.0,rgba[0])*2.0;\n          highp float Exponent = 2.0 * mod(rgba[0],128.0) + step(128.0,rgba[1]) - 127.0;\n          highp float Mantissa = mod(rgba[1],128.0)*65536.0 + rgba[2]*256.0 +rgba[3] + float(0x800000);\n          highp float Result =  Sign * exp2(Exponent) * (Mantissa * exp2(-23.0 ));\n          return Result;\n      }\n        "))}},t.isLittleEndian=function(){var e=new ArrayBuffer(4),t=new Uint32Array(e),n=new Uint8Array(e);if(t[0]=3735928559,239===n[0])return!0;if(222===n[0])return!1;throw new Error("unknown endianness")},t}(a.GlslLib);t.EncodingGlslLib=u},2691:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.FragColorGlslLib=void 0;var a=n(1997),u=n(6757),s=function(e){function t(t){return e.call(this,t)||this}return o(t,e),t.prototype.getFunctions=function(){return i(i({},this.setFragColor()),this.getColorAsFloat())},t.prototype.getCustomTypes=function(){return{}},t.prototype.setFragColor=function(){var e=(0,u.getGlsl)(this.context.glContext.version);return{setFragColor:new a.GlslLibRoutine("\n        void setFragColor(float value) {\n            ".concat(e.output," = encode(value);\n        }\n        "),["encoding.encode"])}},t.prototype.getColorAsFloat=function(){return{getColorAsFloat:new a.GlslLibRoutine("\n        float getColorAsFloat(vec4 color) {\n            return decode(color);\n        }\n        ",["encoding.decode"])}},t}(a.GlslLib);t.FragColorGlslLib=s},3878:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.replaceInlines=void 0;var n=/@inline[\s\n\r]+(\w+)[\s\n\r]+([0-9a-zA-Z_]+)\s*\(([^)]*)\)\s*{(([^}]|[\n\r])*)}/gm;t.replaceInlines=function(e){for(var t,r={};null!==(t=n.exec(e));){var o=t[3].split(",").map((function(e){var t=e.trim().split(" ");return t&&2===t.length?{type:t[0],name:t[1]}:null})).filter((function(e){return null!==e}));r[t[2]]={params:o,body:t[4]}}for(var i in r)for(var a="(\\w+)?\\s+([_0-9a-zA-Z]+)\\s+=\\s+__FUNC__\\((.*)\\)\\s*;".replace("__FUNC__",i),u=new RegExp(a,"gm"),s=function(){var n=t[1],o=t[2],a=t[3].split(","),u=n?"".concat(n," ").concat(o,";"):"",s=r[i].body,c="";r[i].params.forEach((function(e,t){e&&(c+="".concat(e.type," ").concat(e.name," = ").concat(a[t],";\n"))})),s=(s="".concat(c,"\n ").concat(s)).replace("return","".concat(o," = "));var l="\n      ".concat(u,"\n      {\n        ").concat(s,"\n      }\n      ");e=e.replace(t[0],l)};null!==(t=u.exec(e));)s();return e=e.replace(n,"")}},8897:function(e,t,n){"use strict";var r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.GlslPreprocessor=void 0;var o=n(1997),i=n(3878),a=n(1248),u=n(6757),s=function(){function e(e,t,n,r){var i=this;this.libs={},this.glslLibRoutineDependencyGraph={},this.context=new o.GlslContext(e,t,n,r),Object.keys(a.glslRegistry).forEach((function(e){var t=new a.glslRegistry[e](i.context);i.libs[e]=t}));var u=this.glslLibRoutineDependencyGraph;for(var s in this.libs){var c=this.libs[s].getFunctions();for(var l in c){var p=s+"."+l,f=void 0;u[p]?(f=u[p]).routineBody=c[l].routineBody:(f=new o.GlslLibRoutineNode(p,c[l].routineBody),u[p]=f);var d=c[l].dependencies;if(d)for(var h=0;h<d.length;++h)if(u[d[h]])f.addDependency(u[d[h]]);else{var g=new o.GlslLibRoutineNode(d[h]);u[d[h]]=g,f.addDependency(g)}}}}return e.prototype.preprocess=function(){var e=this.context.programInfo,t=e.shaderSource;return this.context.programInfo.hasMain||(t="".concat(t,"\n      ").concat((0,u.getDefaultFragShaderMain)(this.context.glContext.version,this.context.outputTextureLayout.shape.length))),t=(0,i.replaceInlines)(t),"".concat((0,u.getFragShaderPreamble)(this.context.glContext.version),"\n    ").concat(this.getUniforms(e.inputNames,e.variables),"\n    ").concat(this.getImports(t),"\n    ").concat(t)},e.prototype.getImports=function(e){var t=this.selectGlslLibRoutinesToBeIncluded(e);if(0===t.length)return"";for(var n="",r=0;r<t.length;++r){if(!t[r].routineBody)throw new Error("Missing body for the Glsl Library routine: ".concat(t[r].name));n+=t[r].routineBody+"\n"}return n},e.prototype.selectGlslLibRoutinesToBeIncluded=function(e){var t=this,n=[];return Object.keys(this.glslLibRoutineDependencyGraph).forEach((function(r){var o=r.split(".")[1];-1!==e.indexOf(o)&&n.push(t.glslLibRoutineDependencyGraph[r])})),o.TopologicalSortGlslRoutines.returnOrderedNodes(n)},e.prototype.getUniforms=function(e,t){var n,o,i,a,u=[];if(e)try{for(var s=r(e),c=s.next();!c.done;c=s.next()){var l=c.value;u.push("uniform sampler2D ".concat(l,";"))}}catch(e){n={error:e}}finally{try{c&&!c.done&&(o=s.return)&&o.call(s)}finally{if(n)throw n.error}}if(t)try{for(var p=r(t),f=p.next();!f.done;f=p.next()){var d=f.value;u.push("uniform ".concat(d.type," ").concat(d.name).concat(d.arrayLength?"[".concat(d.arrayLength,"]"):"",";"))}}catch(e){i={error:e}}finally{try{f&&!f.done&&(a=p.return)&&a.call(p)}finally{if(i)throw i.error}}return u.join("\n")},e}();t.GlslPreprocessor=s},1248:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.glslRegistry=void 0;var r=n(6859),o=n(1371),i=n(2691),a=n(9183),u=n(9314);t.glslRegistry={encoding:o.EncodingGlslLib,fragcolor:i.FragColorGlslLib,vec:u.VecGlslLib,shapeUtils:a.ShapeUtilsGlslLib,coordinates:r.CoordsGlslLib}},9183:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.ShapeUtilsGlslLib=void 0;var a=n(1997),u=function(e){function t(t){return e.call(this,t)||this}return o(t,e),t.prototype.getFunctions=function(){return i(i(i(i(i({},this.bcastIndex()),this.bcastMatmulIndex()),this.offsetToIndices()),this.indicesToOffset()),this.incrementIndices())},t.prototype.getCustomTypes=function(){return{}},t.prototype.bcastIndex=function(){var e=this,t=this.context.outputTextureLayout.shape.length,n={};return this.context.programInfo.inputNames.forEach((function(r,o){var i=e.context.inputTextureLayouts[o].unpackedShape;if(i.length<=t){for(var u=i.length,s=t-u,c="bcastIndices_".concat(r),l="",p=0;p<u;++p)l+="\n          realIndices[".concat(p,"] = int( mod(float(bcastedIndices[").concat(s+p,"]), ").concat(i[p],".0) );\n          ");var f="\n        void ".concat(c," (int bcastedIndices[").concat(t,"], out int realIndices[").concat(u,"]) {\n          ").concat(l,"\n        }\n        ");n[c]=new a.GlslLibRoutine(f)}})),n},t.prototype.bcastMatmulIndex=function(){var e=this,t=this.context.outputTextureLayout.shape.length,n={};return this.context.programInfo.inputNames.forEach((function(r,o){var i=e.context.inputTextureLayouts[o].shape;if(!(i.length<2||i.length>t)){for(var u=i.length,s=t-u,c="bcastMatmulIndices_".concat(r),l="",p=0;p<u-2;++p)l+="\n          realIndices[".concat(p,"] = int( mod(float(bcastedIndices[").concat(s+p,"]), ").concat(i[p],".0) );\n          ");var f="\n        void ".concat(c,"(int bcastedIndices[").concat(t,"], out int realIndices[").concat(u,"]) {\n          ").concat(l,"\n          realIndices[").concat(u-1,"] = bcastedIndices[").concat(t-1,"];\n          realIndices[").concat(u-2,"] = bcastedIndices[").concat(t-2,"];\n        }\n        ");n[c]=new a.GlslLibRoutine(f)}})),n},t.prototype.indicesToOffset=function(){var e=this,n={};return this.context.programInfo.inputNames.forEach((function(r,o){var i=e.context.inputTextureLayouts[o].shape,u=e.context.inputTextureLayouts[o].strides,s=i.length,c="indicesToOffset_".concat(r);n[c]=new a.GlslLibRoutine(t.indexToOffsetSingle(c,s,u)),c="indicesToOffset_".concat(r,"_T"),n[c]=new a.GlslLibRoutine(t.indexToOffsetSingle(c,s,u.slice().reverse()))})),n},t.indexToOffsetSingle=function(e,t,n){for(var r="",o=t-1;o>=0;--o)r+="\n        offset += indices[".concat(o,"] * ").concat(n[o],";\n        ");return"\n      int ".concat(e,"(int indices[").concat(t,"]) {\n        int offset = 0;\n        ").concat(r,"\n        return offset;\n      }\n      ")},t.prototype.offsetToIndices=function(){var e=this,n={};return this.context.programInfo.inputNames.forEach((function(r,o){var i=e.context.inputTextureLayouts[o].shape,u=e.context.inputTextureLayouts[o].strides,s=i.length,c="offsetToIndices_".concat(r);n[c]=new a.GlslLibRoutine(t.offsetToIndicesSingle(c,s,u)),c="offsetToIndices_".concat(r,"_T"),n[c]=new a.GlslLibRoutine(t.offsetToIndicesSingle(c,s,u.slice().reverse()))})),n},t.offsetToIndicesSingle=function(e,t,n){for(var r=[],o=0;o<t-1;++o)r.push("\n      indices[".concat(o,"] = offset / ").concat(n[o],";")),r.push("\n        offset -= indices[".concat(o,"] * ").concat(n[o],";"));return r.push("\n      indices[".concat(t-1,"] = offset;")),"\n      void ".concat(e,"(int offset, out int indices[").concat(t,"]) {\n        ").concat(r.join(""),"\n      }\n      ")},t.prototype.incrementIndices=function(){var e=this,t={};return this.context.programInfo.inputNames.forEach((function(n,r){for(var o=e.context.inputTextureLayouts[r].shape,i=o.length,u="incrementIndices_".concat(n),s="",c=0;c<i;++c)s+="\n        shape[".concat(c,"] = ").concat(o[c],";");var l="\n        void ".concat(u,"(int axis, out int indices[").concat(i,"]) {\n          int shape[").concat(i,"];\n          ").concat(s,";\n          for(int i = ").concat(i," -1 ; i >= 0; --i) {\n            if(i > axis) continue;\n            indices[i] += 1;\n            if(indices[i] < shape[i]) {\n              break;\n            }\n            indices[i] = 0;\n          }\n        }\n        ");t[u]=new a.GlslLibRoutine(l)})),t},t}(a.GlslLib);t.ShapeUtilsGlslLib=u},6757:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDefaultFragShaderMain=t.getFragShaderPreamble=t.getVertexShaderSource=t.getGlsl=void 0;var n={version:"",attribute:"attribute",varyingVertex:"varying",varyingFrag:"varying",texture2D:"texture2D",output:"gl_FragColor",outputDeclaration:""},r={version:"#version 300 es",attribute:"in",varyingVertex:"out",varyingFrag:"in",texture2D:"texture",output:"outputColor",outputDeclaration:"out vec4 outputColor;"};function o(e){return 1===e?n:r}t.getGlsl=o,t.getVertexShaderSource=function(e){var t=o(e);return"".concat(t.version,"\n      precision highp float;\n      ").concat(t.attribute," vec3 position;\n      ").concat(t.attribute," vec2 textureCoord;\n\n      ").concat(t.varyingVertex," vec2 TexCoords;\n\n      void main()\n      {\n          gl_Position = vec4(position, 1.0);\n          TexCoords = textureCoord;\n      }")},t.getFragShaderPreamble=function(e){var t=o(e);return"".concat(t.version,"\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    ").concat(t.varyingFrag," vec2 TexCoords;\n    ").concat(t.outputDeclaration,"\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    // Custom vector types to handle higher dimenalities.\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    ")},t.getDefaultFragShaderMain=function(e,t){var n=o(e);return"\n  void main() {\n    int indices[".concat(t,"];\n    toVec(TexCoords, indices);\n    vec4 result = vec4(process(indices));\n    ").concat(n.output," = result;\n  }\n  ")}},9314:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.VecGlslLib=void 0;var a=n(1997),u=function(e){function t(t){return e.call(this,t)||this}return o(t,e),t.prototype.getCustomTypes=function(){return{}},t.prototype.getFunctions=function(){return i(i(i(i({},this.binaryVecFunctions()),this.copyVec()),this.setVecItem()),this.getVecItem())},t.prototype.binaryVecFunctions=function(){var e=this.context.outputTextureLayout.shape.length,t={add:"+=",sub:"-=",mul:"*=",div:"/="},n={};for(var r in t){for(var o="".concat(r,"Vec"),i="",u=0;u<e;++u)i+="\n          dest[".concat(u,"] ").concat(t[r]," src[").concat(u,"];\n          ");var s="\n        void ".concat(o,"(int src[").concat(e,"], out int dest[").concat(e,"]) {\n          ").concat(i,"\n        }\n        ");n[o]=new a.GlslLibRoutine(s)}return n},t.prototype.copyVec=function(){for(var e=this.context.outputTextureLayout.shape.length,t="",n=0;n<e;++n)t+="\n        dest[".concat(n,"] = src[").concat(n,"];\n        ");var r="\n      void copyVec(int src[".concat(e,"], out int dest[").concat(e,"]) {\n        ").concat(t,"\n      }\n      ");return{copyVec:new a.GlslLibRoutine(r)}},t.prototype.setVecItem=function(){for(var e=this.context.outputTextureLayout.shape.length,t="\n        if(index < 0)\n            index =".concat(e," + index;\n        if (index == 0)\n            m[0] = value;\n        "),n=1;n<e-1;++n)t+="\n        else if (index == ".concat(n,")\n            m[").concat(n,"] = value;\n            ");t+="\n        else\n            m[".concat(e-1,"] = value;\n        ");var r="\n      void setVecItem(out int m[".concat(e,"], int index, int value) {\n        ").concat(t,"\n      }\n        ");return{setVecItem:new a.GlslLibRoutine(r)}},t.prototype.getVecItem=function(){for(var e=this.context.outputTextureLayout.shape.length,t="\n        if(index < 0)\n            index = ".concat(e," + index;\n        if (index == 0)\n            return m[0];\n      "),n=1;n<e-1;++n)t+="\n        else if (index == ".concat(n,")\n            return m[").concat(n,"];\n      ");t+="\n        else\n            return m[".concat(e-1,"];\n        ");var r="\n      int getVecItem(int m[".concat(e,"], int index) {\n        ").concat(t,"\n      }\n    ");return{getVecItem:new a.GlslLibRoutine(r)}},t}(a.GlslLib);t.VecGlslLib=u},7860:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function u(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,u)}s((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(s){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,r=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){a=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){a.label=u[1];break}if(6===u[0]&&a.label<o[1]){a.label=o[1],o=u;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(u);break}o[2]&&a.ops.pop(),a.trys.pop();continue}u=t.call(e,a)}catch(e){u=[6,e],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.WebGLInferenceHandler=void 0;var a=n(1315),u=n(9240),s=n(7273),c=n(9),l=n(7379),p=n(2488),f=n(540),d=n(3314),h=n(5639),g=function(){function e(e){this.session=e,this.packedTextureDataCache=new Map,this.unpackedTextureDataCache=new Map}return e.prototype.calculateTextureWidthAndHeight=function(e,t){return(0,d.calculateTextureWidthAndHeight)(this.session.layoutStrategy,e,t)},e.prototype.executeProgram=function(e,t){if(t.length<e.inputNames.length)throw new Error("Input size mustn't be less than ".concat(e.inputNames.length,"."));if(e.inputNames.length!==e.inputTypes.length)throw new Error("input names size does not match input types");for(var n=[],r=0;r<e.inputNames.length;++r)n[r]=this.getOrCreateTextureData(t[r],e.inputTypes[r]);var o=function(e,t){var n=t.map((function(e){return"".concat(e.unpackedShape.join(","),";").concat(e.width,"x").concat(e.height)})).join("_"),r=e.name;return e.cacheHint&&(r+="["+e.cacheHint+"]"),r+":"+n}(e,n),i=this.session.programManager.getArtifact(o),a=i?i.programInfo:"function"==typeof e.get?e.get():e,u=(0,d.createTextureLayoutFromTextureType)(this.session.layoutStrategy,a.output.dims,a.output.textureType),s=this.createTextureData(u,a.output.type);return i||(i=this.session.programManager.build(a,n,s),this.session.programManager.setArtifact(o,i)),this.runProgram(i,n,s),s},e.prototype.run=function(e,t){return this.executeProgram(e,t).tensor},e.prototype.runProgram=function(e,t,n){for(var r=0;r<t.length;++r)if(!!t[r].isPacked!=(e.programInfo.inputTypes[r]===h.TextureType.packed))throw new Error("input[".concat(r,"] property packed inconsistent"));if(!!n.isPacked!=(e.programInfo.output.textureType===h.TextureType.packed))throw new Error("output property packed inconsistent");this.session.programManager.run(e,t,n)},e.prototype.getOrCreateTextureData=function(e,t){var n=this.getTextureData(e.dataId,t===h.TextureType.packed);if(!n&&(n=this.getTextureData(e.dataId,t!==h.TextureType.packed)))return t===h.TextureType.packed?this.pack(n):this.unpack(n);if(!n){var r=(0,d.createTextureLayoutFromTextureType)(this.session.layoutStrategy,e.dims,t);if(t===h.TextureType.packedLastDimension){var o=e.dims;if(4===o.length){var i=[o[0],Math.ceil(o[1]*o[2]*o[3]/4)],a=(0,d.createTextureLayoutFromTextureType)(this.session.layoutStrategy,i,t),u=e.numberData;if(o[1]*o[2]*o[3]%4!=0){var s=o[0],c=o[1]*o[2]*o[3],l=4*Math.ceil(1*c/4);u=new Float32Array(s*l);for(var p=0;p<s;++p){var f=p*c,g=p*l+p%1*c;u.set(e.numberData.subarray(f,f+c),g)}}return this.createTextureData(a,e.type,u,e,1)}}if(t===h.TextureType.packed){var y=(0,d.createTextureLayoutFromShape)(this.session.layoutStrategy,e.dims,1,[],{reverseWH:!0}),m=this.createTextureData(y,e.type,e.numberData,e,1);n=this.pack(m)}else n=this.createTextureData(r,e.type,e.numberData,e,1)}return n},e.prototype.createTextureDataFromLayoutBindTensor=function(e,t,n,r){return this.createTextureData(e,t,n,r,1)},e.prototype.createTextureData=function(e,t,n,r,o){a.Logger.verbose("InferenceHandler","Creating TextureData: layout:[".concat(JSON.stringify(e),"]"));var i=this.session.textureManager.createTextureFromLayout(t,e,n,o);return this.createTextureDataFromTexture(e,t,i,r)},e.prototype.reshapeUnpacked=function(e,t){var n=this.getOrCreateTextureData(e,h.TextureType.unpacked),r={channels:n.channels,height:n.height,width:n.width,shape:0!==t.length?t:[1],strides:s.ShapeUtil.computeStrides(t),unpackedShape:t};return this.createTextureDataFromTexture(r,e.type,n.texture).tensor},e.prototype.reshapePacked=function(e,t){var n=this.getOrCreateTextureData(e,h.TextureType.packed);if((0,l.isReshapeCheap)(e.dims,t)){var r={channels:n.channels,height:n.height,width:n.width,shape:0!==t.length?t:[1],strides:s.ShapeUtil.computeStrides(t),unpackedShape:t,isPacked:!0};return this.createTextureDataFromTexture(r,e.type,n.texture).tensor}var o=(0,l.processDims3D)(e.dims),i=(0,l.processDims3D)(t),a=this.reshapePacked(e,o),u=this.run((0,l.createPackedReshape3DProgramInfoLoader)(this,a,i),[a]);return this.reshapePacked(u,t)},e.prototype.cast=function(e,t){var n=this.getOrCreateTextureData(e,h.TextureType.unpacked);return this.createTextureDataFromTexture(n,t,n.texture).tensor},e.prototype.createTextureDataFromTexture=function(e,t,n,a,s){var c=this,l=r(r({},e),{tensor:a||new u.Tensor(e.unpackedShape,t,(function(e){return c.readTexture(l)}),(function(e){return o(c,void 0,void 0,(function(){return i(this,(function(e){return[2,this.readTextureAsync(l)]}))}))}),void 0,s),texture:n});return this.setTextureData(l.tensor.dataId,l,e.isPacked),l},e.prototype.getTextureData=function(e,t){return void 0===t&&(t=!1),this.session.isInitializer(e)?this.session.getTextureData(e,t):t?this.packedTextureDataCache.get(e):this.unpackedTextureDataCache.get(e)},e.prototype.setTextureData=function(e,t,n){void 0===n&&(n=!1),this.session.isInitializer(e)?this.session.setTextureData(e,t,n):(n?this.packedTextureDataCache:this.unpackedTextureDataCache).set(e,t)},e.prototype.isTextureLayoutCached=function(e,t){return void 0===t&&(t=!1),!!this.getTextureData(e.dataId,t)},e.prototype.dispose=function(){var e=this;this.session.textureManager.clearActiveTextures(),this.packedTextureDataCache.forEach((function(t){return e.session.textureManager.releaseTexture(t)})),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache.forEach((function(t){return e.session.textureManager.releaseTexture(t)})),this.unpackedTextureDataCache=new Map},e.prototype.readTexture=function(e){return e.isPacked?this.readTexture(this.unpack(e)):this.session.backend.glContext.isFloat32DownloadSupported?this.session.textureManager.readTexture(e,e.tensor.type,e.channels):this.session.textureManager.readUint8TextureAsFloat((0,p.encodeAsUint8)(this,e))},e.prototype.readTextureAsync=function(e){return o(this,void 0,void 0,(function(){return i(this,(function(t){return e.isPacked?[2,this.readTextureAsync(this.unpack(e))]:this.session.backend.glContext.isFloat32DownloadSupported?[2,this.session.textureManager.readTextureAsync(e,e.tensor.type,e.channels)]:[2,this.session.textureManager.readUint8TextureAsFloat((0,p.encodeAsUint8)(this,e))]}))}))},e.prototype.pack=function(e){return this.executeProgram((0,c.createPackProgramInfoLoader)(this,e.tensor),[e.tensor])},e.prototype.unpack=function(e){return this.executeProgram((0,f.createUnpackProgramInfoLoader)(this,e.tensor),[e.tensor])},e}();t.WebGLInferenceHandler=g},4110:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.WEBGL_OP_RESOLVE_RULES=void 0;var a=n(8817),u=i(n(5194)),s=n(4752),c=n(6668),l=n(9754),p=n(5042),f=n(6742),d=n(4125),h=n(6149),g=n(5378),y=n(6981),m=n(7413),v=n(7006),b=n(8276),w=n(5565),_=n(2834),x=n(1010),T=n(8126),S=n(2801),P=n(565),A=n(2444),O=n(815),I=n(564),E=n(5416),C=n(1240),D=n(5944),k=n(5707),R=i(n(9087)),M=n(7862),j=n(3980);t.WEBGL_OP_RESOLVE_RULES=[["Abs","","6+",R.abs],["Acos","","7+",R.acos],["Add","","7+",u.add],["And","","7+",u.and],["Asin","","7+",R.asin],["Atan","","7+",R.atan],["AveragePool","","7+",_.averagePool,_.parseAveragePoolAttributes],["BatchNormalization","","7+",a.batchNormalization,a.parseBatchNormalizationAttributes],["Cast","","6+",s.cast,s.parseCastAttributes],["Ceil","","6+",R.ceil],["Clip","","6-10",R.clip,R.parseClipAttributes],["Clip","","11+",R.clipV11],["Concat","","4+",c.concat,c.parseConcatAttributes],["Conv","","1+",l.conv,l.parseConvAttributes],["ConvTranspose","","1+",p.convTranspose,p.parseConvTransposeAttributes],["Cos","","7+",R.cos],["Div","","7+",u.div],["Dropout","","7+",R.identity],["DepthToSpace","","1+",f.depthToSpace,f.parseDepthToSpaceAttributes],["Equal","","7+",u.equal],["Elu","","6+",R.elu,R.parseEluAttributes],["Exp","","6+",R.exp],["Flatten","","1+",d.flatten,d.parseFlattenAttributes],["Floor","","6+",R.floor],["FusedConv","com.microsoft","1+",l.conv,l.parseConvAttributes],["Gather","","1+",h.gather,h.parseGatherAttributes],["Gemm","","7-10",g.gemm,g.parseGemmAttributesV7],["Gemm","","11+",g.gemm,g.parseGemmAttributesV11],["GlobalAveragePool","","1+",_.globalAveragePool,_.parseGlobalAveragePoolAttributes],["GlobalMaxPool","","1+",_.globalMaxPool],["Greater","","7+",u.greater],["Identity","","1+",R.identity],["ImageScaler","","1+",y.imageScaler,y.parseImageScalerAttributes],["InstanceNormalization","","6+",m.instanceNormalization,m.parseInstanceNormalizationAttributes],["LeakyRelu","","6+",R.leakyRelu,R.parseLeakyReluAttributes],["Less","","7+",u.less],["LRN","","1+",v.lrn,v.parseLrnAttributes],["Log","","6+",R.log],["MatMul","","1+",b.matMul,b.parseMatMulAttributes],["MaxPool","","1+",_.maxPool,_.parseMaxPoolAttributes],["Mul","","7+",u.mul],["Neg","","6+",R.neg],["Not","","1+",R.not],["Or","","7+",u.or],["Pad","","2-10",w.padV2,w.parsePadAttributesV2],["Pad","","11+",w.padV11,w.parsePadAttributesV11],["Pow","","7+",u.pow],["PRelu","","7+",u.pRelu],["ReduceLogSum","","1+",x.reduceLogSum,x.parseReduceAttributes],["ReduceMax","","1+",x.reduceMax,x.parseReduceAttributes],["ReduceMean","","1+",x.reduceMean,x.parseReduceAttributes],["ReduceMin","","1+",x.reduceMin,x.parseReduceAttributes],["ReduceProd","","1+",x.reduceProd,x.parseReduceAttributes],["ReduceSum","","1-12",x.reduceSum,x.parseReduceAttributes],["ReduceSumSquare","","1+",x.reduceLogSumSquare,x.parseReduceAttributes],["Relu","","6+",R.relu],["Reshape","","5+",T.reshape],["Resize","","10",S.resize,S.parseResizeAttributesV10],["Resize","","11+",S.resize,S.parseResizeAttributesV11],["Shape","","1+",P.shape],["Sigmoid","","6+",R.sigmoid],["Sin","","7+",R.sin],["Slice","","10+",A.sliceV10],["Slice","","1-9",A.slice,A.parseSliceAttributes],["Softmax","","1-12",O.softmax,O.parseSoftmaxAttributes],["Softmax","","13+",O.softmaxV13,O.parseSoftmaxAttributesV13],["Split","","2-12",I.split,I.parseSplitAttributes],["Sqrt","","6+",R.sqrt],["Squeeze","","1-12",E.squeeze,E.parseSqueezeAttributes],["Squeeze","","13+",E.squeezeV13],["Sub","","7+",u.sub],["Sum","","6+",C.sum],["Tan","","7+",R.tan],["Tanh","","6+",R.tanh],["Tile","","6+",D.tile],["Transpose","","1+",k.transpose,k.parseTransposeAttributes],["Upsample","","7-8",j.upsample,j.parseUpsampleAttributesV7],["Upsample","","9",j.upsample,j.parseUpsampleAttributesV9],["Unsqueeze","","1-12",M.unsqueeze,M.parseUnsqueezeAttributes],["Unsqueeze","","13+",M.unsqueezeV13],["Xor","","7+",u.xor]]},8817:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)},o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};Object.defineProperty(t,"__esModule",{value:!0}),t.parseBatchNormalizationAttributes=t.batchNormalization=void 0;var i=n(4910),a=n(6757),u=n(5639),s={name:"BatchNormalization",inputNames:["A","Scale","B","Mean","Variance"],inputTypes:[u.TextureType.unpacked,u.TextureType.unpacked,u.TextureType.unpacked,u.TextureType.unpacked,u.TextureType.unpacked]};t.batchNormalization=function(e,t,n){return l(t),[e.run(r(r({},s),{cacheHint:n.cacheKey,get:function(){return c(e,t,n)}}),t)]},t.parseBatchNormalizationAttributes=function(e){var t=e.attributes.getFloat("epsilon",1e-5),n=e.attributes.getFloat("momentum",.9),r=e.attributes.getInt("spatial",1);return(0,i.createAttributeWithCacheKey)({epsilon:t,momentum:n,spatial:r})};var c=function(e,t,n){var i=(0,a.getGlsl)(e.session.backend.glContext.version),c=t[0].dims.length,l=o(e.calculateTextureWidthAndHeight(t[1].dims,u.TextureType.unpacked),2),p=l[0],f=l[1],d="\n  float process(int[".concat(c,"] indices) {\n    vec2 position = offsetToCoords(indices[1], ").concat(p,", ").concat(f,");\n    float scale = getColorAsFloat(").concat(i.texture2D,"(Scale, position));\n    float mean = getColorAsFloat(").concat(i.texture2D,"(Mean, position));\n    float variance = getColorAsFloat(").concat(i.texture2D,"(Variance, position));\n    float b = getColorAsFloat(").concat(i.texture2D,"(B, position));\n\n    return scale * ( (_A(indices) - mean) / sqrt(variance + float(").concat(n.epsilon,")) ) + b;\n  }");return r(r({},s),{output:{dims:t[0].dims,type:t[0].type,textureType:u.TextureType.unpacked},shaderSource:d})},l=function(e){if(!e||5!==e.length)throw new Error("BatchNormalization requires 5 inputs.");var t=e[0],n=e[1],r=e[2],o=e[3],i=e[4];if(t.dims.length<3||1!==n.dims.length||1!==r.dims.length||1!==o.dims.length||1!==i.dims.length)throw new Error("invalid input shape.");if(n.dims[0]!==t.dims[1]||r.dims[0]!==t.dims[1]||o.dims[0]!==t.dims[1]||i.dims[0]!==t.dims[1])throw new Error("invalid input shape.");if("float32"!==t.type&&"float64"!==t.type||"float32"!==n.type&&"float64"!==n.type||"float32"!==r.type&&"float64"!==r.type||"float32"!==o.type&&"float64"!==o.type||"float32"!==i.type&&"float64"!==i.type)throw new Error("invalid input tensor types.")}},5194:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.xor=t.sub=t.pRelu=t.pow=t.or=t.mul=t.less=t.greater=t.equal=t.div=t.and=t.add=t.glslPRelu=t.glslPow=t.glslXor=t.glslOr=t.glslAnd=t.glslLess=t.glslGreater=t.glslEqual=t.glslSub=t.glslMul=t.glslDiv=t.glslAdd=void 0;var r=n(7273),o=n(1997),i=n(6757),a=n(5639);function u(){var e="add_";return{body:"\n  float ".concat(e,"(float a, float b) {\n    return a + b;\n  }\n  vec4 ").concat(e,"(vec4 v1, vec4 v2) {\n    return v1 + v2;\n  }\n  "),name:e,type:o.FunctionType.ValueBased}}function s(){var e="div_";return{body:"\n  float ".concat(e,"(float a, float b) {\n    return a / b;\n  }\n  vec4 ").concat(e,"(vec4 v1, vec4 v2) {\n    return v1 / v2;\n  }\n  "),name:e,type:o.FunctionType.ValueBased}}function c(){var e="mul_";return{body:"\n  float ".concat(e,"(float a, float b) {\n    return a * b;\n  }\n  vec4 ").concat(e,"(vec4 v1, vec4 v2) {\n    return v1 * v2;\n  }\n  "),name:e,type:o.FunctionType.ValueBased}}function l(){var e="sub_";return{body:"\n  float ".concat(e,"(float a, float b) {\n    return a - b;\n  }\n  vec4 ").concat(e,"(vec4 v1, vec4 v2) {\n    return v1 - v2;\n  }\n  "),name:e,type:o.FunctionType.ValueBased}}function p(){var e="equal_";return{body:"\n  float ".concat(e,"(float a, float b) {\n    return float(a == b);\n  }\n  vec4 ").concat(e,"(vec4 v1, vec4 v2) {\n    return vec4(equal(v1, v2));\n  }\n  "),name:e,type:o.FunctionType.ValueBased}}function f(){var e="greater_";return{body:"\n  float ".concat(e,"(float a, float b) {\n    return float(a > b);\n  }\n  vec4 ").concat(e,"(vec4 v1, vec4 v2) {\n    return vec4( v1.r > v2.r ,\n      v1.g > v2.g,\n      v1.b > v2.b,\n      v1.a > v2.a );\n  }\n  "),name:e,type:o.FunctionType.ValueBased}}function d(){var e="less_";return{body:"\n  float ".concat(e,"(float a, float b) {\n    return float(a < b);\n  }\n  vec4 ").concat(e,"(vec4 v1, vec4 v2) {\n    return vec4( v1.r < v2.r ,\n                v1.g < v2.g,\n                v1.b < v2.b,\n                v1.a < v2.a );\n  }\n  "),name:e,type:o.FunctionType.ValueBased}}function h(){var e="and_";return{body:"\n  float ".concat(e,"(float a, float b) {\n    return float( bool(a) && bool(b) );\n  }\n  vec4 ").concat(e,"(vec4 v1, vec4 v2) {\n    bvec4 b1 = bvec4(v1);\n    bvec4 b2 = bvec4(v2);\n    return vec4( b1.r && b2.r ,\n                b1.g && b2.g,\n                b1.b && b2.b,\n                b1.a && b2.a );\n  }\n  "),name:e,type:o.FunctionType.ValueBased}}function g(){var e="or_";return{body:"\n  float ".concat(e,"(float a, float b) {\n    return float( bool(a) || bool(b) );\n  }\n  vec4 ").concat(e,"(vec4 v1, vec4 v2) {\n    bvec4 b1 = bvec4(v1);\n    bvec4 b2 = bvec4(v2);\n    return vec4( b1.r || b2.r ,\n                b1.g || b2.g,\n                b1.b || b2.b,\n                b1.a || b2.a );\n  }\n  "),name:e,type:o.FunctionType.ValueBased}}function y(){var e="xor_";return{body:"\n  float ".concat(e,"(float a, float b) {\n    return float( bool(a) ^^ bool(b) );\n  }\n  vec4 ").concat(e,"(vec4 v1, vec4 v2) {\n    bvec4 b1 = bvec4(v1);\n    bvec4 b2 = bvec4(v2);\n    return vec4( b1.r ^^ b2.r ,\n                b1.g ^^ b2.g,\n                b1.b ^^ b2.b,\n                b1.a ^^ b2.a );\n  }\n  "),name:e,type:o.FunctionType.ValueBased}}function m(){return function(e){var t="".concat(e,"_");return{body:"\n  float ".concat(t,"(float a, float b) {\n    return ").concat(e,"(a, b);\n  }\n  vec4 ").concat(t,"(vec4 v1, vec4 v2) {\n    return ").concat(e,"(v1, v2);\n  }\n  "),name:t,type:o.FunctionType.ValueBased}}("pow")}function v(){var e="prelu_";return{body:"\n  float ".concat(e,"(float a, float b) {\n    return a < 0.0 ? a * b: a;\n  }\n  vec4 ").concat(e,"(vec4 v1, vec4 v2) {\n    return vec4(\n      v1.r < 0.0 ? v1.r * v2.r: v1.r,\n      v1.g < 0.0 ? v1.g * v2.g: v1.g,\n      v1.b < 0.0 ? v1.b * v2.b: v1.b,\n      v1.a < 0.0 ? v1.a * v2.a: v1.a\n      );\n  }\n  "),name:e,type:o.FunctionType.ValueBased}}t.glslAdd=u,t.glslDiv=s,t.glslMul=c,t.glslSub=l,t.glslEqual=p,t.glslGreater=f,t.glslLess=d,t.glslAnd=h,t.glslOr=g,t.glslXor=y,t.glslPow=m,t.glslPRelu=v;var b=function(e,t,n,r,o){void 0===r&&(r=t[0].type);var i=e.session.pack?a.TextureType.packed:a.TextureType.unpacked;return{name:n.name,inputNames:["A","B"],inputTypes:[i,i],cacheHint:o,get:function(){return w(e,t,n,r)}}},w=function(e,t,n,o){void 0===o&&(o=t[0].type);var u=e.session.pack?a.TextureType.packed:a.TextureType.unpacked,s=!r.ShapeUtil.areEqual(t[0].dims,t[1].dims),c=t[0].dims,l=e.session.pack;if(s){var p=r.BroadcastUtil.calcShape(t[0].dims,t[1].dims,!1);if(!p)throw new Error("Can't perform binary op on the given tensors");var f=(c=p).length,d=0!==t[0].dims.length?t[0].dims.length:1,h=0!==t[1].dims.length?t[1].dims.length:1,g=0!==t[0].dims.length?"bcastIndices_A(indices, aindices);":"aindices[0] = 0;",y=0!==t[1].dims.length?"bcastIndices_B(indices, bindices);":"bindices[0] = 0;",m=(0,i.getGlsl)(e.session.backend.glContext.version),v=l?"\n      ".concat(n.body,"\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n        vec4 result = ").concat(n.name,"(a, b);\n        ").concat(m.output," = result;\n      }"):"\n      ".concat(n.body,"\n      float process(int indices[").concat(f,"]) {\n        int aindices[").concat(d,"];\n        int bindices[").concat(h,"];\n        ").concat(g,"\n        ").concat(y,"\n        return ").concat(n.name,"(_A(aindices), _B(bindices));\n      }");return{name:n.name,inputNames:["A","B"],inputTypes:[u,u],output:{dims:c,type:o,textureType:u},shaderSource:v,hasMain:l}}var b=(0,i.getGlsl)(e.session.backend.glContext.version),w="\n    ".concat(n.body,"\n    void main() {\n      vec4 v1 = ").concat(b.texture2D,"(A, TexCoords);\n      vec4 v2 = ").concat(b.texture2D,"(B, TexCoords);\n      vec4 result = ").concat(n.name,"(v1, v2);\n      ").concat(b.output," = result;\n    }\n    ");return{name:n.name,inputNames:["A","B"],inputTypes:[u,u],output:{dims:t[0].dims,type:o,textureType:u},shaderSource:w,hasMain:!0}};t.add=function(e,t){return[e.run(b(e,t,u()),t)]},t.and=function(e,t){return[e.run(b(e,t,h(),"bool"),t)]},t.div=function(e,t){return[e.run(b(e,t,s()),t)]},t.equal=function(e,t){return[e.run(b(e,t,p(),"bool"),t)]},t.greater=function(e,t){return[e.run(b(e,t,f(),"bool"),t)]},t.less=function(e,t){return[e.run(b(e,t,d(),"bool"),t)]},t.mul=function(e,t){return[e.run(b(e,t,c()),t)]},t.or=function(e,t){return[e.run(b(e,t,g(),"bool"),t)]},t.pow=function(e,t){return[e.run(b(e,t,m()),t)]},t.pRelu=function(e,t){return[e.run(b(e,t,v()),t)]},t.sub=function(e,t){return[e.run(b(e,t,l()),t)]},t.xor=function(e,t){return[e.run(b(e,t,y(),"bool"),t)]}},4752:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseCastAttributes=t.cast=void 0;var r=n(7273);t.cast=function(e,t,n){return o(t),[e.cast(t[0],n)]},t.parseCastAttributes=function(e){return r.ProtoUtil.tensorDataTypeFromProto(e.attributes.getInt("to"))};var o=function(e){if(!e||1!==e.length)throw new Error("Cast requires 1 input.");if("string"===e[0].type)throw new Error("Invalid input type.")}},4595:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.createPackedConcatProgramInfoLoader=void 0;var o=n(6757),i=n(5639),a=n(432),u=n(5614);t.createPackedConcatProgramInfoLoader=function(e,t,n){var c,l,p=(c=t.length,l=n.cacheKey,{name:"Concat (packed)",inputNames:Array.from({length:c},(function(e,t){return"X".concat(t)})),inputTypes:Array(c).fill(i.TextureType.packed),cacheHint:l});return r(r({},p),{get:function(){return function(e,t,n,c){var l=n[0].dims.slice();if(c>=l.length||c<-1*l.length)throw new Error("axis specified for concat doesn't match input dimensionality");c<0&&(c=l.length+c);for(var p=l.slice(0),f=1;f<n.length;f++)for(var d=n[f].dims.slice(),h=0;h<l.length;h++)if(h===c)p[c]+=d[h];else if(l[h]!==d[h])throw new Error("non concat dimensions must match");var g=p.length,y=(0,u.getChannels)("coords",g),m=(0,a.getCoordsDataType)(g),v=(0,u.unpackFromChannel)(),b=n.map((function(e){return e.dims})),w=(0,a.getGlChannels)(g),_=new Array(b.length-1);for(_[0]=b[0][c],f=1;f<_.length;f++)_[f]=_[f-1]+b[f][c];var x=w[c],T=w.slice(-2),S=w.join(),P="if (".concat(x," < ").concat(_[0],") {\n        return getChannel(\n            getX0(").concat(S,"), vec2(").concat(T.join(),"));\n        }");for(f=1;f<_.length;f++){var A=_[f-1];P+="\n            if (".concat(x," < ").concat(_[f],"  && ").concat(x," >= ").concat(_[f-1],") {\n              return getChannel(\n                getX").concat(f,"(").concat(s(w,x,A),"),\n                vec2(").concat(s(T,x,A),"));\n            }")}var O=_.length,I=_[_.length-1];P+="\n            return getChannel(\n              getX".concat(O,"(").concat(s(w,x,I),"),\n              vec2(").concat(s(T,x,I),"));");var E=(0,o.getGlsl)(e.session.backend.glContext.version),C="\n          ".concat(v,"\n          float getValue(").concat(w.map((function(e){return"int "+e})),") {\n            ").concat(P,"\n          }\n\n          void main() {\n            ").concat(m," coords = getOutputCoords();\n            int lastDim = coords.").concat(w[g-1],";\n            coords.").concat(w[g-1]," = coords.").concat(w[g-2],";\n            coords.").concat(w[g-2]," = lastDim;\n\n            vec4 result = vec4(getValue(").concat(y,"), 0., 0., 0.);\n\n            ").concat(y[g-1]," = ").concat(y[g-1]," + 1;\n            if (").concat(y[g-1]," < ").concat(p[g-1],") {\n              result.g = getValue(").concat(y,");\n            }\n\n            ").concat(y[g-2]," = ").concat(y[g-2]," + 1;\n            if (").concat(y[g-2]," < ").concat(p[g-2],") {\n              result.a = getValue(").concat(y,");\n            }\n\n            ").concat(y[g-1]," = ").concat(y[g-1]," - 1;\n            if (").concat(y[g-2]," < ").concat(p[g-2]," &&\n                ").concat(y[g-1]," < ").concat(p[g-1],") {\n              result.b = getValue(").concat(y,");\n            }\n            ").concat(E.output," = result;\n          }\n        ");return r(r({},t),{output:{dims:p,type:n[0].type,textureType:i.TextureType.packed},shaderSource:C,hasMain:!0})}(e,p,t,n.axis)}})};var s=function(e,t,n){var r=e.indexOf(t);return e.map((function(e,t){return t===r?"".concat(e," - ").concat(n):e})).join()}},6668:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)},o=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.parseConcatAttributes=t.concat=void 0;var i=n(4910),a=n(5639),u=n(4595);t.concat=function(e,t,n){return d(t),e.session.pack&&t[0].dims.length>1?[e.run((0,u.createPackedConcatProgramInfoLoader)(e,t,n),t)]:[e.run(s(e,t,n),t)]};var s=function(e,t,n){var o,i,u=(o=t.length,i=n.cacheKey,{name:"Concat",inputNames:Array.from({length:o},(function(e,t){return"X".concat(t)})),inputTypes:Array(o).fill(a.TextureType.unpacked),cacheHint:i});return r(r({},u),{get:function(){return function(e,t,n,o){var i=n[0].dims.slice();if(o>=i.length||o<-1*i.length)throw new Error("axis specified for concat doesn't match input dimensionality");o<0&&(o=i.length+o);for(var u=i.slice(0),s=1;s<n.length;s++)for(var d=n[s].dims.slice(),h=0;h<i.length;h++)if(h===o)u[o]+=d[h];else if(i[h]!==d[h])throw new Error("non concat dimensions must match");var g=u.length,y=new Array(n.length),m=0;for(s=0;s<y.length;++s)m+=n[s].dims[o],y[s]=m;var v;v=n.length<5?c(y):l(y);var b=p(n.length,g),w=f(y),_="\n        ".concat(b,"\n        ").concat(w,"\n        ").concat(v,"\n        float process(int indices[").concat(g,"]) {\n          int textureIndex = getTextureWhereDataResides (indices[").concat(o,"]);\n\n          if(textureIndex != 0) {\n            indices[").concat(o,"] = indices[").concat(o,"] - int(getSizeInConcatAxisValueFromIndex(textureIndex-int(1)));\n          }\n\n          return fetchDataFromCorrectTexture(textureIndex, indices);\n        }");return r(r({},t),{output:{dims:u,type:n[0].type,textureType:a.TextureType.unpacked},shaderSource:_})}(0,u,t,n.axis)}})},c=function(e){var t=e.map((function(e,t){return"if(index<".concat(e,") {return ").concat(t,";}\n")}));return"int getTextureWhereDataResides(int index) {\n      ".concat(t.join(""),"\n    }")},l=function(e){return c(e)},p=function(e,t){for(var n=["float fetchDataFromCorrectTexture(int textureIndex, int indices[".concat(t,"]) {")],r=0;r<e;++r)0===r?n.push("\t"+"if (textureIndex == ".concat(r,") { return _X").concat(r,"(indices); }")):r===e-1?n.push("\t"+"else { return _X".concat(r,"(indices); }")):n.push("\t"+"else if (textureIndex == ".concat(r,") { return _X").concat(r,"(indices); }"));return n.push("\t}"),n.join("\n")},f=function(e){for(var t=["int getSizeInConcatAxisValueFromIndex(int index) {"],n=0;n<e.length;++n)0===n?t.push("\t"+"if (index == ".concat(n,") { return ").concat(e[n],"; }")):n===e.length-1?t.push("\t"+"else { return ".concat(e[n],"; }")):t.push("\t"+"else if (index == ".concat(n,") { return ").concat(e[n],"; }"));return t.push("\t}"),t.join("\n")};t.parseConcatAttributes=function(e){return(0,i.createAttributeWithCacheKey)({axis:e.attributes.getInt("axis")})};var d=function(e){var t,n;if(!e||e.length<1)throw new Error("too few inputs");var r=e[0].type,i=e[0].dims.length;if("string"===r)throw new Error("string tensor is not supported yet");try{for(var a=o(e),u=a.next();!u.done;u=a.next()){var s=u.value;if(s.type!==r)throw new Error("input tensors should be one type");if(s.dims.length!==i)throw new Error("input tensors should have the same shape")}}catch(e){t={error:e}}finally{try{u&&!u.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}}},7825:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.createUnpackedGroupedConvProgramInfoLoader=void 0;var o=n(1315),i=n(6757),a=n(5639),u=n(9754),s=n(2150);t.createUnpackedGroupedConvProgramInfoLoader=function(e,t,n){var c,l,p=(c=t.length>2,l=n.cacheKey,{name:"GroupedConv",inputNames:c?["X","W","Bias"]:["X","W"],inputTypes:c?[a.TextureType.unpacked,a.TextureType.unpacked,a.TextureType.unpacked]:[a.TextureType.unpacked,a.TextureType.unpacked],cacheHint:l});return r(r({},p),{get:function(){return function(e,t,n,c){var l=t.length>2?"value += getBias(output_channel);":"",p=t[0].dims.slice(),f=t[1].dims.slice(),d=f[0]/c.group;o.Logger.verbose("GroupedConv","autpPad:".concat(c.autoPad,", dilations:").concat(c.dilations,", group:").concat(c.group,", kernelShape:").concat(c.kernelShape,", pads:").concat(c.pads,", strides:").concat(c.strides));var h=(0,u.calculateOutputShape)(p,f,c.dilations,c.pads,c.strides),g=(0,i.getGlsl)(e.session.backend.glContext.version),y=(0,s.getActivationSnippet)(c),m=y.activationFunction,v=y.applyActivation,b="\n  const ivec2 strides = ivec2(".concat(c.strides[0],", ").concat(c.strides[1],");\n  const ivec2 pads = ivec2(").concat(c.pads[0],", ").concat(c.pads[1],");\n  ").concat(m,"\n  void main() {\n    ivec4 coords = getOutputCoords();\n    int batch = coords.x;\n    int output_channel = coords.y;\n    ivec2 xRCCorner = coords.zw * strides - pads;\n    int group_id = output_channel / ").concat(d,";\n\n    float value = 0.0;\n    for (int wInChannel = 0; wInChannel < ").concat(f[1],"; wInChannel++) {\n      int input_channel = group_id * ").concat(f[1]," + wInChannel;\n      for (int wHeight = 0; wHeight < ").concat(f[2],"; wHeight++) {\n        int xHeight = xRCCorner.x + wHeight * ").concat(c.dilations[0],";\n\n        if (xHeight < 0 || xHeight >= ").concat(p[2],") {\n          continue;\n        }\n\n        for (int wWidth = 0; wWidth < ").concat(f[3],"; wWidth++) {\n          int xWidth = xRCCorner.y + wWidth * ").concat(c.dilations[1],";\n          if (xWidth < 0 || xWidth >= ").concat(p[3],") {\n            continue;\n          }\n\n          float xVal = getX(batch, input_channel, xWidth, xHeight);\n          float wVal = getW(output_channel, wInChannel, wWidth, wHeight);\n          value += xVal*wVal;\n        }\n      }\n    }\n    ").concat(l,"\n    ").concat(v,"\n    ").concat(g.output," = vec4(value, .0, .0, .0);\n  }\n");return r(r({},n),{output:{dims:h,type:t[0].type,textureType:a.TextureType.unpacked},shaderSource:b,hasMain:!0})}(e,t,p,n)}})}},7708:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.conv2DPacked=t.conv2DPackedPointwise=void 0;var r=n(9754),o=n(5950),i=n(5632);t.conv2DPackedPointwise=function(e,t,n){var o=t[0].dims,a=t[1].dims,u=(0,r.calculateOutputShape)(o,a,n.dilations,n.pads,n.strides),s=e.reshapePacked(t[0],[o[1],o[2]*o[3]]),c=e.reshapePacked(t[1],[a[0],a[1]]),l=t.length>2?[c,s,t[2]]:[c,s],p=e.run((0,i.createPackedMatmulProgramInfoLoader)(e,l,n),l);return e.reshapePacked(p,u)},t.conv2DPacked=function(e,t,n){var a=t[0].dims,u=t[1].dims,s=(0,r.calculateOutputShape)(a,u,n.dilations,n.pads,n.strides),c=e.run((0,o.createPackedIm2ColProgramInfoLoader)(e,t[0],t[1],s,n),[t[0]]),l=e.reshapePacked(t[1],[u[0],u[1]*u[2]*u[3]]),p=3===t.length?[l,c,t[2]]:[l,c],f=e.run((0,i.createPackedMatmulProgramInfoLoader)(e,p,n),p);return e.reshapePacked(f,s)}},5042:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)},o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},i=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.parseConvTransposeAttributes=t.convTranspose=void 0;var a=n(4910),u=n(6757),s=n(5639),c=n(2150),l=function(e,t,n,r,o,i){return(e-1)*t+n+(r-1)*o+1-i},p=function(e,t,n,r,o){var i=Math.floor(e/2);"SAME_UPPER"===t?(n[r]=i,n[o]=e-i):"SAME_LOWER"===t&&(n[r]=e-i,n[o]=i)};t.convTranspose=function(e,t,n){return g(t,n),f(e,t,n)};var f=function(e,t,n){var r=h(n,t);return[d(e,t,r)]},d=function(e,t,n){return e.run(function(e,t,n){var a,l,p=(a=t.length>2,l=n.cacheKey,{name:"ConvTranspose",inputNames:a?["X","W","B"]:["X","W"],inputTypes:a?[s.TextureType.unpacked,s.TextureType.unpacked,s.TextureType.unpacked]:[s.TextureType.unpacked,s.TextureType.unpacked],cacheHint:l});return r(r({},p),{get:function(){return function(e,t,n,a){var l=t.length>2?"getB(output_channel)":"0.0",p=t[0].dims,f=t[1].dims,d=f[1],h=f[0]/a.group,g=i([t[0].dims[0],t[1].dims[1]*a.group],o(a.outputShape),!1),y=(0,u.getGlsl)(e.session.backend.glContext.version),m=(0,c.getActivationSnippet)(a),v=m.activationFunction,b=m.applyActivation,w="\n  const ivec2 strides = ivec2(".concat(a.strides[0],", ").concat(a.strides[1],");\n  const ivec2 pads = ivec2(").concat(a.pads[0],", ").concat(a.pads[1],");\n  ").concat(v,"\n  void main() {\n    ivec4 coords = getOutputCoords();\n    int batch = coords.x;\n    int output_channel = coords.y;\n\n    ivec2 loc = coords.zw + pads;\n\n    int group_id = output_channel / ").concat(d,";\n    int wOutChannel = output_channel - group_id * ").concat(d,";\n\n    float value = ").concat(l,";\n    for (int inChannelOffset = 0; inChannelOffset < ").concat(h,"; inChannelOffset++) {\n      int input_channel = group_id * ").concat(h," + inChannelOffset;\n      for (int wWOff = 0; wWOff < ").concat(f[2],"; wWOff++) {\n        for (int wHOff = 0; wHOff < ").concat(f[3],"; wHOff++) {\n          ivec2 wOff = ivec2(wWOff * ").concat(a.dilations[0],", wHOff * ").concat(a.dilations[1],");\n          ivec2 wLoc = loc - wOff;\n          ivec2 wLocIn = wLoc / strides;\n          if (\n            wLocIn * strides == wLoc &&\n            wLocIn.x >= 0 && wLocIn.x < ").concat(p[2]," &&\n            wLocIn.y >= 0 && wLocIn.y < ").concat(p[3],"\n          ) {\n            float xVal = getX(batch, input_channel, wLocIn.y, wLocIn.x);\n            float wVal = getW(input_channel, wOutChannel, wHOff, wWOff);\n            value += xVal * wVal;\n          }\n        }\n      }\n    }\n    ").concat(b,"\n    ").concat(y.output," = vec4(value, .0, .0, .0);\n  }\n");return r(r({},n),{output:{dims:g,type:t[0].type,textureType:s.TextureType.unpacked},shaderSource:w,hasMain:!0})}(e,t,p,n)}})}(e,t,n),t)},h=function(e,t){var n=e.kernelShape.slice();if(0===e.kernelShape.length)for(var r=2;r<t[1].dims.length;++r)n.push(t[1].dims[r]);var o=e.pads.slice(),i=e.outputShape.slice();!function(e,t,n,r,o,i,a,u){for(var s=e.length-2,c=0===u.length,f=0;f<s;++f){var d=c?e[f+2]*i[f]:u[f],h=l(e[f+2],i[f],o[f],t[f],n[f],d);p(h,r,o,f,f+s),c&&u.push(i[f]*(e[f+2]-1)+a[f]+(t[f]-1)*n[f]+1-o[f]-o[f+s])}}(t[0].dims,n,e.dilations,e.autoPad,o,e.strides,e.outputPadding,i);var a=Object.assign({},e);return Object.assign(a,{kernelShape:n,pads:o,outputShape:i,cacheKey:e.cacheKey}),a};t.parseConvTransposeAttributes=function(e){var t=e.attributes,n=(0,c.parseInternalActivationAttributes)(t),o=t.getString("auto_pad","NOTSET"),i=t.getInts("dilations",[1,1]),u=t.getInt("group",1),s=t.getInts("kernel_shape",[]),l=t.getInts("output_padding",[0,0]),p=t.getInts("output_shape",[]),f=t.getInts("pads",[0,0,0,0]),d=t.getInts("strides",[1,1]);return(0,a.createAttributeWithCacheKey)(r({autoPad:o,dilations:i,group:u,kernelShape:s,outputPadding:l,outputShape:p,pads:f,strides:d},n))};var g=function(e,t){if(!e||2!==e.length&&3!==e.length)throw new Error("Conv requires 2 or 3 inputs");if(4!==e[0].dims.length||4!==e[1].dims.length)throw new Error("currently only support 2-dimensional conv");if(e[0].dims[1]!==e[1].dims[0])throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");var n=e[1].dims[1]*t.group;if(3===e.length&&(1!==e[2].dims.length||e[2].dims[0]!==n))throw new Error("invalid bias");var r=e[0].dims.length-2;if(t.dilations.length!==r)throw new Error("dilations should be ".concat(r,"D"));if(t.strides.length!==r)throw new Error("strides should be ".concat(r,"D"));if(t.pads.length!==2*r)throw new Error("pads should be ".concat(2*r,"D"));if(t.outputPadding.length!==r)throw new Error("output_padding should be ".concat(r,"D"));if(0!==t.kernelShape.length&&t.kernelShape.length!==e[1].dims.length-2)throw new Error("invalid kernel shape");if(0!==t.outputShape.length&&t.outputShape.length!==e[0].dims.length-2)throw new Error("invalid output shape");if("float32"!==e[0].type||"float32"!==e[1].type)throw new Error("ConvTranspose input(X,W) should be float tensor");if(3===e.length&&"float32"!==e[2].type)throw new Error("ConvTranspose input(bias) should be float tensor")}},9754:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)},o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},i=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.parseConvAttributes=t.conv=t.calculateOutputShape=void 0;var a=n(4910),u=n(7273),s=n(7825),c=n(7708),l=n(3281),p=n(2150),f=n(1625),d=n(8276);t.calculateOutputShape=function(e,t,n,r,a){var u,s=e[0],c=e.slice(2),l=c.length,p=t[0],f=t.slice(2).map((function(e,t){return e+(e-1)*(n[t]-1)})),d=c.map((function(e,t){return e+r[t]+r[t+l]})).map((function(e,t){return Math.floor((e-f[t]+a[t])/a[t])}));return(u=[s,p]).concat.apply(u,i([],o(d),!1))},t.conv=function(e,t,n){return v(t,n),h(e,t,n)};var h=function(e,t,n){var r=m(n,t),o=e.session.pack,i=1===r.kernelShape[0]&&1===r.kernelShape[1];return r.group>1?[e.run((0,s.createUnpackedGroupedConvProgramInfoLoader)(e,t,r),t)]:i&&o?[g(e,t,r)]:o&&4===t[0].dims.length&&1===t[0].dims[0]&&!i?[(0,c.conv2DPacked)(e,t,r)]:[y(e,t,r)]},g=function(e,n,r){var o=n[0].dims,i=n[1].dims,a=(0,t.calculateOutputShape)(o,i,r.dilations,r.pads,r.strides),u=e.reshapeUnpacked(n[0],[o[1],o[2]*o[3]]),s=e.reshapeUnpacked(n[1],[i[0],i[1]]),c=n.length>2?[s,u,n[2]]:[s,u],l=e.run((0,d.createMatmulProgramInfoLoader)(c,r),c);return e.reshapeUnpacked(l,a)},y=function(e,n,r){var o=n[0].dims,i=n[1].dims,a=(0,t.calculateOutputShape)(o,i,r.dilations,r.pads,r.strides),u=e.run((0,f.createIm2ColProgramInfoLoader)(e,n[0],n[1],a,r),[n[0]]),s=3===n.length?[u,n[1],n[2]]:[u,n[1]];return e.run((0,l.createDotProductProgramInfoLoader)(e,n,a,r),s)},m=function(e,t){var n=e.kernelShape.slice();if(0===e.kernelShape.length)for(var r=2;r<t[1].dims.length;++r)n.push(t[1].dims[r]);var o=e.pads.slice();u.PoolConvUtil.adjustPadsBasedOnAutoPad(t[0].dims,e.strides,e.dilations,n,o,e.autoPad);var i=Object.assign({},e);return Object.assign(i,{kernelShape:n,pads:o,cacheKey:e.cacheKey}),i};t.parseConvAttributes=function(e){var t=e.attributes,n=(0,p.parseInternalActivationAttributes)(t),o=t.getString("auto_pad","NOTSET"),i=t.getInts("dilations",[1,1]),u=t.getInt("group",1),s=t.getInts("kernel_shape",[]),c=t.getInts("pads",[0,0,0,0]),l=t.getInts("strides",[1,1]);return(0,a.createAttributeWithCacheKey)(r({autoPad:o,dilations:i,group:u,kernelShape:s,pads:c,strides:l},n))};var v=function(e,t){if(!e||2!==e.length&&3!==e.length)throw new Error("Conv requires 2 or 3 inputs");if(4!==e[0].dims.length||4!==e[1].dims.length)throw new Error("currently only support 2-dimensional conv");if(e[0].dims[1]!==e[1].dims[1]*t.group)throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");if(3===e.length&&(1!==e[2].dims.length||e[1].dims[0]!==e[2].dims[0]))throw new Error("invalid bias");var n=e[0].dims.length-2;if(t.dilations.length!==n)throw new Error("dilations should be ".concat(n,"D"));if(t.strides.length!==n)throw new Error("strides should be ".concat(n,"D"));if(t.pads.length!==2*n)throw new Error("pads should be ".concat(2*n,"D"));if(0!==t.kernelShape.length&&t.kernelShape.length!==e[1].dims.length-2)throw new Error("invalid kernel shape");if("float32"!==e[0].type||"float32"!==e[1].type)throw new Error("Conv input(X,W) should be float tensor");if(3===e.length&&"float32"!==e[2].type)throw new Error("Conv input(bias) should be float tensor")}},6742:function(e,t,n){"use strict";var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};Object.defineProperty(t,"__esModule",{value:!0}),t.parseDepthToSpaceAttributes=t.depthToSpace=void 0;var o=n(5707);t.depthToSpace=function(e,t,n){i(t);var a=n.blocksize,u=a*a,s="DCR"===n.mode?[0,3,4,1,5,2]:[0,1,4,2,5,3],c="DCR"===n.mode?[t[0].dims[0],a,a,t[0].dims[1]/u,t[0].dims[2],t[0].dims[3]]:[t[0].dims[0],t[0].dims[1]/u,a,a,t[0].dims[2],t[0].dims[3]],l=e.reshapeUnpacked(t[0],c),p={perm:s,cacheKey:"".concat(s)},f=r((0,o.transpose)(e,[l],p),1)[0],d=[t[0].dims[0],t[0].dims[1]/u,t[0].dims[2]*a,t[0].dims[3]*a];return[e.reshapeUnpacked(f,d)]},t.parseDepthToSpaceAttributes=function(e){var t=e.attributes.getInt("blocksize");if(t<1)throw new Error("blocksize must be >= 1, but got : ".concat(t," for DepthToSpace"));var n=e.attributes.getString("mode","DCR");if("DCR"!==n&&"CRD"!==n)throw new Error("unrecognized mode: ".concat(n," for DepthToSpace"));return{mode:n,blocksize:t}};var i=function(e){if(1!==e.length)throw new Error("DepthToSpace expect 1 inputs, but got ".concat(e.length));if("string"===e[0].type||4!==e[0].dims.length)throw new TypeError("DepthToSpace input should be a 4-D numeric tensor")}},3281:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)},o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};Object.defineProperty(t,"__esModule",{value:!0}),t.createDotProductProgramInfoLoader=void 0;var i=n(7273),a=n(6757),u=n(5639),s=n(2150),c=n(1625);t.createDotProductProgramInfoLoader=function(e,t,n,l){var p=function(e,t){return{name:"ConvDotProduct",inputNames:e?["Im2Col","K","B"]:["Im2Col","K"],inputTypes:e?[u.TextureType.unpacked,u.TextureType.packedLastDimension,u.TextureType.unpacked]:[u.TextureType.unpacked,u.TextureType.packedLastDimension],cacheKey:t.activationCacheKey}}(t.length>2,l);return r(r({},p),{get:function(){return function(e,t,n,l,p){var f=n[0].dims,d=n[1].dims,h=[d[0],Math.ceil(f[1]*d[2]*d[3]/4)],g=(0,c.calculateIm2ColDims)(f,d,l),y=o(e.calculateTextureWidthAndHeight(h,u.TextureType.packedLastDimension),2),m=y[0],v=y[1],b=i.ShapeUtil.computeStrides(g),w=o(e.calculateTextureWidthAndHeight(g,u.TextureType.packedLastDimension),2),_=w[0],x=w[1],T=l.length,S=n.length<3?"0.0":"_B(b)",P=Math.ceil(f[1]*d[2]*d[3]/4),A=(0,s.getActivationSnippet)(p),O=A.activationFunction,I=A.applyActivation,E=(0,a.getGlsl)(e.session.backend.glContext.version),C="\n".concat(O,"\nfloat process(int indices[").concat(T,"]) {\n  int b[1];\n  b[0] = indices[1];\n  int im2col[4];\n  im2col[0] = indices[0];\n  im2col[1] = indices[2];\n  im2col[2] = indices[3];\n  int im2colOffset = im2col[0] * ").concat(b[0]," + im2col[1] * ").concat(b[1]," + im2col[2] * ").concat(b[2],";\n  int kernelOffset = indices[1] * ").concat(h[1],";\n  float value = ").concat(S,";\n  for (int i = 0; i < ").concat(P,"; ++i) {\n    vec2 im2colCoords = offsetToCoords(im2colOffset, ").concat(_,", ").concat(x,");\n    vec2 kernelCoords = offsetToCoords(kernelOffset, ").concat(m,", ").concat(v,");\n    value += dot(").concat(E.texture2D,"(Im2Col, im2colCoords), ").concat(E.texture2D,"(K, kernelCoords));\n    ++im2colOffset;\n    ++kernelOffset;\n  }\n  ").concat(I,"\n  return value;\n}");return r(r({},t),{output:{dims:l,type:n[0].type,textureType:u.TextureType.unpacked},shaderSource:C})}(e,p,t,n,l)}})}},4125:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseFlattenAttributes=t.flatten=void 0;var r=n(7273);t.flatten=function(e,t,n){o(t,n);var i=r.ShapeUtil.flattenShape(t[0].dims,n);return[e.reshapeUnpacked(t[0],i)]},t.parseFlattenAttributes=function(e){return e.attributes.getInt("axis",1)};var o=function(e,t){if(!e||1!==e.length)throw new Error("Flatten requires 1 input.");var n=e[0].dims.length;if(0===n)throw new Error("scalar tensor is not supported.");if(t<-n||t>n)throw new Error("Invalid axis");if("string"===e[0].type)throw new Error("string tensor is not supported.")}},2150:function(e,t,n){"use strict";var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};Object.defineProperty(t,"__esModule",{value:!0}),t.parseInternalActivationAttributes=t.getActivationSnippet=void 0;var o=n(7273),i=n(9087);t.getActivationSnippet=function(e){var t;switch(e.activation){case"Relu":t=(0,i.glslRelu)();break;case"Sigmoid":t=(0,i.glslSigmoid)();break;case"Clip":t=(0,i.glslClip)(e.clipMin,e.clipMax);break;default:return{activationFunction:"",applyActivation:""}}var n=t.name;return{activationFunction:t.body,applyActivation:"value = ".concat(n,"_(value);")}},t.parseInternalActivationAttributes=function(e){var t=e.getString("activation","");if("Clip"===t){var n=r(e.getFloats("activation_params",[o.MIN_CLIP,o.MAX_CLIP]),2),i=n[0],a=n[1];return{activation:t,clipMax:a,clipMin:i,activationCacheKey:"".concat(t,":").concat(i,",").concat(a)}}return{activation:t,activationCacheKey:t}}},6149:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.parseGatherAttributes=t.gather=void 0;var o=n(4910),i=n(6145),a=n(7273),u=n(5639);t.gather=function(e,t,n){return l(t,n.axis),[e.run(c(e,t,n),t)]},t.parseGatherAttributes=function(e){return(0,o.createAttributeWithCacheKey)({axis:e.attributes.getInt("axis",0)})};var s={name:"Gather",inputNames:["A","B"],inputTypes:[u.TextureType.unpacked,u.TextureType.unpacked]},c=function(e,t,n){var o=r(r({},s),{cacheHint:n.cacheKey});return r(r({},o),{get:function(){return function(e,t,n,o){var i=n[0].dims.slice(),s=n[1].dims.slice(),c=new Array(i.length+s.length-1);o=a.ShapeUtil.normalizeAxis(o,i.length);for(var l=[],p=0;p<c.length;p++)p<o?(c[p]=i[p],l.push("inputIdx[".concat(p,"] = outputIdx[").concat(p,"];"))):p<o+s.length?(c[p]=s[p-o],l.push("indexDataIdx[".concat(p-o,"] = outputIdx[").concat(p,"];"))):(c[p]=i[p-s.length+1],l.push("inputIdx[".concat(p-s.length+1,"] = outputIdx[").concat(p,"];")));var f=c.length||1,d=i.length,h=s.length||1,g="\n      float process(int outputIdx[".concat(f,"]) {\n        int inputIdx[").concat(d,"];\n        int indexDataIdx[").concat(h,"];\n        indexDataIdx[0] = 0;\n        ").concat(l.join("\n        "),"\n        int idx = int(_B(indexDataIdx));\n        inputIdx[").concat(o,"] = idx < 0 ? idx + ").concat(i[o]," : idx;\n        return _A(inputIdx);\n      }");return r(r({},t),{output:{dims:c,type:n[0].type,textureType:u.TextureType.unpacked},shaderSource:g})}(0,o,t,n.axis)}})},l=function(e,t){if(!e||2!==e.length)throw new Error("Gather requires 2 inputs.");var n=e[0].dims.length;if(n<1)throw new Error("Invalid input shape.");if(t<-n||t>n-1)throw new Error("Invalid axis.");if(-1===i.NUMBER_TYPES.indexOf(e[0].type))throw new Error("Invaid input type.");if("int32"!==e[1].type&&"int16"!==e[1].type)throw new Error("Invaid input type.")}},5378:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)},o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};Object.defineProperty(t,"__esModule",{value:!0}),t.parseGemmAttributesV11=t.parseGemmAttributesV7=t.gemm=void 0;var i=n(4910),a=n(7273),u=n(5639);t.gemm=function(e,t,n){return p(t,n),[e.run(c(t,n),t)]};var s=function(e,t){var n=0!==e.attributes.getInt("transA",0),r=0!==e.attributes.getInt("transB",0),o=e.attributes.getFloat("alpha",1),a=e.attributes.getFloat("beta",1);return(0,i.createAttributeWithCacheKey)({transA:n,transB:r,alpha:o,beta:a,isOptionalC:t})};t.parseGemmAttributesV7=function(e){return s(e,!1)},t.parseGemmAttributesV11=function(e){return s(e,!0)};var c=function(e,t){var n={name:"Gemm",inputNames:3===e.length?["A","B","C"]:["A","B"],inputTypes:3===e.length?[u.TextureType.unpacked,u.TextureType.unpacked,u.TextureType.unpacked]:[u.TextureType.unpacked,u.TextureType.unpacked],key:t.cacheKey};return r(r({},n),{get:function(){return l(n,e,t)}})},l=function(e,t,n){var i=t[0].dims.slice(),s=t[1].dims.slice(),c=o(a.GemmUtil.getShapeOfGemmResult(i,n.transA,s,n.transB,3===t.length?t[2].dims:void 0),2),l=[c[0],c[1]];if(!l)throw new Error("Can't use gemm on the given tensors");var p=i[i.length-1],f="";n.transA&&(p=i[0]),n.transA&&n.transB?f="value += _A_T(a) * _B_T(b);":n.transA&&!n.transB?f="value += _A_T(a) * _B(b);":!n.transA&&n.transB?f="value += _A(a) * _B_T(b);":n.transA||n.transB||(f="value += _A(a) * _B(b);");var d=l.length,h=3===t.length?"int c[".concat(t[2].dims.length,"];"):"",g=3===t.length?"bcastIndices_C(indices, c);":"",y=3===t.length?"value += beta * _C(c);":"",m="\n      float process(int indices[".concat(d,"]) {\n          int a[").concat(d,"];\n          int b[").concat(d,"];\n          ").concat(h,"\n\n          copyVec(indices, a);\n          copyVec(indices, b);\n          ").concat(g,"\n\n          float value = 0.0;\n          for (int k=0; k<").concat(p,"; ++k) {\n              a[").concat(d-1,"] = k;\n              b[").concat(d-2,"] = k;\n              ").concat(f,"\n          }\n\n          value = value * alpha;\n          ").concat(y,"\n          return value;\n      }");return r(r({},e),{output:{dims:l,type:t[0].type,textureType:u.TextureType.unpacked},variables:[{name:"alpha",type:"float",data:n.alpha},{name:"beta",type:"float",data:n.beta}],shaderSource:m})},p=function(e,t){if(!e)throw new Error("Input is missing");if(t.isOptionalC&&(e.length<2||e.length>3))throw new Error("Invaid input shape.");if(!t.isOptionalC&&3!==e.length)throw new Error("Gemm requires 3 inputs");if(3===e.length&&1!==e[2].dims.length&&2!==e[2].dims.length)throw new Error("Invalid input shape of C");if("float32"!==e[0].type&&"float64"!==e[0].type||"float32"!==e[1].type&&"float64"!==e[1].type||3===e.length&&"float32"!==e[2].type&&"float64"!==e[2].type)throw new Error("Invalid input type.");if(e[0].type!==e[1].type||3===e.length&&e[0].type!==e[2].type)throw new Error("Input types are mismatched")}},5950:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.createPackedIm2ColProgramInfoLoader=void 0;var o=n(6757),i=n(5639),a=n(5614);t.createPackedIm2ColProgramInfoLoader=function(e,t,n,u,s){var c,l=(c=s.cacheKey,{name:"Im2Col (packed)",inputNames:["A"],inputTypes:[i.TextureType.packed],cacheHint:c});return r(r({},l),{get:function(){return function(e,t,n,u,s,c){for(var l=n.dims,p=u.dims,f=s.length,d=[p[1]*p[2]*p[3],s[2]*s[3]],h=p[2]*p[3],g=(0,a.unpackFromChannel)(),y=(0,o.getGlsl)(e.session.backend.glContext.version),m="",v=0;v<=1;v++)for(var b=0;b<=1;b++)m+="\n            blockIndex = rc.x + ".concat(b,";\n            pos = rc.y + ").concat(v,";\n\n            if(blockIndex < ").concat(d[1]," && pos < ").concat(d[0],") {\n              offsetY = int(blockIndex / (").concat(s[f-1],")) * ").concat(c.strides[0]," -\n                ").concat(c.pads[0],";\n              d0 = offsetY + ").concat(c.dilations[0]," * (imod(pos, ").concat(h,") / ").concat(p[2],");\n\n              if(d0 < ").concat(l[2]," && d0 >= 0) {\n                offsetX = imod(blockIndex, ").concat(s[f-1],") * ").concat(c.strides[1]," -\n                  ").concat(c.pads[1],";\n                d1 = offsetX + ").concat(c.dilations[1]," * imod(imod(pos, ").concat(h,"), ").concat(p[2],");\n\n                if(d1 < ").concat(l[3]," && d1 >= 0) {\n\n                  ch = int(float(pos)/ ").concat(h,".);\n                    innerDims = vec2(d0, d1);\n                    result[").concat(2*v+b,"] = getChannel(\n                      getA(0, ch, int(innerDims.x),\n                      int(innerDims.y)), innerDims);\n                }\n              }\n            }\n\n          ");var w="\n      ".concat(g,"\n\n      void main() {\n        ivec2 rc = getOutputCoords();\n          vec4 result = vec4(0.0);\n          int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n          vec2 innerDims;\n          ").concat(m,"\n          ").concat(y.output," = result;\n      }\n            ");return r(r({},t),{output:{dims:d,type:n.type,textureType:i.TextureType.packed},shaderSource:w,hasMain:!0})}(e,l,t,n,u,s)}})}},1625:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.calculateIm2ColDims=t.createIm2ColProgramInfoLoader=void 0;var o=n(5639);t.createIm2ColProgramInfoLoader=function(e,n,i,a,u){var s,c=(s=u.cacheKey,{name:"Im2Col",inputNames:["X"],inputTypes:[o.TextureType.unpacked],cacheHint:s});return r(r({},c),{get:function(){return function(e,n,i,a,u,s){var c=i.dims,l=a.dims,p=u.length,f=(0,t.calculateIm2ColDims)(c,l,u,4),d="\n        const int XC = ".concat(c[1],";\n        const int XH = ").concat(c[2],";\n        const int XW = ").concat(c[3],";\n        const int KH = ").concat(s.kernelShape[0],";\n        const int KW = ").concat(s.kernelShape[1],";\n        const int dilationH = ").concat(s.dilations[0],";\n        const int dilationW = ").concat(s.dilations[1],";\n        const int strideH = ").concat(s.strides[0],";\n        const int strideW = ").concat(s.strides[1],";\n        const int padH = ").concat(s.pads[0],";\n        const int padW = ").concat(s.pads[1],";\n        const int KHKW = KH*KW;\n        const int XCKHKW = XC * KHKW;\n        const int outputChannels = 4;\n        vec4 process(int indices[").concat(p,"]) {\n          int b  = indices[0]; // batch size\n          int oh = indices[1] * strideH - padH; //output height\n          int ow = indices[2] * strideW - padW; //output width\n          int p = indices[3] * outputChannels; //patch\n          vec4 value = vec4(0.0);\n          for(int i=0; i < outputChannels; ++i) {\n            if(p < XCKHKW) {\n              int patchC = p / KHKW;\n              int patchH = (p - patchC*KHKW) / KW;\n              int patchW = (p - patchC*KHKW) - patchH * KW;\n              int xh2 = oh + patchH * dilationH;\n              int xw2 = ow + patchW * dilationW;\n              int x[").concat(c.length,"];\n              x[0] = b;\n              x[1] = patchC;\n              x[2] = xh2;\n              x[3] = xw2;\n              if(xh2 >= 0 &&\n                  xh2 < XH &&\n                  xw2 >= 0 &&\n                  xw2 < XW) {\n                value[i] = _X(x);\n              }\n            }\n            ++p;\n          }\n          return value;\n        }\n        ");return r(r({},n),{output:{dims:f,type:i.type,textureType:o.TextureType.packedLastDimension},shaderSource:d})}(0,c,n,i,a,u)}})},t.calculateIm2ColDims=function(e,t,n,r){return void 0===r&&(r=4),[n[0],n[2],n[3],Math.ceil(e[1]*t[2]*t[3]/r)]}},6981:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.parseImageScalerAttributes=t.imageScaler=void 0;var o=n(4910),i=n(5639);t.imageScaler=function(e,t,n){return c(t),[e.run(u(e,t,n),t)]},t.parseImageScalerAttributes=function(e){var t=e.attributes.getFloat("scale"),n=e.attributes.getFloats("bias");return(0,o.createAttributeWithCacheKey)({scale:t,bias:n})};var a={name:"ImageScaler",inputNames:["X"],inputTypes:[i.TextureType.unpacked]},u=function(e,t,n){var o=r(r({},a),{cacheHint:n.cacheKey});return r(r({},o),{get:function(){return function(e,t,n,o){var a=n[0].dims.slice(),u=a.length,c=s(o.bias.length),l="\n      ".concat(c,"\n      float process(int indices[").concat(u,"]) {\n        return _X(indices) * scale + getBias(bias, indices[1]);\n      }");return r(r({},t),{output:{dims:a,type:n[0].type,textureType:i.TextureType.unpacked},variables:[{name:"bias",type:"float",arrayLength:o.bias.length,data:o.bias},{name:"scale",type:"float",data:o.scale}],shaderSource:l})}(0,o,t,n)}})},s=function(e){for(var t=["float getBias(float bias[".concat(e,"], int channel) {")],n=0;n<e;++n)0===n?t.push("\t"+"if (channel == ".concat(n,") { return bias[").concat(n,"]; }")):n===e-1?t.push("\t"+"else { return bias[".concat(n,"]; }")):t.push("\t"+"else if (channel == ".concat(n,") { return bias[").concat(n,"]; }"));return t.push("\t}"),t.join("\n")},c=function(e){if(!e||1!==e.length)throw new Error("ImageScaler requires 1 input.");if(4!==e[0].dims.length)throw new Error("Invalid input shape.");if("float32"!==e[0].type&&"float64"!==e[0].type)throw new Error("Invalid input type.")}},7413:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)},o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};Object.defineProperty(t,"__esModule",{value:!0}),t.parseInstanceNormalizationAttributes=t.instanceNormalization=void 0;var i=n(6757),a=n(5639);t.instanceNormalization=function(e,t,n){p(t);var r=e.run(s(t[0]),t);return[e.run(l(e,t[0],n,r.dims),[t[0],r,t[1],t[2]])]},t.parseInstanceNormalizationAttributes=function(e){return e.attributes.getFloat("epsilon",1e-5)};var u={name:"InstanceNormalization_MeanAndVariance",inputNames:["X"],inputTypes:[a.TextureType.unpacked]},s=function(e){return r(r({},u),{get:function(){return function(e,t){var n=t.dims.slice(),o=n[1],i=n[2]*n[3],u=[n[0],o],s="\n      vec4 process(int[2] indices) {\n        vec4 v = vec4(0.0);\n        int a[4];\n        a[0] = indices[0];\n        a[1] = indices[1];\n        float temp = 0.0;\n        for(int a2=0; a2<".concat(n[2],"; a2++) {\n          a[2] = a2;\n          for(int a3=0; a3<").concat(n[3],"; a3++) {\n            a[3] = a3;\n            float x = _X(a);\n            temp += x;\n          }\n        }\n        float mean = temp / float(").concat(i,");\n        temp = 0.0;\n        for(int a2=0; a2<").concat(n[2],"; a2++) {\n          a[2] = a2;\n          for(int a3=0; a3<").concat(n[3],"; a3++) {\n            a[3] = a3;\n            float x = _X(a);\n            temp += (x - mean) * (x - mean);\n          }\n        }\n        v.r = mean;\n        v.g = temp / float(").concat(i,");\n\n        return v;\n      }");return r(r({},e),{output:{dims:u,type:t.type,textureType:a.TextureType.packedLastDimension},shaderSource:s})}(u,e)}})},c={name:"InstanceNormalization_ComputeOutput",inputNames:["X","MeanAndVariance","Scale","B"],inputTypes:[a.TextureType.unpacked,a.TextureType.packedLastDimension,a.TextureType.unpacked,a.TextureType.unpacked]},l=function(e,t,n,u){var s=r(r({},c),{cacheHint:"".concat(n)});return r(r({},s),{get:function(){return function(e,t,n,u,s){var c=(0,i.getGlsl)(e.session.backend.glContext.version),l=o(e.calculateTextureWidthAndHeight(s,a.TextureType.packedLastDimension),2),p=l[0],f=l[1],d=o([p/4,f],2),h=d[0],g=d[1],y="\n      vec4 get_MeanAndVariance(int[2] mv) {\n        int offset = indicesToOffset_MeanAndVariance(mv);\n        vec2 coords = offsetToCoords(offset, ".concat(h,", ").concat(g,");\n        return ").concat(c.texture2D,"(MeanAndVariance, coords);\n      }\n\n      float process(int[4] indices) {\n        int mv[2];\n        mv[0] = indices[0];\n        mv[1] = indices[1];\n        vec4 mean_and_variance = get_MeanAndVariance(mv);\n        float mean = mean_and_variance.r;\n        float variance = mean_and_variance.g;\n\n        int sb[1];\n        sb[0] = indices[1];\n        float scale = _Scale(sb);\n        float b = _B(sb);\n\n        return scale * (_X(indices) - mean) / sqrt(variance + epsilon) + b;\n      }");return r(r({},t),{output:{dims:n.dims,type:n.type,textureType:a.TextureType.unpacked},variables:[{name:"epsilon",type:"float",data:u}],shaderSource:y})}(e,s,t,n,u)}})},p=function(e){if(!e||3!==e.length)throw new Error("InstanceNormalization requires 3 inputs.");var t=e[0],n=e[1],r=e[2];if(t.dims.length<3||1!==n.dims.length||1!==r.dims.length)throw new Error("Invalid input shape.");if(n.dims[0]!==t.dims[1]||r.dims[0]!==t.dims[1])throw new Error("Input shapes are mismatched.");if("float32"!==t.type&&"float64"!==t.type||"float32"!==n.type&&"float64"!==n.type||"float32"!==r.type&&"float64"!==r.type)throw new Error("Invalid input type.");if(4!==e[0].dims.length)throw new Error("Only support 4-D input shape.")}},7006:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.createLrnProgramInfoLoader=t.parseLrnAttributes=t.lrn=void 0;var o=n(4910),i=n(5639);t.lrn=function(e,t,n){return s(t),[e.run(u(t,n),t)]},t.parseLrnAttributes=function(e){var t=e.attributes.getFloat("alpha",1e-4),n=e.attributes.getFloat("beta",.75),r=e.attributes.getFloat("bias",1),i=e.attributes.getInt("size");return(0,o.createAttributeWithCacheKey)({alpha:t,beta:n,bias:r,size:i})};var a={name:"LRN",inputNames:["X"],inputTypes:[i.TextureType.unpacked]};function u(e,t){return r(r({},a),{cacheHint:t.cacheKey,get:function(){return function(e,t){var n=e[0].dims[1],o=e[0].dims.length,u=-Math.floor((t.size-1)/2),s=Math.ceil((t.size-1)/2),c="float(".concat(t.alpha,") / float(").concat(t.size,")"),l="float(".concat(t.bias,")"),p="float(".concat(t.beta,")"),f="\n    float process(int indices[".concat(o,"]) {\n        int c = indices[1];\n        float x = _X(indices);\n        float square_sum = 0.0;\n\n        for (int i = ").concat(u,"; i <= ").concat(s,"; i++) {\n          int idx = c + i;\n          if (c >= 0 && c < ").concat(n,") {\n            indices[1] = idx;\n            float j = _X(indices);\n            square_sum += j * j;\n          }\n        }\n        return x / pow(").concat(l," + ").concat(c," * square_sum, ").concat(p,");\n    }");return r(r({},a),{cacheHint:t.cacheKey,output:{dims:e[0].dims,type:e[0].type,textureType:i.TextureType.unpacked},shaderSource:f})}(e,t)}})}t.createLrnProgramInfoLoader=u;var s=function(e){if(!e||1!==e.length)throw new Error("LRN requires 1 input.");if(4!==e[0].dims.length)throw new Error('currently only support LRN for input with "NCHW" format');if("float32"!==e[0].type)throw new Error("input should be float type")}},5632:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.createPackedMatmulProgramInfoLoader=void 0;var o=n(7273),i=n(6757),a=n(5639),u=n(432),s=n(2150),c=n(8276);t.createPackedMatmulProgramInfoLoader=function(e,t,n){var l,p,f=(l=t.length>2,p=n.activationCacheKey,{name:"MatMul (packed)",inputNames:l?["A","B","Bias"]:["A","B"],inputTypes:l?[a.TextureType.packed,a.TextureType.packed,a.TextureType.packed]:[a.TextureType.packed,a.TextureType.packed],cacheHint:p});return r(r({},f),{get:function(){return function(e,t,n,l){var p=n.length>2,f=p?"value += getBiasForMatmul();":"",d=n[0].dims,h=n[1].dims,g=o.BroadcastUtil.calcShape(d,h,!0),y=!o.ShapeUtil.areEqual(n[0].dims,n[1].dims);if(!g)throw new Error("Can't use matmul on the given tensors");var m=d[d.length-1],v=Math.ceil(m/2),b=d.length,w=h.length,_=(0,i.getGlsl)(e.session.backend.glContext.version),x=(0,u.getCoordsDataType)(g.length),T=g.length,S=(0,u.getGlChannels)(),P=(0,s.getActivationSnippet)(l),A=P.activationFunction,O=P.applyActivation,I=p?"".concat((0,c.getBiasForMatmul)(x,S,n[2].dims,g,!0)):"",E=y?"".concat(function(e,t,n,r){var i=[],a=[],u=n[0].dims,s=n[1].dims,c=u.length,l=s.length,p=r.length,f=p-c,d=p-l;(i=u.map((function(e,n){return"coords.".concat(t[n+f])})))[c-1]="i*2",i.join(", "),(a=s.map((function(e,n){return"coords.".concat(t[n+d])})))[l-2]="i*2",a.join(", ");var h=o.BroadcastUtil.getBroadcastDims(u,r),g=o.BroadcastUtil.getBroadcastDims(s,r),y=h.map((function(e){return"coords.".concat(t[e+f]," = 0;")})).join("\n"),m=g.map((function(e){return"coords.".concat(t[e+d]," = 0;")})).join("\n"),v="int lastDim = coords.".concat(t[p-1],";\n  coords.").concat(t[p-1]," = coords.").concat(t[p-2],";\n  coords.").concat(t[p-2]," = lastDim;");return"\nvec4 getAAtOutCoordsMatmul(int i) {\n  ".concat(e," coords = getOutputCoords();\n  ").concat(v,"\n  ").concat(y,"\n  vec4 outputValue = getA(").concat(i,");\n  return outputValue;\n}\n\nvec4 getBAtOutCoordsMatmul(int i) {\n  ").concat(e," coords = getOutputCoords();\n  ").concat(v,"\n  ").concat(m,"\n  vec4 outputValue = getB(").concat(a,");\n  return outputValue;\n}")}(x,S,n,g)):"",C=y?"getAAtOutCoordsMatmul(i)":"getA(".concat(function(e,t){for(var n="",r=0;r<t-2;r++)n+="rc.".concat(e[r],", ");return n+("rc.".concat(e[t-2],", ")+"i*2")}(S,b),")"),D=y?"getBAtOutCoordsMatmul(i)":"getB(".concat(function(e,t){for(var n="",r=0;r<t-2;r++)n+="rc.".concat(e[r],", ");return n+"i*2, "+"rc.".concat(e[t-1])}(S,w),")"),k=y?"":"".concat(x," rc =\n          getOutputCoords(); int lastDim = rc.").concat(S[T-1],"; rc.").concat(S[T-1]," =\n          rc.").concat(S[T-2],"; rc.").concat(S[T-2]," = lastDim;\n      "),R="\n            ".concat(E,"\n            ").concat(I,"\n            ").concat(A,"\n            void main() {\n              ").concat(k,"\n\n              vec4 value = vec4(0);\n              for (int i = 0; i < ").concat(v,"; i++) {\n                vec4 a = ").concat(C,";\n                vec4 b = ").concat(D,";\n\n                value += (a.rrbb * b.rgrg);\n                value += (a.ggaa * b.baba);\n              }\n              ").concat(f,"\n              ").concat(O,"\n              ").concat(_.output," = value;\n            }");return r(r({},t),{output:{dims:g,type:n[0].type,textureType:a.TextureType.packed},shaderSource:R,hasMain:!0})}(e,f,t,n)}})}},8276:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.getBiasForMatmul=t.createMatmulProgramInfoLoader=t.parseMatMulAttributes=t.matMul=void 0;var o=n(7273),i=n(5639),a=n(432),u=n(2150),s=n(5632);t.matMul=function(e,t,n){return p(t),e.session.pack?[e.run((0,s.createPackedMatmulProgramInfoLoader)(e,t,n),t)]:[e.run(l(t,n),t)]},t.parseMatMulAttributes=function(e){return(0,u.parseInternalActivationAttributes)(e.attributes)};var c=function(e,t){return{name:"MatMul",inputNames:e?["A","B","Bias"]:["A","B"],inputTypes:e?[i.TextureType.unpacked,i.TextureType.unpacked,i.TextureType.unpacked]:[i.TextureType.unpacked,i.TextureType.unpacked],cacheHint:t}};function l(e,t){var n=c(e.length>2,t.activationCacheKey);return r(r({},n),{get:function(){return function(e,t,n){var s=t[0].dims,c=t[1].dims,l=o.BroadcastUtil.calcShape(s,c,!0);if(!l)throw new Error("Can't use matmul on the given tensors");var p=(0,a.getCoordsDataType)(l.length),d=(0,a.getGlChannels)(),h=(0,u.getActivationSnippet)(n),g=h.activationFunction,y=h.applyActivation,m=t.length>2,v=m?"value += getBiasForMatmul();":"",b=m?"".concat(f(p,d,t[2].dims,l,!1)):"",w=l.length,_=s.length,x=c.length,T=s[s.length-1],S="\n    ".concat(g,"\n    ").concat(b,"\n    float process(int indices[").concat(w,"]) {\n        int a[").concat(_,"];\n        int b[").concat(x,"];\n        bcastMatmulIndices_A(indices, a);\n        bcastMatmulIndices_B(indices, b);\n\n        float value;\n        for (int k=0; k<").concat(T,"; ++k) {\n            a[").concat(_-1,"] = k;\n            b[").concat(x-2,"] = k;\n            value += _A(a) * _B(b);\n        }\n        ").concat(v,"\n        ").concat(y,"\n        return value;\n    }");return r(r({},e),{output:{dims:l,type:t[0].type,textureType:i.TextureType.unpacked},shaderSource:S})}(n,e,t)}})}t.createMatmulProgramInfoLoader=l;var p=function(e){if(!e||2!==e.length)throw new Error("MatMul requires 2 inputs.");if(e[0].dims[e[0].dims.length-1]!==e[1].dims[e[1].dims.length-2])throw new Error("shared dimension does not match.");if("float32"!==e[0].type&&"float64"!==e[0].type||"float32"!==e[1].type&&"float64"!==e[1].type)throw new Error("inputs should be float type");if(e[0].type!==e[1].type)throw new Error("inputs types should match")};function f(e,t,n,r,i){var a,u=n.length,s=r.length,c=s-u;a=s<2&&u>0?"coords":n.map((function(e,n){return"coords.".concat(t[n+c])})).join(", ");var l=o.BroadcastUtil.getBroadcastDims(n,r).map((function(e){return"coords.".concat(t[e+c]," = 0;")})).join("\n"),p="vec4(outputValue.xx, outputValue.yy)";return 1===o.ShapeUtil.size(n)&&(p="vec4(outputValue.x)"),i?"\nvec4 getBiasForMatmul() {\n  ".concat(e," coords = getOutputCoords();\n  ").concat(l,"\n  vec4 outputValue = getBias(").concat(a,");\n  return ").concat(p,";\n}"):"\nfloat getBiasForMatmul() {\n  ".concat(e," coords = getOutputCoords();\n  ").concat(l,"\n  return getBias(coords.x);\n}")}t.getBiasForMatmul=f},9:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.createPackProgramInfoLoader=void 0;var o=n(6757),i=n(5639),a=n(432),u=n(5614),s={name:"pack",inputNames:["A"],inputTypes:[i.TextureType.unpackedReversed]};t.createPackProgramInfoLoader=function(e,t){return r(r({},s),{get:function(){return function(e,t){var n,c,l,p,f=(0,o.getGlsl)(e.session.backend.glContext.version),d=t.dims,h=d.length,g=t.dims.length,y=(0,a.getCoordsDataType)(g),m=(0,u.getChannels)("rc",g),v=(n=g,c=m,l=d[d.length-2],p=d[d.length-1],0===n||1===n?"":"\n    int r = ".concat(c[n-2],";\n    int c = ").concat(c[n-1],";\n    int rp1 = ").concat(c[n-2]," + 1;\n    int cp1 = ").concat(c[n-1]," + 1;\n    bool rEdge = rp1 >= ").concat(p,";\n    bool cEdge = cp1 >= ").concat(l,";\n    ")),b=function(e,t,n){if(0===e)return"false";if(1===e)return"rc > ".concat(t[0]);for(var r="",o=e-2;o<e;o++)r+="".concat(n[o]," >= ").concat(t[o-e+2]),o<e-1&&(r+="||");return r}(g,0===h?[1,1]:1===h?[d[0],1]:[d[g-1],d[g-2]],m),w=function(e,t){var n=e.length;if(0===n)return"getA(), 0, 0, 0";if(1===n)return"getA(rc),\n            rc + 1 >= ".concat(e[0]," ? 0. : getA(rc + 1),\n            0, 0");var r="";if(n>2)for(var o=0;o<n-2;++o)r+="".concat(t[o],",");return"getA(".concat(r).concat("r, c","),\n          rEdge ? 0. : getA(").concat(r).concat("rp1, c","),\n          cEdge ? 0. : getA(").concat(r).concat("r, cp1","),\n          rEdge || cEdge ? 0. : getA(").concat(r).concat("rp1, cp1",")")}(d,m),_="\n        void main() {\n          ".concat(y," rc = getOutputCoords();\n\n          if(").concat(b,") {\n            ").concat(f.output," = vec4(0);\n          } else {\n            ").concat(v,"\n\n            ").concat(f.output," = vec4(").concat(w,");\n          }\n        }\n      ");return r(r({},s),{hasMain:!0,output:{dims:t.dims,type:t.type,textureType:i.TextureType.packed},shaderSource:_})}(e,t)}})}},5614:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unpackFromChannel=t.getChannels=t.getVecChannels=void 0;var r=n(432);function o(e,t){return(0,r.getGlChannels)(t).map((function(t){return"".concat(e,".").concat(t)}))}t.getVecChannels=o,t.getChannels=function(e,t){return 1===t?[e]:o(e,t)},t.unpackFromChannel=function(){return"\n    float getChannel(vec4 frag, int dim) {\n      int modCoord = imod(dim, 2);\n      return modCoord == 0 ? frag.r : frag.g;\n    }\n\n    float getChannel(vec4 frag, vec2 innerDims) {\n      vec2 modCoord = mod(innerDims, 2.);\n      return modCoord.x == 0. ?\n        (modCoord.y == 0. ? frag.r : frag.g) :\n        (modCoord.y == 0. ? frag.b : frag.a);\n    }\n  "}},5565:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)},o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};Object.defineProperty(t,"__esModule",{value:!0}),t.parsePadAttributesV11=t.padV11=t.parsePadAttributesV2=t.padV2=void 0;var i=n(4910),a=n(7273),u=n(6757),s=n(5639),c={name:"Pad",inputNames:["A"],inputTypes:[s.TextureType.unpacked]};t.padV2=function(e,t,n){return f(t),[e.run(r(r({},c),{cacheHint:n.cacheKey,get:function(){return p(e,t[0],n)}}),t)]},t.parsePadAttributesV2=function(e){var t=e.attributes.getString("mode","constant"),n=e.attributes.getFloat("value",0),r=e.attributes.getInts("pads");return(0,i.createAttributeWithCacheKey)({mode:t,value:n,pads:r})},t.padV11=function(e,n,r){d(n);var o=l(e,n,r);return(0,t.padV2)(e,[n[0]],o)},t.parsePadAttributesV11=function(e){return e.attributes.getString("mode","constant")};var l=function(e,t,n){if(!e.session.isInitializer(t[1].dataId)||t.length>=3&&!e.session.isInitializer(t[2].dataId))throw new Error("dynamic pad attributes are not allowed");var r=Array.from(t[1].integerData),o=t.length>=3?t[2].floatData[0]:0;return(0,i.createAttributeWithCacheKey)({mode:n,pads:r,value:o})},p=function(e,t,n){var r=a.ShapeUtil.padShape(t.dims.slice(),n.pads),o=r.length,i=h(e,t,n),u="\n      ".concat(i,"\n      float process(int[").concat(o,"] indices) {\n          return padA(indices);\n      }");return{name:"Pad",inputNames:["A"],inputTypes:[s.TextureType.unpacked],output:{dims:r,type:t.type,textureType:s.TextureType.unpacked},shaderSource:u}},f=function(e){if(!e||1!==e.length)throw new Error("Pad requires 1 input");if("float32"!==e[0].type&&"float64"!==e[0].type)throw new Error("Invalid input type.")},d=function(e){if(!e||2!==e.length&&3!==e.length)throw new Error("Pad requires 2 or 3 inputs");if("int32"!==e[1].type)throw new Error("Invalid input type.");if(e.length>=3&&"string"===e[2].type)throw new Error("Invalid input type.")},h=function(e,t,n){var r=(0,u.getGlsl)(e.session.backend.glContext.version),i=o(e.calculateTextureWidthAndHeight(t.dims,s.TextureType.unpacked),2),c=i[0],l=i[1],p=a.ShapeUtil.computeStrides(t.dims);switch(n.mode){case"constant":return g(r,t.dims,p,c,l,n.pads,n.value);case"reflect":return y(r,t.dims,p,c,l,n.pads);case"edge":return m(r,t.dims,p,c,l,n.pads);default:throw new Error("Invalid mode")}},g=function(e,t,n,r,o,i,a){for(var u=t.length,s="",c=u-1;c>=0;--c)s+="\n        k = m[".concat(c,"] - ").concat(i[c],";\n        if (k < 0)  return constant;\n        if (k >= ").concat(t[c],") return constant;\n        offset += k * ").concat(n[c],";\n        ");return"\n      float padA(int m[".concat(u,"]) {\n        const float constant = float(").concat(a,");\n        int offset = 0;\n        int k = 0;\n        ").concat(s,"\n        vec2 coords = offsetToCoords(offset, ").concat(r,", ").concat(o,");\n        float value = getColorAsFloat(").concat(e.texture2D,"(A, coords));\n        return value;\n      }\n      ")},y=function(e,t,n,r,o,i){for(var a=t.length,u="",s=a-1;s>=0;--s)u+="\n        k = m[".concat(s,"] - ").concat(i[s],";\n        if (k < 0) { k = -k; }\n        {\n          const int _2n_1 = ").concat(2*(t[s]-1),";\n          k = int( mod( float(k), float(_2n_1) ) ) ;\n          if(k >= ").concat(t[s],") { k = _2n_1 - k; }\n        }\n        offset += k * ").concat(n[s],";\n        ");return"\n      float padA(int m[".concat(a,"]) {\n        int offset = 0;\n        int k = 0;\n        ").concat(u,"\n        vec2 coords = offsetToCoords(offset, ").concat(r,", ").concat(o,");\n        float value = getColorAsFloat(").concat(e.texture2D,"(A, coords));\n        return value;\n      }\n      ")},m=function(e,t,n,r,o,i){for(var a=t.length,u="",s=a-1;s>=0;--s)u+="\n        k = m[".concat(s,"] - ").concat(i[s],";\n        if (k < 0)  k = 0;\n        if (k >= ").concat(t[s],") k = ").concat(t[s]-1,";\n        offset += k * ").concat(n[s],";\n      ");return"\n      float padA(int m[".concat(a,"]) {\n        int offset = 0;\n        int k = 0;\n        ").concat(u,"\n        vec2 coords = offsetToCoords(offset, ").concat(r,", ").concat(o,");\n        float value = getColorAsFloat(").concat(e.texture2D,"(A, coords));\n        return value;\n      }\n      ")}},2834:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)},o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};Object.defineProperty(t,"__esModule",{value:!0}),t.globalMaxPool=t.parseMaxPoolAttributes=t.maxPool=t.parseGlobalAveragePoolAttributes=t.globalAveragePool=t.parseAveragePoolAttributes=t.averagePool=void 0;var i=n(4910),a=n(7273),u=n(5639);t.averagePool=function(e,t,n){d(t);var o={name:"AveragePool",inputNames:["X"],inputTypes:[u.TextureType.unpacked],cacheHint:n.cacheKey};return[e.run(r(r({},o),{get:function(){return s(t,o,!1,n)}}),t)]},t.parseAveragePoolAttributes=function(e){var t=e.attributes.getString("auto_pad","NOTSET"),n=e.attributes.getInt("ceil_mode",0),r=0!==e.attributes.getInt("count_include_pad",0),o=e.attributes.getInts("kernel_shape"),a=e.attributes.getInts("strides",[]),u=e.attributes.getInts("pads",[]);if(0!==n)throw new Error("using ceil() in shape computation is not yet supported for AveragePool");return(0,i.createAttributeWithCacheKey)({autoPad:t,ceilMode:n,countIncludePad:r,kernelShape:o,strides:a,pads:u})};var s=function(e,t,n,i){var s=o(l(e,i,n),2),c=s[0],p=s[1],f=a.ShapeUtil.size(c.kernelShape),d="";c.countIncludePad?d+="value /= float(".concat(f,");"):d+="value /= float(".concat(f," - pad);");var g=h(e[0].dims,c,"value += _X(x);",d,"0.0"),y="\n        ".concat(g,"\n      ");return r(r({},t),{output:{dims:p,type:e[0].type,textureType:u.TextureType.unpacked},shaderSource:y})};t.globalAveragePool=function(e,t,n){d(t);var o={name:"GlobalAveragePool",inputNames:["X"],inputTypes:[u.TextureType.unpacked],cacheHint:"".concat(n.countIncludePad)};return[e.run(r(r({},o),{get:function(){return s(t,o,!0,n)}}),t)]},t.parseGlobalAveragePoolAttributes=function(e){var t=0!==e.attributes.getInt("count_include_pad",0);return(0,i.createAttributeWithCacheKey)({autoPad:"",ceilMode:0,countIncludePad:t,kernelShape:[],strides:[],pads:[]})},t.maxPool=function(e,t,n){d(t);var o={name:"MaxPool",inputNames:["X"],inputTypes:[u.TextureType.unpacked],cacheHint:n.cacheKey};return[e.run(r(r({},o),{get:function(){return c(t,o,!1,n)}}),t)]},t.parseMaxPoolAttributes=function(e){var t=e.attributes.getString("auto_pad","NOTSET"),n=e.attributes.getInt("ceil_mode",0),r=e.attributes.getInts("kernel_shape"),o=e.attributes.getInts("strides",[]),a=e.attributes.getInts("pads",[]),u=e.attributes.getInt("storage_order",0),s=e.attributes.getInts("dilations",[]);if(0!==u)throw new Error("column major storage order is not yet supported for MaxPool");if(0!==n)throw new Error("using ceil() in shape computation is not yet supported for MaxPool");return(0,i.createAttributeWithCacheKey)({autoPad:t,ceilMode:n,countIncludePad:!1,kernelShape:r,strides:o,pads:a,storageOrder:u,dilations:s})};var c=function(e,t,n,i){var a=o(l(e,i,n),2),s=a[0],c=a[1],p=h(e[0].dims,s,"\n      value = max(_X(x), value);\n    ","","-1e5"),f="\n      ".concat(p,"\n    ");return r(r({},t),{output:{dims:c,type:e[0].type,textureType:u.TextureType.unpacked},shaderSource:f})},l=function(e,t,n){var r=e[0].dims.slice(),o=Object.hasOwnProperty.call(t,"dilations"),i=t.kernelShape.slice(),u=t.strides.slice(),s=o?t.dilations.slice():[],c=t.pads.slice();a.PoolConvUtil.adjustPoolAttributes(n,r,i,u,s,c);var l=a.PoolConvUtil.computePoolOutputShape(n,r,u,s,i,c,t.autoPad),p=Object.assign({},t);return o?Object.assign(p,{kernelShape:i,strides:u,pads:c,dilations:s,cacheKey:t.cacheKey}):Object.assign(p,{kernelShape:i,strides:u,pads:c,cacheKey:t.cacheKey}),[p,l]},p={autoPad:"",ceilMode:0,countIncludePad:!1,kernelShape:[],strides:[],pads:[],storageOrder:0,dilations:[],cacheKey:""},f={name:"GlobalMaxPool",inputNames:["X"],inputTypes:[u.TextureType.unpacked]};t.globalMaxPool=function(e,t){return d(t),[e.run(r(r({},f),{get:function(){return c(t,f,!0,p)}}),t)]};var d=function(e){if(!e||1!==e.length)throw new Error("Pool ops requires 1 input.");if("float32"!==e[0].type&&"float64"!==e[0].type)throw new Error("Invalid input type.")},h=function(e,t,n,r,o){var i=e.length;if(t.kernelShape.length<=2){var u,s=t.kernelShape[t.kernelShape.length-1],c=t.strides[t.strides.length-1],l=t.pads[t.pads.length/2-1],p=t.pads[t.pads.length-1],f=e[i-1],d="",h="";if(u=l+p!==0?"\n          for (int i = 0; i < ".concat(s,"; i++) {\n            x[").concat(i," - 1] = indices[").concat(i," - 1] * ").concat(c," - ").concat(l," + i;\n            if (x[").concat(i," - 1] < 0 || x[").concat(i," - 1] >= ").concat(f,") {\n              pad++;\n              continue;\n            }\n            ").concat(n,"\n          }"):"\n          for (int i = 0; i < ".concat(s,"; i++) {\n            x[").concat(i," - 1] = indices[").concat(i," - 1] * ").concat(c," - ").concat(l," + i;\n            ").concat(n,"\n          }"),2===t.kernelShape.length){var m=t.kernelShape[t.kernelShape.length-2],v=t.strides[t.strides.length-2],b=t.pads[t.pads.length/2-2],w=t.pads[t.pads.length-2],_=e[i-2];d=b+w!==0?"\n            for (int j = 0; j < ".concat(m,"; j++) {\n              x[").concat(i," - 2] = indices[").concat(i," - 2] * ").concat(v," - ").concat(b," + j;\n              if (x[").concat(i," - 2] < 0 || x[").concat(i," - 2] >= ").concat(_,") {\n                pad+= ").concat(s,";\n                continue;\n              }\n          "):"\n            for (int j = 0; j < ".concat(m,"; j++) {\n              x[").concat(i," - 2] = indices[").concat(i," - 2] * ").concat(v," - ").concat(b," + j;\n            "),h="\n          }\n        "}return"\n        float process(int indices[".concat(i,"]) {\n          int x[").concat(i,"];\n          copyVec(indices, x);\n\n          float value = ").concat(o,";\n          int pad = 0;\n          ").concat(d,"\n          ").concat(u,"\n          ").concat(h,"\n          ").concat(r,"\n          return value;\n        }\n      ")}var x,T=a.ShapeUtil.size(t.kernelShape),S=a.ShapeUtil.computeStrides(t.kernelShape),P=S.length,A=t.pads.length,O=y(P),I=g(e,"inputDims"),E=g(t.pads,"pads"),C=g(S,"kernelStrides"),D=g(t.strides,"strides");return x=t.pads.reduce((function(e,t){return e+t}))?"\n            if (x[j] >= inputDims[j] || x[j] < 0) {\n              pad++;\n              isPad = true;\n              break;\n            }\n          }\n          if (!isPad) {\n            ".concat(n,"\n          }"):"\n          }\n          ".concat(n,"\n        "),"\n        ".concat(O,"\n        float process(int indices[").concat(i,"]) {\n          int x[").concat(i,"];\n          copyVec(indices, x);\n          int offset[").concat(P,"];\n          int pads[").concat(A,"];\n          int inputDims[").concat(i,"];\n          int kernelStrides[").concat(P,"];\n          int strides[").concat(P,"];\n          ").concat(E,"\n          ").concat(I,"\n          ").concat(D,"\n          ").concat(C,"\n\n          float value = ").concat(o,";\n          int pad = 0;\n          bool isPad = false;\n          for (int i = 0; i < ").concat(T,"; i++) {\n            offsetToIndices(i, kernelStrides, offset);\n            isPad = false;\n            for (int j = ").concat(i," - ").concat(P,"; j < ").concat(i,"; j++) {\n              x[j] = indices[j] * strides[j - ").concat(i," + ").concat(P,"]\n                + offset[j - ").concat(i," + ").concat(P,"] - pads[j - 2];\n              ").concat(x,"\n          }\n          ").concat(r,"\n\n          return value;\n        }\n      ")},g=function(e,t){for(var n="",r=0;r<e.length;r++)n+="\n      ".concat(t,"[").concat(r,"] = ").concat(e[r],";\n    ");return n},y=function(e){return"\n  void offsetToIndices(int offset, int[".concat(e,"] strides, out int[").concat(e,"] indices) {\n    if (").concat(e," == 0) {\n      return;\n    }\n    for (int i = 0; i < ").concat(e," - 1; ++i) {\n      indices[i] = offset / strides[i];\n      offset -= indices[i] * strides[i];\n    }\n    indices[").concat(e," - 1] = offset;\n  }")}},1010:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.reduceLogSumSquare=t.reduceLogSum=t.reduceProd=t.reduceMin=t.reduceMax=t.reduceMean=t.reduceSum=t.parseReduceAttributes=void 0;var o=n(4910),i=n(6145),a=n(7273),u=n(5639),s=function(e,t,n,o,i){l(t);var a={name:o,inputNames:["A"],inputTypes:[u.TextureType.unpacked]};return[e.run(r(r({},a),{cacheHint:n.cacheKey,get:function(){return c(e,t,n,o,i,a)}}),t)]};t.parseReduceAttributes=function(e){var t=e.attributes.getInts("axes",[]),n=1===e.attributes.getInt("keepdims",1);return(0,o.createAttributeWithCacheKey)({axes:t,keepDims:n})};var c=function(e,t,n,o,i,s){for(var c=[],l=t[0].dims.length||1,p=[],f=a.ShapeUtil.normalizeAxes(n.axes,t[0].dims.length),d=i(t,f),h=d[1],g=0;g<t[0].dims.length;g++)f.indexOf(g)>=0||0===f.length?(n.keepDims&&c.push(1),h="\n          for(int j".concat(g," = 0; j").concat(g," < ").concat(t[0].dims[g],"; j").concat(g,"++) {\n            inputIdx[").concat(g,"] = j").concat(g,";\n            ").concat(h,"\n          }")):(p.push("inputIdx[".concat(g,"] = outputIdx[").concat(c.length,"];")),c.push(t[0].dims[g]));var y=c.length||1,m="\n      float process(int outputIdx[".concat(y,"]) {\n        float value;                 // final result\n        int inputIdx[").concat(l,"];      // addressing input data\n        ").concat(p.join("\n"),"\n        ").concat(d[0],"       // init ops for reduce max/min\n        ").concat(h,"\n        ").concat(d[2],"       // final computation for reduce mean\n        return value;\n      }");return r(r({},s),{output:{dims:c,type:t[0].type,textureType:u.TextureType.unpacked},shaderSource:m})},l=function(e){if(!e||1!==e.length)throw new Error("Reduce op requires 1 input.");if(-1===i.NUMBER_TYPES.indexOf(e[0].type))throw new Error("Invalid input type.")};t.reduceSum=function(e,t,n){return s(e,t,n,"ReduceSum",(function(){return["value = 0.0;","value += _A(inputIdx);",""]}))},t.reduceMean=function(e,t,n){return s(e,t,n,"ReduceMean",(function(e,t){for(var n=1,r=0;r<e[0].dims.length;r++)(t.indexOf(r)>=0||0===t.length)&&(n*=e[0].dims[r]);return["value = 0.0;","value += _A(inputIdx);","value /= ".concat(n,".;")]}))},t.reduceMax=function(e,t,n){return s(e,t,n,"ReduceMax",(function(e,t){for(var n=[],r=0;r<e[0].dims.length;r++)(t.indexOf(r)>=0||0===t.length)&&n.push("inputIdx[".concat(r,"] = 0;"));return["".concat(n.join("\n"),"\nvalue = _A(inputIdx);"),"value = max(value, _A(inputIdx));",""]}))},t.reduceMin=function(e,t,n){return s(e,t,n,"ReduceMin",(function(e,t){for(var n=[],r=0;r<e[0].dims.length;r++)(t.indexOf(r)>=0||0===t.length)&&n.push("inputIdx[".concat(r,"] = 0;"));return["".concat(n.join("\n"),"\nvalue = _A(inputIdx);"),"value = min(value, _A(inputIdx));",""]}))},t.reduceProd=function(e,t,n){return s(e,t,n,"ReduceProd",(function(){return["value = 1.0;","value *= _A(inputIdx);",""]}))},t.reduceLogSum=function(e,t,n){return s(e,t,n,"ReduceLogSum",(function(){return["value = 0.0;","value += _A(inputIdx);","value = log(value);"]}))},t.reduceLogSumSquare=function(e,t,n){return s(e,t,n,"ReduceLogSumSquare",(function(){return["float t; value = 0.0;","t = _A(inputIdx); value += t * t;",""]}))}},7379:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.isReshapeCheap=t.processDims3D=t.createPackedReshape3DProgramInfoLoader=void 0;var o=n(7273),i=n(6757),a=n(5639),u=n(5614);t.createPackedReshape3DProgramInfoLoader=function(e,t,n){var s=function(e){return{name:"Reshape (packed)",inputTypes:[a.TextureType.packed],inputNames:["A"],cacheHint:"".concat(e)}}(n);return r(r({},s),{get:function(){return function(e,t,n,s){for(var c=t.dims,l=s,p="",f=0;f<4;f++){var d="";switch(f){case 0:d="outputCoords = rc;";break;case 1:d="outputCoords = ivec3(rc.x, rc.y+1, rc.z);";break;case 2:d="outputCoords = ivec3(rc.x, rc.y, rc.z+1);";break;case 3:d="outputCoords = ivec3(rc.x, rc.y+1, rc.z+1);";break;default:throw new Error}p+="\n        ".concat(d,"\n        ").concat(f>0?"if(outputCoords.y < rows && outputCoords.z < cols){":"","\n          int flattenedIndex = getFlattenedIndex(outputCoords);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flattenedIndex);\n          vec2 innerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result[").concat(f,"] = getChannel(getA(inputRC.x, inputRC.y, inputRC.z), innerDims);\n\n        ").concat(f>0?"}":"","\n      ")}var h,g,y,m,v,b=(0,i.getGlsl)(e.session.backend.glContext.version),w="\n      ".concat((h=c,g=o.ShapeUtil.computeStrides(h),y=["b","r","c"],m="index",v=g.map((function(e,t){var n="int ".concat(y[t]," = ").concat(m," / ").concat(e),r=t===g.length-1?"int ".concat(y[t+1]," = ").concat(m," - ").concat(y[t]," * ").concat(e):"index -= ".concat(y[t]," * ").concat(e);return"".concat(n,"; ").concat(r,";")})).join(""),"\n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      ".concat(v,"\n      return ivec3(b, r, c);\n    }\n  ")),"\n      ").concat(function(e){var t=o.ShapeUtil.computeStrides(e);return"\n  int getFlattenedIndex(ivec3 coords) {\n    // reverse y, z order\n    return coords.x * ".concat(t[0]," + coords.z * ").concat(t[1]," + coords.y;\n  }\n")}(l),"\n      ").concat((0,u.unpackFromChannel)(),"\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.0);\n\n        ivec3 outputCoords;\n        int rows = ").concat(l[2],";\n        int cols = ").concat(l[1],";\n\n        ").concat(p,"\n        ").concat(b.output," = result;\n      }\n    ");return r(r({},n),{output:{dims:l,type:t.type,textureType:a.TextureType.packed},shaderSource:w,hasMain:!0})}(e,t,s,n)}})},t.processDims3D=function(e){if(0===e.length)return[1,1,1];for(var t=1,n=0;n<e.length-2;++n)t*=e[n];return[t,e.length>1?e[e.length-2]:1,e[e.length-1]]},t.isReshapeCheap=function(e,t){return 0===e.length||0===t.length||(e.length<2||t.length<2?e[e.length-1]===t[t.length-1]:e[e.length-1]===t[t.length-1]&&e[e.length-2]===t[t.length-2])}},8126:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reshape=void 0;var r=n(7273);t.reshape=function(e,t){var n=r.ShapeUtil.calculateReshapedDims(t[0].dims,t[1].integerData);return e.session.pack?[e.reshapePacked(t[0],n)]:[e.reshapeUnpacked(t[0],n)]}},2801:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)},o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};Object.defineProperty(t,"__esModule",{value:!0}),t.parseResizeAttributesV11=t.parseResizeAttributesV10=t.resize=void 0;var i=n(6757),a=n(5639),u=n(432),s=n(5614),c=n(3980),l={name:"Resize",inputNames:["A"],inputTypes:[a.TextureType.packed]};t.resize=function(e,t,n){return(0,c.validateInputs)(t,n),[e.run(r(r({},l),{cacheHint:n.cacheKey,get:function(){return p(e,t,n)}}),t)]},t.parseResizeAttributesV10=function(e){return(0,c.parseUpsampleAttributes)(e,10)},t.parseResizeAttributesV11=function(e){return(0,c.parseUpsampleAttributes)(e,11)};var p=function(e,t,n){var c=(0,i.getGlsl)(e.session.backend.glContext.version),p=o(f(t,n),2),d=p[0],h=p[1];if(d.every((function(e){return 1===e}))&&"tf_crop_and_resize"!==n.coordinateTransformMode)return r(r({},l),{output:{dims:h,type:t[0].type,textureType:a.TextureType.packed},hasMain:!0,shaderSource:"void main() {\n                    vec4 v = ".concat(c.texture2D,"(X, TexCoords);\n                    ").concat(c.output," = v;\n                }")});var g=h.length;if(g<2)throw new Error("output dimension should be at least 2, but got ".concat(g));var y=h[g-2],m=h[g-1],v=t[0].dims;if(g!==v.length)throw new Error("output dimension should match input ".concat(v.length,", but got ").concat(g));var b=v[g-2],w=v[g-1],_=d[g-2],x=d[g-1],T="";if("linear"!==n.mode)throw new Error("resize (packed) does not support mode: '".concat(n.mode,"'"));switch(n.coordinateTransformMode){case"asymmetric":T="\n                    vec4 getSourceFracIndex(ivec4 coords) {\n                        return vec4(coords) / scaleWHWH;\n                    }\n                ";break;case"half_pixel":T="\n                    vec4 getSourceFracIndex(ivec4 coords) {\n                        return (vec4(coords) + 0.5) / scaleWHWH - 0.5;\n                    }\n                ";break;case"pytorch_half_pixel":T="\n                    vec4 getSourceFracIndex(ivec4 coords) {\n                        vec4 fcoords = vec4(coords);\n                        return vec4(\n                            ".concat(m,".0 > 1.0 ? (fcoords.x + 0.5) / scaleWHWH.x - 0.5 : 0.0,\n                            ").concat(y,".0 > 1.0 ? (fcoords.y + 0.5) / scaleWHWH.y - 0.5 : 0.0,\n                            ").concat(m,".0 > 1.0 ? (fcoords.z + 0.5) / scaleWHWH.z - 0.5 : 0.0,\n                            ").concat(y,".0 > 1.0 ? (fcoords.w + 0.5) / scaleWHWH.w - 0.5 : 0.0\n                          );\n                    }\n                ");break;case"align_corners":T="\n                    vec4 getSourceFracIndex(ivec4 coords) {\n                        vec4 resized = vec4(".concat(m,".0 - 1.0, ").concat(y,".0 - 1.0, ").concat(m,".0 - 1.0,\n                            ").concat(y,".0 - 1.0);\n                        vec4 original = vec4(").concat(w,".0 - 1.0, ").concat(b,".0 - 1.0, ").concat(w,".0 - 1.0,\n                            ").concat(b,".0 - 1.0);\n                        vec4 new_scale = original / resized;\n                        return vec4(coords) * new_scale;\n                    }\n                ");break;default:throw new Error("resize (packed) does not support coordinateTransformMode:                                 '".concat(n.coordinateTransformMode,"'"))}var S=(0,u.getCoordsDataType)(g),P=(0,s.unpackFromChannel)(),A="\n            const vec2 inputWH = vec2(".concat(b,".0, ").concat(w,".0);\n            const vec4 scaleWHWH = vec4(float(").concat(_,"), float(").concat(x,"), float(").concat(_,"), float(").concat(x,"));\n            ").concat(P,"\n            ").concat(T,"\n            float getAValue(int x10, int r, int c, int d) {\n                return getChannel(getA(x10, r, c, d), vec2(c, d));\n            }\n            void main() {\n                ").concat(S," rc = getOutputCoords();\n\n                int batch = rc[0];\n                int depth = rc[1];\n\n                // retrieve the 4 coordinates that is used in the 4 packed output values.\n                ivec4 coords = ivec4(rc.wz, rc.w + 1, rc.z + 1);\n\n                // calculate the source index in fraction\n                vec4 sourceFrac = getSourceFracIndex(coords);\n\n                // get the lower and upper bound of the 4 values that will be packed into one texel.\n                ivec4 x00 = ivec4(max(sourceFrac.xy, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.xy)));\n                ivec4 x01 = ivec4(max(sourceFrac.xw, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.xw)));\n                ivec4 x10 = ivec4(max(sourceFrac.zy, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.zy)));\n                ivec4 x11 = ivec4(max(sourceFrac.zw, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.zw)));\n\n                bool hasNextRow = rc.w < ").concat(y-1,";\n                bool hasNextCol = rc.z < ").concat(m-1,";\n\n                // pack x00, x01, x10, x11's top-left corner into one vec4 structure\n                vec4 topLeft = vec4(\n                    getAValue(batch, depth, x00.x, x00.y),\n                    hasNextCol ? getAValue(batch, depth, x01.x, x01.y) : 0.0,\n                    hasNextRow ? getAValue(batch, depth, x10.x, x10.y) : 0.0,\n                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.x, x11.y) : 0.0);\n\n                // pack x00, x01, x10, x11's top-right corner into one vec4 structure\n                vec4 topRight = vec4(\n                    getAValue(batch, depth, x00.x, x00.w),\n                    hasNextCol ? getAValue(batch, depth, x01.x, x01.w) : 0.0,\n                    hasNextRow ? getAValue(batch, depth, x10.x, x10.w) : 0.0,\n                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.x, x11.w) : 0.0);\n\n                // pack x00, x01, x10, x11's bottom-left corner into one vec4 structure\n                vec4 bottomLeft = vec4(\n                    getAValue(batch, depth, x00.z, x00.y),\n                    hasNextCol ? getAValue(batch, depth, x01.z, x01.y) : 0.0,\n                    hasNextRow ? getAValue(batch, depth, x10.z, x10.y) : 0.0,\n                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.z, x11.y) : 0.0);\n\n                // pack x00, x01, x10, x11's bottom-right corner into one vec4 structure\n                vec4 bottomRight = vec4(\n                    getAValue(batch, depth, x00.z, x00.w),\n                    hasNextCol ? getAValue(batch, depth, x01.z, x01.w) : 0.0,\n                    hasNextRow ? getAValue(batch, depth, x10.z, x10.w) : 0.0,\n                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.z, x11.w) : 0.0);\n\n                // calculate the interpolation fraction on u and v direction\n                vec4 frac = vec4(sourceFrac) - floor(sourceFrac);\n                vec4 clampFrac = clamp(frac, vec4(0.0), vec4(1.0));\n\n                vec4 top = mix(topLeft, topRight, clampFrac.ywyw);\n                vec4 bottom = mix(bottomLeft, bottomRight, clampFrac.ywyw);\n                vec4 newValue = mix(top, bottom, clampFrac.xxzz);\n\n                ").concat(c.output," = vec4(newValue);\n            }\n        ");return r(r({},l),{output:{dims:h,type:t[0].type,textureType:a.TextureType.packed},hasMain:!0,shaderSource:A})},f=function(e,t){var n,r=e[0].dims,o=t.scales;if(0===o.length){var i=e[t.scalesInputIdx];if(i&&0!==i.size){if(e[t.sizesInputIdx])throw new Error("Only one of scales or sizes must be provided as input.");o=d(i,t.mode,t.isResize)}else{var a=e[t.sizesInputIdx];if(!a||0===a.size)throw new Error("Either scales or sizes MUST be provided as input.");n=Array.from(a.integerData),o=h(n,r,t.mode,t.isResize)}}else if(e[t.sizesInputIdx])throw new Error("Only one of scales or sizes must be provided as input.");var u=n||r.map((function(e,t){return Math.floor(e*o[t])}));return[o,u]},d=function(e,t,n){var r=Array.from(e.floatData);return(0,c.scalesValidation)(r,t,n),r},h=function(e,t,n,r){for(var o=t.length,i=new Array(o),a=0,u=o;a<u;a++)if(0===t[a]){if(0!==e[a])throw new Error("Input dim is zero but required output dim is non-zero.");i[a]=1}else i[a]=e[a]/t[a];return(0,c.scalesValidation)(i,n,r),i}},565:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.shape=void 0;var r=n(9240);t.shape=function(e,t){return o(t),[new r.Tensor([t[0].dims.length],"int32",void 0,void 0,new Int32Array(t[0].dims))]};var o=function(e){if(!e||1!==e.length)throw new Error("Shape requires 1 input.")}},2444:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.sliceV10=t.parseSliceAttributes=t.slice=void 0;var o=n(4910),i=n(6145),a=n(7273),u=n(5639),s={name:"Slice",inputNames:["A"],inputTypes:[u.TextureType.unpacked]};t.slice=function(e,t,n){return l(t),[e.run(r(r({},s),{cacheHint:n.cacheKey,get:function(){return c(e,t[0],n)}}),t)]},t.parseSliceAttributes=function(e){var t=e.attributes.getInts("starts"),n=e.attributes.getInts("ends"),r=e.attributes.getInts("axes",[]);return(0,o.createAttributeWithCacheKey)({starts:t,ends:n,axes:r})};var c=function(e,t,n){for(var o=0===n.axes.length?t.dims.slice(0).map((function(e,t){return t})):n.axes,i=a.ShapeUtil.normalizeAxes(o,t.dims.length),c=n.starts.map((function(e,n){return e>t.dims[i[n]]-1?t.dims[i[n]]:a.ShapeUtil.normalizeAxis(e,t.dims[i[n]])})),l=n.ends.map((function(e,n){return e>t.dims[i[n]]-1?t.dims[i[n]]:a.ShapeUtil.normalizeAxis(e,t.dims[i[n]])})),p=t.dims.slice(),f=[],d=0;d<i.length;d++)p[i[d]]=l[d]-c[d],c[d]>0&&f.push("outputIdx[".concat(i[d],"] += ").concat(c[d],";"));var h=p.length,g="\n      float process(int outputIdx[".concat(h,"]) {\n        ").concat(f.join("\n      "),"\n        return _A(outputIdx);\n      }");return r(r({},s),{output:{dims:p,type:t.type,textureType:u.TextureType.unpacked},shaderSource:g})},l=function(e){if(!e||1!==e.length)throw new Error("Slice requires 1 input.");if(-1===i.NUMBER_TYPES.indexOf(e[0].type))throw new Error("Invalid input type.")};t.sliceV10=function(e,t){f(t);var n=p(e,t);return[e.run(r(r({},s),{cacheHint:n.cacheKey,get:function(){return c(e,t[0],n)}}),[t[0]])]};var p=function(e,t){if(!e.session.isInitializer(t[1].dataId)||!e.session.isInitializer(t[2].dataId)||t.length>=4&&!e.session.isInitializer(t[3].dataId)||t.length>=5&&!e.session.isInitializer(t[4].dataId))throw new Error("dynamic slice attributes are not allowed");if(t.length>=5&&t[4].integerData.some((function(e){return 1!==e})))throw new Error("currently non-1 steps is not supported for Slice");var n=Array.from(t[1].integerData),r=Array.from(t[2].integerData),o=t.length>=4?Array.from(t[3].integerData):[];return{starts:n,ends:r,axes:o,cacheKey:"".concat(o,";").concat(n,";").concat(r)}},f=function(e){if(!e||e.length<3||e.length>5)throw new Error("Invalid input number.");if("int32"!==e[1].type||1!==e[1].dims.length)throw new Error("Invalid input type.");if("int32"!==e[2].type||1!==e[2].dims.length)throw new Error("Invalid input type.");if(e.length>=4&&("int32"!==e[3].type||1!==e[3].dims.length))throw new Error("Invalid input type.");if(e.length>=5&&("int32"!==e[4].type||1!==e[4].dims.length))throw new Error("Invalid input type.")}},815:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)},o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};Object.defineProperty(t,"__esModule",{value:!0}),t.softmaxV13=t.parseSoftmaxAttributesV13=t.parseSoftmaxAttributes=t.softmax=void 0;var i=n(4910),a=n(7273),u=n(6757),s=n(5639),c=n(5707),l={name:"SoftmaxComputeMax",inputNames:["A"],inputTypes:[s.TextureType.unpacked]},p={name:"SoftmaxComputeScale",inputNames:["A","Max"],inputTypes:[s.TextureType.unpacked,s.TextureType.unpacked]},f={name:"SoftMax",inputNames:["A","Max","Norm"],inputTypes:[s.TextureType.unpacked,s.TextureType.unpacked,s.TextureType.unpacked]};t.softmax=function(e,t,n){m(t);var r=t[0].dims.slice(),o=a.ShapeUtil.normalizeAxis(n.axis,r.length),i=a.ShapeUtil.sizeToDimension(r,o),u=a.ShapeUtil.sizeFromDimension(r,o);return d(e,t,n,i,u)},t.parseSoftmaxAttributes=function(e){return(0,i.createAttributeWithCacheKey)({axis:e.attributes.getInt("axis",1)})},t.parseSoftmaxAttributesV13=function(e){return(0,i.createAttributeWithCacheKey)({axis:e.attributes.getInt("axis",-1)})},t.softmaxV13=function(e,t,n){m(t);var r,o=t[0].dims.slice(),u=a.ShapeUtil.normalizeAxis(n.axis,o.length),s=o.length,l=u!==s-1,p=[],f=[],h=[];l&&((f=Array.from({length:s}).map((function(e,t){return t})))[u]=s-1,f[s-1]=u,f.map((function(e){return p.push(o[e])})),r=(0,i.createAttributeWithCacheKey)({perm:f}),h=(0,c.transpose)(e,t,r));var g=l?a.ShapeUtil.sizeToDimension(p,s-1):a.ShapeUtil.sizeToDimension(o,s-1),y=l?a.ShapeUtil.sizeFromDimension(p,s-1):a.ShapeUtil.sizeFromDimension(o,s-1),v=d(e,l?h:t,n,g,y);return l?(0,c.transpose)(e,v,r):v};var d=function(e,t,n,o,i){var a=h(e,t[0],o,i,[o]),u=e.run(r(r({},l),{cacheHint:n.cacheKey,get:function(){return a}}),t),s=g(e,t[0],o,i,a.output.dims,[o]),c=e.run(r(r({},p),{cacheHint:n.cacheKey,get:function(){return s}}),[t[0],u]),d=y(e,t[0],o,i,a.output.dims,s.output.dims);return[e.run(r(r({},f),{cacheHint:n.cacheKey,get:function(){return d}}),[t[0],u,c])]},h=function(e,t,n,i,a){var c=o(e.calculateTextureWidthAndHeight(t.dims,s.TextureType.unpacked),2),p=c[0],f=c[1],d=a.length;if(n<1||i<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(1!==a.length)throw new Error("Dimensionality of the output should be 1");if(a[0]!==n)throw new Error("Shape of the output should be equal to logical row count");var h=(0,u.getGlsl)(e.session.backend.glContext.version),g="\n      float process(int[".concat(d,"] indices) {\n        int logical_row_start_offset = indices[0] * ").concat(i,";\n\n        float max = getColorAsFloat(").concat(h.texture2D,"(A, offsetToCoords(logical_row_start_offset, ").concat(p,",\n        ").concat(f," )));\n        for(int i=1; i<").concat(i,"; ++i)\n        {\n          float current = getColorAsFloat(").concat(h.texture2D,"(A, offsetToCoords(logical_row_start_offset + i,\n            ").concat(p,", ").concat(f,")));\n          if(current > max)\n          max = current;\n        }\n\n        return max;\n      }");return r(r({},l),{output:{dims:a,type:t.type,textureType:s.TextureType.unpacked},shaderSource:g})},g=function(e,t,n,i,a,c){var l=o(e.calculateTextureWidthAndHeight(t.dims,s.TextureType.unpacked),2),f=l[0],d=l[1],h=c.length;if(n<1||i<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(1!==c.length)throw new Error("Dimensionality of the output should be 1");if(c[0]!==n)throw new Error("Shape of the output should be equal to logical row count");if(1!==a.length)throw new Error("Dimensionality of the intermediate results should be 1");if(a[0]!==n)throw new Error("Shape of the intermediate results should be equal to logical row count");var g=(0,u.getGlsl)(e.session.backend.glContext.version),y="\n      float process(int[".concat(h,"] indices) {\n        int logical_row_start_offset = indices[0] * ").concat(i,";\n\n        float norm_factor = 0.0;\n        float max = _Max(indices);\n        for(int i=0; i<").concat(i,"; ++i)\n        {\n          norm_factor += exp(getColorAsFloat(").concat(g.texture2D,"(A, offsetToCoords(logical_row_start_offset + i,\n            ").concat(f,", ").concat(d,"))) - max);\n        }\n\n        return norm_factor;\n      }");return r(r({},p),{output:{dims:c,type:t.type,textureType:s.TextureType.unpacked},shaderSource:y})},y=function(e,t,n,i,a,u){var c=o(e.calculateTextureWidthAndHeight(t.dims,s.TextureType.unpacked),2),l=c[0],p=c[1],d=t.dims.length;if(n<1||i<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(1!==a.length||1!==u.length)throw new Error("Dimensionality of the intermediate results should be 1");if(a[0]!==n||u[0]!==n)throw new Error("Shape of the intermediate results should be equal to logical row count");var h="\n      float process(int[".concat(d,"] indices) {\n\n      // get offset of current logical tensor index from the 2-D texture coordinates (TexCoords)\n      int offset = coordsToOffset(TexCoords, ").concat(l,", ").concat(p,");\n\n      //determine the logical row for this index\n      int logical_row_index[1];\n      logical_row_index[0] = offset / ").concat(i,";\n\n      float norm_factor = _Norm(logical_row_index);\n\n      // avoid possible division by 0\n      // if norm_facor is 0, all elements are zero\n      // if so, return 0\n      if(norm_factor == 0.0)\n        return 0.0;\n\n      return exp(_A(indices) - _Max(logical_row_index)) / norm_factor;\n    }");return r(r({},f),{output:{dims:t.dims,type:t.type,textureType:s.TextureType.unpacked},shaderSource:h})},m=function(e){if(!e||1!==e.length)throw new Error("Softmax requires 1 input.");if("float32"!==e[0].type&&"float64"!==e[0].type)throw new Error("Invalid input type")}},564:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)},o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};Object.defineProperty(t,"__esModule",{value:!0}),t.parseSplitAttributes=t.split=void 0;var i=n(4910),a=n(7273),u=n(5639),s={name:"Split",inputNames:["A"],inputTypes:[u.TextureType.unpacked]};t.split=function(e,t,n){p(t);for(var o=a.ShapeUtil.normalizeAxis(n.axis,t[0].dims.length),i=c(e,t,o,n),u=[],f=function(i){u.push(e.run(r(r({},s),{cacheHint:"".concat(n.cacheKey,";").concat(i),get:function(){return l(e,t[0],n,o,i)}}),t))},d=0;d<i;++d)f(d);return u},t.parseSplitAttributes=function(e){var t=e.attributes.getInt("axis",0),n=e.attributes.getInts("split",[]),r=e.outputs.length;return(0,i.createAttributeWithCacheKey)({axis:t,split:n,numOutputs:r})};var c=function(e,t,n,r){return o(a.SplitUtil.splitShape(t[0].dims,n,r.split,r.numOutputs),2)[1].length},l=function(e,t,n,i,c){var l=o(a.SplitUtil.splitShape(t.dims,i,n.split,n.numOutputs),2),p=l[0],f=l[1][c],d=p[c],h=d.length,g="\n      float process(int indices[".concat(h,"]) {\n        indices[").concat(i,"] += ").concat(f,";\n        return _A(indices);\n      }\n    ");return r(r({},s),{cacheHint:"".concat(n.cacheKey,":").concat(c),output:{dims:d,type:t.type,textureType:u.TextureType.unpacked},shaderSource:g})},p=function(e){if(!e||1!==e.length)throw new Error("Split requires one input.");if("int8"!==e[0].type&&"uint8"!==e[0].type&&"int16"!==e[0].type&&"uint16"!==e[0].type&&"int32"!==e[0].type&&"uint32"!==e[0].type&&"float32"!==e[0].type&&"float64"!==e[0].type&&"bool"!==e[0].type)throw new Error("Invalid input type.")}},5416:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseSqueezeAttributes=t.squeezeV13=t.squeeze=void 0;var r=n(7273);t.squeeze=function(e,t,n){o(t);var i=r.ShapeUtil.squeezeShape(t[0].dims,n);return[e.reshapeUnpacked(t[0],i)]},t.squeezeV13=function(e,n){return i(n),(0,t.squeeze)(e,[n[0]],Array.from(n[1].integerData))},t.parseSqueezeAttributes=function(e){return e.attributes.getInts("axes")};var o=function(e){if(!e||1!==e.length)throw new Error("Squeeze requires 1 input.");if("string"===e[0].type)throw new Error("invalid input tensor types.")},i=function(e){if(!e||2!==e.length)throw new Error("Squeeze requires 2 inputs.");if("int32"!==e[1].type)throw new Error("Invalid input type.")}},1240:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.sum=void 0;var o=n(6757),i=n(5639);t.sum=function(e,t){u(t);var n={name:"Sum",inputNames:t.map((function(e,t){return"X".concat(t)})),inputTypes:new Array(t.length).fill(i.TextureType.unpacked)};return[e.run(r(r({},n),{get:function(){return a(e,t,n)}}),t)]};var a=function(e,t,n){var a=(0,o.getGlsl)(e.session.backend.glContext.version),u=t[0].dims.slice(),s=t.map((function(e,t){return"".concat(a.texture2D,"(X").concat(t,",TexCoords)")})).join(" + "),c="\n      void main() {\n        vec4 result = ".concat(s,";\n        ").concat(a.output," = result;\n      }\n    ");return r(r({},n),{output:{dims:u,type:t[0].type,textureType:i.TextureType.unpacked},hasMain:!0,shaderSource:c})},u=function(e){if(!e||0===e.length)throw new Error("Sum requires inputs.");for(var t=e[0].dims.length,n=1;n<e.length;n++){if(t!==e[n].dims.length)throw new Error("Input shapes are mismatched.");for(var r=0;r<t;r++)if(e[0].dims[r]!==e[n].dims[r])throw new Error("Input shapes are not matched.")}if("float32"!==e[0].type&&"float64"!==e[0].type)throw new Error("Invalid input type.");for(n=1;n<e.length;n++)if(e[0].type!==e[n].type)throw new Error("Input types are not matched.")}},5944:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.tile=void 0;var o=n(6145),i=n(5639);t.tile=function(e,t){u(t);var n={name:"Tile",inputNames:["A"],inputTypes:[i.TextureType.unpacked]};return[e.run(r(r({},n),{get:function(){return a(e,t,n)}}),t)]};var a=function(e,t,n){for(var o=t[0].dims.slice(),a=new Array(o.length),u=[],s=0;s<o.length;s++)a[s]=o[s]*t[1].numberData[s],u.push("inputIdx[".concat(s,"] = int(mod(float(outputIdx[").concat(s,"]), ").concat(o[s],".));"));var c=a.length,l="\n      float process(int outputIdx[".concat(c,"]) {\n        int inputIdx[").concat(c,"];\n        ").concat(u.join("\n"),"\n        return _A(inputIdx);\n      }\n    ");return r(r({},n),{output:{dims:a,type:t[0].type,textureType:i.TextureType.unpacked},shaderSource:l})},u=function(e){if(!e||2!==e.length)throw new Error("Tile requires 2 input.");if(1!==e[1].dims.length)throw new Error("The second input shape must 1 dimension.");if(e[1].dims[0]!==e[0].dims.length)throw new Error("Invalid input shape.");if(-1===o.NUMBER_TYPES.indexOf(e[0].type))throw new Error("Invalid input type.");if("int32"!==e[1].type&&"int16"!==e[1].type)throw new Error("Invalid repeat type.")}},5707:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)},o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},i=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.parseTransposeAttributes=t.transpose=void 0;var a=n(4910),u=n(7273),s=n(5639),c={name:"Transpose",inputNames:["A"],inputTypes:[s.TextureType.unpacked]};t.transpose=function(e,t,n){return h(t),[e.run(r(r({},c),{cacheHint:n.cacheKey,get:function(){return l(e,t[0],n.perm)}}),t)]},t.parseTransposeAttributes=function(e){return(0,a.createAttributeWithCacheKey)({perm:e.attributes.getInts("perm",[])})};var l=function(e,t,n){var o=t.dims;n=p(o,n);var i=f(o,n),a=o.length,u="\n      ".concat(d("perm",n,a),"\n      float process(int indices[").concat(a,"]) {\n        int a[").concat(a,"];\n        perm(a, indices);\n        return _A(a);\n      }");return r(r({},c),{output:{dims:i,type:t.type,textureType:s.TextureType.unpacked},shaderSource:u})},p=function(e,t){return t&&t.length!==e.length&&(t=i([],o(e.keys()),!1).reverse()),t},f=function(e,t){return t=p(e,t),u.ShapeUtil.sortBasedOnPerm(e,t)},d=function(e,t,n){var r=[];r.push("void ".concat(e,"(out int a[").concat(n,"], int src[").concat(n,"]) {"));for(var o=0;o<n;++o)r.push("\ta[".concat(t[o],"]=src[").concat(o,"];"));return r.push("\t}"),r.join("\n")},h=function(e){if(!e||1!==e.length)throw new Error("Transpose requires 1 input.");if("float32"!==e[0].type&&"float64"!==e[0].type)throw new Error("input should be float tensor")}},2488:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.encodeAsUint8=void 0;var r=n(6757),o=n(5639);t.encodeAsUint8=function(e,t){var n=t.shape,i=(0,r.getGlsl)(e.session.backend.glContext.version),a="\n    const float FLOAT_MAX = 1.70141184e38;\n    const float FLOAT_MIN = 1.17549435e-38;\n\n    bool isNaN(float val) {\n      return (val < 1.0 || 0.0 < val || val == 0.0) ? false : true;\n    }\n\n    highp vec4 encodeAsUint8(highp float v) {\n      if (isNaN(v)) {\n        return vec4(255, 255, 255, 255);\n      }\n\n      highp float av = abs(v);\n\n      if(av < FLOAT_MIN) {\n        return vec4(0.0, 0.0, 0.0, 0.0);\n      } else if(v > FLOAT_MAX) {\n        return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n      } else if(v < -FLOAT_MAX) {\n        return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n      }\n\n      highp vec4 c = vec4(0,0,0,0);\n\n      highp float e = floor(log2(av));\n      highp float m = exp2(fract(log2(av))) - 1.0;\n\n      c[2] = floor(128.0 * m);\n      m -= c[2] / 128.0;\n      c[1] = floor(32768.0 * m);\n      m -= c[1] / 32768.0;\n      c[0] = floor(8388608.0 * m);\n\n      highp float ebias = e + 127.0;\n      c[3] = floor(ebias / 2.0);\n      ebias -= c[3] * 2.0;\n      c[2] += floor(ebias) * 128.0;\n\n      c[3] += 128.0 * step(0.0, -v);\n\n      return c / 255.0;\n    }\n\n    void main() {\n      float value = ".concat(i.texture2D,"(X,TexCoords).r;\n      ").concat(i.output," = encodeAsUint8(value);\n    }"),u={name:"Uint8Encode",inputTypes:[o.TextureType.unpacked],inputNames:["X"],output:{dims:n,type:t.tensor.type,textureType:o.TextureType.downloadUint8AsFloat},shaderSource:a,hasMain:!0};return e.executeProgram(u,[t.tensor])}},9087:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.tanh=t.tan=t.sqrt=t.sin=t.sigmoid=t.relu=t.not=t.neg=t.log=t.parseLeakyReluAttributes=t.leakyRelu=t.identity=t.floor=t.exp=t.parseEluAttributes=t.elu=t.cos=t.ceil=t.clipV11=t.parseClipAttributes=t.clip=t.atan=t.asin=t.acos=t.abs=t.glslTanh=t.glslTan=t.glslSqrt=t.glslSigmoid=t.glslRelu=t.glslSin=t.glslNot=t.glslNeg=t.glslLog=t.glslLeakyRelu=t.glslIdentity=t.glslClip=t.glslFloor=t.glslExp=t.glslElu=t.glslCos=t.glslCeil=t.glslAtan=t.glslAsin=t.glslAcos=t.glslAbs=void 0;var o=n(4910),i=n(7273),a=n(1997),u=n(6757),s=n(5639);function c(){return C("abs")}function l(){return C("acos")}function p(){return C("asin")}function f(){return C("atan")}function d(){return C("ceil")}function h(){return C("cos")}function g(e){var t="elu";return{body:"\n  const float alpha = float(".concat(e,");\n\n  float ").concat(t,"_(float a) {\n    return a >= 0.0 ? a: (exp(a) - 1.0) * alpha;\n  }\n  vec4 ").concat(t,"_(vec4 v) {\n    return vec4(").concat(t,"_(v.x), ").concat(t,"_(v.y), ").concat(t,"_(v.z), ").concat(t,"_(v.w));\n  }\n  "),name:t,type:a.FunctionType.ValueBased}}function y(){return C("exp")}function m(){return C("floor")}function v(e,t){var n="clip";return{body:"\n  const float min = float(".concat(e,");\n  const float max = float(").concat(t,");\n\n  float ").concat(n,"_(float a) {\n    return clamp(a, min, max);\n  }\n  vec4 ").concat(n,"_(vec4 v) {\n    return clamp(v, min, max);\n  }\n  "),name:n,type:a.FunctionType.ValueBased}}function b(){var e="indentity";return{body:"\n  float ".concat(e,"_(float a) {\n    return a;\n  }\n  vec4 ").concat(e,"_(vec4 v) {\n    return v;\n  }\n  "),name:e,type:a.FunctionType.ValueBased}}function w(e){var t="leakyRelu";return{body:"\n  const float alpha = float(".concat(e,");\n\n  float ").concat(t,"_(float a) {\n    return a < 0.0 ? a * alpha : a;\n  }\n  vec4 ").concat(t,"_(vec4 v) {\n    return vec4(").concat(t,"_(v.x), ").concat(t,"_(v.y), ").concat(t,"_(v.z), ").concat(t,"_(v.w));\n  }\n  "),name:t,type:a.FunctionType.ValueBased}}function _(){return C("log")}function x(){var e="neg";return{body:"\n  float ".concat(e,"_(float a) {\n    return -a;\n  }\n  vec4 ").concat(e,"_(vec4 v) {\n    return -v;\n  }\n  "),name:e,type:a.FunctionType.ValueBased}}function T(){var e="not";return{body:"\n  float ".concat(e,"_(float a) {\n    return float( ! bool(a) );\n  }\n  bool ").concat(e,"_(bool a) {\n    return !a;\n  }\n  vec4 ").concat(e,"_(vec4 v) {\n    return vec4(!bool(v.x), !bool(v.y), !bool(v.z), !bool(v.w));\n  }\n  bvec4 ").concat(e,"_(bvec4 v) {\n    return bvec4(!v.x, !v.y, !v.z, !v.w);\n  }\n  "),name:e,type:a.FunctionType.ValueBased}}function S(){return C("sin")}function P(){var e="relu";return{body:"\n  float ".concat(e,"_(float a) {\n    return max( a, 0.0 );\n  }\n  vec4 ").concat(e,"_(vec4 v) {\n    return max( v, 0.0 );\n  }\n  "),name:e,type:a.FunctionType.ValueBased}}function A(){var e="sigmoid";return{body:"\n  float ".concat(e,"_(float a) {\n    return 1.0 / (1.0 + exp(-a));\n  }\n  vec4 ").concat(e,"_(vec4 v) {\n    return 1.0 / (1.0 + exp(-v));\n  }\n  "),name:e,type:a.FunctionType.ValueBased}}function O(){return C("sqrt")}function I(){return C("tan")}function E(){var e="tanh";return{body:"\n  float ".concat(e,"_(float a) {\n    a = clamp(a, -10., 10.);\n    a = exp(2.*a);\n    return (a - 1.) / (a + 1.);\n  }\n  vec4 ").concat(e,"_(vec4 v) {\n    v = clamp(v, -10., 10.);\n    v = exp(2.*v);\n    return (v - 1.) / (v + 1.);\n  }\n  "),name:e,type:a.FunctionType.ValueBased}}function C(e){return{body:"\n  float ".concat(e,"_(float a) {\n    return ").concat(e,"(a);\n  }\n  vec4 ").concat(e,"_(vec4 v) {\n    return ").concat(e,"(v);\n  }\n  "),name:e,type:a.FunctionType.ValueBased}}t.glslAbs=c,t.glslAcos=l,t.glslAsin=p,t.glslAtan=f,t.glslCeil=d,t.glslCos=h,t.glslElu=g,t.glslExp=y,t.glslFloor=m,t.glslClip=v,t.glslIdentity=b,t.glslLeakyRelu=w,t.glslLog=_,t.glslNeg=x,t.glslNot=T,t.glslSin=S,t.glslRelu=P,t.glslSigmoid=A,t.glslSqrt=O,t.glslTan=I,t.glslTanh=E;var D=function(e,t,n,o){var i=e.session.pack?s.TextureType.packed:s.TextureType.unpacked,a={name:n.name,inputTypes:[i],inputNames:["A"],cacheHint:o};return r(r({},a),{get:function(){return function(e,t,n,o){var i=e.session.pack?s.TextureType.packed:s.TextureType.unpacked,a=(0,u.getGlsl)(e.session.backend.glContext.version);return r(r({},t),{output:{dims:n.dims,type:n.type,textureType:i},shaderSource:"\n     ".concat(o.body,"\n     void main() {\n       vec4 v = ").concat(a.texture2D,"(A, TexCoords);\n       v = ").concat(o.name,"_(v);\n       ").concat(a.output," = v;\n     }\n     "),hasMain:!0})}(e,a,t,n)}})};t.abs=function(e,t){return[e.run(D(e,t[0],c()),t)]},t.acos=function(e,t){return[e.run(D(e,t[0],l()),t)]},t.asin=function(e,t){return[e.run(D(e,t[0],p()),t)]},t.atan=function(e,t){return[e.run(D(e,t[0],f()),t)]},t.clip=function(e,t,n){return[e.run(D(e,t[0],v(n.min,n.max),n.cacheKey),t)]},t.parseClipAttributes=function(e){return(0,o.createAttributeWithCacheKey)({min:e.attributes.getFloat("min",i.MIN_CLIP),max:e.attributes.getFloat("max",i.MAX_CLIP)})},t.clipV11=function(e,n){var r=k(e,n);return(0,t.clip)(e,[n[0]],r)};var k=function(e,t){if(t.length>=3&&(!e.session.isInitializer(t[1].dataId)||!e.session.isInitializer(t[2].dataId)))throw new Error("dynamic clip attributes are not allowed");var n=t.length>=3?t[1].numberData[0]:i.MIN_CLIP,r=t.length>=3?t[2].numberData[0]:i.MAX_CLIP;return(0,o.createAttributeWithCacheKey)({min:n,max:r})};t.ceil=function(e,t){return[e.run(D(e,t[0],d()),t)]},t.cos=function(e,t){return[e.run(D(e,t[0],h()),t)]},t.elu=function(e,t,n){return[e.run(D(e,t[0],g(n.alpha),n.cacheKey),t)]},t.parseEluAttributes=function(e){return(0,o.createAttributeWithCacheKey)({alpha:e.attributes.getFloat("alpha",1)})},t.exp=function(e,t){return[e.run(D(e,t[0],y()),t)]},t.floor=function(e,t){return[e.run(D(e,t[0],m()),t)]},t.identity=function(e,t){return[e.run(D(e,t[0],b()),t)]},t.leakyRelu=function(e,t,n){return[e.run(D(e,t[0],w(n.alpha),n.cacheKey),t)]},t.parseLeakyReluAttributes=function(e){return(0,o.createAttributeWithCacheKey)({alpha:e.attributes.getFloat("alpha",.01)})},t.log=function(e,t){return[e.run(D(e,t[0],_()),t)]},t.neg=function(e,t){return[e.run(D(e,t[0],x()),t)]},t.not=function(e,t){return[e.run(D(e,t[0],T()),t)]},t.relu=function(e,t){return[e.run(D(e,t[0],P()),t)]},t.sigmoid=function(e,t){return[e.run(D(e,t[0],A()),t)]},t.sin=function(e,t){return[e.run(D(e,t[0],S()),t)]},t.sqrt=function(e,t){return[e.run(D(e,t[0],O()),t)]},t.tan=function(e,t){return[e.run(D(e,t[0],I()),t)]},t.tanh=function(e,t){return[e.run(D(e,t[0],E()),t)]}},540:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.createUnpackProgramInfoLoader=t.createUnpackProgramInfo=void 0;var o=n(6757),i=n(5639),a=n(432),u=n(5614),s={name:"unpack",inputNames:["A"],inputTypes:[i.TextureType.packed]};t.createUnpackProgramInfo=function(e,t){var n=t.dims.length,c=(0,u.getChannels)("rc",n),l=c.slice(-2),p=(0,a.getCoordsDataType)(n),f=(0,u.unpackFromChannel)(),d=0===t.dims.length?"":function(e,t){if(1===e)return"rc";for(var n="",r=0;r<e;r++)n+=t[r],r<e-1&&(n+=",");return n}(n,c),h=n<=1?"rc":"vec2(".concat(l.join(","),")"),g=(0,o.getGlsl)(e.session.backend.glContext.version),y="\n    ".concat(f,"\n    void main() {\n      ").concat(p," rc = getOutputCoords();\n\n       // Sample the texture with the coords to get the rgba channel value.\n       vec4 packedInput = getA(").concat(d,");\n\n       ").concat(g.output," = vec4(getChannel(packedInput, ").concat(h,"), 0, 0, 0);\n     }\n   ");return r(r({},s),{hasMain:!0,output:{dims:t.dims,type:t.type,textureType:i.TextureType.unpacked},shaderSource:y})},t.createUnpackProgramInfoLoader=function(e,n){return r(r({},s),{get:function(){return(0,t.createUnpackProgramInfo)(e,n)}})}},7862:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseUnsqueezeAttributes=t.unsqueezeV13=t.unsqueeze=void 0;var r=n(7273);t.unsqueeze=function(e,t,n){o(t);var i=r.ShapeUtil.unsqueezeShape(t[0].dims,n);return[e.reshapeUnpacked(t[0],i)]},t.unsqueezeV13=function(e,n){return i(n),(0,t.unsqueeze)(e,[n[0]],Array.from(n[1].integerData))},t.parseUnsqueezeAttributes=function(e){return e.attributes.getInts("axes")};var o=function(e){if(!e||1!==e.length)throw new Error("Unsqueeze requires 1 input.");if("string"===e[0].type)throw new Error("invalid input tensor types.")},i=function(e){if(!e||2!==e.length)throw new Error("Unsqueeze requires 2 inputs.");if("int32"!==e[1].type)throw new Error("Invalid input type.")}},3980:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)},o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.scalesValidation=t.validateInputs=t.parseUpsampleAttributes=t.parseUpsampleAttributesV9=t.parseUpsampleAttributesV7=t.upsample=void 0;var a=n(4910),u=n(6757),s=n(5639),c={name:"Upsample",inputNames:["X"],inputTypes:[s.TextureType.unpacked]};t.upsample=function(e,n,o){return(0,t.validateInputs)(n,o),[e.run(r(r({},c),{cacheHint:o.cacheKey,get:function(){return l(e,n,o)}}),n)]},t.parseUpsampleAttributesV7=function(e){return(0,t.parseUpsampleAttributes)(e,7)},t.parseUpsampleAttributesV9=function(e){return(0,t.parseUpsampleAttributes)(e,9)},t.parseUpsampleAttributes=function(e,n){var r=n>=10,o=e.attributes.getString("mode","nearest");if("nearest"!==o&&"linear"!==o&&(n<11||"cubic"!==o))throw new Error("unrecognized mode: ".concat(o));var i=[];n<9&&(i=e.attributes.getFloats("scales"),(0,t.scalesValidation)(i,o,r));var u=e.attributes.getFloat("extrapolation_value",0),s=n>10?e.attributes.getString("coordinate_transformation_mode","half_pixel"):"asymmetric";if(-1===["asymmetric","pytorch_half_pixel","tf_half_pixel_for_nn","align_corners","tf_crop_and_resize","half_pixel"].indexOf(s))throw new Error("coordinate_transform_mode '".concat(s,"' is not supported"));var c="tf_crop_and_resize"===s,l=c,p="nearest"===o&&n>=11?e.attributes.getString("nearest_mode","round_prefer_floor"):"";if(-1===["round_prefer_floor","round_prefer_ceil","floor","ceil",""].indexOf(p))throw new Error("nearest_mode '".concat(p,"' is not supported"));var f=e.attributes.getFloat("cubic_coeff_a",-.75),d=0!==e.attributes.getInt("exclude_outside",0);if(d&&"cubic"!==o)throw new Error("exclude_outside can be set to 1 only when mode is CUBIC.");var h=n<11||"nearest"===o&&"asymmetric"===s&&"floor"===p,g=0,y=0,m=0;return n>10?e.inputs.length>2?(g=1,y=2,m=3):(y=1,m=2):9===n&&(y=1),(0,a.createAttributeWithCacheKey)({opset:n,isResize:r,mode:o,scales:i,extrapolationValue:u,coordinateTransformMode:s,useExtrapolation:l,needRoiInput:c,nearestMode:p,cubicCoefficientA:f,excludeOutside:d,useNearest2xOptimization:h,roiInputIdx:g,scalesInputIdx:y,sizesInputIdx:m})};var l=function(e,t,n){for(var i=(0,u.getGlsl)(e.session.backend.glContext.version),a=o(e.calculateTextureWidthAndHeight(t[0].dims,s.TextureType.unpacked),2),l=a[0],p=a[1],f=t[0].dims.map((function(e,t){return Math.floor(e*n.scales[t])})),d=o(e.calculateTextureWidthAndHeight(f,s.TextureType.unpacked),2),h=d[0],g=d[1],y=f.length,m=new Array(y),v=new Array(y),b="\n      int output_pitches[".concat(y,"];\n      int input_pitches[").concat(y,"];\n      "),w=y-1;w>=0;w--)m[w]=w===y-1?1:m[w+1]*f[w+1],v[w]=w===y-1?1:v[w+1]*t[0].dims[w+1],b+="\n        output_pitches[".concat(w,"] = ").concat(m[w],";\n        input_pitches[").concat(w,"] = ").concat(v[w],";\n        ");var _="\n      float getInputFloat(int index) {\n        vec2 coords = offsetToCoords(index, ".concat(l,", ").concat(p,");\n        float value = getColorAsFloat(").concat(i.texture2D,"(X, coords));\n        return value;\n      }\n      "),x="nearest"===n.mode?"\n    ".concat(_,"\n    float process(int indices[").concat(y,"]) {\n      int input_index = 0;\n      int output_index = coordsToOffset(TexCoords, ").concat(h,", ").concat(g,");\n\n      ").concat(b,"\n\n      int d, m;\n      for (int dim = 0; dim < ").concat(y,"; ++dim) {\n        d = output_index / output_pitches[dim];\n        m = output_index - d * output_pitches[dim];\n        output_index = m;\n\n        if (scales[dim] != 1 && d > 0) {\n          int d2 = d / scales[dim];\n          m = d - d2 * scales[dim];\n          d = d2;\n        }\n        input_index += input_pitches[dim] * d;\n      }\n\n      return getInputFloat(input_index);\n    }"):4===y?"\n    ".concat(_,"\n    float process(int indices[4]) {\n      int input_index = 0;\n      int output_index = coordsToOffset(TexCoords, ").concat(h,", ").concat(g,");\n\n      ").concat(b,"\n\n      int m;\n      int index_of_dim0, index_of_dim1, index_of_dim2, index_of_dim3;\n      index_of_dim0 = output_index / output_pitches[0];\n      m = output_index - index_of_dim0 * output_pitches[0];\n      index_of_dim1 = m / output_pitches[1];\n      m = m - index_of_dim1 * output_pitches[1];\n      index_of_dim2 = m / output_pitches[2];\n      m = m - index_of_dim2 * output_pitches[2];\n      index_of_dim3 = m;\n\n      int index_of_input_dim2, index_of_input_dim3, x_offset, y_offset;\n      index_of_input_dim2 = index_of_dim2 / scales[2];\n      y_offset = index_of_dim2 - index_of_input_dim2 * scales[2];\n      index_of_input_dim3 = index_of_dim3 / scales[3];\n      x_offset = index_of_dim3 - index_of_input_dim3 * scales[3];\n\n      input_index = index_of_dim0 * input_pitches[0] +\n            index_of_dim1 * input_pitches[1] +\n            index_of_input_dim2 * input_pitches[2] +\n            index_of_input_dim3;\n\n      float x00 = getInputFloat(input_index);\n      float x10, x01, x11;\n\n      bool end_of_dim2 = false;\n      if (index_of_input_dim2 == (").concat(t[0].dims[2]," - 1)) {\n        // It's the end in dimension 2\n        x01 = x00;\n        end_of_dim2 = true;\n      } else {\n        x01 = getInputFloat(input_index + input_pitches[2]);\n      }\n\n      if (index_of_input_dim3 == (input_pitches[2] - 1)) {\n        // It's the end in dimension 3\n        x10 = x00;\n        x11 = x01;\n      }\n      else {\n        x10 = getInputFloat(input_index + 1);\n        x11 = end_of_dim2 ? x10 : getInputFloat(input_index + input_pitches[2] + 1);\n      }\n\n      float y0 = x00 + float(y_offset) * (x01 - x00) / float(scales[2]);\n      float y1 = x10 + float(y_offset) * (x11 - x10) / float(scales[2]);\n      return y0 + float(x_offset) * (y1 - y0) / float(scales[3]);\n    }"):"\n    ".concat(_,"\n    float process(int indices[2]) {\n      int input_index = 0;\n      int output_index = coordsToOffset(TexCoords, ").concat(h,", ").concat(g,");\n\n      ").concat(b,"\n\n      int m;\n      int index_of_dim0, index_of_dim1;\n      index_of_dim0 = output_index / output_pitches[0];\n      m = output_index - index_of_dim0 * output_pitches[0];\n      index_of_dim1 = m;\n\n      int index_of_input_dim0, index_of_input_dim1, x_offset, y_offset;\n      index_of_input_dim0 = index_of_dim0 / scales[0];\n      y_offset = index_of_dim0 - index_of_input_dim0 * scales[0];\n      index_of_input_dim1 = index_of_dim1 / scales[1];\n      x_offset = index_of_dim1 - index_of_input_dim1 * scales[1];\n\n      input_index = index_of_input_dim0 * input_pitches[0] + index_of_input_dim1;\n\n      float x00 = getInputFloat(input_index);\n      float x10, x01, x11;\n\n      bool end_of_dim0 = false;\n      if (index_of_input_dim0 == (").concat(t[0].dims[0]," - 1)) {\n        // It's the end in dimension 0\n        x01 = x00;\n        end_of_dim0 = true;\n      } else {\n        x01 = getInputFloat(input_index + input_pitches[0]);\n      }\n\n      if (index_of_input_dim1 == (input_pitches[0] - 1)) {\n        // It's the end in dimension 1\n        x10 = x00;\n        x11 = x01;\n      }\n      else {\n        x10 = getInputFloat(input_index + 1);\n        x11 = end_of_dim0 ? x10 : getInputFloat(input_index + input_pitches[0] + 1);\n      }\n\n      float y0 = x00 + float(y_offset) * (x01 - x00) / float(scales[0]);\n      float y1 = x10 + float(y_offset) * (x11 - x10) / float(scales[0]);\n      return y0 + float(x_offset) * (y1 - y0) / float(scales[1]);\n    }");return r(r({},c),{output:{dims:f,type:t[0].type,textureType:s.TextureType.unpacked},shaderSource:x,variables:[{name:"scales",type:"int",arrayLength:n.scales.length,data:n.scales.map((function(e){return Math.ceil(e)}))}]})};t.validateInputs=function(e,t){if(!e||t.opset<9&&1!==e.length||t.opset>=9&&t.opset<11&&2!==e.length||t.opset>=11&&e.length<2)throw new Error("invalid inputs.");if(t.scales.length>0&&e[0].dims.length!==t.scales.length)throw new Error("Invalid input shape.");if("string"===e[0].type)throw new Error("Invalid input tensor types.")},t.scalesValidation=function(e,t,n){var r,o,a,u;if(n)try{for(var s=i(e),c=s.next();!c.done;c=s.next())if(c.value<=0)throw new Error("Scale value should be greater than 0.")}catch(e){a={error:e}}finally{try{c&&!c.done&&(u=s.return)&&u.call(s)}finally{if(a)throw a.error}}else try{for(var l=i(e),p=l.next();!p.done;p=l.next())if(p.value<1)throw new Error("Scale value should be greater than or equal to 1.")}catch(e){r={error:e}}finally{try{p&&!p.done&&(o=l.return)&&o.call(l)}finally{if(r)throw r.error}}if(!("linear"!==t&&"cubic"!==t||2===e.length||4===e.length&&1===e[0]&&1===e[1]))throw new Error("'Linear' mode and 'Cubic' mode only support 2-D inputs ('Bilinear', 'Bicubic')         or 4-D inputs with the corresponding outermost 2 scale values being 1         in the ".concat(n?"Resize":"Upsample"," opeartor."))}},2757:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)},o=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.ProgramManager=void 0;var i=n(2235),a=n(1315),u=n(8897),s=n(6757),c=function(){function e(e,t,n){this.profiler=e,this.glContext=t,this.textureLayoutStrategy=n,this.repo=new Map,this.attributesBound=!1}return e.prototype.getArtifact=function(e){return this.repo.get(e)},e.prototype.setArtifact=function(e,t){this.repo.set(e,t)},e.prototype.run=function(e,t,n){var r,o=this;this.profiler.event("op","ProgramManager.run ".concat(null!==(r=e.programInfo.name)&&void 0!==r?r:"unknown kernel"),(function(){var r,i=o.glContext.gl,u=e.program;i.useProgram(u);try{o.bindOutput(n),o.attributesBound||o.bindAttributes(e.attribLocations),o.bindUniforms(e.uniformLocations,null!==(r=e.programInfo.variables)&&void 0!==r?r:[],t)}catch(t){throw a.Logger.error("ProgramManager",e.programInfo.shaderSource),t}o.profiler.event("backend","GlContext.draw()",(function(){o.glContext.draw()}))}),this.glContext)},e.prototype.dispose=function(){var e=this;this.vertexShader&&this.glContext.deleteShader(this.vertexShader),this.repo.forEach((function(t){return e.glContext.deleteProgram(t.program)}))},e.prototype.build=function(e,t,n){var r=this;return this.profiler.event("backend","ProgramManager.build",(function(){var o=new u.GlslPreprocessor(r.glContext,e,t,n),i=o.preprocess(),a=r.compile(i);return{programInfo:e,program:a,uniformLocations:r.getUniformLocations(a,o.context.programInfo.inputNames,o.context.programInfo.variables),attribLocations:r.getAttribLocations(a)}}))},e.prototype.compile=function(e){if(!this.vertexShader){a.Logger.verbose("ProrgramManager","Compiling and caching Vertex shader for the first time");var t=(0,s.getVertexShaderSource)(this.glContext.version);this.vertexShader=this.glContext.compileShader(t,this.glContext.gl.VERTEX_SHADER)}i.env.debug&&a.Logger.verbose("ProrgramManager","FragShader:\n".concat(e,"\n"));var n=this.glContext.compileShader(e,this.glContext.gl.FRAGMENT_SHADER),r=this.glContext.createProgram(this.vertexShader,n);return this.glContext.deleteShader(n),r},e.prototype.bindOutput=function(e){var t=e.width,n=e.height;a.Logger.verbose("ProrgramManager","Binding output texture to Framebuffer: w/h=".concat(t,"/").concat(n,", shape=").concat(e.shape,", type=").concat(e.tensor.type)),this.glContext.attachFramebuffer(e.texture,t,n)},e.prototype.bindAttributes=function(e){var t=e.position,n=e.textureCoord;this.glContext.setVertexAttributes(t,n),this.attributesBound=!0},e.prototype.bindUniforms=function(e,t,n){var r,i,a,u=this.glContext.gl,s=0,c=function(e,r,o,i){var c=null===(a=t.find((function(t){return t.name===e})))||void 0===a?void 0:a.data;if("sampler2D"!==r&&!c)throw new Error("variable '".concat(e,"' does not have data defined in program info"));switch(r){case"sampler2D":l.bindTexture(n[s],o,s),s++;break;case"float":i?u.uniform1fv(o,c):u.uniform1f(o,c);break;case"int":i?u.uniform1iv(o,c):u.uniform1i(o,c);break;default:throw new Error("Uniform not implemented: ".concat(r))}},l=this;try{for(var p=o(e),f=p.next();!f.done;f=p.next()){var d=f.value;c(d.name,d.type,d.location,d.arrayLength)}}catch(e){r={error:e}}finally{try{f&&!f.done&&(i=p.return)&&i.call(p)}finally{if(r)throw r.error}}},e.prototype.bindTexture=function(e,t,n){this.glContext.bindTextureToUniform(e.texture,n,t)},e.prototype.getAttribLocations=function(e){return{position:this.getAttribLocation(e,"position"),textureCoord:this.getAttribLocation(e,"textureCoord")}},e.prototype.getUniformLocations=function(e,t,n){var i,a,u,s,c=[];if(t)try{for(var l=o(t),p=l.next();!p.done;p=l.next()){var f=p.value;c.push({name:f,type:"sampler2D",location:this.getUniformLocation(e,f)})}}catch(e){i={error:e}}finally{try{p&&!p.done&&(a=l.return)&&a.call(l)}finally{if(i)throw i.error}}if(n)try{for(var d=o(n),h=d.next();!h.done;h=d.next()){var g=h.value;c.push(r(r({},g),{location:this.getUniformLocation(e,g.name)}))}}catch(e){u={error:e}}finally{try{h&&!h.done&&(s=d.return)&&s.call(d)}finally{if(u)throw u.error}}return c},e.prototype.getUniformLocation=function(e,t){var n=this.glContext.gl.getUniformLocation(e,t);if(null===n)throw new Error("Uniform ".concat(t," not found."));return n},e.prototype.getAttribLocation=function(e,t){return this.glContext.gl.getAttribLocation(e,t)},e}();t.ProgramManager=c},2171:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebGLSessionHandler=void 0;var r=n(1315),o=n(5881),i=n(7860),a=n(4110),u=n(2757),s=n(7618),c=n(5243),l=function(){function e(e,t){this.backend=e,this.context=t,this.layoutStrategy=new s.PreferLogicalStrategy(e.glContext.maxTextureSize),this.programManager=new u.ProgramManager(this.context.profiler,e.glContext,this.layoutStrategy),this.textureManager=new c.TextureManager(e.glContext,this.layoutStrategy,this.context.profiler,{reuseTextures:"full"===e.textureCacheMode}),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache=new Map,this.pack=e.pack,this.pack2unpackMap=new Map,this.unpack2packMap=new Map}return e.prototype.createInferenceHandler=function(){return new i.WebGLInferenceHandler(this)},e.prototype.onGraphInitialized=function(e){var t=e.getValues().filter((function(e){return-1===e.from&&e.tensor})).map((function(e){return e.tensor.dataId}));this.initializers=new Set(t)},e.prototype.isInitializer=function(e){return!!this.initializers&&this.initializers.has(e)},e.prototype.addInitializer=function(e){this.initializers.add(e)},e.prototype.getTextureData=function(e,t){return t?this.packedTextureDataCache.get(e):this.unpackedTextureDataCache.get(e)},e.prototype.setTextureData=function(e,t,n){void 0===n&&(n=!1),r.Logger.verbose("WebGLSessionHandler","Storing Texture data in cache"),n?this.packedTextureDataCache.set(e,t):this.unpackedTextureDataCache.set(e,t)},e.prototype.dispose=function(){var e=this;this.programManager.dispose(),this.textureManager.clearActiveTextures(),this.packedTextureDataCache.forEach((function(t){return e.textureManager.releaseTexture(t,!0)})),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache.forEach((function(t){return e.textureManager.releaseTexture(t,!0)})),this.unpackedTextureDataCache=new Map},e.prototype.resolve=function(e,t,n){var r=(0,o.resolveOperator)(e,t,a.WEBGL_OP_RESOLVE_RULES);return{impl:r.opImpl,context:r.opInit?r.opInit(e,n):e}},e}();t.WebGLSessionHandler=l},9622:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Uint8DataEncoder=t.RGBAFloatDataEncoder=t.RedFloat32DataEncoder=void 0;var r=n(1315),o=function(){function e(e,t){if(void 0===t&&(t=1),1===t)this.internalFormat=e.R32F,this.format=e.RED,this.textureType=e.FLOAT,this.channelSize=t;else{if(4!==t)throw new Error("Invalid number of channels: ".concat(t));this.internalFormat=e.RGBA32F,this.format=e.RGBA,this.textureType=e.FLOAT,this.channelSize=t}}return e.prototype.encode=function(e,t){var n,o;return e.constructor!==Float32Array&&(r.Logger.warning("Encoder","data was not of type Float32; creating new Float32Array"),o=new Float32Array(e)),t*this.channelSize>e.length?(r.Logger.warning("Encoder","Source data too small. Allocating larger array"),o=e,n=this.allocate(t*this.channelSize),o.forEach((function(e,t){return n[t]=e}))):n=o=e,n},e.prototype.allocate=function(e){return new Float32Array(4*e)},e.prototype.decode=function(e,t){return 1===this.channelSize?e.filter((function(e,t){return t%4==0})).subarray(0,t):e.subarray(0,t)},e}();t.RedFloat32DataEncoder=o;var i=function(){function e(e,t,n){if(void 0===t&&(t=1),1!==t&&4!==t)throw new Error("Invalid number of channels: ".concat(t));this.internalFormat=e.RGBA,this.format=e.RGBA,this.channelSize=t,this.textureType=n||e.FLOAT}return e.prototype.encode=function(e,t){var n=e;return 1===this.channelSize&&(r.Logger.verbose("Encoder","Exploding into a larger array"),n=this.allocate(t),e.forEach((function(e,t){return n[4*t]=e}))),n},e.prototype.allocate=function(e){return new Float32Array(4*e)},e.prototype.decode=function(e,t){return 1===this.channelSize?e.filter((function(e,t){return t%4==0})).subarray(0,t):e.subarray(0,t)},e}();t.RGBAFloatDataEncoder=i;var a=function(){function e(e,t){if(void 0===t&&(t=1),this.channelSize=4,1===t)this.internalFormat=e.ALPHA,this.format=e.ALPHA,this.textureType=e.UNSIGNED_BYTE,this.channelSize=t;else{if(4!==t)throw new Error("Invalid number of channels: ".concat(t));this.internalFormat=e.RGBA,this.format=e.RGBA,this.textureType=e.UNSIGNED_BYTE,this.channelSize=t}}return e.prototype.encode=function(e,t){return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)},e.prototype.allocate=function(e){return new Uint8Array(e*this.channelSize)},e.prototype.decode=function(e,t){if(e instanceof Uint8Array)return e.subarray(0,t);throw new Error("Invalid array type: ".concat(e.constructor))},e}();t.Uint8DataEncoder=a},7618:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getBatchDim=t.sizeToSquarishShape=t.getRowsCols=t.sizeFromShape=t.isInt=t.parseAxisParam=t.squeezeShape=t.PreferLogicalStrategy=t.AlwaysKeepOriginalSizeStrategy=void 0;var r=n(1315),o=n(7273),i=function(){function e(e){this.maxTextureSize=e}return e.prototype.computeTextureWH=function(e,t){if(0===e.length)return[1,1];var n=this.maxTextureSize;if(t&&void 0!==t.breakAxis){var o=t.breakAxis>=e.length?1:e.slice(t.breakAxis).reduce((function(e,t){return e*t})),i=t.breakAxis<=0?1:e.slice(0,t.breakAxis).reduce((function(e,t){return e*t}));if(!(o>n||i>n))return[o,i];r.Logger.verbose("TextureLayout","Given width/height preferences were unattainable: shape:".concat(e,", breakAxis:").concat(t.breakAxis))}for(var a=e.reduce((function(e,t){return e*t})),u=Math.floor(Math.sqrt(a));u<n&&u<a&&a%u!=0;u++);if(u>=n||a%u!=0)throw new Error("The given dimensions are outside this GPU's boundaries: ".concat(e));return[u,a/u]},e}();t.AlwaysKeepOriginalSizeStrategy=i;var a=function(){function e(e){this.maxTextureSize=e}return e.prototype.computeTextureWH=function(e,t){var n=this.computeTexture(e,t);return t&&t.isPacked&&(n[0]/=2,n[1]/=2),t&&t.reverseWH?[n[1],n[0]]:n},e.prototype.computeTexture=function(e,t){var n=t&&t.isPacked;if(0===e.length)return n?[2,2]:[1,1];var o=this.maxTextureSize;if(t&&void 0!==t.breakAxis){var i=t.breakAxis>=e.length?1:e.slice(t.breakAxis).reduce((function(e,t){return e*t})),a=t.breakAxis<=0?1:e.slice(0,t.breakAxis).reduce((function(e,t){return e*t}));if(!(i>o||a>o))return[i,a];r.Logger.verbose("TextureLayout","Given width/height preferences were unattainable: shape:".concat(e,", breakAxis:").concat(t.breakAxis))}var s=e.slice(0);if(n&&(o*=2,1===(s=s.map((function(e,t){return t>=s.length-2?s[t]%2==0?s[t]:s[t]+1:s[t]}))).length&&(s=[2,s[0]])),2!==s.length){var c=u(s);s=c.newShape}var f=l(s);return s.length<=1&&f<=o?[1,f]:2===s.length&&s[0]<=o&&s[1]<=o?s:3===s.length&&s[0]*s[1]<=o&&s[2]<=o?[s[0]*s[1],s[2]]:3===s.length&&s[0]<=o&&s[1]*s[2]<=o?[s[0],s[1]*s[2]]:4===s.length&&s[0]*s[1]*s[2]<=o&&s[3]<=o?[s[0]*s[1]*s[2],s[3]]:4===s.length&&s[0]<=o&&s[1]*s[2]*s[3]<=o?[s[0],s[1]*s[2]*s[3]]:n?p(f/4).map((function(e){return 2*e})):p(f)},e}();function u(e,t){for(var n=[],r=[],o=null!=t&&Array.isArray(t)&&0===t.length,i=null==t||o?null:s(t,e).sort(),a=0,u=0;u<e.length;++u){if(null!=i){if(i[a]===u&&1!==e[u])throw new Error("Can't squeeze axis ".concat(u," since its dim '").concat(e[u],"' is not 1"));(null==i[a]||i[a]>u)&&1===e[u]&&(n.push(e[u]),r.push(u)),i[a]<=u&&a++}1!==e[u]&&(n.push(e[u]),r.push(u))}return{newShape:n,keptDims:r}}function s(e,t){var n=t.length;return e=null==e?t.map((function(e,t){return t})):[].concat(e),(0,o.assert)(e.every((function(e){return e>=-n&&e<n})),(function(){return"All values in axis param must be in range [-".concat(n,", ").concat(n,") but ")+"got axis ".concat(e)})),(0,o.assert)(e.every(c),(function(){return"All values in axis param must be integers but "+"got axis ".concat(e)})),e.map((function(e){return e<0?n+e:e}))}function c(e){return e%1==0}function l(e){if(0===e.length)return 1;for(var t=e[0],n=1;n<e.length;n++)t*=e[n];return t}function p(e){var t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}t.PreferLogicalStrategy=a,t.squeezeShape=u,t.parseAxisParam=s,t.isInt=c,t.sizeFromShape=l,t.getRowsCols=function(e){if(0===e.length)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]},t.sizeToSquarishShape=p,t.getBatchDim=function(e,t){return void 0===t&&(t=2),l(e.slice(0,e.length-t))}},3314:function(e,t,n){"use strict";var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};Object.defineProperty(t,"__esModule",{value:!0}),t.createTextureLayoutFromShape=t.calculateTextureWidthAndHeight=t.createTextureLayoutFromTextureType=void 0;var o=n(7273),i=n(5639);t.createTextureLayoutFromTextureType=function(e,n,r){var o=r===i.TextureType.unpacked||r===i.TextureType.unpackedReversed?1:4,a=r===i.TextureType.packed,u=r===i.TextureType.unpackedReversed||r===i.TextureType.packed,s=r===i.TextureType.packedLastDimension?n.length-1:void 0,c=r===i.TextureType.packedLastDimension?n.map((function(e,t){return t===n.length-1?4*e:e})):void 0;return(0,t.createTextureLayoutFromShape)(e,n,o,c,{isPacked:a,reverseWH:u,breakAxis:s})},t.calculateTextureWidthAndHeight=function(e,n,r){var o=(0,t.createTextureLayoutFromTextureType)(e,n,r);return[o.width,o.height]},t.createTextureLayoutFromShape=function(e,t,n,i,a){void 0===n&&(n=1);var u=!(!a||!a.isPacked),s=r(e.computeTextureWH(u&&i||t,a),2),c=s[0],l=s[1],p=t.length,f=t.slice(0);if(0===p&&(f=[1]),1===n)i=t;else if(u){if(4!==n)throw new Error("a packed texture must be 4-channel");i=t,p>0&&(f[p-1]=Math.ceil(f[p-1]/2)),p>1&&(f[p-2]=Math.ceil(f[p-2]/2))}else if(!i)throw new Error("Unpacked shape is needed when using channels > 1");return{width:c,height:l,channels:n,isPacked:u,shape:f,strides:o.ShapeUtil.computeStrides(f),unpackedShape:i,reversedWH:a&&a.reverseWH}}},5243:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function u(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,u)}s((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(s){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,r=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){a=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){a.label=u[1];break}if(6===u[0]&&a.label<o[1]){a.label=o[1],o=u;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(u);break}o[2]&&a.ops.pop(),a.trys.pop();continue}u=t.call(e,a)}catch(e){u=[6,e],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.TextureManager=void 0;var i=n(1315),a=function(){function e(e,t,n,r){this.glContext=e,this.layoutStrategy=t,this.profiler=n,this.config=r,this.pendingRead=new Map,r.reuseTextures&&(this.inUseTextures=new Map,this.idleTextures=new Map,this.textureLookup=new Map)}return e.prototype.createTextureFromLayout=function(e,t,n,r){var o=this.toEncoderType(e),a=this.glContext.getEncoder(o,t.channels||1,r);if(t.isPacked&&1===r)throw new Error("not implemented");var u,s,c=t.width,l=t.height;if(this.config.reuseTextures){u="".concat(c,"x").concat(l,"_").concat(a.format,"_").concat(a.internalFormat,"_").concat(a.textureType),(s=this.inUseTextures.get(u))||(s=[],this.inUseTextures.set(u,s));var p=this.idleTextures.get(u);if(p&&p.length>0){var f=p.pop();return s.push(f),1===r&&this.glContext.updateTexture(f,c,l,a,this.toTextureData(e,n)),f}}i.Logger.verbose("TextureManager","Creating new texture of size ".concat(t.width,"x").concat(t.height));var d=this.glContext.allocateTexture(c,l,a,this.toTextureData(e,n));return this.config.reuseTextures&&(s.push(d),this.textureLookup.set(d,u)),d},e.prototype.readTexture=function(e,t,n){var r=this;return n||(n=1),this.profiler.event("backend","TextureManager.readTexture",(function(){var o=e.shape.reduce((function(e,t){return e*t}))*n,i=r.glContext.readTexture(e.texture,e.width,e.height,o,r.toEncoderType(t),n);return r.toTensorData(t,i)}))},e.prototype.readTextureAsync=function(e,t,n){return r(this,void 0,void 0,(function(){var i,a,u=this;return o(this,(function(s){return i=e.tensor.dataId,n||(n=1),this.pendingRead.has(i)?(a=this.pendingRead.get(i),[2,new Promise((function(e){return null==a?void 0:a.push(e)}))]):[2,this.profiler.event("backend","TextureManager.readTextureAsync",(function(){return r(u,void 0,void 0,(function(){var r,a,u,s;return o(this,(function(o){switch(o.label){case 0:return this.pendingRead.set(i,[]),r=e.shape.reduce((function(e,t){return e*t}))*n,[4,this.glContext.createAndWaitForFence()];case 1:return o.sent(),a=this.glContext.readTexture(e.texture,e.width,e.height,r,this.toEncoderType(t),n),u=this.toTensorData(t,a),s=this.pendingRead.get(i),this.pendingRead.delete(i),null==s||s.forEach((function(e){return e(u)})),[2,u]}}))}))}))]}))}))},e.prototype.readUint8TextureAsFloat=function(e){var t=this;return this.profiler.event("backend","TextureManager.readUint8TextureAsFloat",(function(){var n=e.shape.reduce((function(e,t){return e*t})),r=t.glContext.readTexture(e.texture,e.width,e.height,4*n,"byte",4);return new Float32Array(r.buffer,r.byteOffset,n)}))},e.prototype.releaseTexture=function(e,t){var n;if(this.config.reuseTextures&&(n=this.textureLookup.get(e.texture))){t&&this.textureLookup.delete(n);var r=this.inUseTextures.get(n);if(r){var o=r.indexOf(e.texture);if(-1!==o){r.splice(o,1);var a=this.idleTextures.get(n);a||(a=[],this.idleTextures.set(n,a)),a.push(e.texture)}}}n&&!t||(i.Logger.verbose("TextureManager","Deleting texture of size ".concat(e.width,"x").concat(e.height)),this.glContext.deleteTexture(e.texture))},e.prototype.toTensorData=function(e,t){switch(e){case"int16":return t instanceof Int16Array?t:Int16Array.from(t);case"int32":return t instanceof Int32Array?t:Int32Array.from(t);case"int8":return t instanceof Int8Array?t:Int8Array.from(t);case"uint16":return t instanceof Uint16Array?t:Uint16Array.from(t);case"uint32":return t instanceof Uint32Array?t:Uint32Array.from(t);case"uint8":case"bool":return t instanceof Uint8Array?t:Uint8Array.from(t);case"float32":return t instanceof Float32Array?t:Float32Array.from(t);case"float64":return t instanceof Float64Array?t:Float64Array.from(t);default:throw new Error("TensorData type ".concat(e," is not supported"))}},e.prototype.toTextureData=function(e,t){if(t)return t instanceof Float32Array?t:new Float32Array(t)},e.prototype.toEncoderType=function(e){return"float"},e.prototype.clearActiveTextures=function(){this.glContext.clearActiveTextures()},e}();t.TextureManager=a},5639:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.TextureType=void 0,(n=t.TextureType||(t.TextureType={}))[n.unpacked=0]="unpacked",n[n.unpackedReversed=1]="unpackedReversed",n[n.packed=2]="packed",n[n.downloadUint8AsFloat=3]="downloadUint8AsFloat",n[n.packedLastDimension=4]="packedLastDimension"},432:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function u(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,u)}s((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(s){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,r=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){a=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){a.label=u[1];break}if(6===u[0]&&a.label<o[1]){a.label=o[1],o=u;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(u);break}o[2]&&a.ops.pop(),a.trys.pop();continue}u=t.call(e,a)}catch(e){u=[6,e],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.getGlChannels=t.getCoordsDataType=t.getSqueezedParams=t.squeezeInputShape=t.generateShaderFuncNameFromInputSamplerNameAtOutCoords=t.generateShaderFuncNameFromInputSamplerName=t.repeatedTry=t.getPackedShape=void 0;var i=n(7273);t.getPackedShape=function(e){var t=e.length;return e.slice(0,t-1).concat(e[t-1]/4)},t.repeatedTry=function(e,t,n){return void 0===t&&(t=function(e){return 0}),r(this,void 0,void 0,(function(){return o(this,(function(r){return[2,new Promise((function(r,o){var i=0,a=function(){if(e())r();else{i++;var u=t(i);null!=n&&i>=n?o():setTimeout(a,u)}};a()}))]}))}))},t.generateShaderFuncNameFromInputSamplerName=function(e){return(0,i.assert)(void 0!==e&&0!==e.length,(function(){return"empty string found for sampler name"})),"get"+e.charAt(0).toUpperCase()+e.slice(1)},t.generateShaderFuncNameFromInputSamplerNameAtOutCoords=function(e){return(0,i.assert)(void 0!==e&&0!==e.length,(function(){return"empty string found for sampler name"})),"get"+e.charAt(0).toUpperCase()+e.slice(1)+"AtOutCoords"},t.squeezeInputShape=function(e,t){return JSON.parse(JSON.stringify(e)),t},t.getSqueezedParams=function(e,t){return t.map((function(t){return e[t]})).join(", ")},t.getCoordsDataType=function(e){if(e<=1)return"int";if(2===e)return"ivec2";if(3===e)return"ivec3";if(4===e)return"ivec4";if(5===e)return"ivec5";if(6===e)return"ivec6";throw Error("GPU for rank ".concat(e," is not yet supported"))},t.getGlChannels=function(e){return void 0===e&&(e=6),["x","y","z","w","u","v"].slice(0,e)}},3389:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createNewWebGLContext=t.createWebGLContext=void 0;var r=n(1315),o=n(3524),i={};function a(e,t){var n,i={alpha:!1,depth:!1,antialias:!1,stencil:!1,preserveDrawingBuffer:!1,premultipliedAlpha:!1,failIfMajorPerformanceCaveat:!1};if((!t||"webgl2"===t)&&(n=e.getContext("webgl2",i)))try{return new o.WebGLContext(n,2)}catch(e){r.Logger.warning("GlContextFactory","failed to create WebGLContext using contextId 'webgl2'. Error: ".concat(e))}if((!t||"webgl"===t)&&(n=e.getContext("webgl",i)||e.getContext("experimental-webgl",i)))try{return new o.WebGLContext(n,1)}catch(e){r.Logger.warning("GlContextFactory","failed to create WebGLContext using contextId 'webgl' or 'experimental-webgl'. Error: ".concat(e))}throw new Error("WebGL is not supported")}t.createWebGLContext=function e(t){var n;if(t&&"webgl2"!==t||!("webgl2"in i)?t&&"webgl"!==t||!("webgl"in i)||(n=i.webgl):n=i.webgl2,!n)try{n=a(function(){if("undefined"==typeof OffscreenCanvas)throw new TypeError("failed to create offscreen canvas: OffscreenCanvas is not supported");return new OffscreenCanvas(1,1)}(),t)}catch(e){n=a(function(){if("undefined"==typeof document)throw new TypeError("failed to create canvas: document is not supported");var e=document.createElement("canvas");return e.width=1,e.height=1,e}(),t)}t=t||1===n.version?"webgl":"webgl2";var r=n.gl;return i[t]=n,r.isContextLost()?(delete i[t],e(t)):(r.disable(r.DEPTH_TEST),r.disable(r.STENCIL_TEST),r.disable(r.BLEND),r.disable(r.DITHER),r.disable(r.POLYGON_OFFSET_FILL),r.disable(r.SAMPLE_COVERAGE),r.enable(r.SCISSOR_TEST),r.enable(r.CULL_FACE),r.cullFace(r.BACK),n)},t.createNewWebGLContext=a},3524:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t},a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function u(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,u)}s((r=r.apply(e,t||[])).next())}))},u=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(s){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,r=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){a=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){a.label=u[1];break}if(6===u[0]&&a.label<o[1]){a.label=o[1],o=u;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(u);break}o[2]&&a.ops.pop(),a.trys.pop();continue}u=t.call(e,a)}catch(e){u=[6,e],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.WebGLContext=t.linearSearchLastTrue=void 0;var s=n(2235),c=i(n(9622)),l=n(432);function p(e){for(var t=0;t<e.length&&e[t]();++t);return t-1}t.linearSearchLastTrue=p;var f=function(){function e(e,t){this.frameBufferBound=!1,this.itemsToPoll=[],this.gl=e,this.version=t,this.getExtensions(),this.vertexbuffer=this.createVertexbuffer(),this.framebuffer=this.createFramebuffer(),this.queryVitalParameters()}return e.prototype.allocateTexture=function(e,t,n,r){var o=this.gl,i=o.createTexture();o.bindTexture(o.TEXTURE_2D,i),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.NEAREST),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.NEAREST),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE);var a=r?n.encode(r,e*t):null;return o.texImage2D(o.TEXTURE_2D,0,n.internalFormat,e,t,0,n.format,n.textureType,a),this.checkError(),i},e.prototype.updateTexture=function(e,t,n,r,o){var i=this.gl;i.bindTexture(i.TEXTURE_2D,e);var a=r.encode(o,t*n);i.texSubImage2D(i.TEXTURE_2D,0,0,0,t,n,r.format,r.textureType,a),this.checkError()},e.prototype.attachFramebuffer=function(e,t,n){var r=this.gl;r.bindTexture(r.TEXTURE_2D,e),r.bindFramebuffer(r.FRAMEBUFFER,this.framebuffer),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,e,0),this.checkError(),r.viewport(0,0,t,n),r.scissor(0,0,t,n)},e.prototype.readTexture=function(e,t,n,r,o,i){var a=this.gl;i||(i=1),this.frameBufferBound||this.attachFramebuffer(e,t,n);var u=this.getEncoder(o,i),s=u.allocate(t*n);return a.bindTexture(a.TEXTURE_2D,e),a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,e,0),a.readPixels(0,0,t,n,a.RGBA,u.textureType,s),this.checkError(),u.decode(s,r)},e.prototype.isFramebufferReady=function(){return!0},e.prototype.getActiveTexture=function(){var e=this.gl,t=e.getParameter(this.gl.ACTIVE_TEXTURE);return"TEXTURE".concat(t-e.TEXTURE0)},e.prototype.getTextureBinding=function(){return this.gl.getParameter(this.gl.TEXTURE_BINDING_2D)},e.prototype.getFramebufferBinding=function(){return this.gl.getParameter(this.gl.FRAMEBUFFER_BINDING)},e.prototype.setVertexAttributes=function(e,t){var n=this.gl;n.vertexAttribPointer(e,3,n.FLOAT,!1,20,0),n.enableVertexAttribArray(e),-1!==t&&(n.vertexAttribPointer(t,2,n.FLOAT,!1,20,12),n.enableVertexAttribArray(t)),this.checkError()},e.prototype.createProgram=function(e,t){var n=this.gl,r=n.createProgram();return n.attachShader(r,e),n.attachShader(r,t),n.linkProgram(r),r},e.prototype.compileShader=function(e,t){var n=this.gl,r=n.createShader(t);if(!r)throw new Error("createShader() returned null with type ".concat(t));if(n.shaderSource(r,e),n.compileShader(r),!1===n.getShaderParameter(r,n.COMPILE_STATUS))throw new Error("Failed to compile shader: ".concat(n.getShaderInfoLog(r),"\nShader source:\n").concat(e));return r},e.prototype.deleteShader=function(e){this.gl.deleteShader(e)},e.prototype.bindTextureToUniform=function(e,t,n){var r=this.gl;r.activeTexture(r.TEXTURE0+t),this.checkError(),r.bindTexture(r.TEXTURE_2D,e),this.checkError(),r.uniform1i(n,t),this.checkError()},e.prototype.draw=function(){this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),this.checkError()},e.prototype.checkError=function(){if(s.env.debug){var e=this.gl,t=e.getError(),n="";switch(t){case e.NO_ERROR:return;case e.INVALID_ENUM:n="INVALID_ENUM";break;case e.INVALID_VALUE:n="INVALID_VALUE";break;case e.INVALID_OPERATION:n="INVALID_OPERATION";break;case e.INVALID_FRAMEBUFFER_OPERATION:n="INVALID_FRAMEBUFFER_OPERATION";break;case e.OUT_OF_MEMORY:n="OUT_OF_MEMORY";break;case e.CONTEXT_LOST_WEBGL:n="CONTEXT_LOST_WEBGL";break;default:n="Unknown WebGL Error: ".concat(t.toString(16))}throw new Error(n)}},e.prototype.deleteTexture=function(e){this.gl.deleteTexture(e)},e.prototype.deleteProgram=function(e){this.gl.deleteProgram(e)},e.prototype.getEncoder=function(e,t,n){if(void 0===n&&(n=0),2===this.version)return new c.RedFloat32DataEncoder(this.gl,t);switch(e){case"float":return 1===n||this.isRenderFloat32Supported?new c.RGBAFloatDataEncoder(this.gl,t):new c.RGBAFloatDataEncoder(this.gl,t,this.textureHalfFloatExtension.HALF_FLOAT_OES);case"int":throw new Error("not implemented");case"byte":return new c.Uint8DataEncoder(this.gl,t);default:throw new Error("Invalid dataType: ".concat(e))}},e.prototype.clearActiveTextures=function(){for(var e=this.gl,t=0;t<this.maxTextureImageUnits;++t)e.activeTexture(e.TEXTURE0+t),e.bindTexture(e.TEXTURE_2D,null)},e.prototype.dispose=function(){if(!this.disposed){var e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteFramebuffer(this.framebuffer),e.bindBuffer(e.ARRAY_BUFFER,null),e.deleteBuffer(this.vertexbuffer),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null),e.finish(),this.disposed=!0}},e.prototype.createDefaultGeometry=function(){return new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0])},e.prototype.createVertexbuffer=function(){var e=this.gl,t=e.createBuffer();if(!t)throw new Error("createBuffer() returned null");var n=this.createDefaultGeometry();return e.bindBuffer(e.ARRAY_BUFFER,t),e.bufferData(e.ARRAY_BUFFER,n,e.STATIC_DRAW),this.checkError(),t},e.prototype.createFramebuffer=function(){var e=this.gl.createFramebuffer();if(!e)throw new Error("createFramebuffer returned null");return e},e.prototype.queryVitalParameters=function(){var e=this.gl;if(this.isFloatTextureAttachableToFrameBuffer=this.checkFloatTextureAttachableToFrameBuffer(),this.isRenderFloat32Supported=this.checkRenderFloat32(),this.isFloat32DownloadSupported=this.checkFloat32Download(),1===this.version&&!this.textureHalfFloatExtension&&!this.isRenderFloat32Supported)throw new Error("both float32 and float16 TextureType are not supported");this.isBlendSupported=!this.isRenderFloat32Supported||this.checkFloat32Blend(),this.maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE),this.maxTextureImageUnits=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),this.version},e.prototype.getExtensions=function(){2===this.version?(this.colorBufferFloatExtension=this.gl.getExtension("EXT_color_buffer_float"),this.disjointTimerQueryWebgl2Extension=this.gl.getExtension("EXT_disjoint_timer_query_webgl2")):(this.textureFloatExtension=this.gl.getExtension("OES_texture_float"),this.textureHalfFloatExtension=this.gl.getExtension("OES_texture_half_float"))},e.prototype.checkFloatTextureAttachableToFrameBuffer=function(){var e=this.gl,t=e.createTexture();e.bindTexture(e.TEXTURE_2D,t);var n=2===this.version?e.RGBA32F:e.RGBA;e.texImage2D(e.TEXTURE_2D,0,n,1,1,0,e.RGBA,e.FLOAT,null);var r=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0);var o=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(t),e.deleteFramebuffer(r),o},e.prototype.checkRenderFloat32=function(){if(2===this.version){if(!this.colorBufferFloatExtension)return!1}else if(!this.textureFloatExtension)return!1;return this.isFloatTextureAttachableToFrameBuffer},e.prototype.checkFloat32Download=function(){if(2===this.version){if(!this.colorBufferFloatExtension)return!1}else{if(!this.textureFloatExtension)return!1;if(!this.gl.getExtension("WEBGL_color_buffer_float"))return!1}return this.isFloatTextureAttachableToFrameBuffer},e.prototype.checkFloat32Blend=function(){var e,t,n,r,o,i=this.gl;try{e=i.createTexture(),t=i.createFramebuffer(),i.bindTexture(i.TEXTURE_2D,e);var a=2===this.version?i.RGBA32F:i.RGBA;return i.texImage2D(i.TEXTURE_2D,0,a,1,1,0,i.RGBA,i.FLOAT,null),i.bindFramebuffer(i.FRAMEBUFFER,t),i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,e,0),i.enable(i.BLEND),!!(n=i.createShader(i.VERTEX_SHADER))&&(i.shaderSource(n,"void main(){}"),i.compileShader(n),!!(r=i.createShader(i.FRAGMENT_SHADER))&&(i.shaderSource(r,"precision highp float;void main(){gl_FragColor=vec4(0.5);}"),i.compileShader(r),!!(o=i.createProgram())&&(i.attachShader(o,n),i.attachShader(o,r),i.linkProgram(o),i.useProgram(o),i.drawArrays(i.POINTS,0,1),i.getError()===i.NO_ERROR)))}finally{i.disable(i.BLEND),o&&i.deleteProgram(o),n&&i.deleteShader(n),r&&i.deleteShader(r),t&&(i.bindFramebuffer(i.FRAMEBUFFER,null),i.deleteFramebuffer(t)),e&&(i.bindTexture(i.TEXTURE_2D,null),i.deleteTexture(e))}},e.prototype.beginTimer=function(){if(2===this.version&&this.disjointTimerQueryWebgl2Extension){var e=this.gl,t=this.disjointTimerQueryWebgl2Extension,n=e.createQuery();return e.beginQuery(t.TIME_ELAPSED_EXT,n),n}throw new Error("WebGL1 profiling currently not supported.")},e.prototype.endTimer=function(){if(2!==this.version||!this.disjointTimerQueryWebgl2Extension)throw new Error("WebGL1 profiling currently not supported");var e=this.gl,t=this.disjointTimerQueryWebgl2Extension;e.endQuery(t.TIME_ELAPSED_EXT)},e.prototype.isTimerResultAvailable=function(e){var t,n;if(2!==this.version||!this.disjointTimerQueryWebgl2Extension)throw new Error("WebGL1 profiling currently not supported");var r=this.gl,o=this.disjointTimerQueryWebgl2Extension;return t=r.getQueryParameter(e,r.QUERY_RESULT_AVAILABLE),n=r.getParameter(o.GPU_DISJOINT_EXT),t&&!n},e.prototype.getTimerResult=function(e){var t;if(2!==this.version)throw new Error("WebGL1 profiling currently not supported");var n=this.gl;return t=n.getQueryParameter(e,n.QUERY_RESULT),n.deleteQuery(e),t/1e6},e.prototype.waitForQueryAndGetTime=function(e){return a(this,void 0,void 0,(function(){var t=this;return u(this,(function(n){switch(n.label){case 0:return[4,(0,l.repeatedTry)((function(){return t.isTimerResultAvailable(e)}))];case 1:return n.sent(),[2,this.getTimerResult(e)]}}))}))},e.prototype.createAndWaitForFence=function(){return a(this,void 0,void 0,(function(){var e;return u(this,(function(t){return e=this.createFence(this.gl),[2,this.pollFence(e)]}))}))},e.prototype.createFence=function(e){var t=e,n=t.fenceSync(t.SYNC_GPU_COMMANDS_COMPLETE,0);return e.flush(),{query:n,isFencePassed:null===n?function(){return!0}:function(){var e=t.clientWaitSync(n,0,0);return e===t.ALREADY_SIGNALED||e===t.CONDITION_SATISFIED}}},e.prototype.pollFence=function(e){return a(this,void 0,void 0,(function(){var t=this;return u(this,(function(n){return[2,new Promise((function(n){t.addItemToPoll((function(){return e.isFencePassed()}),(function(){return n()}))}))]}))}))},e.prototype.pollItems=function(){for(var e=p(this.itemsToPoll.map((function(e){return e.isDoneFn}))),t=0;t<=e;++t)(0,this.itemsToPoll[t].resolveFn)();this.itemsToPoll=this.itemsToPoll.slice(e+1)},e.prototype.addItemToPoll=function(e,t){return a(this,void 0,void 0,(function(){var n=this;return u(this,(function(r){switch(r.label){case 0:return this.itemsToPoll.push({isDoneFn:e,resolveFn:t}),this.itemsToPoll.length>1?[2]:[4,(0,l.repeatedTry)((function(){return n.pollItems(),0===n.itemsToPoll.length}))];case 1:return r.sent(),[2]}}))}))},e}();t.WebGLContext=f},6496:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function u(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,u)}s((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(s){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,r=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){a=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){a.label=u[1];break}if(6===u[0]&&a.label<o[1]){a.label=o[1],o=u;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(u);break}o[2]&&a.ops.pop(),a.trys.pop();continue}u=t.call(e,a)}catch(e){u=[6,e],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,s])}}},i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},a=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},u=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.ExecutionPlan=void 0;var s=n(1315),c=function(e,t){this.op=e,this.node=t},l=function(){function e(e,t,n){this.graph=e,this.profiler=n,this.initialize(t)}return e.prototype.initialize=function(e){var t=this;this.profiler.event("session","ExecutionPlan.initialize",(function(){var n=t.graph.getNodes();if(n.length!==e.length)throw new Error("The size of nodes and OPs do not match.");t._ops=e.map((function(e,t){return new c(e,n[t])})),t.reset(),t._starter=[],t._ops.forEach((function(e,n){var r,o,a=!0;try{for(var u=i(e.node.inputs),s=u.next();!s.done;s=u.next()){var c=s.value;if(!t._values[c]&&-1===t.graph.getInputIndices().indexOf(c)){a=!1;break}}}catch(e){r={error:e}}finally{try{s&&!s.done&&(o=u.return)&&o.call(u)}finally{if(r)throw r.error}}a&&t._starter.push(n)}))}))},e.prototype.reset=function(){this._values=this.graph.getValues().map((function(e){return e.tensor}))},e.prototype.execute=function(e,t){return r(this,void 0,void 0,(function(){var n=this;return o(this,(function(c){return[2,this.profiler.event("session","ExecutionPlan.execute",(function(){return r(n,void 0,void 0,(function(){var n,c,l,p,f,d,h,g,y,m,v,b,w=this;return o(this,(function(_){switch(_.label){case 0:if(this.reset(),n=e.createInferenceHandler(),c=this.graph.getInputIndices(),t.length!==c.length)throw new Error("number of input tensors don't match the number of inputs to the model: actual: ".concat(t.length," expected: ").concat(c.length));t.forEach((function(e,t){var n=c[t];w._values[n]=e})),l=this._starter.slice(0),p=this.graph.getValues(),f=this.graph.getNodes(),d=0,h=function(){var e,t,c,h,y,m;return o(this,(function(v){switch(v.label){case 0:if(e=l[d++],t=g._ops[e],c=t.node.inputs.map((function(e){return w._values[e]})),-1!==c.indexOf(void 0))throw new Error("unresolved input detected: op: ".concat(t.node));return h=c,s.Logger.verbose("ExecPlan","Runing op:".concat(t.node.name," (").concat(h.map((function(e,n){return"'".concat(t.node.inputs[n],"': ").concat(e.type,"[").concat(e.dims.join(","),"]")})).join(", "),")")),[4,g.profiler.event("node",t.node.name,(function(){return r(w,void 0,void 0,(function(){return o(this,(function(e){return[2,t.op.impl(n,h,t.op.context)]}))}))}))];case 1:if((y=v.sent()).length!==t.node.outputs.length)throw new Error("the size of output does not match model definition.");return y.forEach((function(e,n){var r=t.node.outputs[n];if(w._values[r])throw new Error("output [".concat(r,"] already has value: op:").concat(t.node.name));w._values[r]=e})),m=new Set,y.forEach((function(e,n){var r,o,a,u,s=t.node.outputs[n];try{for(var c=(r=void 0,i(p[s].to)),l=c.next();!l.done;l=c.next()){var d=l.value,h=f[d],g=!0;try{for(var y=(a=void 0,i(h.inputs)),v=y.next();!v.done;v=y.next()){var b=v.value;if(!w._values[b]){g=!1;break}}}catch(e){a={error:e}}finally{try{v&&!v.done&&(u=y.return)&&u.call(y)}finally{if(a)throw a.error}}g&&m.add(d)}}catch(e){r={error:e}}finally{try{l&&!l.done&&(o=c.return)&&o.call(c)}finally{if(r)throw r.error}}})),l.push.apply(l,u([],a(m),!1)),[2]}}))},g=this,_.label=1;case 1:return d<l.length?[5,h()]:[3,3];case 2:return _.sent(),[3,1];case 3:y=[],m=0,_.label=4;case 4:if(!(m<this.graph.getOutputIndices().length))return[3,9];if(v=this.graph.getOutputIndices()[m],void 0===(b=this._values[v]))throw new Error("required output [".concat(v,"] does not have value"));return 0!==v?[3,6]:[4,b.getData()];case 5:return _.sent(),[3,7];case 6:b.data,_.label=7;case 7:y.push(b),_.label=8;case 8:return m++,[3,4];case 9:return s.Logger.verbose("ExecPlan","disposing of inferenceHandler"),n.dispose(),[2,y]}}))}))}))]}))}))},e}();t.ExecutionPlan=l},4662:function(e,t,n){"use strict";var r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.Graph=void 0;var o=n(6874),i=n(5127),a=n(2446),u=n(9240),s=n(7273),c=i.onnxruntime.experimental.fbs;t.Graph={from:function(e,t){return new f(e,t)}};var l=function(){function e(e){this._from=void 0,this._to=[],this.tensor=void 0,this.type=void 0,e&&(this.type=s.ProtoUtil.tensorValueTypeFromProto(e.type.tensorType))}return Object.defineProperty(e.prototype,"from",{get:function(){return this._from},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"to",{get:function(){return this._to},enumerable:!1,configurable:!0}),e}(),p=function(e,t){e instanceof a.onnx.NodeProto?(this.name=e.name,this.opType=e.opType,this.attributes=new o.Attribute(e.attribute)):e instanceof c.Node&&(this.name=null!=t?t:e.name(),this.opType=e.opType(),this.attributes=new o.Attribute(s.ProtoUtil.tensorAttributesFromORTFormat(e))),this.inputs=[],this.outputs=[],this.executeNode=!0},f=function(){function e(e,t){if(!e)throw new TypeError("graph is empty");this.buildGraph(e),this.transformGraph(t),this.checkIsAcyclic()}return e.prototype.getInputIndices=function(){return this._allInputIndices},e.prototype.getInputNames=function(){return this._allInputNames},e.prototype.getOutputIndices=function(){return this._allOutputIndices},e.prototype.getOutputNames=function(){return this._allOutputNames},e.prototype.getValues=function(){return this._allData},e.prototype.getNodes=function(){return this._nodes},e.prototype.buildGraph=function(e){if(e instanceof a.onnx.GraphProto)this.buildGraphFromOnnxFormat(e);else{if(!(e instanceof c.Graph))throw new TypeError("Graph type is not supported.");this.buildGraphFromOrtFormat(e)}},e.prototype.buildGraphFromOnnxFormat=function(e){var t,n,o,i,a,c,f,d,h,g,y,m,v=new Map;this._allData=[],this._allInputIndices=[],this._allInputNames=[],this._allOutputIndices=[],this._allOutputNames=[],this._nodes=[];var b=new Map;if(!e.input)throw new Error("missing information in graph: input");var w=[];try{for(var _=r(e.input),x=_.next();!x.done;x=_.next()){var T=x.value;if(v.has(T.name))throw new Error("duplicated input name: ".concat(T.name));var S=this._allData.push(new l(T))-1;v.set(T.name,S),w.push(T.name)}}catch(e){t={error:e}}finally{try{x&&!x.done&&(n=_.return)&&n.call(_)}finally{if(t)throw t.error}}if(!e.initializer)throw new Error("missing information in graph: initializer");try{for(var P=r(e.initializer),A=P.next();!A.done;A=P.next()){T=A.value;var O=v.get(T.name);if(void 0===O){var I=new l;I.type={shape:{dims:s.ProtoUtil.tensorDimsFromProto(T.dims)},tensorType:s.ProtoUtil.tensorDataTypeFromProto(T.dataType)},O=this._allData.push(I)-1,v.set(T.name,O)}this._allData[O]._from=-1,this._allData[O].tensor=u.Tensor.fromProto(T)}}catch(e){o={error:e}}finally{try{A&&!A.done&&(i=P.return)&&i.call(P)}finally{if(o)throw o.error}}for(T=0;T<this._allData.length;T++)this._allData[T].tensor||(this._allInputIndices.push(T),this._allInputNames.push(w[T]));if(!e.output)throw new Error("missing information in graph: output");try{for(var E=r(e.output),C=E.next();!C.done;C=E.next()){if(T=C.value,v.has(T.name))throw new Error("duplicated output name: ".concat(T.name));S=this._allData.push(new l(T))-1,v.set(T.name,S),this._allOutputIndices.push(S),this._allOutputNames.push(T.name)}}catch(e){a={error:e}}finally{try{C&&!C.done&&(c=E.return)&&c.call(E)}finally{if(a)throw a.error}}if(!e.node)throw new Error("missing information in graph: node");try{for(var D=r(e.node),k=D.next();!k.done;k=D.next()){if(!(B=k.value).name)for(var R=0;;R++){var M="unnamed_".concat(B.opType,"_").concat(R);if(!b.has(M)){B.name=M;break}}if(b.has(B.name))throw new Error("duplicated node name: ".concat(B.name));S=this._nodes.push(new p(B))-1,b.set(B.name,S)}}catch(e){f={error:e}}finally{try{k&&!k.done&&(d=D.return)&&d.call(D)}finally{if(f)throw f.error}}for(T=0;T<this._nodes.length;T++){var j=this._nodes[T];if(!(B=e.node[T]).output)throw new Error("missing output for node: ".concat(B.name));try{for(var L=(h=void 0,r(B.output)),F=L.next();!F.done;F=L.next()){var N=F.value;if(void 0===(G=v.get(N))&&(G=this._allData.push(new l)-1,v.set(N,G)),j.outputs.push(G),void 0!==this._allData[G]._from)throw new Error("multiple nodes output to one data value: ".concat(G));if(this._allData[G]._from=T,"Constant"===B.opType){if(!B.attribute||1!==B.attribute.length||!B.attribute[0].t)throw new Error("missing attributes or missing tensor value in attributes for this Constant operator");if(!B.output||1!==B.output.length)throw new Error("missing output or incorrect number of outputs for this Constant operator");j.outputs.pop(),j.executeNode=!1,this._allData[G]._from=-1,this._allData[G].tensor=u.Tensor.fromProto(B.attribute[0].t)}}}catch(e){h={error:e}}finally{try{F&&!F.done&&(g=L.return)&&g.call(L)}finally{if(h)throw h.error}}}for(T=0;T<this._nodes.length;T++){var B;if(j=this._nodes[T],!(B=e.node[T]).input)throw new Error("missing input for node: ".concat(B.name));try{for(var U=(y=void 0,r(B.input)),z=U.next();!z.done;z=U.next()){var G,V=z.value;if(void 0===(G=v.get(V))){if(""===V&&3===B.input.length&&"Resize"===B.opType)continue;throw new Error("unrecognized input '".concat(V,"' for node: ").concat(B.name))}j.inputs.push(G),this._allData[G]._to.push(T)}}catch(e){y={error:e}}finally{try{z&&!z.done&&(m=U.return)&&m.call(U)}finally{if(y)throw y.error}}}return!0},e.prototype.buildGraphFromOrtFormat=function(e){var t,n,r,o=new Map;this._allData=[],this._allInputIndices=[],this._allInputNames=[],this._allOutputIndices=[],this._allOutputNames=[],this._nodes=[];for(var i=new Map,a=[],f=0;f<e.inputsLength();f++){var d=e.inputs(f);if(o.has(d))throw new Error("duplicated input name: ".concat(d));for(var h=0;h<e.nodeArgsLength();h++)if((null===(t=e.nodeArgs(h))||void 0===t?void 0:t.name())===d){var g=new l;if((null===(r=null===(n=e.nodeArgs(h))||void 0===n?void 0:n.type())||void 0===r?void 0:r.valueType())!==c.TypeInfoValue.tensor_type)throw new Error("Unexpected value type for the nodeArg.");for(var y=e.nodeArgs(h).type().value(new c.TensorTypeAndShape),m=s.ProtoUtil.tensorDataTypeFromProto(y.elemType()),v=y.shape(),b=[],w=0;w<v.dimLength();w++)b.push(s.LongUtil.longToNumber(v.dim(w).value().dimValue()));g.type={shape:{dims:b},tensorType:m};var _=this._allData.push(g)-1;o.set(d,_),a.push(d)}}for(f=0;f<e.initializersLength();f++){var x=e.initializers(f),T=o.get(x.name());void 0===T&&(g=new l,b=s.ProtoUtil.tensorDimsFromORTFormat(x),m=s.ProtoUtil.tensorDataTypeFromProto(x.dataType()),g.type={shape:{dims:b},tensorType:m},T=this._allData.push(g)-1,o.set(x.name(),T)),this._allData[T]._from=-1,this._allData[T].tensor=u.Tensor.fromOrtTensor(x)}for(f=0;f<this._allData.length;f++)this._allData[f].tensor||(this._allInputIndices.push(f),this._allInputNames.push(a[f]));for(f=0;f<e.outputsLength();f++){var S=e.outputs(f);if(o.has(S))throw new Error("duplicated output name: ".concat(S));_=this._allData.push(new l)-1,o.set(S,_),this._allOutputIndices.push(_),this._allOutputNames.push(S)}if(!e.nodes)throw new Error("missing information in graph: node");for(f=0;f<e.nodesLength();f++){var P=(E=e.nodes(f)).name();if(!P)for(var A=0;P="unnamed_".concat(E.opType(),"_").concat(A),i.has(P);A++);if(i.has(P))throw new Error("duplicated node name: ".concat(P));_=this._nodes.push(new p(E,P))-1,i.set(P,_)}for(f=0;f<this._nodes.length;f++){var O=this._nodes[f];if(null==(E=e.nodes(f)))throw new Error("No node exists at index ".concat(f));if(0===(null==E?void 0:E.outputsLength()))throw new Error("missing output for node: ".concat(E.name));for(h=0;h<(null==E?void 0:E.outputsLength());h++){var I=null==E?void 0:E.outputs(h);if(void 0===(C=o.get(I))&&(C=this._allData.push(new l)-1,o.set(I,C)),O.outputs.push(C),void 0!==this._allData[C]._from)throw new Error("multiple nodes output to one data value: ".concat(C));if(this._allData[C]._from=f,"Constant"===E.opType()){if(1!==E.attributesLength()||!E.attributes(0).t())throw new Error("missing attributes or missing tensor value in attributes for this Constant operator");if(1!==E.outputsLength())throw new Error("missing output or incorrect number of outputs for this Constant operator");O.outputs.pop(),O.executeNode=!1,this._allData[C]._from=-1,this._allData[C].tensor=u.Tensor.fromOrtTensor(E.attributes(0).t())}}}for(f=0;f<this._nodes.length;f++){var E;if(O=this._nodes[f],0===(E=e.nodes(f)).inputsLength())throw new Error("missing input for node: ".concat(E.name));for(h=0;h<E.inputsLength();h++){var C,D=E.inputs(h);if(void 0===(C=o.get(D)))throw new Error("unrecognized input '".concat(D,"' for node: ").concat(E.name()));O.inputs.push(C),this._allData[C]._to.push(f)}}},e.prototype.checkIsAcyclic=function(){var e=this,t=new Set;this._allInputIndices.forEach((function(n){e._allData[n]._to.forEach((function(e){t.add(e)}))}));for(var n=Array.from(t),r=new Array(this._nodes.length).fill("white"),o=function(){var t=n.pop();"gray"===r[t]?r[t]="black":(n.push(t),r[t]="gray",i._nodes[t].outputs.forEach((function(o){var i=e._allData[o];if(void 0!==i.tensor)throw new Error("node outputs should not be initialized");if(i._from!==t)throw new Error("from property of the Value object doesn't match index of Node being processed");i._to.forEach((function(e){if("gray"===r[e])throw new Error("model graph is cyclic");"white"===r[e]&&n.push(e)}))})))},i=this;n.length>0;)o()},e.prototype.transformGraph=function(e){this.removeAllIdentityNodes(),this.removeAllDropoutNodes(),this.fuseConvActivationNodes(),e&&e.transformGraph(this),this.finalizeGraph()},e.prototype.finalizeGraph=function(){for(var e=this,t=0,n=new Array(this._nodes.length,0),r=0,o=0;o<this._nodes.length;o++)n[o]=r,this._nodes[o].executeNode?(r!==o&&(this._nodes[r]=this._nodes[o]),r++):this._nodes[o].outputs.forEach((function(t){e._allData[t]._from=-2}));for(this._nodes.splice(r,this._nodes.length-r),o=0;o<this._allData.length;o++){var i=this._allData[o];void 0!==i._from&&-1!==i._from&&-2!==i._from&&(i._from=n[i._from]);for(var a=0;a<i._to.length;a++){if(!(i._to[a]>=0))throw new Error("Trying to update a removed node");i._to[a]=n[i._to[a]]}}t=0;var u,s=function(n){if(-2===c._allData[n].from&&-1===c._allOutputIndices.indexOf(n+t))return t++,c._allData.splice(n,1),n--,u=n,"continue";if(t>0){var r=-1;void 0!==c._allData[n].from&&-1!==c._allData[n].from?-1!==(r=c._nodes[c._allData[n].from].outputs.indexOf(n+t))&&(c._nodes[c._allData[n].from].outputs[r]=n):-1!==(r=c._allInputIndices.indexOf(n+t))&&(c._allInputIndices[r]=n),c._allData[n].to.forEach((function(o){-1!==(r=e._nodes[o].inputs.indexOf(n+t))&&(e._nodes[o].inputs[r]=n)})),0===c._allData[n].to.length&&-1!==(r=c._allOutputIndices.indexOf(n+t))&&(c._allOutputIndices[r]=n)}u=n},c=this;for(o=0;o<this._allData.length;o++)s(o),o=u},e.prototype.deleteNode=function(e){var t,n,o=this._nodes[e];if(o.outputs.length>1)for(var i=1;i<o.outputs.length;i++)if(this._allData[o.outputs[i]].to.length>0)throw new Error("Node deletion with more than one output connected to other nodes is not supported. ");o.executeNode=!1;var a=o.inputs[0],u=o.outputs[0],s=this._allData[u].to;for(i=0;i<o.inputs.length;i++){var c=this._allData[o.inputs[i]].to.indexOf(e);if(-1===c)throw new Error("The Value object doesn't have the current Node in it's 'to' property ");this._allData[o.inputs[i]].to.splice(c,1)}this._allData[u]._to=[];var l=this._allOutputIndices.indexOf(u);if(-1!==l&&(this._allOutputIndices[l]=a),s&&s.length>0)try{for(var p=r(s),f=p.next();!f.done;f=p.next()){var d=f.value,h=this._nodes[d].inputs.indexOf(u);if(-1===h)throw new Error("The Node object doesn't have the output Value in it's 'inputs' property ");this._nodes[d].inputs[h]=a,this._allData[a].to.push(d)}}catch(e){t={error:e}}finally{try{f&&!f.done&&(n=p.return)&&n.call(p)}finally{if(t)throw t.error}}},e.prototype.removeAllDropoutNodes=function(){var e,t,n=0;try{for(var o=r(this._nodes),i=o.next();!i.done;i=o.next()){var a=i.value;if("Dropout"===a.opType){if(1!==a.inputs.length)throw new Error("Dropout nodes should only contain one input. ");if(1!==a.outputs.length&&2!==a.outputs.length)throw new Error("Dropout nodes should contain either 1 or 2 output(s)");if(2===a.outputs.length&&0!==this._allData[a.outputs[1]]._to.length)throw new Error("Dropout nodes's second output should not be referenced by other nodes");this.deleteNode(n)}n++}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}},e.prototype.removeAllIdentityNodes=function(){var e,t,n=0;try{for(var o=r(this._nodes),i=o.next();!i.done;i=o.next())"Identity"===i.value.opType&&this.deleteNode(n),n++}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}},e.prototype.isActivation=function(e){switch(e.opType){case"Relu":case"Sigmoid":case"Clip":return!0;default:return!1}},e.prototype.fuseConvActivationNodes=function(){var e,t;try{for(var n=r(this._nodes),o=n.next();!o.done;o=n.next()){var i=o.value;if("Conv"===i.opType){var a=this._allData[i.outputs[0]]._to;if(1===a.length&&this.isActivation(this._nodes[a[0]])){var u=this._nodes[a[0]];if("Clip"===u.opType)if(1===u.inputs.length)try{i.attributes.set("activation_params","floats",[u.attributes.getFloat("min"),u.attributes.getFloat("max")])}catch(e){i.attributes.set("activation_params","floats",[s.MIN_CLIP,s.MAX_CLIP])}else{if(!(u.inputs.length>=3&&void 0!==this._allData[u.inputs[1]].tensor&&void 0!==this._allData[u.inputs[2]].tensor))continue;i.attributes.set("activation_params","floats",[this._allData[u.inputs[1]].tensor.floatData[0],this._allData[u.inputs[2]].tensor.floatData[0]])}i.attributes.set("activation","string",u.opType),this.deleteNode(a[0])}}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}},e}()},1315:function(e,t){"use strict";var n,r,o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function u(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,u)}s((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(s){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,r=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){a=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){a.label=u[1];break}if(6===u[0]&&a.label<o[1]){a.label=o[1],o=u;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(u);break}o[2]&&a.ops.pop(),a.trys.pop();continue}u=t.call(e,a)}catch(e){u=[6,e],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.now=t.Profiler=t.Logger=void 0;var a=function(){function e(){}return e.prototype.log=function(e,t,n){},e}(),u=function(){function e(){}return e.prototype.log=function(e,t,n){console.log("".concat(this.color(e)," ").concat(n?"[35m"+n+"[0m ":"").concat(t))},e.prototype.color=function(e){switch(e){case"verbose":return"[34;40mv[0m";case"info":return"[32mi[0m";case"warning":return"[30;43mw[0m";case"error":return"[31;40me[0m";case"fatal":return"[101mf[0m";default:throw new Error("unsupported severity: ".concat(e))}},e}(),s={verbose:1e3,info:2e3,warning:4e3,error:5e3,fatal:6e3},c=((n={}).none=new a,n.console=new u,n),l={provider:"console",minimalSeverity:"warning",logDateTime:!0,logSourceLocation:!1},p=((r={})[""]=l,r);function f(e,t,n,r){if(void 0===t)return o=e,{verbose:f.verbose.bind(null,o),info:f.info.bind(null,o),warning:f.warning.bind(null,o),error:f.error.bind(null,o),fatal:f.fatal.bind(null,o)};if(void 0===n)d(e,t);else if("number"==typeof n&&void 0===r)d(e,t);else if("string"==typeof n&&void 0===r)d(e,n,0,t);else{if("string"!=typeof n||"number"!=typeof r)throw new TypeError("input is valid");d(e,n,0,t)}var o}function d(e,t,n,r){var o=p[r||""]||p[""];s[e]<s[o.minimalSeverity]||(o.logDateTime&&(t="".concat((new Date).toISOString(),"|").concat(t)),o.logSourceLocation,c[o.provider].log(e,t,r))}!function(e){function t(e){p={},n("",e||{})}function n(e,n){if("*"===e)t(n);else{var r=p[e]||l;p[e]={provider:n.provider||r.provider,minimalSeverity:n.minimalSeverity||r.minimalSeverity,logDateTime:void 0===n.logDateTime?r.logDateTime:n.logDateTime,logSourceLocation:void 0===n.logSourceLocation?r.logSourceLocation:n.logSourceLocation}}}e.verbose=function(t,n){e("verbose",t,n)},e.info=function(t,n){e("info",t,n)},e.warning=function(t,n){e("warning",t,n)},e.error=function(t,n){e("error",t,n)},e.fatal=function(t,n){e("fatal",t,n)},e.reset=t,e.set=n,e.setWithEnv=function(e){var t={};e.logLevel&&(t.minimalSeverity=e.logLevel),n("",t)}}(f||(f={})),t.Logger=f;var h=function(){function e(e,t,n,r,o,i){this.category=e,this.name=t,this.startTime=n,this.endCallback=r,this.timer=o,this.ctx=i}return e.prototype.end=function(){return o(this,void 0,void 0,(function(){return i(this,(function(e){return[2,this.endCallback(this)]}))}))},e.prototype.checkTimer=function(){return o(this,void 0,void 0,(function(){return i(this,(function(e){if(void 0===this.ctx||void 0===this.timer)throw new Error("No webgl timer found");return this.ctx.endTimer(),[2,this.ctx.waitForQueryAndGetTime(this.timer)]}))}))},e}(),g=function(e,t,n,r){this.category=e,this.name=t,this.startTime=n,this.endTime=r},y=function(){function e(e,t,n){this._started=!1,this._flushPointer=0,this._started=!1,this._maxNumberEvents=void 0===e?1e4:e,this._flushBatchSize=void 0===t?10:t,this._flushIntervalInMilliseconds=void 0===n?5e3:n}return e.create=function(e){return void 0===e?new this:new this(e.maxNumberEvents,e.flushBatchSize,e.flushIntervalInMilliseconds)},e.prototype.start=function(){this._started=!0,this._timingEvents=[],this._flushTime=(0,t.now)(),this._flushPointer=0},e.prototype.stop=function(){for(this._started=!1;this._flushPointer<this._timingEvents.length;this._flushPointer++)this.logOneEvent(this._timingEvents[this._flushPointer])},e.prototype.event=function(e,t,n,r){var a=this,u=this._started?this.begin(e,t,r):void 0,s=!1,c=n();if(c&&"function"==typeof c.then)return s=!0,new Promise((function(e,t){c.then((function(t){return o(a,void 0,void 0,(function(){return i(this,(function(n){switch(n.label){case 0:return u?[4,u.end()]:[3,2];case 1:n.sent(),n.label=2;case 2:return e(t),[2]}}))}))}),(function(e){return o(a,void 0,void 0,(function(){return i(this,(function(n){switch(n.label){case 0:return u?[4,u.end()]:[3,2];case 1:n.sent(),n.label=2;case 2:return t(e),[2]}}))}))}))}));if(!s&&u){var l=u.end();if(l&&"function"==typeof l.then)return new Promise((function(e,t){l.then((function(){e(c)}),(function(e){t(e)}))}))}return c},e.prototype.begin=function(e,n,r){var a=this;if(!this._started)throw new Error("profiler is not started yet");if(void 0===r){var u=(0,t.now)();return this.flush(u),new h(e,n,u,(function(e){return a.endSync(e)}))}var s=r.beginTimer();return new h(e,n,0,(function(e){return o(a,void 0,void 0,(function(){return i(this,(function(t){return[2,this.end(e)]}))}))}),s,r)},e.prototype.end=function(e){return o(this,void 0,void 0,(function(){var t;return i(this,(function(n){switch(n.label){case 0:return[4,e.checkTimer()];case 1:return t=n.sent(),this._timingEvents.length<this._maxNumberEvents&&(this._timingEvents.push(new g(e.category,e.name,e.startTime,t)),this.flush(t)),[2]}}))}))},e.prototype.endSync=function(e){var n=(0,t.now)();this._timingEvents.length<this._maxNumberEvents&&(this._timingEvents.push(new g(e.category,e.name,e.startTime,n)),this.flush(n))},e.prototype.logOneEvent=function(e){t.Logger.verbose("Profiler.".concat(e.category),"".concat((e.endTime-e.startTime).toFixed(2),"ms on event '").concat(e.name,"' at ").concat(e.endTime.toFixed(2)))},e.prototype.flush=function(e){if(this._timingEvents.length-this._flushPointer>=this._flushBatchSize||e-this._flushTime>=this._flushIntervalInMilliseconds){for(var n=this._flushPointer;this._flushPointer<n+this._flushBatchSize&&this._flushPointer<this._timingEvents.length;this._flushPointer++)this.logOneEvent(this._timingEvents[this._flushPointer]);this._flushTime=(0,t.now)()}},Object.defineProperty(e.prototype,"started",{get:function(){return this._started},enumerable:!1,configurable:!0}),e}();t.Profiler=y,t.now="undefined"!=typeof performance&&performance.now?function(){return performance.now()}:Date.now},1745:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Model=void 0;var r=n(5686),o=n(4662),i=n(5127),a=n(2446),u=n(7273),s=i.onnxruntime.experimental.fbs,c=function(){function e(){}return e.prototype.load=function(e,t,n){if(!n)try{return void this.loadFromOnnxFormat(e,t)}catch(e){if(void 0!==n)throw e}this.loadFromOrtFormat(e,t)},e.prototype.loadFromOnnxFormat=function(e,t){var n=a.onnx.ModelProto.decode(e);if(u.LongUtil.longToNumber(n.irVersion)<3)throw new Error("only support ONNX model with IR_VERSION>=3");this._opsets=n.opsetImport.map((function(e){return{domain:e.domain,version:u.LongUtil.longToNumber(e.version)}})),this._graph=o.Graph.from(n.graph,t)},e.prototype.loadFromOrtFormat=function(e,t){var n=new r.flatbuffers.ByteBuffer(e),i=s.InferenceSession.getRootAsInferenceSession(n).model();if(u.LongUtil.longToNumber(i.irVersion())<3)throw new Error("only support ONNX model with IR_VERSION>=3");this._opsets=[];for(var a=0;a<i.opsetImportLength();a++){var c=i.opsetImport(a);this._opsets.push({domain:null==c?void 0:c.domain(),version:u.LongUtil.longToNumber(c.version())})}this._graph=o.Graph.from(i.graph(),t)},Object.defineProperty(e.prototype,"graph",{get:function(){return this._graph},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"opsets",{get:function(){return this._opsets},enumerable:!1,configurable:!0}),e}();t.Model=c},6145:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FLOAT_TYPES=t.INT_TYPES=t.NUMBER_TYPES=void 0,t.NUMBER_TYPES=["float32","float64","int32","int16","int8","uint16","uint32","uint8"],t.INT_TYPES=["int32","int16","int8","uint16","uint32","uint8"],t.FLOAT_TYPES=["float32","float64"]},5881:function(e,t){"use strict";var n=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};function r(e,t){if(t.endsWith("+")){var n=Number.parseInt(t.substring(0,t.length-1),10);return!isNaN(n)&&n<=e}if(2===t.split("-").length){var r=t.split("-"),o=(n=Number.parseInt(r[0],10),Number.parseInt(r[1],10));return!isNaN(n)&&!isNaN(o)&&n<=e&&e<=o}return Number.parseInt(t,10)===e}Object.defineProperty(t,"__esModule",{value:!0}),t.resolveOperator=void 0,t.resolveOperator=function(e,t,o){var i,a,u,s;try{for(var c=n(o),l=c.next();!l.done;l=c.next()){var p=l.value,f=p[0],d=p[1],h=p[2],g=p[3],y=p[4];if(e.opType===f)try{for(var m=(u=void 0,n(t)),v=m.next();!v.done;v=m.next()){var b=v.value;if((b.domain===d||"ai.onnx"===b.domain&&""===d)&&r(b.version,h))return{opImpl:g,opInit:y}}}catch(e){u={error:e}}finally{try{v&&!v.done&&(s=m.return)&&s.call(m)}finally{if(u)throw u.error}}}}catch(e){i={error:e}}finally{try{l&&!l.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}throw new TypeError("cannot resolve operator '".concat(e.opType,"' with opsets: ").concat(t.map((function(e){return"".concat(e.domain||"ai.onnx"," v").concat(e.version)})).join(", ")))}},5127:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.onnxruntime=void 0;var r,o,i,a,u=n(5686);r=t.onnxruntime||(t.onnxruntime={}),o=r.experimental||(r.experimental={}),i=o.fbs||(o.fbs={}),(a=i.AttributeType||(i.AttributeType={}))[a.UNDEFINED=0]="UNDEFINED",a[a.FLOAT=1]="FLOAT",a[a.INT=2]="INT",a[a.STRING=3]="STRING",a[a.TENSOR=4]="TENSOR",a[a.GRAPH=5]="GRAPH",a[a.FLOATS=6]="FLOATS",a[a.INTS=7]="INTS",a[a.STRINGS=8]="STRINGS",a[a.TENSORS=9]="TENSORS",a[a.GRAPHS=10]="GRAPHS",a[a.SPARSE_TENSOR=11]="SPARSE_TENSOR",a[a.SPARSE_TENSORS=12]="SPARSE_TENSORS",function(e){!function(e){!function(e){var t;(t=e.DimensionValueType||(e.DimensionValueType={}))[t.UNKNOWN=0]="UNKNOWN",t[t.VALUE=1]="VALUE",t[t.PARAM=2]="PARAM"}(e.fbs||(e.fbs={}))}(e.experimental||(e.experimental={}))}(t.onnxruntime||(t.onnxruntime={})),function(e){!function(e){!function(e){var t;(t=e.TensorDataType||(e.TensorDataType={}))[t.UNDEFINED=0]="UNDEFINED",t[t.FLOAT=1]="FLOAT",t[t.UINT8=2]="UINT8",t[t.INT8=3]="INT8",t[t.UINT16=4]="UINT16",t[t.INT16=5]="INT16",t[t.INT32=6]="INT32",t[t.INT64=7]="INT64",t[t.STRING=8]="STRING",t[t.BOOL=9]="BOOL",t[t.FLOAT16=10]="FLOAT16",t[t.DOUBLE=11]="DOUBLE",t[t.UINT32=12]="UINT32",t[t.UINT64=13]="UINT64",t[t.COMPLEX64=14]="COMPLEX64",t[t.COMPLEX128=15]="COMPLEX128",t[t.BFLOAT16=16]="BFLOAT16",t[t.FLOAT8E4M3FN=17]="FLOAT8E4M3FN",t[t.FLOAT8E4M3FNUZ=18]="FLOAT8E4M3FNUZ",t[t.FLOAT8E5M2=19]="FLOAT8E5M2",t[t.FLOAT8E5M2FNUZ=20]="FLOAT8E5M2FNUZ"}(e.fbs||(e.fbs={}))}(e.experimental||(e.experimental={}))}(t.onnxruntime||(t.onnxruntime={})),function(e){!function(e){!function(e){var t;(t=e.NodeType||(e.NodeType={}))[t.Primitive=0]="Primitive",t[t.Fused=1]="Fused"}(e.fbs||(e.fbs={}))}(e.experimental||(e.experimental={}))}(t.onnxruntime||(t.onnxruntime={})),function(e){!function(e){!function(e){var t;(t=e.TypeInfoValue||(e.TypeInfoValue={}))[t.NONE=0]="NONE",t[t.tensor_type=1]="tensor_type",t[t.sequence_type=2]="sequence_type",t[t.map_type=3]="map_type"}(e.fbs||(e.fbs={}))}(e.experimental||(e.experimental={}))}(t.onnxruntime||(t.onnxruntime={})),function(e){!function(t){!function(t){var n=function(){function t(){this.bb=null,this.bb_pos=0}return t.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this},t.getRootAsShape=function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.getSizePrefixedRootAsShape=function(e,n){return e.setPosition(e.position()+u.flatbuffers.SIZE_PREFIX_LENGTH),(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.prototype.dim=function(t,n){var r=this.bb.__offset(this.bb_pos,4);return r?(n||new e.experimental.fbs.Dimension).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*t),this.bb):null},t.prototype.dimLength=function(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__vector_len(this.bb_pos+e):0},t.startShape=function(e){e.startObject(1)},t.addDim=function(e,t){e.addFieldOffset(0,t,0)},t.createDimVector=function(e,t){e.startVector(4,t.length,4);for(var n=t.length-1;n>=0;n--)e.addOffset(t[n]);return e.endVector()},t.startDimVector=function(e,t){e.startVector(4,t,4)},t.endShape=function(e){return e.endObject()},t.createShape=function(e,n){return t.startShape(e),t.addDim(e,n),t.endShape(e)},t}();t.Shape=n}(t.fbs||(t.fbs={}))}(e.experimental||(e.experimental={}))}(t.onnxruntime||(t.onnxruntime={})),function(e){!function(t){!function(t){var n=function(){function t(){this.bb=null,this.bb_pos=0}return t.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this},t.getRootAsDimension=function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.getSizePrefixedRootAsDimension=function(e,n){return e.setPosition(e.position()+u.flatbuffers.SIZE_PREFIX_LENGTH),(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.prototype.value=function(t){var n=this.bb.__offset(this.bb_pos,4);return n?(t||new e.experimental.fbs.DimensionValue).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null},t.prototype.denotation=function(e){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__string(this.bb_pos+t,e):null},t.startDimension=function(e){e.startObject(2)},t.addValue=function(e,t){e.addFieldOffset(0,t,0)},t.addDenotation=function(e,t){e.addFieldOffset(1,t,0)},t.endDimension=function(e){return e.endObject()},t.createDimension=function(e,n,r){return t.startDimension(e),t.addValue(e,n),t.addDenotation(e,r),t.endDimension(e)},t}();t.Dimension=n}(t.fbs||(t.fbs={}))}(e.experimental||(e.experimental={}))}(t.onnxruntime||(t.onnxruntime={})),function(e){!function(t){!function(t){var n=function(){function t(){this.bb=null,this.bb_pos=0}return t.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this},t.getRootAsDimensionValue=function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.getSizePrefixedRootAsDimensionValue=function(e,n){return e.setPosition(e.position()+u.flatbuffers.SIZE_PREFIX_LENGTH),(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.prototype.dimType=function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt8(this.bb_pos+t):e.experimental.fbs.DimensionValueType.UNKNOWN},t.prototype.dimValue=function(){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt64(this.bb_pos+e):this.bb.createLong(0,0)},t.prototype.dimParam=function(e){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__string(this.bb_pos+t,e):null},t.startDimensionValue=function(e){e.startObject(3)},t.addDimType=function(t,n){t.addFieldInt8(0,n,e.experimental.fbs.DimensionValueType.UNKNOWN)},t.addDimValue=function(e,t){e.addFieldInt64(1,t,e.createLong(0,0))},t.addDimParam=function(e,t){e.addFieldOffset(2,t,0)},t.endDimensionValue=function(e){return e.endObject()},t.createDimensionValue=function(e,n,r,o){return t.startDimensionValue(e),t.addDimType(e,n),t.addDimValue(e,r),t.addDimParam(e,o),t.endDimensionValue(e)},t}();t.DimensionValue=n}(t.fbs||(t.fbs={}))}(e.experimental||(e.experimental={}))}(t.onnxruntime||(t.onnxruntime={})),function(e){!function(t){!function(t){var n=function(){function t(){this.bb=null,this.bb_pos=0}return t.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this},t.getRootAsTensorTypeAndShape=function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.getSizePrefixedRootAsTensorTypeAndShape=function(e,n){return e.setPosition(e.position()+u.flatbuffers.SIZE_PREFIX_LENGTH),(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.prototype.elemType=function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):e.experimental.fbs.TensorDataType.UNDEFINED},t.prototype.shape=function(t){var n=this.bb.__offset(this.bb_pos,6);return n?(t||new e.experimental.fbs.Shape).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null},t.startTensorTypeAndShape=function(e){e.startObject(2)},t.addElemType=function(t,n){t.addFieldInt32(0,n,e.experimental.fbs.TensorDataType.UNDEFINED)},t.addShape=function(e,t){e.addFieldOffset(1,t,0)},t.endTensorTypeAndShape=function(e){return e.endObject()},t.createTensorTypeAndShape=function(e,n,r){return t.startTensorTypeAndShape(e),t.addElemType(e,n),t.addShape(e,r),t.endTensorTypeAndShape(e)},t}();t.TensorTypeAndShape=n}(t.fbs||(t.fbs={}))}(e.experimental||(e.experimental={}))}(t.onnxruntime||(t.onnxruntime={})),function(e){!function(t){!function(t){var n=function(){function t(){this.bb=null,this.bb_pos=0}return t.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this},t.getRootAsMapType=function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.getSizePrefixedRootAsMapType=function(e,n){return e.setPosition(e.position()+u.flatbuffers.SIZE_PREFIX_LENGTH),(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.prototype.keyType=function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):e.experimental.fbs.TensorDataType.UNDEFINED},t.prototype.valueType=function(t){var n=this.bb.__offset(this.bb_pos,6);return n?(t||new e.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null},t.startMapType=function(e){e.startObject(2)},t.addKeyType=function(t,n){t.addFieldInt32(0,n,e.experimental.fbs.TensorDataType.UNDEFINED)},t.addValueType=function(e,t){e.addFieldOffset(1,t,0)},t.endMapType=function(e){return e.endObject()},t.createMapType=function(e,n,r){return t.startMapType(e),t.addKeyType(e,n),t.addValueType(e,r),t.endMapType(e)},t}();t.MapType=n}(t.fbs||(t.fbs={}))}(e.experimental||(e.experimental={}))}(t.onnxruntime||(t.onnxruntime={})),function(e){!function(t){!function(t){var n=function(){function t(){this.bb=null,this.bb_pos=0}return t.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this},t.getRootAsSequenceType=function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.getSizePrefixedRootAsSequenceType=function(e,n){return e.setPosition(e.position()+u.flatbuffers.SIZE_PREFIX_LENGTH),(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.prototype.elemType=function(t){var n=this.bb.__offset(this.bb_pos,4);return n?(t||new e.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null},t.startSequenceType=function(e){e.startObject(1)},t.addElemType=function(e,t){e.addFieldOffset(0,t,0)},t.endSequenceType=function(e){return e.endObject()},t.createSequenceType=function(e,n){return t.startSequenceType(e),t.addElemType(e,n),t.endSequenceType(e)},t}();t.SequenceType=n}(t.fbs||(t.fbs={}))}(e.experimental||(e.experimental={}))}(t.onnxruntime||(t.onnxruntime={})),function(e){!function(e){!function(e){var t=function(){function e(){this.bb=null,this.bb_pos=0}return e.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this},e.prototype.nodeIndex=function(){return this.bb.readUint32(this.bb_pos)},e.prototype.srcArgIndex=function(){return this.bb.readInt32(this.bb_pos+4)},e.prototype.dstArgIndex=function(){return this.bb.readInt32(this.bb_pos+8)},e.createEdgeEnd=function(e,t,n,r){return e.prep(4,12),e.writeInt32(r),e.writeInt32(n),e.writeInt32(t),e.offset()},e}();e.EdgeEnd=t}(e.fbs||(e.fbs={}))}(e.experimental||(e.experimental={}))}(t.onnxruntime||(t.onnxruntime={})),function(e){!function(t){!function(t){var n=function(){function t(){this.bb=null,this.bb_pos=0}return t.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this},t.getRootAsNodeEdge=function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.getSizePrefixedRootAsNodeEdge=function(e,n){return e.setPosition(e.position()+u.flatbuffers.SIZE_PREFIX_LENGTH),(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.prototype.nodeIndex=function(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readUint32(this.bb_pos+e):0},t.prototype.inputEdges=function(t,n){var r=this.bb.__offset(this.bb_pos,6);return r?(n||new e.experimental.fbs.EdgeEnd).__init(this.bb.__vector(this.bb_pos+r)+12*t,this.bb):null},t.prototype.inputEdgesLength=function(){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0},t.prototype.outputEdges=function(t,n){var r=this.bb.__offset(this.bb_pos,8);return r?(n||new e.experimental.fbs.EdgeEnd).__init(this.bb.__vector(this.bb_pos+r)+12*t,this.bb):null},t.prototype.outputEdgesLength=function(){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0},t.startNodeEdge=function(e){e.startObject(3)},t.addNodeIndex=function(e,t){e.addFieldInt32(0,t,0)},t.addInputEdges=function(e,t){e.addFieldOffset(1,t,0)},t.startInputEdgesVector=function(e,t){e.startVector(12,t,4)},t.addOutputEdges=function(e,t){e.addFieldOffset(2,t,0)},t.startOutputEdgesVector=function(e,t){e.startVector(12,t,4)},t.endNodeEdge=function(e){return e.endObject()},t.createNodeEdge=function(e,n,r,o){return t.startNodeEdge(e),t.addNodeIndex(e,n),t.addInputEdges(e,r),t.addOutputEdges(e,o),t.endNodeEdge(e)},t}();t.NodeEdge=n}(t.fbs||(t.fbs={}))}(e.experimental||(e.experimental={}))}(t.onnxruntime||(t.onnxruntime={})),function(e){!function(t){!function(t){var n=function(){function t(){this.bb=null,this.bb_pos=0}return t.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this},t.getRootAsNode=function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.getSizePrefixedRootAsNode=function(e,n){return e.setPosition(e.position()+u.flatbuffers.SIZE_PREFIX_LENGTH),(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.prototype.name=function(e){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null},t.prototype.docString=function(e){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__string(this.bb_pos+t,e):null},t.prototype.domain=function(e){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__string(this.bb_pos+t,e):null},t.prototype.sinceVersion=function(){var e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readInt32(this.bb_pos+e):0},t.prototype.index=function(){var e=this.bb.__offset(this.bb_pos,12);return e?this.bb.readUint32(this.bb_pos+e):0},t.prototype.opType=function(e){var t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__string(this.bb_pos+t,e):null},t.prototype.type=function(){var t=this.bb.__offset(this.bb_pos,16);return t?this.bb.readInt32(this.bb_pos+t):e.experimental.fbs.NodeType.Primitive},t.prototype.executionProviderType=function(e){var t=this.bb.__offset(this.bb_pos,18);return t?this.bb.__string(this.bb_pos+t,e):null},t.prototype.inputs=function(e,t){var n=this.bb.__offset(this.bb_pos,20);return n?this.bb.__string(this.bb.__vector(this.bb_pos+n)+4*e,t):null},t.prototype.inputsLength=function(){var e=this.bb.__offset(this.bb_pos,20);return e?this.bb.__vector_len(this.bb_pos+e):0},t.prototype.outputs=function(e,t){var n=this.bb.__offset(this.bb_pos,22);return n?this.bb.__string(this.bb.__vector(this.bb_pos+n)+4*e,t):null},t.prototype.outputsLength=function(){var e=this.bb.__offset(this.bb_pos,22);return e?this.bb.__vector_len(this.bb_pos+e):0},t.prototype.attributes=function(t,n){var r=this.bb.__offset(this.bb_pos,24);return r?(n||new e.experimental.fbs.Attribute).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*t),this.bb):null},t.prototype.attributesLength=function(){var e=this.bb.__offset(this.bb_pos,24);return e?this.bb.__vector_len(this.bb_pos+e):0},t.prototype.inputArgCounts=function(e){var t=this.bb.__offset(this.bb_pos,26);return t?this.bb.readInt32(this.bb.__vector(this.bb_pos+t)+4*e):0},t.prototype.inputArgCountsLength=function(){var e=this.bb.__offset(this.bb_pos,26);return e?this.bb.__vector_len(this.bb_pos+e):0},t.prototype.inputArgCountsArray=function(){var e=this.bb.__offset(this.bb_pos,26);return e?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null},t.prototype.implicitInputs=function(e,t){var n=this.bb.__offset(this.bb_pos,28);return n?this.bb.__string(this.bb.__vector(this.bb_pos+n)+4*e,t):null},t.prototype.implicitInputsLength=function(){var e=this.bb.__offset(this.bb_pos,28);return e?this.bb.__vector_len(this.bb_pos+e):0},t.startNode=function(e){e.startObject(13)},t.addName=function(e,t){e.addFieldOffset(0,t,0)},t.addDocString=function(e,t){e.addFieldOffset(1,t,0)},t.addDomain=function(e,t){e.addFieldOffset(2,t,0)},t.addSinceVersion=function(e,t){e.addFieldInt32(3,t,0)},t.addIndex=function(e,t){e.addFieldInt32(4,t,0)},t.addOpType=function(e,t){e.addFieldOffset(5,t,0)},t.addType=function(t,n){t.addFieldInt32(6,n,e.experimental.fbs.NodeType.Primitive)},t.addExecutionProviderType=function(e,t){e.addFieldOffset(7,t,0)},t.addInputs=function(e,t){e.addFieldOffset(8,t,0)},t.createInputsVector=function(e,t){e.startVector(4,t.length,4);for(var n=t.length-1;n>=0;n--)e.addOffset(t[n]);return e.endVector()},t.startInputsVector=function(e,t){e.startVector(4,t,4)},t.addOutputs=function(e,t){e.addFieldOffset(9,t,0)},t.createOutputsVector=function(e,t){e.startVector(4,t.length,4);for(var n=t.length-1;n>=0;n--)e.addOffset(t[n]);return e.endVector()},t.startOutputsVector=function(e,t){e.startVector(4,t,4)},t.addAttributes=function(e,t){e.addFieldOffset(10,t,0)},t.createAttributesVector=function(e,t){e.startVector(4,t.length,4);for(var n=t.length-1;n>=0;n--)e.addOffset(t[n]);return e.endVector()},t.startAttributesVector=function(e,t){e.startVector(4,t,4)},t.addInputArgCounts=function(e,t){e.addFieldOffset(11,t,0)},t.createInputArgCountsVector=function(e,t){e.startVector(4,t.length,4);for(var n=t.length-1;n>=0;n--)e.addInt32(t[n]);return e.endVector()},t.startInputArgCountsVector=function(e,t){e.startVector(4,t,4)},t.addImplicitInputs=function(e,t){e.addFieldOffset(12,t,0)},t.createImplicitInputsVector=function(e,t){e.startVector(4,t.length,4);for(var n=t.length-1;n>=0;n--)e.addOffset(t[n]);return e.endVector()},t.startImplicitInputsVector=function(e,t){e.startVector(4,t,4)},t.endNode=function(e){return e.endObject()},t.createNode=function(e,n,r,o,i,a,u,s,c,l,p,f,d,h){return t.startNode(e),t.addName(e,n),t.addDocString(e,r),t.addDomain(e,o),t.addSinceVersion(e,i),t.addIndex(e,a),t.addOpType(e,u),t.addType(e,s),t.addExecutionProviderType(e,c),t.addInputs(e,l),t.addOutputs(e,p),t.addAttributes(e,f),t.addInputArgCounts(e,d),t.addImplicitInputs(e,h),t.endNode(e)},t}();t.Node=n}(t.fbs||(t.fbs={}))}(e.experimental||(e.experimental={}))}(t.onnxruntime||(t.onnxruntime={})),function(e){!function(t){!function(t){var n=function(){function t(){this.bb=null,this.bb_pos=0}return t.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this},t.getRootAsValueInfo=function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.getSizePrefixedRootAsValueInfo=function(e,n){return e.setPosition(e.position()+u.flatbuffers.SIZE_PREFIX_LENGTH),(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.prototype.name=function(e){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null},t.prototype.docString=function(e){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__string(this.bb_pos+t,e):null},t.prototype.type=function(t){var n=this.bb.__offset(this.bb_pos,8);return n?(t||new e.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null},t.startValueInfo=function(e){e.startObject(3)},t.addName=function(e,t){e.addFieldOffset(0,t,0)},t.addDocString=function(e,t){e.addFieldOffset(1,t,0)},t.addType=function(e,t){e.addFieldOffset(2,t,0)},t.endValueInfo=function(e){return e.endObject()},t.createValueInfo=function(e,n,r,o){return t.startValueInfo(e),t.addName(e,n),t.addDocString(e,r),t.addType(e,o),t.endValueInfo(e)},t}();t.ValueInfo=n}(t.fbs||(t.fbs={}))}(e.experimental||(e.experimental={}))}(t.onnxruntime||(t.onnxruntime={})),function(e){!function(t){!function(t){var n=function(){function t(){this.bb=null,this.bb_pos=0}return t.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this},t.getRootAsTypeInfo=function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.getSizePrefixedRootAsTypeInfo=function(e,n){return e.setPosition(e.position()+u.flatbuffers.SIZE_PREFIX_LENGTH),(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.prototype.denotation=function(e){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null},t.prototype.valueType=function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb_pos+t):e.experimental.fbs.TypeInfoValue.NONE},t.prototype.value=function(e){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__union(e,this.bb_pos+t):null},t.startTypeInfo=function(e){e.startObject(3)},t.addDenotation=function(e,t){e.addFieldOffset(0,t,0)},t.addValueType=function(t,n){t.addFieldInt8(1,n,e.experimental.fbs.TypeInfoValue.NONE)},t.addValue=function(e,t){e.addFieldOffset(2,t,0)},t.endTypeInfo=function(e){return e.endObject()},t.createTypeInfo=function(e,n,r,o){return t.startTypeInfo(e),t.addDenotation(e,n),t.addValueType(e,r),t.addValue(e,o),t.endTypeInfo(e)},t}();t.TypeInfo=n}(t.fbs||(t.fbs={}))}(e.experimental||(e.experimental={}))}(t.onnxruntime||(t.onnxruntime={})),function(e){!function(e){!function(e){var t=function(){function e(){this.bb=null,this.bb_pos=0}return e.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this},e.getRootAsOperatorSetId=function(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.getSizePrefixedRootAsOperatorSetId=function(t,n){return t.setPosition(t.position()+u.flatbuffers.SIZE_PREFIX_LENGTH),(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.prototype.domain=function(e){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null},e.prototype.version=function(){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt64(this.bb_pos+e):this.bb.createLong(0,0)},e.startOperatorSetId=function(e){e.startObject(2)},e.addDomain=function(e,t){e.addFieldOffset(0,t,0)},e.addVersion=function(e,t){e.addFieldInt64(1,t,e.createLong(0,0))},e.endOperatorSetId=function(e){return e.endObject()},e.createOperatorSetId=function(t,n,r){return e.startOperatorSetId(t),e.addDomain(t,n),e.addVersion(t,r),e.endOperatorSetId(t)},e}();e.OperatorSetId=t}(e.fbs||(e.fbs={}))}(e.experimental||(e.experimental={}))}(t.onnxruntime||(t.onnxruntime={})),function(e){!function(t){!function(t){var n=function(){function t(){this.bb=null,this.bb_pos=0}return t.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this},t.getRootAsTensor=function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.getSizePrefixedRootAsTensor=function(e,n){return e.setPosition(e.position()+u.flatbuffers.SIZE_PREFIX_LENGTH),(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.prototype.name=function(e){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null},t.prototype.docString=function(e){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__string(this.bb_pos+t,e):null},t.prototype.dims=function(e){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readInt64(this.bb.__vector(this.bb_pos+t)+8*e):this.bb.createLong(0,0)},t.prototype.dimsLength=function(){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0},t.prototype.dataType=function(){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt32(this.bb_pos+t):e.experimental.fbs.TensorDataType.UNDEFINED},t.prototype.rawData=function(e){var t=this.bb.__offset(this.bb_pos,12);return t?this.bb.readUint8(this.bb.__vector(this.bb_pos+t)+e):0},t.prototype.rawDataLength=function(){var e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__vector_len(this.bb_pos+e):0},t.prototype.rawDataArray=function(){var e=this.bb.__offset(this.bb_pos,12);return e?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null},t.prototype.stringData=function(e,t){var n=this.bb.__offset(this.bb_pos,14);return n?this.bb.__string(this.bb.__vector(this.bb_pos+n)+4*e,t):null},t.prototype.stringDataLength=function(){var e=this.bb.__offset(this.bb_pos,14);return e?this.bb.__vector_len(this.bb_pos+e):0},t.startTensor=function(e){e.startObject(6)},t.addName=function(e,t){e.addFieldOffset(0,t,0)},t.addDocString=function(e,t){e.addFieldOffset(1,t,0)},t.addDims=function(e,t){e.addFieldOffset(2,t,0)},t.createDimsVector=function(e,t){e.startVector(8,t.length,8);for(var n=t.length-1;n>=0;n--)e.addInt64(t[n]);return e.endVector()},t.startDimsVector=function(e,t){e.startVector(8,t,8)},t.addDataType=function(t,n){t.addFieldInt32(3,n,e.experimental.fbs.TensorDataType.UNDEFINED)},t.addRawData=function(e,t){e.addFieldOffset(4,t,0)},t.createRawDataVector=function(e,t){e.startVector(1,t.length,1);for(var n=t.length-1;n>=0;n--)e.addInt8(t[n]);return e.endVector()},t.startRawDataVector=function(e,t){e.startVector(1,t,1)},t.addStringData=function(e,t){e.addFieldOffset(5,t,0)},t.createStringDataVector=function(e,t){e.startVector(4,t.length,4);for(var n=t.length-1;n>=0;n--)e.addOffset(t[n]);return e.endVector()},t.startStringDataVector=function(e,t){e.startVector(4,t,4)},t.endTensor=function(e){return e.endObject()},t.createTensor=function(e,n,r,o,i,a,u){return t.startTensor(e),t.addName(e,n),t.addDocString(e,r),t.addDims(e,o),t.addDataType(e,i),t.addRawData(e,a),t.addStringData(e,u),t.endTensor(e)},t}();t.Tensor=n}(t.fbs||(t.fbs={}))}(e.experimental||(e.experimental={}))}(t.onnxruntime||(t.onnxruntime={})),function(e){!function(t){!function(t){var n=function(){function t(){this.bb=null,this.bb_pos=0}return t.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this},t.getRootAsSparseTensor=function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.getSizePrefixedRootAsSparseTensor=function(e,n){return e.setPosition(e.position()+u.flatbuffers.SIZE_PREFIX_LENGTH),(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.prototype.values=function(t){var n=this.bb.__offset(this.bb_pos,4);return n?(t||new e.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null},t.prototype.indices=function(t){var n=this.bb.__offset(this.bb_pos,6);return n?(t||new e.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null},t.prototype.dims=function(e){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readInt64(this.bb.__vector(this.bb_pos+t)+8*e):this.bb.createLong(0,0)},t.prototype.dimsLength=function(){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0},t.startSparseTensor=function(e){e.startObject(3)},t.addValues=function(e,t){e.addFieldOffset(0,t,0)},t.addIndices=function(e,t){e.addFieldOffset(1,t,0)},t.addDims=function(e,t){e.addFieldOffset(2,t,0)},t.createDimsVector=function(e,t){e.startVector(8,t.length,8);for(var n=t.length-1;n>=0;n--)e.addInt64(t[n]);return e.endVector()},t.startDimsVector=function(e,t){e.startVector(8,t,8)},t.endSparseTensor=function(e){return e.endObject()},t.createSparseTensor=function(e,n,r,o){return t.startSparseTensor(e),t.addValues(e,n),t.addIndices(e,r),t.addDims(e,o),t.endSparseTensor(e)},t}();t.SparseTensor=n}(t.fbs||(t.fbs={}))}(e.experimental||(e.experimental={}))}(t.onnxruntime||(t.onnxruntime={})),function(e){!function(t){!function(t){var n=function(){function t(){this.bb=null,this.bb_pos=0}return t.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this},t.getRootAsAttribute=function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.getSizePrefixedRootAsAttribute=function(e,n){return e.setPosition(e.position()+u.flatbuffers.SIZE_PREFIX_LENGTH),(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.prototype.name=function(e){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null},t.prototype.docString=function(e){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__string(this.bb_pos+t,e):null},t.prototype.type=function(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readInt32(this.bb_pos+t):e.experimental.fbs.AttributeType.UNDEFINED},t.prototype.f=function(){var e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readFloat32(this.bb_pos+e):0},t.prototype.i=function(){var e=this.bb.__offset(this.bb_pos,12);return e?this.bb.readInt64(this.bb_pos+e):this.bb.createLong(0,0)},t.prototype.s=function(e){var t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__string(this.bb_pos+t,e):null},t.prototype.t=function(t){var n=this.bb.__offset(this.bb_pos,16);return n?(t||new e.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null},t.prototype.g=function(t){var n=this.bb.__offset(this.bb_pos,18);return n?(t||new e.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null},t.prototype.floats=function(e){var t=this.bb.__offset(this.bb_pos,20);return t?this.bb.readFloat32(this.bb.__vector(this.bb_pos+t)+4*e):0},t.prototype.floatsLength=function(){var e=this.bb.__offset(this.bb_pos,20);return e?this.bb.__vector_len(this.bb_pos+e):0},t.prototype.floatsArray=function(){var e=this.bb.__offset(this.bb_pos,20);return e?new Float32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null},t.prototype.ints=function(e){var t=this.bb.__offset(this.bb_pos,22);return t?this.bb.readInt64(this.bb.__vector(this.bb_pos+t)+8*e):this.bb.createLong(0,0)},t.prototype.intsLength=function(){var e=this.bb.__offset(this.bb_pos,22);return e?this.bb.__vector_len(this.bb_pos+e):0},t.prototype.strings=function(e,t){var n=this.bb.__offset(this.bb_pos,24);return n?this.bb.__string(this.bb.__vector(this.bb_pos+n)+4*e,t):null},t.prototype.stringsLength=function(){var e=this.bb.__offset(this.bb_pos,24);return e?this.bb.__vector_len(this.bb_pos+e):0},t.prototype.tensors=function(t,n){var r=this.bb.__offset(this.bb_pos,26);return r?(n||new e.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*t),this.bb):null},t.prototype.tensorsLength=function(){var e=this.bb.__offset(this.bb_pos,26);return e?this.bb.__vector_len(this.bb_pos+e):0},t.prototype.graphs=function(t,n){var r=this.bb.__offset(this.bb_pos,28);return r?(n||new e.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*t),this.bb):null},t.prototype.graphsLength=function(){var e=this.bb.__offset(this.bb_pos,28);return e?this.bb.__vector_len(this.bb_pos+e):0},t.startAttribute=function(e){e.startObject(13)},t.addName=function(e,t){e.addFieldOffset(0,t,0)},t.addDocString=function(e,t){e.addFieldOffset(1,t,0)},t.addType=function(t,n){t.addFieldInt32(2,n,e.experimental.fbs.AttributeType.UNDEFINED)},t.addF=function(e,t){e.addFieldFloat32(3,t,0)},t.addI=function(e,t){e.addFieldInt64(4,t,e.createLong(0,0))},t.addS=function(e,t){e.addFieldOffset(5,t,0)},t.addT=function(e,t){e.addFieldOffset(6,t,0)},t.addG=function(e,t){e.addFieldOffset(7,t,0)},t.addFloats=function(e,t){e.addFieldOffset(8,t,0)},t.createFloatsVector=function(e,t){e.startVector(4,t.length,4);for(var n=t.length-1;n>=0;n--)e.addFloat32(t[n]);return e.endVector()},t.startFloatsVector=function(e,t){e.startVector(4,t,4)},t.addInts=function(e,t){e.addFieldOffset(9,t,0)},t.createIntsVector=function(e,t){e.startVector(8,t.length,8);for(var n=t.length-1;n>=0;n--)e.addInt64(t[n]);return e.endVector()},t.startIntsVector=function(e,t){e.startVector(8,t,8)},t.addStrings=function(e,t){e.addFieldOffset(10,t,0)},t.createStringsVector=function(e,t){e.startVector(4,t.length,4);for(var n=t.length-1;n>=0;n--)e.addOffset(t[n]);return e.endVector()},t.startStringsVector=function(e,t){e.startVector(4,t,4)},t.addTensors=function(e,t){e.addFieldOffset(11,t,0)},t.createTensorsVector=function(e,t){e.startVector(4,t.length,4);for(var n=t.length-1;n>=0;n--)e.addOffset(t[n]);return e.endVector()},t.startTensorsVector=function(e,t){e.startVector(4,t,4)},t.addGraphs=function(e,t){e.addFieldOffset(12,t,0)},t.createGraphsVector=function(e,t){e.startVector(4,t.length,4);for(var n=t.length-1;n>=0;n--)e.addOffset(t[n]);return e.endVector()},t.startGraphsVector=function(e,t){e.startVector(4,t,4)},t.endAttribute=function(e){return e.endObject()},t.createAttribute=function(e,n,r,o,i,a,u,s,c,l,p,f,d,h){return t.startAttribute(e),t.addName(e,n),t.addDocString(e,r),t.addType(e,o),t.addF(e,i),t.addI(e,a),t.addS(e,u),t.addT(e,s),t.addG(e,c),t.addFloats(e,l),t.addInts(e,p),t.addStrings(e,f),t.addTensors(e,d),t.addGraphs(e,h),t.endAttribute(e)},t}();t.Attribute=n}(t.fbs||(t.fbs={}))}(e.experimental||(e.experimental={}))}(t.onnxruntime||(t.onnxruntime={})),function(e){!function(t){!function(t){var n=function(){function t(){this.bb=null,this.bb_pos=0}return t.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this},t.getRootAsGraph=function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.getSizePrefixedRootAsGraph=function(e,n){return e.setPosition(e.position()+u.flatbuffers.SIZE_PREFIX_LENGTH),(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.prototype.initializers=function(t,n){var r=this.bb.__offset(this.bb_pos,4);return r?(n||new e.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*t),this.bb):null},t.prototype.initializersLength=function(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__vector_len(this.bb_pos+e):0},t.prototype.nodeArgs=function(t,n){var r=this.bb.__offset(this.bb_pos,6);return r?(n||new e.experimental.fbs.ValueInfo).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*t),this.bb):null},t.prototype.nodeArgsLength=function(){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0},t.prototype.nodes=function(t,n){var r=this.bb.__offset(this.bb_pos,8);return r?(n||new e.experimental.fbs.Node).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*t),this.bb):null},t.prototype.nodesLength=function(){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0},t.prototype.maxNodeIndex=function(){var e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readUint32(this.bb_pos+e):0},t.prototype.nodeEdges=function(t,n){var r=this.bb.__offset(this.bb_pos,12);return r?(n||new e.experimental.fbs.NodeEdge).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*t),this.bb):null},t.prototype.nodeEdgesLength=function(){var e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__vector_len(this.bb_pos+e):0},t.prototype.inputs=function(e,t){var n=this.bb.__offset(this.bb_pos,14);return n?this.bb.__string(this.bb.__vector(this.bb_pos+n)+4*e,t):null},t.prototype.inputsLength=function(){var e=this.bb.__offset(this.bb_pos,14);return e?this.bb.__vector_len(this.bb_pos+e):0},t.prototype.outputs=function(e,t){var n=this.bb.__offset(this.bb_pos,16);return n?this.bb.__string(this.bb.__vector(this.bb_pos+n)+4*e,t):null},t.prototype.outputsLength=function(){var e=this.bb.__offset(this.bb_pos,16);return e?this.bb.__vector_len(this.bb_pos+e):0},t.prototype.sparseInitializers=function(t,n){var r=this.bb.__offset(this.bb_pos,18);return r?(n||new e.experimental.fbs.SparseTensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*t),this.bb):null},t.prototype.sparseInitializersLength=function(){var e=this.bb.__offset(this.bb_pos,18);return e?this.bb.__vector_len(this.bb_pos+e):0},t.startGraph=function(e){e.startObject(8)},t.addInitializers=function(e,t){e.addFieldOffset(0,t,0)},t.createInitializersVector=function(e,t){e.startVector(4,t.length,4);for(var n=t.length-1;n>=0;n--)e.addOffset(t[n]);return e.endVector()},t.startInitializersVector=function(e,t){e.startVector(4,t,4)},t.addNodeArgs=function(e,t){e.addFieldOffset(1,t,0)},t.createNodeArgsVector=function(e,t){e.startVector(4,t.length,4);for(var n=t.length-1;n>=0;n--)e.addOffset(t[n]);return e.endVector()},t.startNodeArgsVector=function(e,t){e.startVector(4,t,4)},t.addNodes=function(e,t){e.addFieldOffset(2,t,0)},t.createNodesVector=function(e,t){e.startVector(4,t.length,4);for(var n=t.length-1;n>=0;n--)e.addOffset(t[n]);return e.endVector()},t.startNodesVector=function(e,t){e.startVector(4,t,4)},t.addMaxNodeIndex=function(e,t){e.addFieldInt32(3,t,0)},t.addNodeEdges=function(e,t){e.addFieldOffset(4,t,0)},t.createNodeEdgesVector=function(e,t){e.startVector(4,t.length,4);for(var n=t.length-1;n>=0;n--)e.addOffset(t[n]);return e.endVector()},t.startNodeEdgesVector=function(e,t){e.startVector(4,t,4)},t.addInputs=function(e,t){e.addFieldOffset(5,t,0)},t.createInputsVector=function(e,t){e.startVector(4,t.length,4);for(var n=t.length-1;n>=0;n--)e.addOffset(t[n]);return e.endVector()},t.startInputsVector=function(e,t){e.startVector(4,t,4)},t.addOutputs=function(e,t){e.addFieldOffset(6,t,0)},t.createOutputsVector=function(e,t){e.startVector(4,t.length,4);for(var n=t.length-1;n>=0;n--)e.addOffset(t[n]);return e.endVector()},t.startOutputsVector=function(e,t){e.startVector(4,t,4)},t.addSparseInitializers=function(e,t){e.addFieldOffset(7,t,0)},t.createSparseInitializersVector=function(e,t){e.startVector(4,t.length,4);for(var n=t.length-1;n>=0;n--)e.addOffset(t[n]);return e.endVector()},t.startSparseInitializersVector=function(e,t){e.startVector(4,t,4)},t.endGraph=function(e){return e.endObject()},t.createGraph=function(e,n,r,o,i,a,u,s,c){return t.startGraph(e),t.addInitializers(e,n),t.addNodeArgs(e,r),t.addNodes(e,o),t.addMaxNodeIndex(e,i),t.addNodeEdges(e,a),t.addInputs(e,u),t.addOutputs(e,s),t.addSparseInitializers(e,c),t.endGraph(e)},t}();t.Graph=n}(t.fbs||(t.fbs={}))}(e.experimental||(e.experimental={}))}(t.onnxruntime||(t.onnxruntime={})),function(e){!function(t){!function(t){var n=function(){function t(){this.bb=null,this.bb_pos=0}return t.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this},t.getRootAsModel=function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.getSizePrefixedRootAsModel=function(e,n){return e.setPosition(e.position()+u.flatbuffers.SIZE_PREFIX_LENGTH),(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.prototype.irVersion=function(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt64(this.bb_pos+e):this.bb.createLong(0,0)},t.prototype.opsetImport=function(t,n){var r=this.bb.__offset(this.bb_pos,6);return r?(n||new e.experimental.fbs.OperatorSetId).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*t),this.bb):null},t.prototype.opsetImportLength=function(){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0},t.prototype.producerName=function(e){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__string(this.bb_pos+t,e):null},t.prototype.producerVersion=function(e){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__string(this.bb_pos+t,e):null},t.prototype.domain=function(e){var t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__string(this.bb_pos+t,e):null},t.prototype.modelVersion=function(){var e=this.bb.__offset(this.bb_pos,14);return e?this.bb.readInt64(this.bb_pos+e):this.bb.createLong(0,0)},t.prototype.docString=function(e){var t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__string(this.bb_pos+t,e):null},t.prototype.graph=function(t){var n=this.bb.__offset(this.bb_pos,18);return n?(t||new e.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null},t.prototype.graphDocString=function(e){var t=this.bb.__offset(this.bb_pos,20);return t?this.bb.__string(this.bb_pos+t,e):null},t.startModel=function(e){e.startObject(9)},t.addIrVersion=function(e,t){e.addFieldInt64(0,t,e.createLong(0,0))},t.addOpsetImport=function(e,t){e.addFieldOffset(1,t,0)},t.createOpsetImportVector=function(e,t){e.startVector(4,t.length,4);for(var n=t.length-1;n>=0;n--)e.addOffset(t[n]);return e.endVector()},t.startOpsetImportVector=function(e,t){e.startVector(4,t,4)},t.addProducerName=function(e,t){e.addFieldOffset(2,t,0)},t.addProducerVersion=function(e,t){e.addFieldOffset(3,t,0)},t.addDomain=function(e,t){e.addFieldOffset(4,t,0)},t.addModelVersion=function(e,t){e.addFieldInt64(5,t,e.createLong(0,0))},t.addDocString=function(e,t){e.addFieldOffset(6,t,0)},t.addGraph=function(e,t){e.addFieldOffset(7,t,0)},t.addGraphDocString=function(e,t){e.addFieldOffset(8,t,0)},t.endModel=function(e){return e.endObject()},t.createModel=function(e,n,r,o,i,a,u,s,c,l){return t.startModel(e),t.addIrVersion(e,n),t.addOpsetImport(e,r),t.addProducerName(e,o),t.addProducerVersion(e,i),t.addDomain(e,a),t.addModelVersion(e,u),t.addDocString(e,s),t.addGraph(e,c),t.addGraphDocString(e,l),t.endModel(e)},t}();t.Model=n}(t.fbs||(t.fbs={}))}(e.experimental||(e.experimental={}))}(t.onnxruntime||(t.onnxruntime={})),function(e){!function(e){!function(e){var t=function(){function e(){this.bb=null,this.bb_pos=0}return e.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this},e.getRootAsKernelCreateInfos=function(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.getSizePrefixedRootAsKernelCreateInfos=function(t,n){return t.setPosition(t.position()+u.flatbuffers.SIZE_PREFIX_LENGTH),(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.prototype.nodeIndices=function(e){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readUint32(this.bb.__vector(this.bb_pos+t)+4*e):0},e.prototype.nodeIndicesLength=function(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__vector_len(this.bb_pos+e):0},e.prototype.nodeIndicesArray=function(){var e=this.bb.__offset(this.bb_pos,4);return e?new Uint32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null},e.prototype.kernelDefHashes=function(e){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint64(this.bb.__vector(this.bb_pos+t)+8*e):this.bb.createLong(0,0)},e.prototype.kernelDefHashesLength=function(){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0},e.startKernelCreateInfos=function(e){e.startObject(2)},e.addNodeIndices=function(e,t){e.addFieldOffset(0,t,0)},e.createNodeIndicesVector=function(e,t){e.startVector(4,t.length,4);for(var n=t.length-1;n>=0;n--)e.addInt32(t[n]);return e.endVector()},e.startNodeIndicesVector=function(e,t){e.startVector(4,t,4)},e.addKernelDefHashes=function(e,t){e.addFieldOffset(1,t,0)},e.createKernelDefHashesVector=function(e,t){e.startVector(8,t.length,8);for(var n=t.length-1;n>=0;n--)e.addInt64(t[n]);return e.endVector()},e.startKernelDefHashesVector=function(e,t){e.startVector(8,t,8)},e.endKernelCreateInfos=function(e){return e.endObject()},e.createKernelCreateInfos=function(t,n,r){return e.startKernelCreateInfos(t),e.addNodeIndices(t,n),e.addKernelDefHashes(t,r),e.endKernelCreateInfos(t)},e}();e.KernelCreateInfos=t}(e.fbs||(e.fbs={}))}(e.experimental||(e.experimental={}))}(t.onnxruntime||(t.onnxruntime={})),function(e){!function(t){!function(t){var n=function(){function t(){this.bb=null,this.bb_pos=0}return t.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this},t.getRootAsSubGraphSessionState=function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.getSizePrefixedRootAsSubGraphSessionState=function(e,n){return e.setPosition(e.position()+u.flatbuffers.SIZE_PREFIX_LENGTH),(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.prototype.graphId=function(e){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null},t.prototype.sessionState=function(t){var n=this.bb.__offset(this.bb_pos,6);return n?(t||new e.experimental.fbs.SessionState).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null},t.startSubGraphSessionState=function(e){e.startObject(2)},t.addGraphId=function(e,t){e.addFieldOffset(0,t,0)},t.addSessionState=function(e,t){e.addFieldOffset(1,t,0)},t.endSubGraphSessionState=function(e){var t=e.endObject();return e.requiredField(t,4),t},t.createSubGraphSessionState=function(e,n,r){return t.startSubGraphSessionState(e),t.addGraphId(e,n),t.addSessionState(e,r),t.endSubGraphSessionState(e)},t}();t.SubGraphSessionState=n}(t.fbs||(t.fbs={}))}(e.experimental||(e.experimental={}))}(t.onnxruntime||(t.onnxruntime={})),function(e){!function(t){!function(t){var n=function(){function t(){this.bb=null,this.bb_pos=0}return t.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this},t.getRootAsSessionState=function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.getSizePrefixedRootAsSessionState=function(e,n){return e.setPosition(e.position()+u.flatbuffers.SIZE_PREFIX_LENGTH),(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.prototype.kernels=function(t){var n=this.bb.__offset(this.bb_pos,4);return n?(t||new e.experimental.fbs.KernelCreateInfos).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null},t.prototype.subGraphSessionStates=function(t,n){var r=this.bb.__offset(this.bb_pos,6);return r?(n||new e.experimental.fbs.SubGraphSessionState).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*t),this.bb):null},t.prototype.subGraphSessionStatesLength=function(){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0},t.startSessionState=function(e){e.startObject(2)},t.addKernels=function(e,t){e.addFieldOffset(0,t,0)},t.addSubGraphSessionStates=function(e,t){e.addFieldOffset(1,t,0)},t.createSubGraphSessionStatesVector=function(e,t){e.startVector(4,t.length,4);for(var n=t.length-1;n>=0;n--)e.addOffset(t[n]);return e.endVector()},t.startSubGraphSessionStatesVector=function(e,t){e.startVector(4,t,4)},t.endSessionState=function(e){return e.endObject()},t.createSessionState=function(e,n,r){return t.startSessionState(e),t.addKernels(e,n),t.addSubGraphSessionStates(e,r),t.endSessionState(e)},t}();t.SessionState=n}(t.fbs||(t.fbs={}))}(e.experimental||(e.experimental={}))}(t.onnxruntime||(t.onnxruntime={})),function(e){!function(t){!function(t){var n=function(){function t(){this.bb=null,this.bb_pos=0}return t.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this},t.getRootAsInferenceSession=function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.getSizePrefixedRootAsInferenceSession=function(e,n){return e.setPosition(e.position()+u.flatbuffers.SIZE_PREFIX_LENGTH),(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.bufferHasIdentifier=function(e){return e.__has_identifier("ORTM")},t.prototype.ortVersion=function(e){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null},t.prototype.model=function(t){var n=this.bb.__offset(this.bb_pos,6);return n?(t||new e.experimental.fbs.Model).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null},t.prototype.sessionState=function(t){var n=this.bb.__offset(this.bb_pos,8);return n?(t||new e.experimental.fbs.SessionState).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null},t.startInferenceSession=function(e){e.startObject(3)},t.addOrtVersion=function(e,t){e.addFieldOffset(0,t,0)},t.addModel=function(e,t){e.addFieldOffset(1,t,0)},t.addSessionState=function(e,t){e.addFieldOffset(2,t,0)},t.endInferenceSession=function(e){return e.endObject()},t.finishInferenceSessionBuffer=function(e,t){e.finish(t,"ORTM")},t.finishSizePrefixedInferenceSessionBuffer=function(e,t){e.finish(t,"ORTM",!0)},t.createInferenceSession=function(e,n,r,o){return t.startInferenceSession(e),t.addOrtVersion(e,n),t.addModel(e,r),t.addSessionState(e,o),t.endInferenceSession(e)},t}();t.InferenceSession=n}(t.fbs||(t.fbs={}))}(e.experimental||(e.experimental={}))}(t.onnxruntime||(t.onnxruntime={}))},1723:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function u(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,u)}s((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(s){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,r=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){a=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){a.label=u[1];break}if(6===u[0]&&a.label<o[1]){a.label=o[1],o=u;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(u);break}o[2]&&a.ops.pop(),a.trys.pop();continue}u=t.call(e,a)}catch(e){u=[6,e],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.OnnxjsSessionHandler=void 0;var i=n(2235),a=n(9240),u=function(){function e(e){this.session=e,this.inputNames=this.session.inputNames,this.outputNames=this.session.outputNames}return e.prototype.dispose=function(){return r(this,void 0,void 0,(function(){return o(this,(function(e){return[2]}))}))},e.prototype.run=function(e,t,n){return r(this,void 0,void 0,(function(){var t,n,r,u,s;return o(this,(function(o){switch(o.label){case 0:for(n in t=new Map,e)Object.hasOwnProperty.call(e,n)&&(r=e[n],t.set(n,new a.Tensor(r.dims,r.type,void 0,void 0,r.data)));return[4,this.session.run(t)];case 1:return u=o.sent(),s={},u.forEach((function(e,t){s[t]=new i.Tensor(e.type,e.data,e.dims)})),[2,s]}}))}))},e.prototype.startProfiling=function(){this.session.startProfiling()},e.prototype.endProfiling=function(){this.session.endProfiling()},e}();t.OnnxjsSessionHandler=u},6027:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function u(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,u)}s((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(s){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,r=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){a=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){a.label=u[1];break}if(6===u[0]&&a.label<o[1]){a.label=o[1],o=u;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(u);break}o[2]&&a.ops.pop(),a.trys.pop();continue}u=t.call(e,a)}catch(e){u=[6,e],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.Session=void 0;var i=n(7067),a=n(1296),u=n(1975),s=n(6496),c=n(1315),l=n(1745),p=function(){function e(e){void 0===e&&(e={}),this._initialized=!1,this.backendHint=e.backendHint,this.profiler=c.Profiler.create(e.profiler),this.context={profiler:this.profiler,graphInputTypes:[],graphInputDims:[]}}return Object.defineProperty(e.prototype,"inputNames",{get:function(){return this._model.graph.getInputNames()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"outputNames",{get:function(){return this._model.graph.getOutputNames()},enumerable:!1,configurable:!0}),e.prototype.startProfiling=function(){this.profiler.start()},e.prototype.endProfiling=function(){this.profiler.stop()},e.prototype.loadModel=function(e,t,n){return r(this,void 0,void 0,(function(){var s=this;return o(this,(function(c){switch(c.label){case 0:return[4,this.profiler.event("session","Session.loadModel",(function(){return r(s,void 0,void 0,(function(){var r,s,c,p;return o(this,(function(o){switch(o.label){case 0:return[4,(0,u.resolveBackend)(this.backendHint)];case 1:return r=o.sent(),this.sessionHandler=r.createSessionHandler(this.context),this._model=new l.Model,"string"!=typeof e?[3,7]:(s=e.endsWith(".ort"),"undefined"!=typeof process&&process.versions&&process.versions.node?[4,(0,a.promisify)(i.readFile)(e)]:[3,3]);case 2:return c=o.sent(),this.initialize(c,s),[3,6];case 3:return[4,fetch(e)];case 4:return[4,o.sent().arrayBuffer()];case 5:c=o.sent(),this.initialize(new Uint8Array(c),s),o.label=6;case 6:return[3,8];case 7:ArrayBuffer.isView(e)?this.initialize(e):(p=new Uint8Array(e,t||0,n||e.byteLength),this.initialize(p)),o.label=8;case 8:return[2]}}))}))}))];case 1:return c.sent(),[2]}}))}))},e.prototype.initialize=function(e,t){var n=this;if(this._initialized)throw new Error("already initialized");this.profiler.event("session","Session.initialize",(function(){var r=n.sessionHandler.transformGraph?n.sessionHandler:void 0;n._model.load(e,r,t),n.sessionHandler.onGraphInitialized&&n.sessionHandler.onGraphInitialized(n._model.graph),n.initializeOps(n._model.graph),n._executionPlan=new s.ExecutionPlan(n._model.graph,n._ops,n.profiler)})),this._initialized=!0},e.prototype.run=function(e){return r(this,void 0,void 0,(function(){var t=this;return o(this,(function(n){if(!this._initialized)throw new Error("session not initialized yet");return[2,this.profiler.event("session","Session.run",(function(){return r(t,void 0,void 0,(function(){var t,n;return o(this,(function(r){switch(r.label){case 0:return t=this.normalizeAndValidateInputs(e),[4,this._executionPlan.execute(this.sessionHandler,t)];case 1:return n=r.sent(),[2,this.createOutput(n)]}}))}))}))]}))}))},e.prototype.normalizeAndValidateInputs=function(e){var t=this._model.graph.getInputNames();if(Array.isArray(e)){if(e.length!==t.length)throw new Error("incorrect input array length: expected ".concat(t.length," but got ").concat(e.length))}else{if(e.size!==t.length)throw new Error("incorrect input map size: expected ".concat(t.length," but got ").concat(e.size));for(var n=new Array(e.size),r=0,o=0;o<t.length;++o){var i=e.get(t[o]);if(!i)throw new Error("missing input tensor for: '".concat(name,"'"));n[r++]=i}e=n}if(this.context.graphInputTypes&&0!==this.context.graphInputTypes.length&&this.context.graphInputDims&&0!==this.context.graphInputDims.length)this.validateInputTensorDims(this.context.graphInputDims,e,!1);else{var a=this._model.graph.getInputIndices(),u=this._model.graph.getValues(),s=new Array(a.length);for(o=0;o<a.length;++o){var c=u[a[o]];s[o]=c.type.shape.dims,this.context.graphInputTypes.push(c.type.tensorType),this.context.graphInputDims.push(e[o].dims)}this.validateInputTensorDims(s,e,!0)}return this.validateInputTensorTypes(this.context.graphInputTypes,e),e},e.prototype.validateInputTensorTypes=function(e,t){for(var n=0;n<t.length;n++){var r=e[n],o=t[n].type;if(r!==o)throw new Error("input tensor[".concat(n,"] check failed: expected type '").concat(r,"' but got ").concat(o))}},e.prototype.validateInputTensorDims=function(e,t,n){for(var r=0;r<t.length;r++){var o=e[r],i=t[r].dims;if(!this.compareTensorDims(o,i,n))throw new Error("input tensor[".concat(r,"] check failed: expected shape '[").concat(o.join(","),"]' but got [").concat(i.join(","),"]"))}},e.prototype.compareTensorDims=function(e,t,n){if(e.length!==t.length)return!1;for(var r=0;r<e.length;++r)if(e[r]!==t[r]&&(!n||0!==e[r])&&null!==e[r])return!1;return!0},e.prototype.createOutput=function(e){var t=this._model.graph.getOutputNames();if(e.length!==t.length)throw new Error("expected number of outputs do not match number of generated outputs");for(var n=new Map,r=0;r<t.length;++r)n.set(t[r],e[r]);return n},e.prototype.initializeOps=function(e){var t=e.getNodes();this._ops=new Array(t.length);for(var n=0;n<t.length;n++)this._ops[n]=this.sessionHandler.resolve(t[n],this._model.opsets,e)},e}();t.Session=p},9240:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function u(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,u)}s((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(s){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,r=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){a=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){a.label=u[1];break}if(6===u[0]&&a.label<o[1]){a.label=o[1],o=u;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(u);break}o[2]&&a.ops.pop(),a.trys.pop();continue}u=t.call(e,a)}catch(e){u=[6,e],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,s])}}},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Tensor=void 0;var a=n(3442),u=i(n(1583)),s=n(5127),c=n(2446),l=n(7273),p=s.onnxruntime.experimental.fbs,f=function(){function e(e,t,n,r,o,i){void 0===i&&(i=a.Guid.create()),this.dims=e,this.type=t,this.dataProvider=n,this.asyncDataProvider=r,this.cache=o,this.dataId=i,this.size=l.ShapeUtil.validateDimsAndCalcSize(e);var u=this.size,s=void 0===n&&void 0===r&&void 0===o;if(void 0!==o&&o.length!==u)throw new RangeError("Input dims doesn't match data length.");if("string"===t){if(!(void 0===o||Array.isArray(o)&&o.every((function(e){return"string"==typeof e}))))throw new TypeError("cache should be a string array");s&&(this.cache=new Array(u))}else{if(void 0!==o){var c=h(t);if(!(o instanceof c))throw new TypeError("cache should be type ".concat(c.name))}if(s){var p=new ArrayBuffer(u*function(e){switch(e){case"bool":case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;case"float64":return 8;default:throw new Error("cannot calculate sizeof() on type ".concat(e))}}(t));this.cache=function(e,t){return new(h(t))(e)}(p,t)}}}return Object.defineProperty(e.prototype,"data",{get:function(){if(void 0===this.cache){var e=this.dataProvider(this.dataId);if(e.length!==this.size)throw new Error("Length of data provided by the Data Provider is inconsistent with the dims of this Tensor.");this.cache=e}return this.cache},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"stringData",{get:function(){if("string"!==this.type)throw new TypeError("data type is not string");return this.data},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"integerData",{get:function(){switch(this.type){case"uint8":case"int8":case"uint16":case"int16":case"int32":case"uint32":case"bool":return this.data;default:throw new TypeError("data type is not integer (uint8, int8, uint16, int16, int32, uint32, bool)")}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"floatData",{get:function(){switch(this.type){case"float32":case"float64":return this.data;default:throw new TypeError("data type is not float (float32, float64)")}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"numberData",{get:function(){if("string"!==this.type)return this.data;throw new TypeError("type cannot be non-number (string)")},enumerable:!1,configurable:!0}),e.prototype.get=function(e){return this.data[l.ShapeUtil.indicesToOffset(e,this.strides)]},e.prototype.set=function(e,t){this.data[l.ShapeUtil.indicesToOffset(e,this.strides)]=t},e.prototype.getData=function(){return r(this,void 0,void 0,(function(){var e;return o(this,(function(t){switch(t.label){case 0:return void 0!==this.cache?[3,2]:(e=this,[4,this.asyncDataProvider(this.dataId)]);case 1:e.cache=t.sent(),t.label=2;case 2:return[2,this.cache]}}))}))},Object.defineProperty(e.prototype,"strides",{get:function(){return this._strides||(this._strides=l.ShapeUtil.computeStrides(this.dims)),this._strides},enumerable:!1,configurable:!0}),e.fromProto=function(t){if(!t)throw new Error("cannot construct Value from an empty tensor");var n=l.ProtoUtil.tensorDataTypeFromProto(t.dataType),r=new e(l.ProtoUtil.tensorDimsFromProto(t.dims),n);if("string"===n)t.stringData.forEach((function(e,t){r.data[t]=(0,l.decodeUtf8String)(e)}));else if(t.rawData&&"number"==typeof t.rawData.byteLength&&t.rawData.byteLength>0){var o=r.data,i=new DataView(t.rawData.buffer,t.rawData.byteOffset,t.rawData.byteLength),a=d(t.dataType),s=t.rawData.byteLength/a;if(t.rawData.byteLength%a!=0)throw new Error("invalid buffer length");if(o.length!==s)throw new Error("buffer length mismatch");for(var p=0;p<s;p++){var f=y(i,t.dataType,p*a);o[p]=f}}else{var h=void 0;switch(t.dataType){case c.onnx.TensorProto.DataType.FLOAT:h=t.floatData;break;case c.onnx.TensorProto.DataType.INT32:case c.onnx.TensorProto.DataType.INT16:case c.onnx.TensorProto.DataType.UINT16:case c.onnx.TensorProto.DataType.INT8:case c.onnx.TensorProto.DataType.UINT8:case c.onnx.TensorProto.DataType.BOOL:h=t.int32Data;break;case c.onnx.TensorProto.DataType.INT64:h=t.int64Data;break;case c.onnx.TensorProto.DataType.DOUBLE:h=t.doubleData;break;case c.onnx.TensorProto.DataType.UINT32:case c.onnx.TensorProto.DataType.UINT64:h=t.uint64Data;break;default:throw new Error("unspecific error")}if(null==h)throw new Error("failed to populate data from a tensorproto value");var m=r.data;if(m.length!==h.length)throw new Error("array length mismatch");for(p=0;p<h.length;p++){var v=h[p];u.default.isLong(v)?m[p]=g(v,t.dataType):m[p]=v}}return r},e.fromData=function(t,n,r){return new e(n,r,void 0,void 0,t)},e.fromOrtTensor=function(t){if(!t)throw new Error("cannot construct Value from an empty tensor");var n=l.ProtoUtil.tensorDimsFromORTFormat(t),r=l.ProtoUtil.tensorDataTypeFromProto(t.dataType()),o=new e(n,r);if("string"===r)for(var i=0;i<t.stringDataLength();i++)o.data[i]=t.stringData(i);else if(t.rawDataArray()&&"number"==typeof t.rawDataLength()&&t.rawDataLength()>0){var a=o.data,u=new DataView(t.rawDataArray().buffer,t.rawDataArray().byteOffset,t.rawDataLength()),s=d(t.dataType()),c=t.rawDataLength()/s;if(t.rawDataLength()%s!=0)throw new Error("invalid buffer length");if(a.length!==c)throw new Error("buffer length mismatch");for(i=0;i<c;i++){var p=y(u,t.dataType(),i*s);a[i]=p}}return o},e}();function d(e){switch(e){case c.onnx.TensorProto.DataType.UINT8:case c.onnx.TensorProto.DataType.INT8:case c.onnx.TensorProto.DataType.BOOL:return 1;case c.onnx.TensorProto.DataType.UINT16:case c.onnx.TensorProto.DataType.INT16:return 2;case c.onnx.TensorProto.DataType.FLOAT:case c.onnx.TensorProto.DataType.INT32:case c.onnx.TensorProto.DataType.UINT32:return 4;case c.onnx.TensorProto.DataType.INT64:case c.onnx.TensorProto.DataType.DOUBLE:case c.onnx.TensorProto.DataType.UINT64:return 8;default:throw new Error("cannot calculate sizeof() on type ".concat(c.onnx.TensorProto.DataType[e]))}}function h(e){switch(e){case"bool":case"uint8":return Uint8Array;case"int8":return Int8Array;case"int16":return Int16Array;case"uint16":return Uint16Array;case"int32":return Int32Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;default:throw new Error("unspecified error")}}function g(e,t){if(t===c.onnx.TensorProto.DataType.INT64||t===p.TensorDataType.INT64){if(e.greaterThanOrEqual(2147483648)||e.lessThan(-2147483648))throw new TypeError("int64 is not supported")}else{if(t!==c.onnx.TensorProto.DataType.UINT32&&t!==p.TensorDataType.UINT32&&t!==c.onnx.TensorProto.DataType.UINT64&&t!==p.TensorDataType.UINT64)throw new TypeError("not a LONG type: ".concat(c.onnx.TensorProto.DataType[t]));if(e.greaterThanOrEqual(4294967296)||e.lessThan(0))throw new TypeError("uint64 is not supported")}return e.toNumber()}function y(e,t,n){switch(t){case c.onnx.TensorProto.DataType.BOOL:case c.onnx.TensorProto.DataType.UINT8:return e.getUint8(n);case c.onnx.TensorProto.DataType.INT8:return e.getInt8(n);case c.onnx.TensorProto.DataType.UINT16:return e.getUint16(n,!0);case c.onnx.TensorProto.DataType.INT16:return e.getInt16(n,!0);case c.onnx.TensorProto.DataType.FLOAT:return e.getFloat32(n,!0);case c.onnx.TensorProto.DataType.INT32:return e.getInt32(n,!0);case c.onnx.TensorProto.DataType.UINT32:return e.getUint32(n,!0);case c.onnx.TensorProto.DataType.INT64:return g(u.default.fromBits(e.getUint32(n,!0),e.getUint32(n+4,!0),!1),t);case c.onnx.TensorProto.DataType.DOUBLE:return e.getFloat64(n,!0);case c.onnx.TensorProto.DataType.UINT64:return g(u.default.fromBits(e.getUint32(n,!0),e.getUint32(n+4,!0),!0),t);default:throw new Error("cannot read from DataView for type ".concat(c.onnx.TensorProto.DataType[t]))}}t.Tensor=f},7273:function(e,t,n){"use strict";var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},o=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.decodeUtf8String=t.MAX_CLIP=t.MIN_CLIP=t.PoolConvUtil=t.ReduceUtil=t.SplitUtil=t.MathUtil=t.ShapeUtil=t.LongUtil=t.ProtoUtil=t.GemmUtil=t.arrayCopyHelper=t.BroadcastUtil=t.MatMulUtil=t.ArrayUtil=t.assert=t.checkInputsShape=void 0;var a=n(5686),u=i(n(1583)),s=n(2446),c=n(9240);t.checkInputsShape=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(!e||e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!e[r].dims||e[r].dims.length!==t[r])return!1;return!0},t.assert=function(e,t){if(!e)throw new Error("string"==typeof t?t:t())};var l=function(){function e(){}return e.arraysEqual=function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0},e}();t.ArrayUtil=l;var p=function(){function e(){}return e.preprocessInputShapes=function(e,t){return[1===e.length?[1,e[0]]:e,1===t.length?[t[0],1]:t]},e.postprocessOutputShape=function(e,t,n){1===t&&e.splice(e.length-2,1),1===n&&e.pop()},e.calcMatMulShape=function(e,t){return e[1]!==t[0]?void 0:[e[0],t[1]]},e}();t.MatMulUtil=p;var f=function(){function e(){}return e.calcShape=function(e,t,n){var o;void 0===n&&(n=!1);var i=e.length,a=t.length;if(0===i)return t;if(0===a)return e;var u=Math.max(e.length,t.length),s=new Array(u);if(n){if(i<2||a<2)return;var c=p.calcMatMulShape([e[i-2],e[i-1]],[t[a-2],t[a-1]]);if(void 0===c)return;o=r(c,2),s[u-2]=o[0],s[u-1]=o[1]}for(var l=n?3:1;l<=u;l++){var f=i-l<0?1:e[i-l],d=a-l<0?1:t[a-l];if(f!==d&&f>1&&d>1)return;s[u-l]=Math.max(f,d)}return s},e.index=function(t,n){var r=new Array(n.length);return e.fillIndex(t,n,r),r},e.fillIndex=function(e,t,n){for(var r=e.length-t.length,o=0;o<t.length;o++)n[o]=e[r+o]%t[o]},e.calc=function(t,n,r,o,i){var a=e.calcShape(t.dims,n.dims);if(a){if(o&&!y.areEqual(a,t.dims))return;var u=y.size(a),s=o?t:new c.Tensor(a,i||t.type);if(0===a.length)s.set([],r(t.get([]),n.get([])));else{var l=new Array(a.length),p=new Array(t.dims.length),f=new Array(n.dims.length),d=0,h=0,g=!1,m=!1;0===t.dims.length&&(d=t.get([]),g=!0),0===n.dims.length&&(h=n.get([]),m=!0);for(var v=void 0,b=0;b<u;b++){v=b;for(var w=a.length-1;w>=0;w--)l[w]=v%a[w],v=Math.floor(v/a[w]);g||(e.fillIndex(l,t.dims,p),d=t.get(p)),m||(e.fillIndex(l,n.dims,f),h=n.get(f)),s.set(l,r(d,h))}}return s}},e.isValidBroadcast=function(e,t){var n=e.length,r=t.length;if(n>r)return!1;for(var o=1;o<=n;o++)if(1!==e[n-o]&&e[n-o]!==t[r-o])return!1;return!0},e.getBroadcastDims=function(e,t){for(var n=e.length,r=[],o=0;o<n;o++){var i=n-1-o,a=e[i]||1;(t[t.length-1-o]||1)>1&&1===a&&r.unshift(i)}return r},e}();t.BroadcastUtil=f,t.arrayCopyHelper=function(e,t,n,r,o){if(r<0||r>=t.length)throw new Error("sourceIndex out of bounds");if(n<0||n>=e.length)throw new Error("targetIndex out of bounds");if(r+o>t.length)throw new Error("source indices to be copied are outside bounds");if(n+o>e.length)throw new Error("target array is too small to hold result");for(var i=0;i<o;i++)e[n+i]=t[r+i]};var d=function(){function e(){}return e.getShapeOfGemmResult=function(e,t,n,r,o){if(2!==e.length||2!==n.length)throw new Error("shape need to be of size 2");var i,a,u;t?(i=e[1],a=e[0]):(i=e[0],a=e[1]);var s=-1;if(r?(u=n[0],s=1):(u=n[1],s=0),n[s]!==a)throw new Error("dimension mismatch");if(i<=0||u<=0||a<=0)throw new Error("invalid shape specified");if(o&&!f.isValidBroadcast(o,[i,u]))throw new Error("gemm: invalid bias shape for broadcast");return[i,u,a]},e}();t.GemmUtil=d;var h=function(){function e(){}return e.tensorDataTypeFromProto=function(e){switch(e){case s.onnx.TensorProto.DataType.INT8:return"int8";case s.onnx.TensorProto.DataType.UINT8:return"uint8";case s.onnx.TensorProto.DataType.BOOL:return"bool";case s.onnx.TensorProto.DataType.INT16:return"int16";case s.onnx.TensorProto.DataType.UINT16:return"uint16";case s.onnx.TensorProto.DataType.INT32:return"int32";case s.onnx.TensorProto.DataType.UINT32:return"uint32";case s.onnx.TensorProto.DataType.FLOAT:return"float32";case s.onnx.TensorProto.DataType.DOUBLE:return"float64";case s.onnx.TensorProto.DataType.STRING:return"string";case s.onnx.TensorProto.DataType.INT64:return"int32";case s.onnx.TensorProto.DataType.UINT64:return"uint32";default:throw new Error("unsupported data type: ".concat(s.onnx.TensorProto.DataType[e]))}},e.tensorDataTypeStringToEnum=function(e){switch(e){case"int8":return s.onnx.TensorProto.DataType.INT8;case"uint8":return s.onnx.TensorProto.DataType.UINT8;case"bool":return s.onnx.TensorProto.DataType.BOOL;case"int16":return s.onnx.TensorProto.DataType.INT16;case"uint16":return s.onnx.TensorProto.DataType.UINT16;case"int32":return s.onnx.TensorProto.DataType.INT32;case"uint32":return s.onnx.TensorProto.DataType.UINT32;case"float32":return s.onnx.TensorProto.DataType.FLOAT;case"float64":return s.onnx.TensorProto.DataType.DOUBLE;case"string":return s.onnx.TensorProto.DataType.STRING;case"int64":return s.onnx.TensorProto.DataType.INT64;case"uint64":return s.onnx.TensorProto.DataType.UINT64;default:throw new Error("unsupported data type: ".concat(e))}},e.tensorDimsFromProto=function(e){return e.map((function(e){return u.default.isLong(e)?e.toNumber():e}))},e.tensorValueTypeFromProto=function(t){return{tensorType:e.tensorDataTypeFromProto(t.elemType),shape:{dims:e.tensorDimsFromProto(t.shape.dim.map((function(e){return e.dimValue})))}}},e.tensorDimsFromORTFormat=function(e){for(var t=[],n=0;n<e.dimsLength();n++)t.push(g.longToNumber(e.dims(n)));return t},e.tensorAttributesFromORTFormat=function(e){for(var t=[],n=0;n<e.attributesLength();n++)t.push(e.attributes(n));return t},e}();t.ProtoUtil=h;var g=function(){function e(){}return e.longToNumber=function(e,t){return u.default.isLong(e)?e.toNumber():e instanceof a.flatbuffers.Long?u.default.fromValue({low:e.low,high:e.high,unsigned:null!=t&&t}).toNumber():e},e.isLong=function(e){return u.default.isLong(e)||e instanceof a.flatbuffers.Long},e}();t.LongUtil=g;var y=function(){function e(){}return e.size=function(t){return e.getSizeFromDimensionRange(t,0,t.length)},e.sizeFromDimension=function(t,n){if(n<0||n>t.length)throw new Error("invalid dimension of ".concat(n," for sizeFromDimension as Tensor has ").concat(t.length," dimensions."));return e.getSizeFromDimensionRange(t,n,t.length)},e.sizeToDimension=function(t,n){if(n<0||n>t.length)throw new Error("invalid dimension of ".concat(n," for sizeToDimension as Tensor has ").concat(t.length," dimensions."));return e.getSizeFromDimensionRange(t,0,n)},e.getSizeFromDimensionRange=function(e,t,n){for(var r=1,o=t;o<n;o++){if(e[o]<=0)throw new Error("cannot get valid size from specified dimension range. Most likely the range contains 0 or negative values in them.");r*=e[o]}return r},e.computeStrides=function(e){var t=e.length;if(0===t)return[];if(1===t)return[1];var n=new Array(t);n[t-1]=1,n[t-2]=e[t-1];for(var r=t-3;r>=0;--r)n[r]=n[r+1]*e[r+1];return n},e.transpose=function(e){return e.slice().reverse()},e.indicesToOffset=function(e,t,n){void 0===n&&(n=e.length);for(var r=0,o=0;o<n;++o)r+=t[o]*e[o];return r},e.offsetToIndices=function(e,t){var n=t.length;if(0===n)return[];if(1===n)return[e*t[0]];for(var r=new Array(t.length),o=0;o<r.length-1;++o)r[o]=Math.floor(e/t[o]),e-=r[o]*t[o];return r[r.length-1]=e,r},e.normalizeAxis=function(e,t){if(e<-t&&e>=t)throw new Error("unsupported axis for this operation.");return e<0?e+t:e},e.normalizeAxes=function(e,t){var n=this;return e.map((function(e){return n.normalizeAxis(e,t)}))},e.incrementIndex=function(e,t,n){if(0===t.length||0===e.length)throw new Error("Index incrementing unsupported for scalar Tensor");if(void 0===n)n=t.length;else if(n<=0||n>t.length)throw new Error("Incorrect axis to increment on");for(var r=n-1;r>=0&&(e[r]++,!(e[r]<t[r]));--r)e[r]=0},e.calculateReshapedDims=function(t,n){if(0===n.length){if(0===t.length||1===e.size(t))return[];throw new Error("cannot reshape to a scalar Tensor")}for(var r=n.length,o=new Array(r),i=-1,a=1,u=0;u<r;u++){if(n[u]<-1)throw new Error("a dimension in shape hints cannot be less than -1");if(-1===n[u]){if(-1!==i)throw new Error("at most one dimension in shape hints can be -1");i=u}else{if(0===n[u]){if(u>=t.length)throw new Error("the dimension with value zero exceeds the dimension size of the input tensor");o[u]=t[u]}else o[u]=n[u];a*=o[u]}}var s=e.size(t);if(-1!==i){if(s%a!=0)throw new Error("the input tensor cannot be reshaped to the requested shape. Input shape: [".concat(t,"] Output shape: [").concat(n,"]"));o[i]=s/a}else if(a!==s)throw new Error("reshapedDims and originalDims don't have matching sizes");return o},e.sortBasedOnPerm=function(e,t){return t?t.map((function(t){return e[t]})):e.slice().reverse()},e.padShape=function(e,t){var n=e.length;return e.map((function(e,r){return e+t[r]+t[r+n]}))},e.areEqual=function(e,t){return e.length===t.length&&e.every((function(e,n){return e===t[n]}))},e.validateDimsAndCalcSize=function(e){var t,n;if(e.length>6)throw new TypeError("Only rank 0 to 6 is supported for tensor shape.");var r=1;try{for(var i=o(e),a=i.next();!a.done;a=i.next()){var u=a.value;if(!Number.isInteger(u))throw new TypeError("Invalid shape: ".concat(u," is not an integer"));if(u<0||u>2147483647)throw new TypeError("Invalid shape: length ".concat(u," is not allowed"));r*=u}}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r},e.flattenShape=function(e,t){t<0&&(t+=e.length);var n=e.reduce((function(e,t){return e*t}),1),r=e.slice(t).reduce((function(e,t){return e*t}),1);return[n/r,r]},e.squeezeShape=function(t,n){var r=new Array;n=e.normalizeAxes(n,t.length);for(var o=0;o<t.length;o++){var i=n.indexOf(o)>=0;if(i&&1!==t[o])throw new Error("squeeze an axis of size different than 1");(0===n.length&&t[o]>1||n.length>0&&!i)&&r.push(t[o])}return r},e.unsqueezeShape=function(t,n){var r=new Array(t.length+n.length);r.fill(0);for(var o=0;o<n.length;o++){var i=e.normalizeAxis(n[o],r.length);if(i>=r.length)throw new Error("'axes' has an out of range axis");if(0!==r[i])throw new Error("'axes' has a duplicate axis");r[i]=1}var a=0;for(o=0;o<r.length;o++)0===r[o]&&(r[o]=t[a++]);if(a!==t.length)throw new Error("the unsqueezed dimension could not be established");return r},e}();t.ShapeUtil=y;var m=function(){function e(){}return e.sqr=function(e,t,n,r,o){if(r<0||r>=t.length)throw new Error("sourceIndex out of bounds");if(n<0||n>=e.length)throw new Error("targetIndex out of bounds");if(r+o>t.length)throw new Error("source indices to be copied are outside bounds");if(n+o>e.length)throw new Error("target array is too small to hold result");for(var i=0;i<o;i++)e[n+i]+=Math.pow(t[r+i],2)},e.axpy=function(e,t,n,r,o,i){if(r<0||r>=t.length)throw new Error("sourceIndex out of bounds");if(n<0||n>=e.length)throw new Error("targetIndex out of bounds");if(r+o>t.length)throw new Error("source indices to be copied are outside bounds");if(n+o>e.length)throw new Error("target array is too small to hold result");for(var a=0;a<o;a++)e[n+a]+=i*t[r+a]},e.powx=function(e,t,n,r,o,i){if(r<0||r>=t.length)throw new Error("sourceIndex out of bounds");if(n<0||n>=e.length)throw new Error("targetIndex out of bounds");if(r+o>t.length)throw new Error("source indices to be copied are outside bounds");if(n+o>e.length)throw new Error("target array is too small to hold result");for(var a=0;a<o;a++)e[n+a]=Math.pow(t[r+a],i)},e.mul=function(e,t,n,r,o){if(r<0||r>=t.length)throw new Error("sourceIndex out of bounds");if(n<0||n>=e.length)throw new Error("targetIndex out of bounds");if(r+o>t.length)throw new Error("source indices to be copied are outside bounds");if(n+o>e.length)throw new Error("target array is too small to hold result");for(var i=0;i<o;i++)e[n+i]=t[r+i]*e[n+i]},e}();t.MathUtil=m;var v=function(){function e(){}return e.splitShape=function(t,n,r,o){if(0===r.length){if(!o)throw new Error("need to know number of outputs when the 'split' attribute is not specified");e.determineSplit(t[n],o,r)}for(var i=[],a=[0],u=0;u<r.length;++u){0!==u&&a.push(a[u-1]+r[u-1]);var s=t.slice();s[n]=r[u],i.push(s)}return[i,a]},e.determineSplit=function(e,t,n){if(e%t!=0)throw new Error("cannot split tensor to equal sized parts");for(var r=0;r<t;++r)n.push(e/t)},e}();t.SplitUtil=v;var b=function(){function e(){}return e.calcReduce=function(t,n,r,o,i){var a=t.dims.slice(0);0===n.length&&a.forEach((function(e,t){return n.push(t)}));for(var u=e.calcReduceShape(a,n,!0),s=y.size(u),l=new c.Tensor(u,t.type),p=y.computeStrides(u),d=y.computeStrides(a),h=new Array(a.length),g=0;g<s;g++){var m=y.offsetToIndices(g,p);f.fillIndex(m,a,h),l.set(m,e.calcReduceByAxis(t.numberData,n,a,0,y.indicesToOffset(h,d),o,i))}return r?l:new c.Tensor(e.calcReduceShape(a,n,r),l.type,void 0,void 0,l.data,l.dataId)},e.calcReduceByAxis=function(t,n,r,o,i,a,u){var s=0;if(o>=n.length)return a(t[i]);for(var c=n[o],l=c>=r.length?1:y.size(r.slice(c+1)),p=0;p<r[c];p++)s=0===p?e.calcReduceByAxis(t,n,r,o+1,i,a,u):u(s,e.calcReduceByAxis(t,n,r,o+1,i,a,u)),i+=l;return s},e.calcReduceShape=function(e,t,n){for(var r=e.slice(),o=0;o<t.length;o++)r[t[o]]=n?1:0;return r.filter((function(e){return 0!==e}))},e}();t.ReduceUtil=b;var w=function(){function e(){}return e.adjustPoolAttributes=function(e,t,n,r,o,i){if(!e&&n.length!==t.length-2)throw new Error("length of specified kernel shapes should be 2 less than length of input dimensions");if(e)for(var a=0;a<t.length-2;a++)a>=n.length?n.push(t[a+2]):n[a]=t[a+2];for(a=0;a<n.length;a++)if(a<r.length){if(r[a]<0)throw new Error("strides should be greater than or equal to 1")}else r.push(1);for(a=0;a<n.length;a++)if(a<o.length){if(o[a]<0)throw new Error("dilations should be greater than or equal to 1")}else o.push(1);for(a=0;a<2*n.length;a++)if(a<i.length){if(i[a]<0)throw new Error("pad should be greater than or equal to 1")}else i.push(0);for(a=0;a<n.length;a++){if(n[a]<=0)throw new Error("kernel shapes need to be greater than 0");if(i[a]>=n[a]||i[a+n.length]>=n[a])throw new Error("pads should be smaller than kernel")}},e.adjustPadsBasedOnAutoPad=function(t,n,r,o,i,a){if(a){if(i.length!==2*(t.length-2))throw new Error("length of pads should be twice the length of data dimensions");if(n.length!==t.length-2)throw new Error("length of strides should be the length of data dimensions");if(o.length!==t.length-2)throw new Error("length of kernel shapes should be the length of data dimensions");for(var u=0;u<t.length-2;u++)e.adjustPadAndReturnShape(t[u+2],n[u],r[u],o[u],i,u,u+t.length-2,a)}},e.computePoolOutputShape=function(t,n,r,o,i,a,u){if(n.length<=0)throw new Error("input shape must be of size greater than 0");var s=[n[0],n[1]];return e.computeShapeHelper(t,n,s,r,o,i,a,u),s},e.computeConvOutputShape=function(t,n,r,o,i,a,u){if(t.length<=0||n.length<=0)throw new Error("invalid input tensor dims or invalid filter tensor dims");var s=[t[0],n[0]];return e.computeShapeHelper(!1,t,s,r,o,i,a,u),s},e.computeShapeHelper=function(t,n,r,o,i,a,u,s){if(t)for(var c=0;c<n.length-2;c++)r.push(1);else for(c=0;c<n.length-2;c++)r.push(e.adjustPadAndReturnShape(n[c+2],o[c],i[c],a[c],u,c,c+n.length-2,s))},e.adjustPadAndReturnShape=function(e,t,n,r,o,i,a,u){var s=n*(r-1)+1;if(!u||"NOTSET"===u)return Math.floor((e+o[i]+o[a]-s)/t+1);switch(u){case"VALID":return o[i]=0,o[a]=0,Math.floor((e-s)/t+1);case"SAME_LOWER":case"SAME_UPPER":if(1!==n)throw new Error("Dilation not supported for SAME_UPPER or SAME_LOWER");var c=((e+t-1)/t-1)*t+r-e;return o[i]="SAME_LOWER"===u?Math.floor((c+1)/2):Math.floor(c/2),o[a]=c-o[i],Math.floor((e+c-r)/t+1);default:throw new Error("Unsupported AutoPad type")}},e}();t.PoolConvUtil=w,t.MIN_CLIP=-34028234663852886e22,t.MAX_CLIP=34028234663852886e22,t.decodeUtf8String=function(e){return(new TextDecoder).decode(e)}},8408:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.version=void 0,t.version="1.16.0"},3838:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function u(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,u)}s((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(s){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,r=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){a=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){a.label=u[1];break}if(6===u[0]&&a.label<o[1]){a.label=o[1],o=u;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(u);break}o[2]&&a.ops.pop(),a.trys.pop();continue}u=t.call(e,a)}catch(e){u=[6,e],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,s])}}},i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},a=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};Object.defineProperty(t,"__esModule",{value:!0}),t.WebGpuBackend=void 0;var u=n(4955),s=n(7771),c=n(8510),l=n(8305),p=function(){function e(){this.currentKernelId=null,this.commandEncoder=null,this.computePassEncoder=null,this.pendingDispatchNumber=0,this.profilingEnabled=!1}return Object.defineProperty(e.prototype,"currentKernelCustomData",{get:function(){if(null===this.currentKernelId)throw new Error("currentKernelCustomData(): currentKernelId is null. (should not happen)");var e=this.kernelCustomData.get(this.currentKernelId);return e||(e={},this.kernelCustomData.set(this.currentKernelId,e)),e},enumerable:!1,configurable:!0}),e.prototype.initialize=function(e){return r(this,void 0,void 0,(function(){var t,n,r;return o(this,(function(o){switch(o.label){case 0:if(!navigator.gpu)throw new Error("WebGpuBackend: WebGPU is not available.");return[4,navigator.gpu.requestAdapter()];case 1:if(!(t=o.sent()))throw new Error("WebGpuBackend: Failed to get GPU adapter.");return n={requiredLimits:{maxComputeWorkgroupStorageSize:t.limits.maxComputeWorkgroupStorageSize,maxComputeWorkgroupsPerDimension:t.limits.maxComputeWorkgroupsPerDimension,maxStorageBufferBindingSize:t.limits.maxStorageBufferBindingSize}},t.features.has("timestamp-query-inside-passes")&&"default"===e.webgpu.profilingMode&&(this.profilingEnabled=!0,n.requiredFeatures=["timestamp-query-inside-passes"]),r=this,[4,t.requestDevice(n)];case 2:return r.device=o.sent(),this.gpuDataManager=(0,s.createGpuDataManager)(this),this.programManager=new l.ProgramManager(this),this.kernels=new Map,this.kernelPersistentData=new Map,this.kernelCustomData=new Map,(0,u.configureLogger)(e.logLevel,!!e.debug),this.device.onuncapturederror=function(e){e.error instanceof GPUValidationError&&console.error("An uncaught WebGPU validation error was raised: ".concat(e.error.message))},this.profilingEnabled&&(this.profilingQuerySet=this.device.createQuerySet({type:"timestamp",count:2})),[2]}}))}))},e.prototype.dispose=function(){},e.prototype.getCommandEncoder=function(){return this.commandEncoder||(this.commandEncoder=this.device.createCommandEncoder()),this.commandEncoder},e.prototype.getComputePassEncoder=function(){return this.computePassEncoder||(this.computePassEncoder=this.getCommandEncoder().beginComputePass()),this.computePassEncoder},e.prototype.endComputePass=function(){this.computePassEncoder&&(this.computePassEncoder.end(),this.computePassEncoder=null)},e.prototype.flush=function(){this.endComputePass(),this.device.queue.submit([this.getCommandEncoder().finish()]),this.gpuDataManager.refreshPendingBuffers(),this.commandEncoder=null,this.pendingDispatchNumber=0},e.prototype.run=function(e,t,n,r,o){if(t.length!==e.inputTypes.length)throw new Error("Input size must be equal to ".concat(e.inputTypes.length,"."));for(var i=[],a=0;a<t.length;++a){if(!(h=this.gpuDataManager.get(t[a].data)))throw new Error("no GPU data for input: ".concat(t[a].data));i[a]=h}var s=function(e,t,n){var r=t.map((function(e){return"".concat(e.join(","))})).join("_"),o=n.join("_"),i=e.name;return e.cacheHint&&(i+="["+e.cacheHint+"]"),i+":"+r+";"+o}(e,t.map((function(e){return e.dims})),i.map((function(e){return e.type}))),c=this.programManager.getArtifact(s),l=c?c.programInfo:"function"==typeof e.get?e.get():e,p=0===n.length?l.outputs.map((function(e,t){return t})):n;if(p.length!==l.outputs.length)throw new Error("Output size ".concat(p.length," must be equal to ").concat(l.outputs.length,"."));var f=[],d=[];for(a=0;a<l.outputs.length;++a){if(!Number.isInteger(p[a])||p[a]<-2||p[a]>=l.outputs.length)throw new Error("Invalid output index: ".concat(p[a]));var h,g=-1===p[a],y=-2===p[a],m=g||y?o(l.outputs[a].dataType,l.outputs[a].dims):r(p[a],l.outputs[a].dataType,l.outputs[a].dims);if(!(h=this.gpuDataManager.get(m.data)))throw new Error("no GPU data for output: ".concat(m.data));if(g&&this.temporaryData.push(h),y){var v=this.kernelPersistentData.get(this.currentKernelId);v||(v=[],this.kernelPersistentData.set(this.currentKernelId,v)),v.push(h)}f.push(m),d.push(h)}var b=this.programManager.normalizeDispatchGroupSize(l.dispatchGroup(t));return c||(c=this.programManager.build(l,b),this.programManager.setArtifact(s,c)),(0,u.LOG_DEBUG)("info",(function(){return'[ProgramManager] run "'.concat(l.name,'" (key=').concat(s,") with ").concat(b[0],"x").concat(b[1],"x").concat(b[2])})),this.programManager.run(c,i,d,b),f},e.prototype.upload=function(e,t){this.gpuDataManager.upload(e,t)},e.prototype.memcpy=function(e,t){this.gpuDataManager.memcpy(e,t)},e.prototype.download=function(e,t){return r(this,void 0,void 0,(function(){var n,r;return o(this,(function(o){switch(o.label){case 0:return[4,this.gpuDataManager.download(e)];case 1:return n=o.sent(),(r=t()).set(new Uint8Array(n,0,r.byteLength)),[2]}}))}))},e.prototype.alloc=function(e){return this.gpuDataManager.create(e).id},e.prototype.free=function(e){return this.gpuDataManager.release(e)},e.prototype.createKernel=function(e,t,n){var r=c.WEBGPU_OP_RESOLVE_RULES.get(e);if(!r)throw new Error("kernel not implemented: ".concat(e));this.kernels.set(t,[e,r[0],[r[1],n]])},e.prototype.releaseKernel=function(e){var t,n,r=this.kernelPersistentData.get(e);if(r){try{for(var o=i(r),a=o.next();!a.done;a=o.next()){var u=a.value;this.gpuDataManager.release(u.id)}}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}this.kernelPersistentData.delete(e)}this.kernelCustomData.delete(e),this.kernels.delete(e)},e.prototype.computeKernel=function(e,t){var n,r,o=this.kernels.get(e);if(!o)throw new Error("kernel not created: ".concat(e));var s=a(o,3),c=s[0],l=s[1],p=s[2];if(null!==this.currentKernelId)throw new Error('kernel "'.concat(c,'" is not allowed to be called recursively'));this.currentKernelId=e,p[0]&&(p[1]=p[0](p[1]),p[0]=void 0),(0,u.LOG_DEBUG)("info",(function(){return'[WebGPU] Start to run kernel "'.concat(c,'"...')})),this.temporaryData=[];try{return l(t,p[1]),0}catch(e){return(0,u.LOG_DEBUG)("warning",'[WebGPU] Kernel "'.concat(c,'" failed. Error: ').concat(e)),1}finally{try{for(var f=i(this.temporaryData),d=f.next();!d.done;d=f.next()){var h=d.value;this.gpuDataManager.release(h.id)}}catch(e){n={error:e}}finally{try{d&&!d.done&&(r=f.return)&&r.call(f)}finally{if(n)throw n.error}}this.temporaryData=[],this.currentKernelId=null}},e}();t.WebGpuBackend=p},7675:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function u(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,u)}s((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(s){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,r=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){a=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){a.label=u[1];break}if(6===u[0]&&a.label<o[1]){a.label=o[1],o=u;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(u);break}o[2]&&a.ops.pop(),a.trys.pop();continue}u=t.call(e,a)}catch(e){u=[6,e],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.init=void 0;var i=n(7917),a=n(3838),u=n(4955),s=n(6952),c=function(){function e(e,t,n,r){this.module=e,this.dataType=t,this.data=n,this.dims=r}return e.prototype.getFloat32Array=function(){if(1!==this.dataType)throw new Error("Invalid data type");var e=s.ShapeUtil.size(this.dims);return 0===e?new Float32Array:new Float32Array(this.module.HEAP8.buffer,this.data,e)},e.prototype.getBigInt64Array=function(){if(7!==this.dataType)throw new Error("Invalid data type");var e=s.ShapeUtil.size(this.dims);return 0===e?new BigInt64Array:new BigInt64Array(this.module.HEAP8.buffer,this.data,e)},e.prototype.getInt32Array=function(){if(6!==this.dataType)throw new Error("Invalid data type");var e=s.ShapeUtil.size(this.dims);return 0===e?new Int32Array:new Int32Array(this.module.HEAP8.buffer,this.data,e)},e.prototype.reshape=function(t){if(s.ShapeUtil.size(t)!==s.ShapeUtil.size(this.dims))throw new Error("Invalid new shape");return new e(this.module,this.dataType,this.data,t)},e}(),l=function(){function e(e,t,n){this.module=e,this.backend=t,this.customDataOffset=0,this.customDataSize=0;var r=e.HEAPU32,o=n>>2;this.opKernelContext=r[o++];var i=r[o++];this.customDataOffset=r[o++],this.customDataSize=r[o++];for(var a=[],u=0;u<i;u++){for(var s=r[o++],l=r[o++],p=r[o++],f=[],d=0;d<p;d++)f.push(r[o++]);a.push(new c(e,s,l,f))}this.inputs=a}return Object.defineProperty(e.prototype,"kernelCustomData",{get:function(){return this.backend.currentKernelCustomData},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"customDataBuffer",{get:function(){return this.module.HEAPU8.subarray(this.customDataOffset,this.customDataOffset+this.customDataSize)},enumerable:!1,configurable:!0}),e.prototype.compute=function(e,t){var n,r,o,a=this,u=null!==(r=null===(n=null==t?void 0:t.inputs)||void 0===n?void 0:n.map((function(e){return"number"==typeof e?a.inputs[e]:e})))&&void 0!==r?r:this.inputs,l=null!==(o=null==t?void 0:t.outputs)&&void 0!==o?o:[];return this.backend.run(e,u,l,(function(e,t,n){return new c(a.module,t,a.output(e,n),n)}),(function(e,t){var n=(0,i.getTensorElementSize)(e);if(!n)throw new Error("Unsupported data type: ".concat(e));var r=n*s.ShapeUtil.size(t);return new c(a.module,e,a.backend.gpuDataManager.create(r).id,t)}))},e.prototype.output=function(e,t){var n=this.module.stackSave();try{var r=this.module.stackAlloc(4*(1+t.length)),o=r>>2;this.module.HEAPU32[o++]=t.length;for(var i=0;i<t.length;i++)this.module.HEAPU32[o++]=t[i];return this.module._JsepOutput(this.opKernelContext,e,r)}finally{this.module.stackRestore(n)}},e}();t.init=function(e,t){return r(void 0,void 0,void 0,(function(){var n,i;return o(this,(function(s){switch(s.label){case 0:if(!(n=e.jsepInit)||!navigator.gpu)return[3,2];if(!t.wasm.simd)throw new Error("Not supported for WebGPU=ON and SIMD=OFF. Please set `env.wasm.simd` to true when using WebGPU EP");return[4,(i=new a.WebGpuBackend).initialize(t)];case 1:s.sent(),n({backend:i},(function(e){return i.alloc(e)}),(function(e){return i.free(e)}),(function(t,n,r,o){if(void 0===o&&(o=!1),o)(0,u.LOG_DEBUG)("verbose",(function(){return"[WebGPU] jsepCopyGpuToGpu: src=".concat(t,", dst=").concat(n,", size=").concat(r)})),i.memcpy(t,n);else{(0,u.LOG_DEBUG)("verbose",(function(){return"[WebGPU] jsepCopyCpuToGpu: dataOffset=".concat(t,", gpuDataId=").concat(n,", size=").concat(r)}));var a=e.HEAPU8.subarray(t,t+r);i.upload(n,a)}}),(function(t,n,a){return r(void 0,void 0,void 0,(function(){return o(this,(function(r){switch(r.label){case 0:return(0,u.LOG_DEBUG)("verbose",(function(){return"[WebGPU] jsepCopyGpuToCpu: gpuDataId=".concat(t,", dataOffset=").concat(n,", size=").concat(a)})),[4,i.download(t,(function(){return e.HEAPU8.subarray(n,n+a)}))];case 1:return r.sent(),[2]}}))}))}),(function(e,t,n){return i.createKernel(e,t,n)}),(function(e){return i.releaseKernel(e)}),(function(t,n){(0,u.LOG_DEBUG)("verbose",(function(){return"[WebGPU] jsepRun: kernel=".concat(t,", contextDataOffset=").concat(n)}));var r=new l(e,i,n);return i.computeKernel(t,r)})),s.label=2;case 2:return[2]}}))}))}},4955:function(e,t,n){"use strict";var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},o=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.LOG_DEBUG=t.LOG=t.configureLogger=void 0;var i,a,u=n(7917),s=["V","I","W","E","F"];t.configureLogger=function(e,t){i=e,a=t},t.LOG=function(e,t){var n,r,o=(0,u.logLevelStringToEnum)(e);o>=(0,u.logLevelStringToEnum)(i)&&(n=o,r="function"==typeof t?t():t,console.log("[".concat(s[n],",").concat((new Date).toISOString(),"]").concat(r)))},t.LOG_DEBUG=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];a&&t.LOG.apply(void 0,o([],r(e),!1))}},6952:function(e,t){"use strict";var n=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};Object.defineProperty(t,"__esModule",{value:!0}),t.MAX_CLIP=t.MIN_CLIP=t.GemmUtil=t.PoolConvUtil=t.ShapeUtil=t.BroadcastUtil=t.MatMulUtil=void 0;var r=function(){function e(){}return e.calcMatMulShape=function(e,t){return e[1]!==t[0]?void 0:[e[0],t[1]]},e}();t.MatMulUtil=r;var o=function(){function e(){}return e.calcShape=function(e,t,o){var i;void 0===o&&(o=!1);var a=e.length,u=t.length;if(0===a)return t;if(0===u)return e;var s=Math.max(e.length,t.length),c=new Array(s);if(o){if(a<2||u<2)return;var l=r.calcMatMulShape([e[a-2],e[a-1]],[t[u-2],t[u-1]]);if(void 0===l)return;i=n(l,2),c[s-2]=i[0],c[s-1]=i[1]}for(var p=o?3:1;p<=s;p++){var f=a-p<0?1:e[a-p],d=u-p<0?1:t[u-p];if(f!==d&&f>1&&d>1)return;c[s-p]=Math.max(f,d)}return c},e.isValidBroadcast=function(e,t){var n=e.length,r=t.length;if(n>r)return!1;for(var o=1;o<=n;o++)if(1!==e[n-o]&&e[n-o]!==t[r-o])return!1;return!0},e}();t.BroadcastUtil=o;var i=function(){function e(){}return e.size=function(t){return e.getSizeFromDimensionRange(t,0,t.length)},e.sizeFromDimension=function(t,n){if(n<0||n>t.length)throw new Error("invalid dimension of ".concat(n," for sizeFromDimension as Tensor has ").concat(t.length," dimensions."));return e.getSizeFromDimensionRange(t,n,t.length)},e.sizeToDimension=function(t,n){if(n<0||n>t.length)throw new Error("invalid dimension of ".concat(n," for sizeToDimension as Tensor has ").concat(t.length," dimensions."));return e.getSizeFromDimensionRange(t,0,n)},e.getSizeFromDimensionRange=function(e,t,n){for(var r=1,o=t;o<n;o++){if(e[o]<0)throw new Error("cannot get valid size from specified dimension range. Most likely the range contains negative values in them.");r*=e[o]}return r},e.computeStrides=function(e){var t=e.length;if(0===t)return[];if(1===t)return[1];var n=new Array(t);n[t-1]=1,n[t-2]=e[t-1];for(var r=t-3;r>=0;--r)n[r]=n[r+1]*e[r+1];return n},e.normalizeAxis=function(e,t){if(e<-t&&e>=t)throw new Error("unsupported axis for this operation.");return e<0?e+t:e},e.normalizeAxes=function(e,t){var n=this;return e.map((function(r){return n.normalizeAxis(r,null!=t?t:e.length)}))},e.sortBasedOnPerm=function(e,t){return t?t.map((function(t){return e[t]})):e.slice().reverse()},e.padShape=function(e,t){var n=e.length;return e.map((function(e,r){return e+t[r]+t[r+n]}))},e.areEqual=function(e,t){return e.length===t.length&&e.every((function(e,n){return e===t[n]}))},e}();t.ShapeUtil=i;var a=function(){function e(){}return e.adjustPoolAttributes=function(e,t,n,r,o,i){if(!e&&n.length!==t.length-2)throw new Error("length of specified kernel shapes should be 2 less than length of input dimensions");if(e)for(var a=0;a<t.length-2;a++)a>=n.length?n.push(t[a+2]):n[a]=t[a+2];for(a=0;a<n.length;a++)if(a<r.length){if(r[a]<0)throw new Error("strides should be greater than or equal to 1")}else r.push(1);for(a=0;a<n.length;a++)if(a<o.length){if(o[a]<0)throw new Error("dilations should be greater than or equal to 1")}else o.push(1);for(a=0;a<2*n.length;a++)if(a<i.length){if(i[a]<0)throw new Error("pad should be greater than or equal to 1")}else i.push(0);for(a=0;a<n.length;a++){if(n[a]<=0)throw new Error("kernel shapes need to be greater than 0");if(i[a]>=n[a]||i[a+n.length]>=n[a])throw new Error("pads should be smaller than kernel")}},e.adjustPadsBasedOnAutoPad=function(t,n,r,o,i,a,u){if(u){if(i.length!==2*(t.length-2))throw new Error("length of pads should be twice the length of data dimensions");if(n.length!==t.length-2)throw new Error("length of strides should be the length of data dimensions");if(o.length!==t.length-2)throw new Error("length of kernel shapes should be the length of data dimensions");for(var s=0;s<t.length-2;s++)e.adjustPadAndReturnShape(t[s+(a?1:2)],n[s],r[s],o[s],i,s,s+t.length-2,u)}},e.computePoolOutputShape=function(t,n,r,o,i,a,u){if(n.length<=0)throw new Error("input shape must be of size greater than 0");var s=[n[0],n[1]];return e.computeShapeHelper(t,n,s,r,o,i,a,u),s},e.computeConvOutputShape=function(t,n,r,o,i,a,u){if(t.length<=0||n.length<=0)throw new Error("invalid input tensor dims or invalid filter tensor dims");var s=[t[0],n[0]];return e.computeShapeHelper(!1,t,s,r,o,i,a,u),s},e.computeShapeHelper=function(t,n,r,o,i,a,u,s){if(t)for(var c=0;c<n.length-2;c++)r.push(1);else for(c=0;c<n.length-2;c++)r.push(e.adjustPadAndReturnShape(n[c+2],o[c],i[c],a[c],u,c,c+n.length-2,s))},e.adjustPadAndReturnShape=function(e,t,n,r,o,i,a,u){var s=n*(r-1)+1;if(!u||"NOTSET"===u)return Math.floor((e+o[i]+o[a]-s)/t+1);switch(u){case"VALID":return o[i]=0,o[a]=0,Math.floor((e-s)/t+1);case"SAME_LOWER":case"SAME_UPPER":if(1!==n)throw new Error("Dilation not supported for SAME_UPPER or SAME_LOWER");var c=((e+t-1)/t-1)*t+r-e;return o[i]="SAME_LOWER"===u?Math.floor((c+1)/2):Math.floor(c/2),o[a]=c-o[i],Math.floor((e+c-r)/t+1);default:throw new Error("Unsupported AutoPad type")}},e}();t.PoolConvUtil=a;var u=function(){function e(){}return e.getShapeOfGemmResult=function(e,t,n,r,i){if(2!==e.length||2!==n.length)throw new Error("shape need to be of size 2");var a,u,s;t?(a=e[1],u=e[0]):(a=e[0],u=e[1]);var c=-1;if(r?(s=n[0],c=1):(s=n[1],c=0),n[c]!==u)throw new Error("dimension mismatch");if(a<=0||s<=0||u<=0)throw new Error("invalid shape specified");if(i&&!o.isValidBroadcast(i,[a,s]))throw new Error("gemm: invalid bias shape for broadcast");return[a,s,u]},e}();t.GemmUtil=u,t.MIN_CLIP=-34028234663852886e22,t.MAX_CLIP=34028234663852886e22},387:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createAttributeWithCacheKey=void 0;var n=function(){function e(e){Object.assign(this,e)}return Object.defineProperty(e.prototype,"cacheKey",{get:function(){var e=this;return this._cacheKey||(this._cacheKey=Object.getOwnPropertyNames(this).sort().map((function(t){return"".concat(e[t])})).join(";")),this._cacheKey},enumerable:!1,configurable:!0}),e}();t.createAttributeWithCacheKey=function(e){return new n(e)}},7771:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function u(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,u)}s((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(s){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,r=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){a=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){a.label=u[1];break}if(6===u[0]&&a.label<o[1]){a.label=o[1],o=u;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(u);break}o[2]&&a.ops.pop(),a.trys.pop();continue}u=t.call(e,a)}catch(e){u=[6,e],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,s])}}},i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},a=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},u=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.createGpuDataManager=void 0;var s=n(4955),c=n(1163),l=function(e){return 16*Math.ceil(e/16)},p=0,f=function(){function e(e){this.backend=e,this.storageCache=new Map,this.downloadCache=new Map,this.freeBuffers=new Map,this.buffersForUploadingPending=[],this.buffersPending=[]}return e.prototype.upload=function(e,t){var n=t.buffer,r=t.byteOffset,o=t.byteLength,i=l(o),a=this.storageCache.get(e);if(!a)throw new Error("gpu data for uploading does not exist");if(a.originalSize!==o)throw new Error("inconsistent data size. gpu data size=".concat(a.originalSize,", data size=").concat(o));var u=this.backend.device.createBuffer({mappedAtCreation:!0,size:i,usage:GPUBufferUsage.MAP_WRITE|GPUBufferUsage.COPY_SRC}),c=u.getMappedRange();new Uint8Array(c).set(new Uint8Array(n,r,o)),u.unmap();var p=this.backend.getCommandEncoder();this.backend.endComputePass(),p.copyBufferToBuffer(u,0,a.gpuData.buffer,0,i),(0,s.LOG_DEBUG)("verbose",(function(){return"[WebGPU] GpuDataManager.upload(id=".concat(e,")")})),this.buffersForUploadingPending.push(u)},e.prototype.memcpy=function(e,t){var n=this.storageCache.get(e);if(!n)throw new Error("source gpu data for memcpy does not exist");var r=this.storageCache.get(t);if(!r)throw new Error("destination gpu data for memcpy does not exist");if(n.originalSize!==r.originalSize)throw new Error("inconsistent source and destination gpu data size");var o=l(n.originalSize),i=this.backend.getCommandEncoder();this.backend.endComputePass(),i.copyBufferToBuffer(n.gpuData.buffer,0,r.gpuData.buffer,0,o)},e.prototype.create=function(e,t){void 0===t&&(t=GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST);var n,r=l(e),o=this.freeBuffers.get(r);o||(o=[],this.freeBuffers.set(r,o)),n=o.length>0?o.pop():this.backend.device.createBuffer({size:r,usage:t});var i={id:p++,type:c.GpuDataType.default,buffer:n};return this.storageCache.set(i.id,{gpuData:i,originalSize:e}),(0,s.LOG_DEBUG)("verbose",(function(){return"[WebGPU] GpuDataManager.create(size=".concat(e,") => id=").concat(i.id)})),i},e.prototype.get=function(e){var t;return null===(t=this.storageCache.get(e))||void 0===t?void 0:t.gpuData},e.prototype.release=function(e){var t=this.storageCache.get(e);if(!t)throw new Error("releasing data does not exist");return(0,s.LOG_DEBUG)("verbose",(function(){return"[WebGPU] GpuDataManager.release(id=".concat(e,"), gpuDataId=").concat(t.gpuData.id)})),this.storageCache.delete(e),this.buffersPending.push(t.gpuData.buffer),this.downloadCache.get(e)&&this.downloadCache.delete(e),t.originalSize},e.prototype.download=function(e){return r(this,void 0,void 0,(function(){var t,n,r,i,a,u;return o(this,(function(o){if(t=this.downloadCache.get(e))return[2,t.data];if(!(n=this.storageCache.get(e)))throw new Error("data does not exist");return r=this.backend.getCommandEncoder(),this.backend.endComputePass(),i=l(n.originalSize),a=this.backend.device.createBuffer({size:i,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}),r.copyBufferToBuffer(n.gpuData.buffer,0,a,0,i),this.backend.flush(),u=new Promise((function(e){a.mapAsync(GPUMapMode.READ).then((function(){var t=a.getMappedRange().slice(0);a.destroy(),e(t)}))})),this.downloadCache.set(e,{data:u}),[2,u]}))}))},e.prototype.refreshPendingBuffers=function(){var e,t,n,r;try{for(var o=i(this.buffersForUploadingPending),a=o.next();!a.done;a=o.next())(c=a.value).destroy()}catch(t){e={error:t}}finally{try{a&&!a.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}this.buffersForUploadingPending=[];try{for(var u=i(this.buffersPending),s=u.next();!s.done;s=u.next()){var c=s.value;this.freeBuffers.get(c.size).push(c)}}catch(e){n={error:e}}finally{try{s&&!s.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}this.buffersPending=[]},e.prototype.dispose=function(){this.freeBuffers.forEach((function(e){e.forEach((function(e){e.destroy()}))})),this.storageCache.forEach((function(e){e.gpuData.buffer.destroy()})),this.storageCache=new Map,this.downloadCache=new Map,this.freeBuffers=new Map},e}();t.createGpuDataManager=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new(f.bind.apply(f,u([void 0],a(e),!1)))}},8510:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.WEBGPU_OP_RESOLVE_RULES=void 0;var a=i(n(504)),u=n(513),s=n(9770),c=n(7640),l=n(8856),p=n(4271),f=n(1522),d=i(n(5262)),h=n(6031),g=n(5101),y=n(2067),m=n(2625),v=i(n(9302));t.WEBGPU_OP_RESOLVE_RULES=new Map([["Abs",[v.abs]],["Acos",[v.acos]],["Acosh",[v.acosh]],["Add",[a.add]],["Asin",[v.asin]],["Asinh",[v.asinh]],["Atan",[v.atan]],["Atanh",[v.atanh]],["AveragePool",[d.averagePool,d.parseAveragePoolAttributes]],["Ceil",[v.ceil]],["ClipV10",[v.clipV10]],["Clip",[v.clip]],["Concat",[u.concat,u.parseConcatAttributes]],["Conv",[s.conv,s.parseConvAttributes]],["ConvTranspose",[c.convTranspose,c.parseConvTransposeAttributes]],["Cos",[v.cos]],["Cosh",[v.cosh]],["Div",[a.div]],["Elu",[v.elu,v.parseAlphaAttributes]],["Erf",[v.erf]],["Exp",[v.exp]],["Expand",[l.expand]],["Floor",[v.floor]],["Gemm",[p.gemm,p.parseGemmAttributes]],["GlobalAveragePool",[d.globalAveragePool,d.parseGlobalAveragePoolAttributes]],["GlobalMaxPool",[d.globalMaxPool,d.parseGlobalMaxPoolAttributes]],["LeakyRelu",[v.leakyRelu,v.parseAlphaAttributes]],["MatMul",[f.matMul]],["MaxPool",[d.maxPool,d.parseMaxPoolAttributes]],["Mul",[a.mul]],["Neg",[v.neg]],["Pow",[a.pow]],["Reciprocal",[v.reciprocal]],["ReduceMin",[h.reduceMin,h.parseReduceAttributes]],["ReduceMean",[h.reduceMean,h.parseReduceAttributes]],["ReduceMax",[h.reduceMax,h.parseReduceAttributes]],["ReduceSum",[h.reduceSum,h.parseReduceAttributes]],["ReduceProd",[h.reduceProd,h.parseReduceAttributes]],["ReduceL1",[h.reduceL1,h.parseReduceAttributes]],["ReduceL2",[h.reduceL2,h.parseReduceAttributes]],["ReduceLogSum",[h.reduceLogSum,h.parseReduceAttributes]],["ReduceLogSumExp",[h.reduceLogSumExp,h.parseReduceAttributes]],["ReduceSumSquare",[h.reduceSumSquare,h.parseReduceAttributes]],["Relu",[v.relu]],["Sigmoid",[v.sigmoid]],["Sin",[v.sin]],["Sinh",[v.sinh]],["Slice",[g.slice,g.parseSliceAttributes]],["Split",[y.split,y.parseSplitAttributes]],["Sqrt",[v.sqrt]],["Sub",[a.sub]],["Tan",[v.tan]],["Tanh",[v.tanh]],["ThresholdedRelu",[v.thresholdedRelu,v.parseAlphaAttributes]],["Transpose",[m.transpose,m.parseTransposeAttributes]]])},1427:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.biasActivationSnippet=t.activationFnSnippet=t.typeSnippet=void 0,t.typeSnippet=function(e){switch(e){case 1:return"f32";case 2:return"vec2<f32>";case 3:return"vec3<f32>";case 4:return"vec4<f32>";default:throw new Error("".concat(e,"-component is not supported."))}},t.activationFnSnippet=function(e,t,n,r){return void 0===t&&(t=!1),void 0===n&&(n=!1),void 0===r&&(r=3),""},t.biasActivationSnippet=function(e,t){return"\n      ".concat(e?"value = value + getBiasByOutputCoords(coords);":"","\n      ").concat(t?"value = activation(value, coords);":"","\n      ")}},9456:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.createConv2DMatMulProgramInfo=void 0;var o=n(4955),i=n(6952),a=n(1163),u=n(1427),s=n(4085),c=n(158);t.createConv2DMatMulProgramInfo=function(e,t,n,l,p,f,d,h,g){var y="NHWC"===n.format,m=y?e[0].dims[3]:e[0].dims[1],v=l[0],b=y?l[2]:l[3],w=y?l[1]:l[2],_=y?l[3]:l[1],x=((m%4==0||m%3==0)&&y||b%4==0&&!y)&&_%4==0,T=y?_:b*w,S=y?b*w:_,P=x?[8,8,1]:[T<=4?4:16,T>4&&S<=4?4:16,1],A=x?[4,4,1]:[T<=4?1:2,T>4&&S<=4?1:2,1],O=[Math.ceil(T/P[0]/A[0]),Math.ceil(S/P[1]/A[1]),Math.ceil(v/P[2]/A[1])];(0,o.LOG_DEBUG)("verbose",(function(){return"[conv2d_mm_webgpu] dispatch = ".concat(O)}));var I=x?y&&m%4!=0?3:4:A[0],E=P[1]*A[1],C=P[0]*A[0],D=Math.max(P[0]*I,P[1]),k=p%E==0,R=f%C==0,M=d%D==0,j=x?[I,4,4]:[1,1,1],L=["@group(0) @binding(0) var<storage, read> x: array<".concat(x&&4===I?"vec4<f32>":"f32",">;"),"@group(0) @binding(1) var<storage, read> w: array<".concat(x?"vec4<f32>":"f32",">;")],F="\n      fn setOutputAtIndex(flatIndex : i32, value : ".concat(x?"vec4<f32>":"f32",") {\n        result[flatIndex] = ").concat(x?"vec4<f32>":"f32","(value);\n      }\n      fn setOutputAtCoords(d0 : i32, d1 : i32, d2 : i32, d3 : i32, value : ").concat(x?"vec4<f32>":"f32",") {\n        let flatIndex = getOutputIndexFromCoords(vec4<i32>(d0, d1, d2, d3));\n        setOutputAtIndex(flatIndex ").concat(x?"/ 4":"",", value);\n      }");return h&&(L.push("@group(0) @binding(2) var<storage, read> bias: array<".concat(x?"vec4<f32>":"f32",">;")),F+="\n        fn getBiasByOutputCoords(coords : vec4<i32>) -> ".concat(x?"vec4<f32>":"f32"," {\n          return bias[coords.").concat(y?"w":"y").concat(x?"/ 4":"","];\n        }")),r(r({},t),{outputs:[{dims:l,dataType:e[0].dataType,gpuDataType:a.GpuDataType.default}],dispatchGroup:function(){return{x:O[0],y:O[1],z:O[2]}},getShaderSource:function(){return"\n        ".concat(s.utilFunctions,"\n        //struct Uniforms { xShape : vec4<i32>, wShape : vec4<i32>, outShape : vec4<i32>,\n        //  outShapeStrides: vec3<i32>, filterDims : vec2<i32>, pad : vec2<i32>, stride : vec2<i32>,\n        //  dilation : vec2<i32>, dimAOuter : i32, dimBOuter : i32, dimInner : i32 };\n        ").concat(L.join(""),"\n        @group(0) @binding(").concat(L.length,") var<storage, read_write> result: array<").concat(x?"vec4<f32>":"f32",">;\n        //@group(0) @binding(").concat(L.length+1,") var<uniform> uniforms: Uniforms;\n\n        const xShape : vec4<i32> = vec4<i32>(").concat(e[0].dims.join(","),");\n        const wShape : vec4<i32> = vec4<i32>(").concat(e[1].dims.join(","),");\n        const outShape : vec4<i32> = vec4<i32>(").concat(l.join(","),");\n        const outShapeStrides : vec3<i32> = vec3<i32>(").concat(i.ShapeUtil.computeStrides(l).slice(0,3).join(","),");\n        const filterDims : vec2<i32> = vec2<i32>(").concat(n.kernelShape[0],", ").concat(n.kernelShape[1],");\n        const pad : vec2<i32> = vec2<i32>(").concat(n.pads[0],", ").concat(n.pads[1],");\n        const stride : vec2<i32> = vec2<i32>(").concat(n.strides[0],", ").concat(n.strides[1],");\n        const dilation : vec2<i32> = vec2<i32>(").concat(n.dilations[0],", ").concat(n.dilations[1],");\n        const dimAOuter : i32 = ").concat(p,";\n        const dimBOuter : i32 = ").concat(f,";\n        const dimInner : i32 = ").concat(d,";\n        ").concat(F,"\n        ").concat(function(e,t,n,r,o,i,a,s,c,l){void 0===o&&(o=!1),void 0===a&&(a=!1),void 0===s&&(s=4),void 0===c&&(c=4),void 0===l&&(l=4);var p=e?"\n    let coord = vec4<i32>(batch, xRow, xCol, xCh);\n    ":"\n    let coord = vec4<i32>(batch, xCh, xRow, xCol);\n    ",f=e?"\n    let coords = vec4<i32>(\n      batch,\n      row / outWidth,\n      row % outWidth,\n      col);\n    ":"\n    let coords = vec4<i32>(\n      batch,\n      row,\n      col / outWidth,\n      col % outWidth);\n    ",d=e?"xShape[1]":"xShape[2]",h=e?"xShape[2]":"xShape[3]",g=e?"row":"col",y=e?"col":"row",m="\n    let inChannels = wShape[2];\n    let outWidth = ".concat(e?"outShape[2]":"outShape[3]",";\n    let outRow = ").concat(g," / outWidth;\n    let outCol = ").concat(g," % outWidth;\n\n    let WRow = ").concat(y," / (filterDims[1] * inChannels);\n    let WCol = ").concat(y," / inChannels % filterDims[1];\n    let xRow = outRow * stride[0] + dilation[0] * WRow - pad[0];\n    let xCol = outCol * stride[1] + dilation[1] * WCol - pad[1];\n    let xCh = ").concat(y," % inChannels;\n    var resData = ").concat((0,u.typeSnippet)(s),"(0.0);\n    // The bounds checking is always needed since we use it to pad zero for\n    // the 'same' padding type.\n    if (xRow >= 0 && xRow < ").concat(d," && xCol >= 0 && xCol < ").concat(h,") {\n      ").concat(p,"\n      let xIndex = getIndexFromCoords4D(coord, xShape);\n      ").concat(function(e){switch(e){case 1:return"resData = x[xIndex];";case 3:return"resData = vec3<f32>(x[xIndex], x[xIndex + 1], x[xIndex + 2]);";case 4:return"resData = x[xIndex / 4];";default:throw new Error("innerElementSize ".concat(e," is not supported."))}}(s),"\n    }\n    return resData;"),v=e?t&&r?"\n    let col = colIn * ".concat(s,";\n    ").concat(m):"\n    let col = colIn * ".concat(s,";\n    if (row < dimAOuter && col < dimInner) {\n      ").concat(m,"\n    }\n    return ").concat((0,u.typeSnippet)(s),"(0.0);"):r&&n?"\n    let col = colIn * ".concat(s,";\n    ").concat(m):"\n    let col = colIn * ".concat(s,";\n    if (row < dimInner && col < dimBOuter) {\n      ").concat(m,"\n    }\n    return ").concat((0,u.typeSnippet)(s),"(0.0);"),b="".concat(function(e){switch(e){case 1:return"return w[row * wShape[3] + colIn];";case 4:return"return w[row * wShape[3] / 4 + colIn];";default:throw new Error("innerElementSize ".concat(e," is not supported."))}}(c)),w=(0,u.typeSnippet)(l),_=e?(0,u.typeSnippet)(s):(0,u.typeSnippet)(c),x=e?(0,u.typeSnippet)(c):(0,u.typeSnippet)(s);return"\n    ".concat((0,u.activationFnSnippet)(i,a,4===l,4),"\n    fn mm_readA(batch: i32, row : i32, colIn : i32) -> ").concat(_," {\n      ").concat(e?v:b,"\n    }\n\n    fn mm_readB(batch: i32, row : i32, colIn : i32) -> ").concat(x," {\n      ").concat(e?b:v,"\n    }\n\n    fn mm_write(batch: i32, row : i32, colIn : i32, valueIn : ").concat(w,") {\n      let col = colIn * ").concat(l,";\n      if (row < dimAOuter && col < dimBOuter)\n      {\n      var value = valueIn;\n      let outWidth = ").concat(e?"outShape[2]":"outShape[3]",";\n      ").concat(f,"\n      ").concat((0,u.biasActivationSnippet)(o,i),"\n      setOutputAtCoords(coords[0], coords[1], coords[2], coords[3], value);\n      }\n    }")}(y,k,R,M,h,void 0,!1,j[0],j[1],j[2]),"\n            ").concat(x?(0,c.makeMatMulPackedVec4Source)(A,P,!y,D):(0,c.makeMatMulPackedSource)(A,P,!y,D,!1,void 0,g))}})}},6514:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.createConvTranspose2DProgramInfo=void 0;var o=n(4955),i=n(6952),a=n(1163),u=n(2075);t.createConvTranspose2DProgramInfo=function(e,t,n,s){var c=e.length>2,l="NHWC"===n.format,p=n.outputShape,f=p[0],d=p[l?1:2],h=p[l?2:3],g=p[l?3:1],y=e[0].dims[l?3:1]%4==0&&g%4==0,m=l?g:d*h,v=l?d*h:g,b=y?[8,8,1]:[m<=4?4:16,m>4&&v<=4?4:16,1],w=y?[4,4,1]:[m<=4?1:2,m>4&&v<=4?1:2,1],_=[Math.ceil(m/b[0]/w[0]),Math.ceil(v/b[1]/w[1]),Math.ceil(f/b[2]/w[1])];return(0,o.LOG_DEBUG)("verbose",(function(){return"[conv2d_backprop_webgpu] dispatch = ".concat(_)})),r(r({},t),{outputs:[{dims:s?s(p):p,dataType:e[0].dataType,gpuDataType:a.GpuDataType.default}],dispatchGroup:function(){return{x:_[0],y:_[1],z:_[2]}},getShaderSource:function(t){return function(e,t,n,r,o,a){var s="NHWC"===n.format,c=s?1:2,l=s?2:3,p=s?3:1,f=i.ShapeUtil.size(r),d=r[s?3:1],h=t[0].dims[s?3:1],g=h%4==0&&d%4==0,y=g?2:1,m=["@group(0) @binding(0) var<storage, read> Dy: array<".concat(g&&4===(g?s&&h%4!=0?3:4:a[0])?"vec4<f32>":"f32",">;"),"@group(0) @binding(1) var<storage, read> W: array<".concat(g?"vec4<f32>":"f32",">;")],v="\n  fn setOutputAtIndex(flatIndex : u32, value : ".concat(g?"vec4<f32>":"f32",") {\n    result[flatIndex] = ").concat(g?"vec4<f32>":"f32","(value);\n  }");o&&(m.push("@group(0) @binding(2) var<storage, read> bias: array<".concat(g?"vec4<f32>":"f32",">;")),v+="\n    fn getBiasByOutputCoords(coords : vec4<u32>) -> ".concat(g?"vec4<f32>":"f32"," {\n      return bias[coords.").concat(s?"w":"y").concat(g?"/ 4":"","];\n    }"));var b=(0,u.createIndicesHelper)("W",t[1].dims),w=(0,u.createIndicesHelper)("Dy",t[0].dims),_=(0,u.createIndicesHelper)("result",r),x="{\n        let batch: u32 = global_id.z / outShape[1];\n        let r = global_id.z % outShape[1];\n        let c = global_id.y * ".concat(y,";\n        let d1: u32 = global_id.x * 4;\n\n        let dyCorner = vec2<i32>(i32(r), i32(c)) - vec2<i32>(pads);\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        var dotProd: array<vec4<f32>, ").concat(y,">;\n        for (var i = 0; i < ").concat(y,"; i++) {\n          dotProd[i] = vec4<f32>(0.0);\n        }\n        for (var wR: u32 = 0; wR < filterDims[0]; wR = wR + 1) {\n          var dyR = f32(dyCorner.x + wR) / f32(strides.x);\n          let wRPerm: u32= filterDims[0] - 1 - wR;\n          if (dyR < 0.0 || dyR >= f32(outBackprop[1]) ||\n              fract(dyR) > 0.0) {\n            continue;\n          }\n          let idyR: u32 = u32(dyR);\n\n          for (var wC: u32 = 0; wC < filterDims[1]; wC = wC + 1) {\n            let dyC = f32(dyCorner.y + wC) / f32(strides.y);\n            let dyC2 = f32(dyCorner.y + 1 + wC) / f32(strides.y);\n            let wCPerm: u32 = filterDims[1] - 1 - wC;\n            var bDyCVal = true;\n            var bDyCVal2 = true;\n            if (dyC < 0.0 || dyC >= f32(outBackprop[2]) ||\n                fract(dyC) > 0.0) {\n              bDyCVal = false;\n            }\n            if (dyC2 < 0.0 || dyC2 >= f32(outBackprop[2]) ||\n                fract(dyC2) > 0.0) {\n              bDyCVal2 = false;\n            }\n\n            let idyC: u32 = u32(dyC);\n            let idyC2: u32 = u32(dyC2);\n            if (bDyCVal && bDyCVal2) {\n              let d2Length = outBackprop[3];\n              for (var d2 :u32 = 0; d2 < d2Length; d2 = d2 + 4) {\n                ").concat(b.indicesVariableDeclaration("wIndices0",["d2","d1","wRPerm","wCPerm"]),";\n                ").concat(b.indicesVariableDeclaration("wIndices1",["d2","d1+1","wRPerm","wCPerm"]),";\n                ").concat(b.indicesVariableDeclaration("wIndices2",["d2","d1+2","wRPerm","wCPerm"]),";\n                ").concat(b.indicesVariableDeclaration("wIndices3",["d2","d1+3","wRPerm","wCPerm"]),";\n                let wValue0 = W[").concat(b.i2oExpression("wIndices0"),"];\n                let wValue1 = W[").concat(b.i2oExpression("wIndices1"),"];\n                let wValue2 = W[").concat(b.i2oExpression("wIndices2"),"];\n                let wValue3 = W[").concat(b.i2oExpression("wIndices3"),"];\n                ").concat(w.indicesVariableDeclaration("dyIndices",s?["batch","idyR","idyC","d2"]:["batch","d2","idyR","idyC"]),";\n                var xValue =  Dy[").concat(w.i2oExpression("dyIndices"),"];\n                let tmpval = vec4<f32>(xValue * wValue0,\n                                      xValue * wValue1,\n                                      xValue * wValue2,\n                                      xValue * wValue3);\n                dotProd[0] = dotProd[0] + tmpval;\n\n                ").concat(w.indicesVariableDeclaration("dyIndices2",s?["batch","idyR","idyC2","d2"]:["batch","d2","idyR","idyC2"]),";\n                xValue =  Dy[").concat(w.i2oExpression("dyIndices"),"];\n\n                dotProd[1] = dotProd[1] + vec4<f32>(xValue * wValue0,\n                                                    xValue * wValue1,\n                                                    xValue * wValue2,\n                                                    xValue * wValue3);\n              }\n            } else if (bDyCVal) {\n              let d2Length = outBackprop[3];\n              for (var d2: u32 = 0; d2 < d2Length; d2 = d2 + 4) {\n                ").concat(b.indicesVariableDeclaration("wIndices0",["d2","d1","wRPerm","wCPerm"]),";\n                ").concat(b.indicesVariableDeclaration("wIndices1",["d2","d1+1","wRPerm","wCPerm"]),";\n                ").concat(b.indicesVariableDeclaration("wIndices2",["d2","d1+2","wRPerm","wCPerm"]),";\n                ").concat(b.indicesVariableDeclaration("wIndices3",["d2","d1+3","wRPerm","wCPerm"]),";\n                let wValue0 = W[").concat(b.i2oExpression("wIndices0"),"];\n                let wValue1 = W[").concat(b.i2oExpression("wIndices1"),"];\n                let wValue2 = W[").concat(b.i2oExpression("wIndices2"),"];\n                let wValue3 = W[").concat(b.i2oExpression("wIndices3"),"];\n                ").concat(w.indicesVariableDeclaration("dyIndices",s?["batch","idyR","idyC","d2"]:["batch","d2","idyR","idyC"]),";\n                var xValue =  Dy[").concat(w.i2oExpression("dyIndices"),"];\n                let tmpval = vec4<f32>(xValue * wValue0,\n                                      xValue * wValue1,\n                                      xValue * wValue2,\n                                      xValue * wValue3);\n                dotProd[0] = dotProd[0] + tmpval;\n              }\n            } else if (bDyCVal2) {\n              let d2Length = outBackprop[3];\n              for (var d2: u32 = 0; d2 < d2Length; d2 = d2 + 4) {\n                ").concat(b.indicesVariableDeclaration("wIndices0",["d2","d1","wRPerm","wCPerm"]),";\n                ").concat(b.indicesVariableDeclaration("wIndices1",["d2","d1+1","wRPerm","wCPerm"]),";\n                ").concat(b.indicesVariableDeclaration("wIndices2",["d2","d1+2","wRPerm","wCPerm"]),";\n                ").concat(b.indicesVariableDeclaration("wIndices3",["d2","d1+3","wRPerm","wCPerm"]),";\n                let wValue0 = W[").concat(b.i2oExpression("wIndices0"),"];\n                let wValue1 = W[").concat(b.i2oExpression("wIndices1"),"];\n                let wValue2 = W[").concat(b.i2oExpression("wIndices2"),"];\n                let wValue3 = W[").concat(b.i2oExpression("wIndices3"),"];\n                ").concat(w.indicesVariableDeclaration("dyIndices",s?["batch","idyR","idyC","d2"]:["batch","d2","idyR","idyC"]),";\n                var xValue =  Dy[").concat(w.i2oExpression("dyIndices"),"];\n                let tmpval = vec4<f32>(xValue * wValue0,\n                                      xValue * wValue1,\n                                      xValue * wValue2,\n                                      xValue * wValue3);\n                dotProd[1] = dotProd[1] + tmpval;\n              }\n            }\n          }\n        }\n\n        for (var i: u32 = 0; i < ").concat(y,"; i = i + 1) {\n          ").concat(_.indicesVariableDeclaration("outputIndices",["batch","r","c+i","d1"]),";\n          result[").concat(_.i2oExpression("outputIndices"),"] = dotProd[i];\n        }\n      }"),T="\n          ".concat(_.o2iCall("global_idx","outputIndices"),"\n          let batch = outputIndices[0];\n          let d1 = outputIndices[").concat(p,"];\n          let dyCorner = vec2<i32>(i32(outputIndices[").concat(c,"]), i32(outputIndices[").concat(l,"])) - pads;\n          let dyRCorner = dyCorner.x;\n          let dyCCorner = dyCorner.y;\n          // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n          // ? = to be determined. : = across all values in that axis.\n          var dotProd = 0.0;\n          for (var wR: u32 = 0; wR < effectiveFilterDims.x; wR = wR + 1) {\n            if (wR % dilations.x != 0) {\n              continue;\n            }\n            let dyR = (f32(dyRCorner) + f32(wR)) / f32(strides[0]);\n            let wRPerm = filterDims.x - 1 - wR / dilations.x;\n            if (dyR < 0.0 || dyR >= f32(outBackprop[1]) || fract(dyR) > 0.0 ||\n                wRPerm < 0) {\n              continue;\n            }\n            let idyR: u32 = u32(dyR);\n\n            for (var wC: u32 = 0; wC < effectiveFilterDims.y; wC = wC + 1) {\n              if (wC % dilations.y != 0) {\n                continue;\n              }\n              let dyC = (f32(dyCCorner) + f32(wC)) / f32(strides.y);\n              let wCPerm = filterDims.y - 1 - wC / dilations.y;\n              if (dyC < 0.0 || dyC >= f32(outBackprop[2]) ||\n                  fract(dyC) > 0.0 || wCPerm < 0) {\n                continue;\n              }\n              let idyC: u32 = u32(dyC);\n\n              for (var d2: u32 = 0; d2 < outBackprop[3]; d2 = d2 + 1) {\n                ").concat(w.indicesVariableDeclaration("dyIndices",s?["batch","idyR","idyC","d2"]:["batch","d2","idyR","idyC"]),";\n                let xValue =  Dy[").concat(w.i2oExpression("dyIndices"),"];\n                  ").concat(b.indicesVariableDeclaration("wIndices",["d2","d1","wRPerm","wCPerm"]),";\n\n                let wValue = W[").concat(b.i2oExpression("wIndices"),"];\n                dotProd = dotProd + xValue * wValue;\n              }\n            }\n          }\n          result[global_idx] = dotProd;\n        ");return"\n".concat(b.i2oImpl,"\n  ").concat(w.i2oImpl,"\n  ").concat(_.o2iImpl,"\n  ").concat(v,"\n  ").concat(m.join("\n"),"\n  @group(0) @binding(").concat(m.length,") var<storage, read_write> result: array<").concat(g?"vec4<f32>":"f32",">;\n  const outShape : vec4<u32> = vec4<u32>(").concat(r.join(","),");\n  const outBackprop : vec4<u32> = vec4<u32>(").concat(t[0].dims.join(","),");\n  const strides : vec2<u32> = vec2<u32>(").concat(n.strides[0],", ").concat(n.strides[1],");\n  const filterDims : vec2<u32> = vec2<u32>(").concat(n.kernelShape[s?1:2],", ").concat(n.kernelShape[s?2:3],");\n  const dilations : vec2<u32> = vec2<u32>(").concat(n.dilations[0],", ").concat(n.dilations[1],");\n  const effectiveFilterDims : vec2<u32> = filterDims + vec2<u32>(\n          ").concat(n.dilations[0]<=1?0:(n.kernelShape[s?1:2]-1)*(n.dilations[0]-1),",\n          ").concat(n.dilations[1]<=1?0:(n.kernelShape[s?2:3]-1)*(n.dilations[1]-1),");\n  const pads : vec2<i32> = vec2<i32>(i32(effectiveFilterDims[0]) - 1 - (").concat(n.pads[0]+n.pads[2],")/2,\n                                     i32(effectiveFilterDims[1]) - 1 - (").concat(n.pads[1]+n.pads[3],")/2);\n    ").concat(e.mainStart(),"\n    ").concat(_.indicesVariableDeclaration("outputIndices"),"\n    ").concat(e.guardAgainstOutOfBoundsWorkgroupSizes(f),";\n  ").concat(g?x:T,"}")}(t,e,n,p,c,w)}})}},4085:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.utilFunctions=void 0,t.utilFunctions="\nfn getIndexFromCoords4D(coords : vec4<i32>, shape : vec4<i32>) -> i32 {\n  return dot(coords, vec4<i32>(\n      shape.y * shape.z * shape.w, shape.z * shape.w, shape.w, 1));\n}\nfn getOutputIndexFromCoords(coords : vec4<i32>) -> i32 {\n  return dot(coords, vec4<i32>(\n    outShapeStrides.x, outShapeStrides.y, outShapeStrides.z, 1));\n}\n"},158:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeMatMulPackedSource=t.makeMatMulPackedVec4Source=void 0,t.makeMatMulPackedVec4Source=function(e,t,n,r,o,i,a){void 0===n&&(n=!1),void 0===r&&(r=32),void 0===o&&(o=!1),void 0===i&&(i=32),void 0===a&&(a=!1);var u,s=t[1]*e[1],c=t[0]*e[0],l=n?s:r,p=n?r:s,f=l/t[0],d=r/t[1];if((!n||4!==f||4!==e[1])&&(n||3!==f&&4!==f)||l%t[0]!=0||r%t[1]!=0||4!==e[0])throw new Error("If transposeA ".concat(n," is true, innerElementSize ").concat(f," and workPerThread[1] ").concat(e[1]," must be 4.\n      Otherwise, innerElementSize ").concat(f," must be 3 or 4.\n  tileAWidth ").concat(l," must be divisible by workgroupSize[0]").concat(t[0],". tileInner ").concat(r," must be divisible by workgroupSize[1] ").concat(t[1],". colPerThread ").concat(e[0]," must be 4."));return"\nvar<workgroup> mm_Asub : array<array<vec".concat(f,"<f32>, ").concat(l/f,">, ").concat(p,">;\nvar<workgroup> mm_Bsub : array<array<vec4<f32>, ").concat(c/e[0],">, ").concat(r,">;\n\nconst rowPerThread = ").concat(e[1],";\nconst colPerThread = ").concat(e[0],";\nconst innerElementSize = ").concat(f,";\nconst tileInner = ").concat(r,";\n\n@compute @workgroup_size(").concat(t[0],", ").concat(t[1],", ").concat(t[2],")\nfn main(@builtin(local_invocation_id) localId : vec3<u32>,\n        @builtin(global_invocation_id) globalId : vec3<u32>,\n        @builtin(workgroup_id) workgroupId : vec3<u32>) {\n  let localRow = i32(localId.y);\n  let tileRow = ").concat(a?"0":"localRow * rowPerThread",";\n  let tileCol = i32(localId.x);\n\n  let globalRow = ").concat(a?"0":"i32(globalId.y) * rowPerThread",";\n  let globalCol = i32(globalId.x);\n  let batch = ").concat(o?"0":"i32(globalId.z)",";\n  let globalRowStart = i32(workgroupId.y) * ").concat(s,";\n\n  let numTiles = ").concat(o?"".concat(Math.ceil(i/r)):"(dimInner - 1) / tileInner + 1",";\n  var kStart = ").concat(o?"i32(globalId.z) * ".concat(i):"0",";\n\n  var acc: array<vec4<f32>, rowPerThread>;\n\n  // Loop over shared dimension.\n  let tileRowB = localRow * ").concat(d,";\n  for (var t = 0; t < numTiles; t = t + 1) {\n      // Load one tile of A into local memory.\n      for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {\n          let inputRow = tileRow + innerRow;\n          let inputCol = tileCol;\n          ").concat((u=n,u?"\n        mm_Asub[inputRow][inputCol] = mm_readA(batch,\n          kStart + inputRow,\n          globalRowStart / innerElementSize + inputCol);\n        ":"\n        mm_Asub[inputRow][inputCol] = mm_readA(batch,\n          globalRow + innerRow,\n          kStart / innerElementSize + inputCol);\n        "),"\n      }\n\n      // Load one tile of B into local memory.\n      for (var innerRow = 0; innerRow < ").concat(d,"; innerRow = innerRow + 1) {\n          let inputRow = tileRowB + innerRow;\n          let inputCol = tileCol;\n          mm_Bsub[inputRow][inputCol] = mm_readB(batch, kStart + inputRow, globalCol);\n      }\n      kStart = kStart + tileInner;\n      workgroupBarrier();\n\n      // Compute acc values for a single thread.\n      for (var k = 0; k < tileInner / innerElementSize; k = k + 1) {\n          let BCached0 = mm_Bsub[k * innerElementSize][tileCol];\n          let BCached1 = mm_Bsub[k * innerElementSize + 1][tileCol];\n          let BCached2 = mm_Bsub[k * innerElementSize + 2][tileCol];\n          ").concat(3===f?"":"let BCached3 = mm_Bsub[k * innerElementSize + 3][tileCol];","\n\n          ").concat(function(e,t){return e?"\n        let ACached0 = mm_Asub[k * innerElementSize][localRow];\n        let ACached1 = mm_Asub[k * innerElementSize + 1][localRow];\n        let ACached2 = mm_Asub[k * innerElementSize + 2][localRow];\n        ".concat(3===t?"":"let ACached3 = mm_Asub[k * innerElementSize + 3][localRow];","\n        for (var i = 0; i < rowPerThread; i = i + 1) {\n          acc[i] = BCached0 * ACached0[i] + acc[i];\n          acc[i] = BCached1 * ACached1[i] + acc[i];\n          acc[i] = BCached2 * ACached2[i] + acc[i];\n          ").concat(3===t?"":"acc[i] = BCached3 * ACached3[i] + acc[i];","\n        }"):"\n        for (var i = 0; i < rowPerThread; i = i + 1) {\n          let ACached = mm_Asub[tileRow + i][k];\n          acc[i] = BCached0 * ACached.x + acc[i];\n          acc[i] = BCached1 * ACached.y + acc[i];\n          acc[i] = BCached2 * ACached.z + acc[i];\n          ".concat(3===t?"":"acc[i] = BCached3 * ACached.w + acc[i];","\n        }")}(n,f),"\n      }\n\n      workgroupBarrier();\n  }\n\n  for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {\n      mm_write(batch, globalRow + innerRow, globalCol, acc[innerRow]);\n  }\n}")};var n=function(e){return e?"\n            mm_Asub[inputRow][inputCol] = mm_readA(batch,\n              kStart + inputRow,\n              globalRowStart + inputCol);\n            ":"\n            mm_Asub[inputRow][inputCol] = mm_readA(batch,\n              globalRowStart + inputRow,\n              kStart + inputCol);\n            "};t.makeMatMulPackedSource=function(e,t,r,o,i,a,u){void 0===r&&(r=!1),void 0===o&&(o=32),void 0===i&&(i=!1),void 0===a&&(a=32),void 0===u&&(u=!1);var s=e[1]*t[1],c=e[0]*t[0],l=r?s:o,p=r?o:s;if(p%t[1]!=0||l%t[0]!=0||o%t[1]!=0)throw new Error("tileAHight ".concat(p," must be divisible by workgroupSize[1]").concat(t[1],", tileAWidth ").concat(l," must be divisible by workgroupSize[0]").concat(t[0],", tileInner ").concat(o," must be divisible by workgroupSize[1]").concat(t[1]));var f=p/t[1],d=l/t[0],h=o/t[1],g=u?"\n    let localRow = i32(localId.y);\n    let localCol = i32(localId.x);\n    let globalRowStart = i32(workgroupId.y) * ".concat(s,";\n    let globalColStart = i32(workgroupId.x) * ").concat(c,";\n\n    // Loop over shared dimension.\n    for (var t = 0; t < numTiles; t = t + 1) {\n      // Load one tile of A into local memory.\n      for (var inputRow = localRow; inputRow < ").concat(p,"; inputRow = inputRow + ").concat(t[1],") {\n        for (var inputCol = localCol; inputCol < ").concat(l,"; inputCol = inputCol + ").concat(t[0],") {\n          ").concat(n(r),"\n        }\n      }\n      // Load one tile of B into local memory.\n      for (var inputRow = localRow; inputRow < ").concat(o,"; inputRow = inputRow + ").concat(t[1],") {\n            for (var inputCol = localCol; inputCol < ").concat(c,"; inputCol = inputCol + ").concat(t[0],") {\n          mm_Bsub[inputRow][inputCol] = mm_readB(batch,\n            kStart + inputRow,\n            globalColStart + inputCol);\n        }\n      }\n      kStart = kStart + tileInner;\n      workgroupBarrier();\n\n      // Compute acc values for a single thread.\n      var BCached : array<f32, colPerThread>;\n      for (var k = 0; k < tileInner; k = k + 1) {\n        for (var inner = 0; inner < colPerThread; inner = inner + 1) {\n          BCached[inner] = mm_Bsub[k][localCol + inner * ").concat(t[0],"];\n        }\n        for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {\n          let ACached = ").concat(r?"mm_Asub[k][localRow + innerRow * ".concat(t[1],"];"):"mm_Asub[localRow + innerRow * ".concat(t[1],"][k];"),"\n          for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {\n            acc[innerRow][innerCol] = acc[innerRow][innerCol] +\n                ACached * BCached[innerCol];\n          }\n        }\n      }\n      workgroupBarrier();\n    }\n    for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {\n      let gRow = globalRowStart + localRow + innerRow * ").concat(t[1],";\n      for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {\n        let gCol = globalColStart + localCol + innerCol * ").concat(t[0],";\n        mm_write(batch, gRow, gCol, acc[innerRow][innerCol]);\n      }\n    }\n    "):"\nlet tileRow = i32(localId.y) * rowPerThread;\nlet tileCol = i32(localId.x) * colPerThread;\n\nlet globalRow = i32(globalId.y) * rowPerThread;\nlet globalCol = i32(globalId.x) * colPerThread;\nlet globalRowStart = i32(workgroupId.y) * ".concat(s,";\n\nlet tileRowA = i32(localId.y) * ").concat(f,";\nlet tileColA = i32(localId.x) * ").concat(d,";\nlet tileRowB = i32(localId.y) * ").concat(h,";\n// Loop over shared dimension.\nfor (var t = 0; t < numTiles; t = t + 1) {\n  // Load one tile of A into local memory.\n  for (var innerRow = 0; innerRow < ").concat(f,"; innerRow = innerRow + 1) {\n    for (var innerCol = 0; innerCol < ").concat(d,"; innerCol = innerCol + 1) {\n      let inputRow = tileRowA + innerRow;\n      let inputCol = tileColA + innerCol;\n      ").concat(n(r),"\n    }\n  }\n\n  // Load one tile of B into local memory.\n  for (var innerRow = 0; innerRow < ").concat(h,"; innerRow = innerRow + 1) {\n    for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {\n      let inputRow = tileRowB + innerRow;\n      let inputCol = tileCol + innerCol;\n      mm_Bsub[inputRow][inputCol] = mm_readB(batch,\n        kStart + inputRow,\n        globalCol + innerCol);\n    }\n  }\n  kStart = kStart + tileInner;\n  workgroupBarrier();\n\n  // Compute acc values for a single thread.\n  var BCached : array<f32, colPerThread>;\n  for (var k = 0; k < tileInner; k = k + 1) {\n    for (var inner = 0; inner < colPerThread; inner = inner + 1) {\n      BCached[inner] = mm_Bsub[k][tileCol + inner];\n    }\n\n    for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {\n      ").concat(function(e){return e?"let ACached = mm_Asub[k][tileRow + innerRow];":"let ACached = mm_Asub[tileRow + innerRow][k];"}(r),"\n      for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {\n        acc[innerRow][innerCol] = acc[innerRow][innerCol] + ACached * BCached[innerCol];\n      }\n    }\n  }\n\n  workgroupBarrier();\n}\n\nfor (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {\n  for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {\n    mm_write(batch, globalRow + innerRow, globalCol + innerCol,\n        acc[innerRow][innerCol]);\n  }\n}\n");return"\n  var<workgroup> mm_Asub : array<array<f32, ".concat(l,">, ").concat(p,">;\n  var<workgroup> mm_Bsub : array<array<f32, ").concat(c,">, ").concat(o,">;\n  const rowPerThread = ").concat(e[1],";\n  const colPerThread = ").concat(e[0],";\n  const tileInner = ").concat(o,";\n\n@compute @workgroup_size(").concat(t[0],", ").concat(t[1],", ").concat(t[2],")\nfn main(@builtin(local_invocation_id) localId : vec3<u32>,\n        @builtin(global_invocation_id) globalId : vec3<u32>,\n        @builtin(workgroup_id) workgroupId : vec3<u32>) {\n    let batch = ").concat(i?"0":"i32(globalId.z)",";\n    let numTiles = ").concat(i?"".concat(Math.ceil(a/o)):"(dimInner - 1) / tileInner + 1",";\n    var kStart = ").concat(i?"i32(globalId.z) * ".concat(a):"0",";\n\n    var acc : array<array<f32, colPerThread>, rowPerThread>;\n\n    // Without this initialization strange values show up in acc.\n    for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {\n      for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {\n        acc[innerRow][innerCol] = 0.0;\n      }\n    }\n    ").concat(g,"\n  }\n")}},504:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.sub=t.pow=t.mul=t.div=t.add=void 0;var o=n(6952),i=n(1163),a=n(2075),u=function(e,t,n,u,s){var c={name:t,inputTypes:[i.GpuDataType.default,i.GpuDataType.default],cacheHint:s};return r(r({},c),{get:function(){return function(e,t,n,u,s,c){var l,p;void 0===c&&(c=t.dataType);var f=!o.ShapeUtil.areEqual(t.dims,n.dims),d=t.dims,h=o.ShapeUtil.size(t.dims),g=!1;if(f){var y=o.BroadcastUtil.calcShape(t.dims,n.dims,!1);if(!y)throw new Error("Can't perform binary op on the given tensors");d=y,h=o.ShapeUtil.size(d);for(var m=1,v=0;v<d.length;v++){var b=null!==(l=t.dims[t.dims.length-v])&&void 0!==l?l:1;if(b!==(null!==(p=n.dims[n.dims.length-v])&&void 0!==p?p:1))break;m*=b}m%4==0&&(g=!0)}else g=!0;return r(r({},e),{getShaderSource:function(e){return function(e,t,n,r,i,u,s,c,l,p,f){void 0===l&&(l="f32"),void 0===p&&(p="f32"),void 0===f&&(f="f32");var d,h,g=o.ShapeUtil.size(r),y=Math.ceil(g/4);"string"==typeof s?d=h=function(e,t){return"".concat(s,"((").concat(e,"),(").concat(t,"))")}:"function"==typeof s?d=h=s:(d=s.scalar,h=s.vector);var m,v="",b=(0,a.createIndicesHelper)("output",r);if(u){var w=function(e){for(var t=o.ShapeUtil.computeStrides(e),n=[],i=e.length-1;i>=0;i--){var a=0===r.length?"0u":1===r.length?"(*outputIndices)":"(*outputIndices)[".concat(i+r.length-e.length,"]");n.push("".concat(t[i],"u * (").concat(a," % ").concat(e[i],"u)"))}return n.length>0?n.join("+"):"0u"};v="\n  ".concat(b.o2iImpl,"\n\n  fn calcOffsetA(outputIndices: ptr<function, ").concat(b.iType,">) -> u32 {\n    return ").concat(w(t),";\n  }\n\n  fn calcOffsetB(outputIndices: ptr<function, ").concat(b.iType,">) -> u32 {\n    return ").concat(w(n),";\n  }\n  ")}if(i)m=u?"\n      ".concat(b.indicesVariableDeclaration("outputIndices"),"\n      ").concat(b.o2iCall("global_idx * 4u","outputIndices"),"\n      let offsetA = calcOffsetA(&outputIndices);\n      let offsetB = calcOffsetB(&outputIndices);\n      outputData[global_idx] = ").concat(h("aData[offsetA / 4u]","bData[offsetB / 4u]"),";"):"outputData[global_idx] = ".concat(h("aData[global_idx]","bData[global_idx]"),";");else{if(!u)throw new Error("no necessary to use scalar implementation for element-wise binary op implementation.");var _=function(e){var t="aData[indexA".concat(e,"][componentA").concat(e,"]"),n="bData[indexB".concat(e,"][componentB").concat(e,"]");return"\n      ".concat(b.o2iCall("global_idx * 4u + ".concat(e,"u"),"outputIndices"),"\n      let offsetA").concat(e," = calcOffsetA(&outputIndices);\n      let offsetB").concat(e," = calcOffsetB(&outputIndices);\n      let indexA").concat(e," = offsetA").concat(e," / 4u;\n      let indexB").concat(e," = offsetB").concat(e," / 4u;\n      let componentA").concat(e," = offsetA").concat(e," % 4u;\n      let componentB").concat(e," = offsetB").concat(e," % 4u;\n      outputData[global_idx][").concat(e,"] = ").concat(d(t,n),";")};m="\n      ".concat(b.indicesVariableDeclaration("outputIndices"),"\n      ").concat(_(0),"\n      ").concat(_(1),"\n      ").concat(_(2),"\n      ").concat(_(3))}return"\n  @group(0) @binding(0) var<storage, read> aData : array<vec4<".concat(l,">>;\n  @group(0) @binding(1) var<storage, read> bData : array<vec4<").concat(p,">>;\n  @group(0) @binding(2) var<storage, read_write> outputData : array<vec4<").concat(f,">>;\n\n  ").concat(null!=c?c:"","\n  ").concat(v,"\n\n  ").concat(e.mainStart(),"\n    ").concat(e.guardAgainstOutOfBoundsWorkgroupSizes(y),"\n    ").concat(m,"\n  }")}(e,t.dims,n.dims,d,g,f,u,s)},outputs:[{dims:d,dataType:c,gpuDataType:i.GpuDataType.default}],dispatchGroup:function(){return{x:Math.ceil(h/64/(g?4:1))}}})}(c,e[0],e[1],n,u)}})};t.add=function(e){e.compute(u(e.inputs,"Add",(function(e,t){return"".concat(e,"+").concat(t)})))},t.div=function(e){e.compute(u(e.inputs,"Div",(function(e,t){return"".concat(e,"/").concat(t)})))},t.mul=function(e){e.compute(u(e.inputs,"Mul",(function(e,t){return"".concat(e,"*").concat(t)})))},t.pow=function(e){e.compute(u(e.inputs,"Pow",{scalar:function(e,t){return"pow_f32(".concat(e,",").concat(t,")")},vector:function(e,t){return"pow_vf32(".concat(e,",").concat(t,")")}},"\n    fn pow_f32(a : f32, b : f32) -> f32 {\n      if (b == 0.0) {\n        return 1.0;\n      } else if (a < 0.0 && b != floor(b)) {\n        return pow(a, b); // NaN\n      }\n      return select(sign(a), 1.0, round(abs(b) % 2.0) != 1.0) * pow(abs(a), b);\n    }\n    fn pow_vf32(a : vec4<f32>, b : vec4<f32>) -> vec4<f32> {\n      // TODO: implement vectorized pow\n      return vec4<f32>(pow_f32(a.x, b.x), pow_f32(a.y, b.y), pow_f32(a.z, b.z), pow_f32(a.w, b.w));\n    }\n      "))},t.sub=function(e){e.compute(u(e.inputs,"Sub",(function(e,t){return"".concat(e,"-").concat(t)})))}},2075:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createShaderHelper=t.createIndicesHelper=t.WORKGROUP_SIZE=void 0;var r=n(6952);t.WORKGROUP_SIZE=64,t.createIndicesHelper=function(e,t){for(var n=t.length<2?"u32":"array<u32, ".concat(t.length,">"),o=r.ShapeUtil.computeStrides(t),i="",a=0;a<t.length-1;a++)i+="\n    let dim".concat(a," = current / ").concat(o[a],"u;\n    let rest").concat(a," = current % ").concat(o[a],"u;\n    (*indices)[").concat(a,"] = dim").concat(a,";\n    current = rest").concat(a,";\n    ");i+="(*indices)[".concat(t.length-1,"] = current;");var u=t.length<2?"":"\n  fn ih_o2i_".concat(e,"(offset: u32, indices: ptr<function, ").concat(n,">) {\n    var current = offset;\n    ").concat(i,"\n  }"),s=[];if(0===t.length)s.push("0u");else if(t.length<2)s.push("(*indices)");else for(a=t.length-1;a>=0;a--)s.push("".concat(o[a],"u * ((*indices)[").concat(a,"])"));return{o2iImpl:u,o2iCall:function(n,r){return t.length<2?"".concat(r,"=").concat(n,";"):"ih_o2i_".concat(e,"(").concat(n,", &").concat(r,");")},i2oImpl:t.length<2?"":"\n  fn ih_i2o_".concat(e,"(indices: ptr<function, ").concat(n,">) -> u32 {\n    return ").concat(s.join("+"),";\n  }"),i2oExpression:function(n,r){return t.length<2?"(".concat(r?"*":"").concat(n,")"):"ih_i2o_".concat(e,"(").concat(r?"":"&").concat(n,")")},indicesVariableDeclaration:function(e,t){return"var ".concat(e,":").concat(n).concat(t?"=".concat(n,"(").concat(t.join(","),")"):"",";")},iType:n}};var o=function(){function e(e){this.normalizedDispatchGroup=e}return e.prototype.guardAgainstOutOfBoundsWorkgroupSizes=function(e){var t="number"==typeof e?"".concat(e,"u"):e;return"if (global_idx >= ".concat(t,") { return; }")},e.prototype.mainStart=function(e){void 0===e&&(e=t.WORKGROUP_SIZE);var n="number"==typeof e?e:e[0],r="number"==typeof e?1:e[1],o="number"==typeof e?1:e[2],i=1===this.normalizedDispatchGroup[1]&&1===this.normalizedDispatchGroup[2],a=i?"@builtin(global_invocation_id) global_id : vec3<u32>":"@builtin(local_invocation_index) local_index : u32,\n    @builtin(workgroup_id) workgroup_id : vec3<u32>",u=i?"let global_idx = global_id.x;":"let global_idx = (workgroup_id.z * ".concat(this.normalizedDispatchGroup[0]*this.normalizedDispatchGroup[1],"u +\n          workgroup_id.y * ").concat(this.normalizedDispatchGroup[0],"u + workgroup_id.x) * ").concat(n*r*o,"u + local_index;");return"@compute @workgroup_size(".concat(n,", ").concat(r,", ").concat(o,")\n  fn main(").concat(a,") {\n    ").concat(u,"\n  ")},e}();t.createShaderHelper=function(e){return new o(e)}},513:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)},o=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.parseConcatAttributes=t.concat=void 0;var i=n(6952),a=n(387),u=n(1163),s=n(2075);t.concat=function(e,t){!function(e){var t,n;if(!e||e.length<1)throw new Error("too few inputs");var r=e[0].dataType,i=e[0].dims.length;try{for(var a=o(e),u=a.next();!u.done;u=a.next()){var s=u.value;if(s.dataType!==r)throw new Error("input tensors should be one type");if(s.dims.length!==i)throw new Error("input tensors should have the same shape")}}catch(e){t={error:e}}finally{try{u&&!u.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}}(e.inputs),e.compute(function(e,t){var n,o,a=(n=e.length,o=t.cacheKey,{name:"Concat",inputTypes:Array(n).fill(u.GpuDataType.default),cacheHint:o});return r(r({},a),{get:function(){return function(e,t,n,o){void 0===o&&(o="f32");var a=t[0].dims.slice();if(n>=a.length||n<-1*a.length)throw new Error("axis specified for concat doesn't match input dimensionality");for(var c=n<0?a.length+n:n,l=a.slice(0),p=1;p<t.length;p++)for(var f=t[p].dims.slice(),d=0;d<a.length;d++)if(d===c)l[c]+=f[d];else if(a[d]!==f[d])throw new Error("non concat dimensions must match");var h=i.ShapeUtil.size(l),g=l.length,y=new Array(t.length),m=new Array(t.length),v=new Array(t.length),b=0;for(p=0;p<t.length;++p)b+=t[p].dims[c],y[p]=b,m[p]="@group(0) @binding(".concat(p,") var<storage, read> input").concat(p," : array<").concat(o,">;"),v[p]=(0,s.createIndicesHelper)("input".concat(p),t[p].dims);var w=(0,s.createIndicesHelper)("output",l),_=g<2?"indices":"indices[".concat(c,"]");return r(r({},e),{outputs:[{dims:l,dataType:t[0].dataType,gpuDataType:u.GpuDataType.default}],getShaderSource:function(e){return"\n\n  ".concat(m.join("\n"),"\n  @group(0) @binding(").concat(t.length,") var<storage, read_write> output : array<").concat(o,">;\n\n  ").concat(v.map((function(e){return e.i2oImpl})).join("\n"),"\n  ").concat(w.o2iImpl,"\n\n  const sizeInConcatAxis = array<u32, ").concat(y.length,">(").concat(y.map((function(e){return"".concat(e,"u")})).join(","),");\n  ").concat((n=y.length,"\n  fn calculateInputIndex(index: u32) -> u32 {\n    for (var i: u32 = 0u; i < ".concat(n,"u; i += 1u ) {\n      if (index < sizeInConcatAxis[i]) {\n        return i;\n      }\n    }\n    return ").concat(n,"u;\n  }")),"\n  ").concat(function(e,t,n){for(var r=e.length,o=[],i=0;i<r;++i){var a="return input".concat(i,"[").concat(e[i].i2oExpression("indices",!0),"];");1===r?o.push(a):0===i?o.push("if (textureIndex == ".concat(i,"u) { ").concat(a," }")):i===r-1?o.push("else { ".concat(a," }")):o.push("else if (textureIndex == ".concat(i,") { ").concat(a," }"))}return"\n    fn readBufferData(textureIndex: u32, indices: ptr<function, ".concat(e[0].iType,">) -> ").concat(n," {\n      ").concat(o.join("\n"),"\n    }")}(v,0,o),"\n\n  ").concat(e.mainStart(),"\n    ").concat(e.guardAgainstOutOfBoundsWorkgroupSizes(h),"\n\n    ").concat(w.indicesVariableDeclaration("indices"),"\n    ").concat(w.o2iCall("global_idx","indices"),"\n\n    let textureIndex = calculateInputIndex(").concat(_,");\n    if (textureIndex != 0u) {\n      ").concat(_," -= sizeInConcatAxis[textureIndex - 1u];\n    }\n\n    output[global_idx] = readBufferData(textureIndex, &indices);\n  }");var n},dispatchGroup:function(){return{x:Math.ceil(h/64)}}})}(a,e,t.axis)}})}(e.inputs,t))},t.parseConcatAttributes=function(e){return(0,a.createAttributeWithCacheKey)({axis:e.axis})}},9192:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.createGroupedConvProgramInfoLoader=void 0;var o=n(6952),i=n(1163),a=n(2075),u=n(9770),s=n(3997);t.createGroupedConvProgramInfoLoader=function(e,t,n){var c,l,p=(c=e.length>2,l=t.cacheKey,{name:"GroupedConv",inputTypes:c?[i.GpuDataType.default,i.GpuDataType.default,i.GpuDataType.default]:[i.GpuDataType.default,i.GpuDataType.default],cacheHint:l});return r(r({},p),{get:function(){return function(e,t,n,c){var l=e.length>2,p=l?"value += b[output_channel];":"",f=e[0].dims,d=e[1].dims,h=d[0]/n.group,g="f32",y=(0,s.getActicationSnippet)(n),m=y.activationFunction,v=y.applyActivation,b=["@group(0) @binding(0) var<storage, read> x : array<".concat(g,">;"),"@group(0) @binding(1) var<storage, read> w : array<".concat(g,">;")];l&&b.push("@group(0) @binding(2) var<storage, read> b : array<".concat(g,">;"));var w="NHWC"===n.format,_=(0,u.calculateOutputShape)(f,d,n.dilations,n.pads,n.strides,w),x=o.ShapeUtil.size(_),T=(0,a.createIndicesHelper)("output",_),S=(0,a.createIndicesHelper)("x",f),P=(0,a.createIndicesHelper)("w",d);return r(r({},t),{outputs:[{dims:c?c(_):_,dataType:e[0].dataType,gpuDataType:i.GpuDataType.default}],getShaderSource:function(e){return"\n  const strides: vec2<u32> = vec2(".concat(n.strides[0],"u, ").concat(n.strides[1],"u);\n  const pads: vec2<u32> = vec2(").concat(n.pads[0],"u, ").concat(n.pads[1],"u);\n\n  ").concat(b.join("\n"),"\n  @group(0) @binding(").concat(b.length,") var<storage, read_write> output : array<").concat(g,">;\n\n  ").concat(m,"\n  ").concat(T.o2iImpl,"\n  ").concat(S.i2oImpl,"\n  ").concat(P.i2oImpl,"\n\n  ").concat(e.mainStart(),"\n    ").concat(e.guardAgainstOutOfBoundsWorkgroupSizes(x),"\n\n    ").concat(T.indicesVariableDeclaration("outputIndices"),"\n    ").concat(T.o2iCall("global_idx","outputIndices"),"\n    let batch: u32 = outputIndices[0];\n    let output_channel: u32 = outputIndices[").concat(w?3:1,"];\n    let xRCCorner: vec2<u32> = vec2<u32>(outputIndices[").concat(w?1:2,"], outputIndices[").concat(w?2:3,"]) * strides - pads;\n    let group_id: u32 = output_channel / ").concat(h,"u;\n\n    var value: ").concat(g," = ").concat(g,"(0);\n    for (var wInChannel: u32 = 0u; wInChannel < ").concat(d[1],"u; wInChannel++) {\n      let input_channel = group_id * ").concat(d[1],"u + wInChannel;\n      for (var wHeight: u32 = 0u; wHeight < ").concat(d[2],"u; wHeight++) {\n        let xHeight = xRCCorner.x + wHeight * ").concat(n.dilations[0],"u;\n\n        if (xHeight < 0u || xHeight >= ").concat(f[w?1:2],"u) {\n          continue;\n        }\n\n        for (var wWidth: u32 = 0u; wWidth < ").concat(d[3],"u; wWidth++) {\n          let xWidth = xRCCorner.y + wWidth * ").concat(n.dilations[1],"u;\n          if (xWidth < 0u || xWidth >= ").concat(f[w?2:3],"u) {\n            continue;\n          }\n\n          ").concat(S.indicesVariableDeclaration("xIndices",w?["batch","xHeight","xWidth","input_channel"]:["batch","input_channel","xHeight","xWidth"]),"\n          let xVal = x[").concat(S.i2oExpression("xIndices"),"];\n          ").concat(P.indicesVariableDeclaration("wIndices",["output_channel","wInChannel","wHeight","wWidth"]),"\n          let wVal = w[").concat(P.i2oExpression("wIndices"),"];\n          value += xVal*wVal;\n        }\n      }\n    }\n    ").concat(p,"\n    ").concat(v,"\n    output[global_idx] = value;\n  }")},dispatchGroup:function(){return{x:Math.ceil(x/64)}}})}(e,p,t,n)}})}},7640:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.convTranspose=t.parseConvTransposeAttributes=void 0;var o=n(387),i=n(1163),a=n(6514),u=n(3997),s=function(e,t,n,r,o,i){return(e-1)*t+n+(r-1)*o+1-i},c=function(e,t,n,r,o){var i=Math.floor(e/2);"SAME_UPPER"===t?(n[r]=i,n[o]=e-i):"SAME_LOWER"===t&&(n[r]=e-i,n[o]=i)},l=function(e,t){var n=e.kernelShape.slice();if(0===e.kernelShape.length||0===e.kernelShape.reduce((function(e,t){return e*t}),0)){n.length=0;for(var r=2;r<t[1].dims.length;++r)n.push(t[1].dims[r])}var o="NHWC"===e.format;n.splice(0,0,t[1].dims[0]),n.splice(o?3:1,0,t[1].dims[1]);var i=e.pads.slice(),a=e.outputShape.slice(),u=e.outputPadding.slice(),l=t[0].dims,p=e.dilations.slice();if(0===p.reduce((function(e,t){return e+t}),0)){var f=t[0].dims.length-2;p=new Array(f).fill(1)}var d=e.strides.slice();0===d.reduce((function(e,t){return e+t}),0)&&(f=t[0].dims.length-2,d=new Array(f).fill(1)),function(e,t,n,r,o,i,a,u,l,p){var f=e.length-2,d=0===p.length;if(0===l.length)for(var h=0;h<f;++h)l.push(0);for(var g=e[0],y=t[u?3:1]*o,m=(h=0,e.length-f-(u?1:0));h<f;++h,++m){var v=e[m],b=d?v*a[h]:p[h],w=s(v,a[h],i[h],t[m],n[h],b);c(w,r,i,h,h+f),d&&p.push(a[h]*(v-1)+l[h]+(t[m]-1)*n[h]+1-i[h]-i[h+f])}p.splice(0,0,g),p.splice(u?3:1,0,y)}(l,n,p,e.autoPad,e.group,i,d,o,u,a);var h=Object.assign({},e);return Object.assign(h,{kernelShape:n,pads:i,outputPadding:u,outputShape:a,dilations:p,strides:d,cacheKey:e.cacheKey}),h};t.parseConvTransposeAttributes=function(e){var t=(0,u.parseInternalActivationAttributes)(e),n=e.format,i=["NOTSET","VALID","SAME_UPPER","SAME_LOWER"][void 0===e.autoPad?0:e.autoPad],a=e.dilations,s=e.group,c=e.kernelShape,l=e.pads,p=e.strides,f=e.wIsConst(),d=e.outputPadding,h=e.outputShape;return(0,o.createAttributeWithCacheKey)(r({autoPad:i,format:n,dilations:a,group:s,kernelShape:c,outputPadding:d,outputShape:h,pads:l,strides:p,wIsConst:f},t))};var p=function(e,t,n){var o,u,s=(o=3===e.length,u=t.cacheKey,{name:"ConvTranspose2D",inputTypes:o?[i.GpuDataType.default,i.GpuDataType.default,i.GpuDataType.default]:[i.GpuDataType.default,i.GpuDataType.default],cacheHint:u});return r(r({},s),{get:function(){return(0,a.createConvTranspose2DProgramInfo)(e,s,t,n)}})};t.convTranspose=function(e,t){!function(e,t){if(!e||2!==e.length&&3!==e.length)throw new Error("Conv requires 2 or 3 inputs");if(4!==e[0].dims.length&&3!==e[0].dims.length)throw new Error("currently only support 2-dimensional conv");if(e[0].dims.length!==e[1].dims.length)throw new Error("filter does not have same dimension as input");if(e[0].dims["NHWC"===t.format?e[0].dims.length-1:1]!==e[1].dims[0])throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");var n=e[1].dims[1]*t.group;if(3===e.length&&(1!==e[2].dims.length||e[2].dims[0]!==n))throw new Error("invalid bias");var r=e[0].dims.length-2;if(t.dilations.reduce((function(e,t){return e+t}),0)>0&&t.dilations.length!==r)throw new Error("dilations should be ".concat(r,"D"));if(t.strides.reduce((function(e,t){return e+t}),0)>0&&t.strides.length!==r)throw new Error("strides should be ".concat(r,"D"));if(t.pads.reduce((function(e,t){return e+t}),0)>0&&t.pads.length!==2*r)throw new Error("pads should be ".concat(2*r,"D"));if(t.outputPadding.length!==r&&0!==t.outputPadding.length)throw new Error("output_padding should be ".concat(r,"D"));if(t.kernelShape.reduce((function(e,t){return e+t}),0)>0&&0!==t.kernelShape.length&&t.kernelShape.length!==e[1].dims.length-2)throw new Error("invalid kernel shape");if(0!==t.outputShape.length&&t.outputShape.length!==e[0].dims.length-2)throw new Error("invalid output shape");if(1!==e[0].dataType||1!==e[1].dataType)throw new Error("ConvTranspose input(X,W) should be float tensor");if(3===e.length&&1!==e[2].dataType)throw new Error("ConvTranspose input(bias) should be float tensor")}(e.inputs,t),3===e.inputs[0].dims.length?function(e,t){var n="NHWC"===t.format,o=[e.inputs[0].reshape(n?[e.inputs[0].dims[0],1,e.inputs[0].dims[1],e.inputs[0].dims[2]]:[e.inputs[0].dims[0],e.inputs[0].dims[1],1,e.inputs[0].dims[2]]),e.inputs[1].reshape([e.inputs[1].dims[0],e.inputs[1].dims[1],1,e.inputs[1].dims[2]])];3===o.length&&o.push(e.inputs[2]);var i=t.kernelShape;0!==i.length&&0!==i[0]||(i=[e.inputs[1].dims[2]]);var a=t.dilations;0!==a.length&&0!==a[0]||(a=[1]);var u=t.strides;0!==u.length&&0!==u[0]||(u=[1]);var s=t.pads;0===s.length&&(s=[0,0]),s=[0,s[0],0,s[1]],u=[1].concat(u),a=[1].concat(a),i=[1].concat(i);var c=l(r(r({},t),{pads:s,strides:u,dilations:a,kernelShape:i}),o);e.compute(p(o,c,(function(e){return n?[e[0],e[2],e[3]]:[e[0],e[1],e[3]]})))}(e,t):function(e,t,n){var r=l(n,t);e.compute(p(t,r))}(e,e.inputs,t)}},9770:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.conv=t.parseConvAttributes=t.calculateOutputShape=void 0;var o=n(6952),i=n(387),a=n(9192),u=n(3822),s=n(3997),c=n(2625);t.calculateOutputShape=function(e,t,n,r,o,i){var a=e[0],u=e.slice(i?1:2,i?3:4),s=u.length,c=t[0],l=t.slice(2).map((function(e,t){return e+(e-1)*(n[t]-1)})),p=u.map((function(e,t){return e+r[t]+r[t+s]})).map((function(e,t){return Math.floor((e-l[t]+o[t])/o[t])}));return p.splice(0,0,a),p.splice(i?3:1,0,c),p};var l=(0,i.createAttributeWithCacheKey)({perm:[2,3,1,0]}),p=function(e,t){for(var n=e.kernelShape.slice(),r=2;r<t[1].dims.length;++r)0===n[r-2]&&(n[r-2]=t[1].dims[r]);var i=e.pads.slice();o.PoolConvUtil.adjustPadsBasedOnAutoPad(t[0].dims,e.strides,e.dilations,n,i,"NHWC"===e.format,e.autoPad);var a=Object.assign({},e);return Object.assign(a,{kernelShape:n,pads:i,cacheKey:e.cacheKey}),a};t.parseConvAttributes=function(e){var t=(0,s.parseInternalActivationAttributes)(e),n=e.format,o=["NOTSET","VALID","SAME_UPPER","SAME_LOWER"][e.auto_pad],a=e.dilations,u=e.group,c=e.kernel_shape,l=e.pads,p=e.strides,f=e.w_is_const();return(0,i.createAttributeWithCacheKey)(r({autoPad:o,format:n,dilations:a,group:u,kernelShape:c,pads:l,strides:p,wIsConst:f},t))},t.conv=function(e,n){!function(e,t){if(!e||2!==e.length&&3!==e.length)throw new Error("Conv requires 2 or 3 inputs");if(4!==e[0].dims.length&&3!==e[0].dims.length)throw new Error("currently only support conv 1D and 2D");if(e[0].dims.length!==e[1].dims.length)throw new Error("filter does not have same dimension as input");if(e[0].dims["NHWC"===t.format?e[0].dims.length-1:1]!==e[1].dims[1]*t.group)throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");if(3===e.length&&(1!==e[2].dims.length||e[1].dims[0]!==e[2].dims[0]))throw new Error("invalid bias");var n=e[0].dims.length-2;if(t.dilations.length!==n)throw new Error("dilations should be ".concat(n,"D"));if(t.strides.length!==n)throw new Error("strides should be ".concat(n,"D"));if(t.pads.length!==2*n)throw new Error("pads should be ".concat(2*n,"D"));if(0!==t.kernelShape.length&&t.kernelShape.length!==e[1].dims.length-2)throw new Error("invalid kernel shape");if(1!==e[0].dataType||1!==e[1].dataType)throw new Error("Conv input(X,W) should be float tensor");if(3===e.length&&1!==e[2].dataType)throw new Error("Conv input(bias) should be float tensor")}(e.inputs,n),3===e.inputs[0].dims.length?function(e,t){var n="NHWC"===t.format,o=[e.inputs[0].reshape(n?[e.inputs[0].dims[0],1,e.inputs[0].dims[1],e.inputs[0].dims[2]]:[e.inputs[0].dims[0],e.inputs[0].dims[1],1,e.inputs[0].dims[2]]),e.inputs[1].reshape([e.inputs[1].dims[0],e.inputs[1].dims[1],1,e.inputs[1].dims[2]])];3===e.inputs.length&&o.push(e.inputs[2]);var i=[0,t.pads[0],0,t.pads[1]],u=[1].concat(t.strides),s=[1].concat(t.dilations),c=[1].concat(t.kernelShape),l=p(r(r({},t),{pads:i,strides:u,dilations:s,kernelShape:c}),o);e.compute((0,a.createGroupedConvProgramInfoLoader)(o,l,(function(e){return n?[e[0],e[2],e[3]]:[]})))}(e,n):function(e,n,o){var i,s=p(o,n),f=3===n.length,d="NHWC"===o.format,h=n[0].dims[d?1:2],g=n[0].dims[d?2:3],y=n[0].dims[d?3:1],m=n[1].dims[2],v=n[1].dims[3],b=(0,t.calculateOutputShape)(n[0].dims,n[1].dims,o.dilations,s.pads,o.strides,d),w=b[d?1:2],_=b[d?2:3],x=b[d?3:1];if(d&&m===h&&v===g&&"VALID"===o.autoPad||1===m&&1===v&&1===o.dilations[0]&&1===o.dilations[1]&&1===o.strides[0]&&1===o.strides[1]&&("SAME_UPPER"===o.autoPad||"SAME_LOWER"===o.autoPad||"VALID"===o.autoPad))e.compute((0,a.createGroupedConvProgramInfoLoader)(n,s));else if(d&&1===o.group){var T=d?w*_:x,S=d?x:w*_,P=m*v*y,A=null!==(i=e.kernelCustomData.wT)&&void 0!==i?i:e.compute(r(r({},c.transposeProgramMetadata),{cacheHint:l.cacheKey,get:function(){return(0,c.createTransposeProgramInfo)(n[1],l.perm)}}),{inputs:[1],outputs:[o.wIsConst?-2:-1]})[0];o.wIsConst&&!e.kernelCustomData.wT&&(e.kernelCustomData.wT=A);var O=[n[0],A];f&&(d||1!==n[2].dims.length?O.push(n[2]):O.push(n[2].reshape([n[2].dims[0],1,1]))),e.compute((0,u.createConv2DMatMulProgramInfoLoader)(O,s,b,T,S,P,f,!0),{inputs:O})}else e.compute((0,a.createGroupedConvProgramInfoLoader)(n,s))}(e,e.inputs,n)}},3822:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.createConv2DMatMulProgramInfoLoader=void 0;var o=n(1163),i=n(9456);t.createConv2DMatMulProgramInfoLoader=function(e,t,n,a,u,s,c,l){var p=function(e,t){return{name:"Conv2DMatMul",inputTypes:e?[o.GpuDataType.default,o.GpuDataType.default,o.GpuDataType.default]:[o.GpuDataType.default,o.GpuDataType.default],cacheHint:t}}(c,t.cacheKey);return r(r({},p),{get:function(){return(0,i.createConv2DMatMulProgramInfo)(e,p,t,n,a,u,s,c,l)}})}},8856:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.expand=t.expandProgramMetadata=void 0;var o=n(6952),i=n(1163),a=n(2075);t.expandProgramMetadata={name:"Expand",inputTypes:[i.GpuDataType.default]};var u=function(e,t){for(var n=e.length-t.length,r=[],o=0;o<n;++o)r.push(e[o]);for(o=0;o<t.length;++o)r.push(1===t[o]?e[o+n]:t[o]);return r};t.expand=function(e){!function(e){if(!e||2!==e.length)throw new Error("Expand requires 2 input.");var t=e[0].dims,n=[];e[1].dims[0]>0&&e[1].getBigInt64Array().forEach((function(e){return n.push(Number(e))}));for(var r=n.length<t.length?0:n.length-t.length,o=t.length<n.length?0:t.length-n.length;r<n.length&&o<t.length;++r,++o)if(n[r]!==t[o]&&1!==n[r]&&1!==t[o])throw new Error("Expand requires shape to be broadcastable to input")}(e.inputs),e.compute(r(r({},t.expandProgramMetadata),{get:function(){return function(e,t){var n=t[0].dims,s=[];t[1].dims[0]>0&&t[1].getBigInt64Array().forEach((function(e){return s.push(Number(e))}));var c=function(e,t){return e.length>t.length?u(e,t):u(t,e)}(n,s),l=o.ShapeUtil.size(c),p=(0,a.createIndicesHelper)("input",n),f=(0,a.createIndicesHelper)("output",c);return r(r({},e),{getShaderSource:function(e){return"\n  const inputShape = array<u32, ".concat(n.length,">(").concat(n.map((function(e){return"".concat(e,"u")})).join(","),");\n  ").concat("\n  fn calculateInputIndex(outputIndices: array<u32, ".concat(c.length,">) -> array<u32,").concat(n.length,"> {\n    ").concat(p.indicesVariableDeclaration("inputIndices"),"\n    for (var i = 0; i < ").concat(n.length,"; i++) {\n        if (inputShape[i] == 1) {\n            inputIndices[i] = 0;\n        } else {\n            inputIndices[i] = outputIndices[i + ").concat(c.length-n.length,"];\n        }\n    }\n    return inputIndices;\n}"),";\n  @group(0) @binding(0) var<storage, read> input : array<").concat("f32",">;\n  @group(0) @binding(1) var<storage, read_write> output : array<").concat("f32",">;\n  ").concat(f.o2iImpl,"\n  ").concat(p.i2oImpl,"\n  ").concat(e.mainStart(),"\n  ").concat(e.guardAgainstOutOfBoundsWorkgroupSizes(l),"\n  ").concat(p.indicesVariableDeclaration("inputIndices"),"\n  ").concat(f.indicesVariableDeclaration("outputIndices"),"\n  ").concat(f.o2iCall("global_idx","outputIndices"),"\n  inputIndices = calculateInputIndex(outputIndices);\n  output[global_idx] = input[").concat(p.i2oExpression("inputIndices"),"];\n}")},outputs:[{dims:c,dataType:t[0].dataType,gpuDataType:i.GpuDataType.default}],dispatchGroup:function(){return{x:Math.ceil(l/64)}}})}(t.expandProgramMetadata,e.inputs)}}),{inputs:[0]})}},3997:function(e,t,n){"use strict";var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};Object.defineProperty(t,"__esModule",{value:!0}),t.parseInternalActivationAttributes=t.getActicationSnippet=void 0;var o=n(6952);t.getActicationSnippet=function(e){switch(e.activation){case"Relu":return{activationFunction:"",applyActivation:"value = max(value, 0.0);"};case"Sigmoid":return{activationFunction:"",applyActivation:"value = (1.0 / (1.0 + exp(-value)));"};case"Clip":return{activationFunction:"const clip_min_=f32(".concat(e.clipMin,");const clip_max_=f32(").concat(e.clipMax,");"),applyActivation:"value = clamp(value, clip_min_, clip_max_);"};default:return{activationFunction:"",applyActivation:""}}},t.parseInternalActivationAttributes=function(e){var t=(null==e?void 0:e.activation)||"";if("Clip"===t){var n=r((null==e?void 0:e.activation_params)||[o.MIN_CLIP,o.MAX_CLIP],2),i=n[0],a=n[1];return{activation:t,clipMax:a,clipMin:i,activationCacheKey:"".concat(t,":").concat(i,",").concat(a)}}return{activation:t,activationCacheKey:t}}},4271:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)},o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};Object.defineProperty(t,"__esModule",{value:!0}),t.parseGemmAttributes=t.gemm=void 0;var i=n(6952),a=n(387),u=n(1163);t.gemm=function(e,t){!function(e){if(!e)throw new Error("Input is missing");if(e.length<2||e.length>3)throw new Error("Invaid input number.");if(3===e.length&&e[2].dims.length>2)throw new Error("Invalid input shape of C");if(1!==e[0].dataType||1!==e[1].dataType||3===e.length&&1!==e[2].dataType)throw new Error("Invalid input type.");if(e[0].dataType!==e[1].dataType||3===e.length&&e[0].dataType!==e[2].dataType)throw new Error("Input types are mismatched")}(e.inputs),e.compute(function(e,t){var n={name:"Gemm",inputTypes:3===e.length?[u.GpuDataType.default,u.GpuDataType.default,u.GpuDataType.default]:[u.GpuDataType.default,u.GpuDataType.default],cacheHint:t.cacheKey};return r(r({},n),{get:function(){return function(e,t,n){var a=t[0].dims.slice(),s=t[1].dims.slice(),c=o(i.GemmUtil.getShapeOfGemmResult(a,n.transA,s,n.transB,3===t.length?t[2].dims:void 0),3),l=c[0],p=c[1],f=c[2],d=[l,p];if(!d)throw new Error("Can't use gemm on the given tensors");var h=i.ShapeUtil.size(d),g="";n.transA&&n.transB?g="value += a[k * M + m] * b[n * K + k];":n.transA&&!n.transB?g="value += a[k * M + m] * b[k * N + n];":!n.transA&&n.transB?g="value += a[m * K + k] * b[n * K + k];":n.transA||n.transB||(g="value += a[m * K + k] * b[k * N + n];");var y="f32",m=1===n.alpha?"":"value *= alpha;",v=3===t.length?"value += beta * c[".concat(function(e,t,n){if(0===n.length)return"0u";var r=1===n.length&&1!==e||2===n.length&&n[0]!==e,o=n[n.length-1]!==t,i="0u";return r||(i+="+ m * ".concat(n[n.length-1],"u")),o||(i+="+n"),i}(l,p,t[2].dims),"];"):"",b=["@group(0) @binding(0) var<storage, read> a : array<".concat(y,">;"),"@group(0) @binding(1) var<storage, read> b : array<".concat(y,">;")];return 3===t.length&&b.push("@group(0) @binding(2) var<storage, read> c : array<".concat(y,">;")),r(r({},e),{outputs:[{dims:d,dataType:t[0].dataType,gpuDataType:u.GpuDataType.default}],getShaderSource:function(e){return"\n  const M: u32 = ".concat(l,"u;\n  const N: u32 = ").concat(p,"u;\n  const K: u32 = ").concat(f,"u;\n  const alpha = ").concat(y,"(").concat(n.alpha,");\n  const beta = ").concat(y,"(").concat(n.beta,");\n\n  ").concat(b.join("\n"),"\n  @group(0) @binding(").concat(t.length,") var<storage, read_write> output : array<").concat(y,">;\n\n  ").concat(e.mainStart(),"\n    ").concat(e.guardAgainstOutOfBoundsWorkgroupSizes(h),"\n\n    let m = global_id.x / N;\n    let n = global_id.x % N;\n\n    var value = ").concat(y,"(0);\n    for (var k: u32 = 0u; k<").concat(f,"u; k++) {\n      ").concat(g,"\n    }\n\n    ").concat(m,"\n    ").concat(v,"\n    output[global_id.x] = value;\n\n  }")},dispatchGroup:function(){return{x:Math.ceil(h/64)}}})}(n,e,t)}})}(e.inputs,t))},t.parseGemmAttributes=function(e){return(0,a.createAttributeWithCacheKey)(e)}},1522:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.matMul=t.createMatmulProgramInfoLoader=void 0;var o=n(6952),i=n(1163),a=n(3997);t.createMatmulProgramInfoLoader=function(e,t){var n,u,s=(n=e.length>2,u=t.activationCacheKey,{name:"MatMul",inputTypes:n?[i.GpuDataType.default,i.GpuDataType.default,i.GpuDataType.default]:[i.GpuDataType.default,i.GpuDataType.default],cacheHint:u});return r(r({},s),{get:function(){return function(e,t,n){var u=t[0].dims,s=t[1].dims,c=o.BroadcastUtil.calcShape(u,s,!0);if(!c)throw new Error("Can't use matmul on the given tensors");var l=o.ShapeUtil.size(c),p="f32",f=(0,a.getActicationSnippet)(n),d=f.activationFunction,h=f.applyActivation,g=c[c.length-2],y=u[u.length-1],m=c[c.length-1];return r(r({},e),{outputs:[{dims:c,dataType:t[0].dataType,gpuDataType:i.GpuDataType.default}],getShaderSource:function(e){return"\n  const M: u32 = ".concat(g,"u;\n  const N: u32 = ").concat(m,"u;\n  const K: u32 = ").concat(y,"u;\n\n  @group(0) @binding(0) var<storage, read> a : array<").concat(p,">;\n  @group(0) @binding(1) var<storage, read> b : array<").concat(p,">;\n  @group(0) @binding(2) var<storage, read_write> output : array<").concat(p,">;\n\n  ").concat(d,"\n\n  ").concat(e.mainStart(),"\n    ").concat(e.guardAgainstOutOfBoundsWorkgroupSizes(l),"\n\n    let stack = global_idx / (M * N);\n    let mn = global_idx % (M * N);\n    let n = global_idx % N;\n    let m = mn / N;\n\n    let offsetA = stack * (M * K);\n    let offsetB = stack * (K * N);\n\n    var value = ").concat(p,"(0);\n    for (var k: u32 = 0u; k<").concat(y,"u; k++) {\n      value += a[offsetA + m * K + k] * b[offsetB + k * N + n];\n    }\n    ").concat(h,"\n    output[global_idx] = value;\n  }")},dispatchGroup:function(){return{x:Math.ceil(l/64)}}})}(s,e,t)}})},t.matMul=function(e){!function(e){if(!e||2!==e.length)throw new Error("MatMul requires 2 inputs.");if(e[0].dims[e[0].dims.length-1]!==e[1].dims[e[1].dims.length-2])throw new Error("shared dimension does not match.");if(1!==e[0].dataType||1!==e[1].dataType)throw new Error("inputs should be float type")}(e.inputs),e.compute((0,t.createMatmulProgramInfoLoader)(e.inputs,{activation:"",activationCacheKey:""}))}},5262:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)},o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};Object.defineProperty(t,"__esModule",{value:!0}),t.globalMaxPool=t.parseGlobalMaxPoolAttributes=t.parseMaxPoolAttributes=t.maxPool=t.globalAveragePool=t.parseGlobalAveragePoolAttributes=t.averagePool=t.parseAveragePoolAttributes=void 0;var i=n(6952),a=n(387),u=n(1163),s=n(2075),c=function(e){if(!e||1!==e.length)throw new Error("Pool ops requires 1 input.");if(4!==e[0].dims.length)throw new Error("Pool ops supports 2-D inputs only for now.");if(1!==e[0].dataType)throw new Error("Invalid input type.")},l=function(e,t,n){var r="NHWC"===t.format,o=r?[e[0].dims[0],e[0].dims[3],e[0].dims[1],e[0].dims[2]]:e[0].dims.slice(),a=Object.hasOwnProperty.call(t,"dilations"),u=t.kernelShape.slice(),s=t.strides.slice(),c=a?t.dilations.slice():[],l=t.pads.slice();i.PoolConvUtil.adjustPoolAttributes(n,o,u,s,c,l);var p=i.PoolConvUtil.computePoolOutputShape(n,o,s,c,u,l,t.autoPad),f=Object.assign({},t);return a?Object.assign(f,{kernelShape:u,strides:s,pads:l,dilations:c,cacheKey:t.cacheKey}):Object.assign(f,{kernelShape:u,strides:s,pads:l,cacheKey:t.cacheKey}),[f,r?[p[0],p[2],p[3],p[1]]:p]},p=function(e,t,n,r,o,a,u,c){var l="NHWC"===r.format,p=t.length,f=i.ShapeUtil.size(n),d=(0,s.createIndicesHelper)("output",n),h=(0,s.createIndicesHelper)("x",t);if(r.kernelShape.length<=2){var g,y=r.kernelShape[r.kernelShape.length-1],m=r.strides[r.strides.length-1],v=r.pads[r.pads.length/2-1],b=p-(l?2:1),w="",_="";if(g=v+r.pads[r.pads.length-1]!==0?"\n              for (var i: u32 = 0u; i < ".concat(y,"u; i++) {\n                xIndices[").concat(b,"] = indices[").concat(b,"] * ").concat(m," - ").concat(v," + i;\n                if (xIndices[").concat(b,"] < 0 || xIndices[").concat(b,"] >= ").concat(t[b],") {\n                  pad++;\n                  continue;\n                }\n                let x_val = x[").concat(h.i2oExpression("xIndices"),"];\n                ").concat(o,"\n              }"):"\n              for (var i: u32 = 0u; i < ".concat(y,"u; i++) {\n                xIndices[").concat(b,"] = indices[").concat(b,"] * ").concat(m," - ").concat(v," + i;\n                let x_val = x[").concat(h.i2oExpression("xIndices"),"];\n                ").concat(o,"\n              }"),2===r.kernelShape.length){var x=r.kernelShape[r.kernelShape.length-2],T=r.strides[r.strides.length-2],S=r.pads[r.pads.length/2-2],P=r.pads[r.pads.length-2],A=p-(l?3:2),O=t[A];w=S+P!==0?"\n                for (var j: u32 = 0u; j < ".concat(x,"u; j++) {\n                  xIndices[").concat(A,"] = indices[").concat(A,"] * ").concat(T," - ").concat(S," + j;\n                  if (xIndices[").concat(A,"] < 0 || xIndices[").concat(A,"] >= ").concat(O,") {\n                    pad+= ").concat(y,";\n                    continue;\n                  }\n              "):"\n                for (var j: u32 = 0u; j < ".concat(x,"u; j++) {\n                  xIndices[").concat(A,"] = indices[").concat(A,"] * ").concat(T," - ").concat(S," + j;\n                "),_="\n              }\n            "}return"\n            @group(0) @binding(0) var<storage, read> x : array<".concat(u,">;\n            @group(0) @binding(1) var<storage, read_write> output : array<").concat(u,">;\n\n            ").concat(d.o2iImpl,"\n            ").concat(h.i2oImpl,"\n\n            ").concat(e.mainStart(),"\n              ").concat(e.guardAgainstOutOfBoundsWorkgroupSizes(f),"\n\n              ").concat(d.indicesVariableDeclaration("indices"),"\n              ").concat(d.o2iCall("global_idx","indices"),"\n              ").concat(d.indicesVariableDeclaration("xIndices"),"\n              ").concat(d.o2iCall("global_idx","xIndices"),"\n\n              var value: ").concat(u," = ").concat(u,"(").concat(c,");\n              var pad = 0;\n              ").concat(w,"\n              ").concat(g,"\n              ").concat(_,"\n              ").concat(a,"\n\n              output[global_idx] = value;\n            }")}if(l)throw new Error("Pooling with kernelShape.length > 2 is not supported for NHWC format.");var I,E=i.ShapeUtil.size(r.kernelShape),C=i.ShapeUtil.computeStrides(r.kernelShape),D=C.length,k=r.pads.length;return I=r.pads.reduce((function(e,t){return e+t}))?"\n                if (xIndices[j] >= inputDims[j]) {\n                  pad++;\n                  isPad = true;\n                  break;\n                }\n              }\n              if (!isPad) {\n                let x_val = x[".concat(h.i2oExpression("xIndices"),"];\n                ").concat(o,"\n              }"):"\n              }\n              let x_val = x[".concat(h.i2oExpression("xIndices"),"];\n              ").concat(o,"\n            "),"\n            @group(0) @binding(0) var<storage, read> x : array<".concat(u,">;\n            @group(0) @binding(1) var<storage, read_write> output : array<").concat(u,">;\n\n            ").concat(d.o2iImpl,"\n            ").concat(h.i2oImpl,"\n\n            const pads = array<u32, ").concat(k,">(").concat(r.pads.map((function(e){return"".concat(e,"u")})).join(","),");\n            const inputDims = array<u32, ").concat(p,">(").concat(t.map((function(e){return"".concat(e,"u")})).join(","),");\n            const kernelStrides = array<u32, ").concat(D,">(").concat(C.map((function(e){return"".concat(e,"u")})).join(","),");\n            const strides = array<u32, ").concat(D,">(").concat(r.strides.map((function(e){return"".concat(e,"u")})).join(","),");\n\n            ").concat(e.mainStart(),"\n              ").concat(e.guardAgainstOutOfBoundsWorkgroupSizes(f),"\n\n              ").concat(d.indicesVariableDeclaration("indices"),"\n              ").concat(d.o2iCall("global_idx","indices"),"\n              ").concat(d.indicesVariableDeclaration("xIndices"),"\n              ").concat(d.o2iCall("global_idx","xIndices"),"\n\n              var offsets: array<u32, ").concat(D,">;\n\n              var value = ").concat(u,"(").concat(c,");\n              var pad = 0;\n              var isPad = false;\n\n              for (var i: u32 = 0u; i < ").concat(E,"u; i++) {\n                var offset = i;\n                for (var j = 0u; j < ").concat(D-1,"u; j++) {\n                  offsets[j] = offset / kernelStrides[j];\n                  offset -= offsets[j] * kernelStrides[j];\n                }\n                offsets[").concat(D-1,"] = offset;\n\n                isPad = false;\n                for (var j = ").concat(p-D,"u; j < ").concat(p,"u; j++) {\n                  xIndices[j] = indices[j] * strides[j - ").concat(p-D,"u]\n                    + offsets[j - ").concat(p-D,"u] - pads[j - 2u];\n                  ").concat(I,"\n              }\n              ").concat(a,"\n\n              output[global_idx] = value;\n            }")},f=function(e){return{format:e.format,autoPad:["NOTSET","VALID","SAME_UPPER","SAME_LOWER"][e.auto_pad],ceilMode:e.ceil_mode,kernelShape:e.kernel_shape,strides:e.strides,pads:e.pads}},d=function(e,t,n,a){var s=o(l(e,a,n),2),c=s[0],f=s[1],d=i.ShapeUtil.size(c.kernelShape),h="f32",g="";return c.countIncludePad?g+="value /= ".concat(h,"(").concat(d,");"):g+="value /= ".concat(h,"(").concat(d," - pad);"),r(r({},t),{outputs:[{dims:f,dataType:e[0].dataType,gpuDataType:u.GpuDataType.default}],getShaderSource:function(t){return p(t,e[0].dims,f,c,"value += x_val;",g,h,"0.0")},dispatchGroup:function(){return{x:Math.ceil(i.ShapeUtil.size(f)/64)}}})};t.parseAveragePoolAttributes=function(e){var t=0!==e.count_include_pad,n=f(e);if(0!==n.ceilMode)throw new Error("using ceil() in shape computation is not yet supported for AveragePool");return(0,a.createAttributeWithCacheKey)(r({countIncludePad:t},n))},t.averagePool=function(e,t){c(e.inputs);var n={name:"AveragePool",inputTypes:[u.GpuDataType.default],cacheHint:t.cacheKey};e.compute(r(r({},n),{get:function(){return d(e.inputs,n,!1,t)}}))};var h={autoPad:"",ceilMode:0,countIncludePad:!1,kernelShape:[],strides:[],pads:[],storageOrder:0,dilations:[],cacheKey:""};t.parseGlobalAveragePoolAttributes=function(e){var t=e.format;return r(r({format:t},h),{cacheKey:t})},t.globalAveragePool=function(e,t){c(e.inputs);var n={name:"GlobalAveragePool",inputTypes:[u.GpuDataType.default],cacheHint:t.cacheKey};e.compute(r(r({},n),{get:function(){return d(e.inputs,n,!0,t)}}))};var g=function(e,t,n,a){var s=o(l(e,a,n),2),c=s[0],f=s[1];return r(r({},t),{outputs:[{dims:f,dataType:e[0].dataType,gpuDataType:u.GpuDataType.default}],getShaderSource:function(t){return p(t,e[0].dims,f,c,"\n      value = max(x_val, value);\n    ","","f32","-1e5")},dispatchGroup:function(){return{x:Math.ceil(i.ShapeUtil.size(f)/64)}}})};t.maxPool=function(e,t){c(e.inputs);var n={name:"MaxPool",inputTypes:[u.GpuDataType.default],cacheHint:t.cacheKey};e.compute(r(r({},n),{get:function(){return g(e.inputs,n,!1,t)}}))},t.parseMaxPoolAttributes=function(e){var t=e.storage_order,n=e.dilations,o=f(e);if(0!==t)throw new Error("column major storage order is not yet supported for MaxPool");if(0!==o.ceilMode)throw new Error("using ceil() in shape computation is not yet supported for MaxPool");return(0,a.createAttributeWithCacheKey)(r({storageOrder:t,dilations:n},o))},t.parseGlobalMaxPoolAttributes=function(e){var t=e.format;return r(r({format:t},h),{cacheKey:t})},t.globalMaxPool=function(e,t){c(e.inputs);var n={name:"GlobalMaxPool",inputTypes:[u.GpuDataType.default],cacheHint:t.cacheKey};e.compute(r(r({},n),{get:function(){return g(e.inputs,n,!0,t)}}))}},6031:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.parseReduceAttributes=t.reduceSumSquare=t.reduceSum=t.reduceProd=t.reduceMin=t.reduceMean=t.reduceMax=t.reduceLogSumExp=t.reduceL2=t.reduceL1=t.reduceLogSum=void 0;var o=n(6952),i=n(387),a=n(1163),u=n(2075),s=function(e){if(!e||0===e.length||e.length>2)throw new Error("Reduce op requires 1 or 2 inputs.");if(2===e.length&&1!==e[1].dims.length)throw new Error("Invalid axes input dims.");if(1!==e[0].dataType)throw new Error("Invalid input type.")},c=function(){return["","","value = _A[inputIdx];",""]},l=function(e,t,n,s){var l=1===e.length?n:function(e,t){var n=[];return e[1].dims[0]>0&&e[1].getBigInt64Array().forEach((function(e){return n.push(Number(e))})),(0,i.createAttributeWithCacheKey)({axes:n,keepDims:t.keepDims,noopWithEmptyAxes:t.noopWithEmptyAxes})}(e,n),p={name:t,inputTypes:[a.GpuDataType.default],cacheHint:l.cacheKey};return r(r({},p),{get:function(){return function(e,t,n,i){for(var s=[],c=t[0].dims,l=[],p=o.ShapeUtil.normalizeAxes(n.axes,t[0].dims.length),f=t[0].dims.length-(n.keepDims?0:p.length),d=i(t,p),h=(0,u.createIndicesHelper)("input",c),g=""===d[1]?"":"let inputIdx = ".concat(h.i2oExpression("inputIndices"),";"),y="\n          let inputIdx = ".concat(h.i2oExpression("inputIndices"),";\n          ").concat(d[2],";"),m=!n.noopWithEmptyAxes&&0===n.axes.length,v=0;v<t[0].dims.length;v++)m||p.indexOf(v)>=0?(n.keepDims&&s.push(1),y="for(var j".concat(v,": u32 = 0; j").concat(v," < ").concat(t[0].dims[v],"; j").concat(v,"++) {\n                            inputIndices[").concat(v,"] = j").concat(v,";\n                            ").concat(y,"\n                          }")):(f>1?l.push("inputIndices[".concat(v,"] = outputIndices[").concat(s.length,"];")):l.push("inputIndices[".concat(v,"] = outputIndices;")),s.push(t[0].dims[v]));var b=(0,u.createIndicesHelper)("output",s),w=o.ShapeUtil.size(s),_="f32";return r(r({},e),{getShaderSource:function(e){return"\n          @group(0) @binding(0) var<storage, read> _A : array<".concat(_,">;\n          @group(0) @binding(1) var<storage, read_write> output : array<").concat(_,">;\n\n          ").concat(b.o2iImpl,"\n          ").concat(h.i2oImpl,"\n\n          ").concat(e.mainStart(),"\n          ").concat(e.guardAgainstOutOfBoundsWorkgroupSizes(w),"\n          ").concat(h.indicesVariableDeclaration("inputIndices"),"\n          ").concat(b.indicesVariableDeclaration("outputIndices"),"\n          ").concat(b.o2iCall("global_idx","outputIndices"),"\n\n          var value = ").concat(_,"(0);\n\n          ").concat(l.join("\n"),"\n          ").concat(d[0],"       // init ops for reduce max/min\n          ").concat(g,"\n          ").concat(d[1],"\n          ").concat(y,"\n          ").concat(d[3],"       // final computation for reduce mean\n          output[global_idx] = value;\n        }")},outputs:[{dims:s,dataType:t[0].dataType,gpuDataType:a.GpuDataType.default}],dispatchGroup:function(){return{x:Math.ceil(w/64)}}})}(p,[e[0]],l,l.noopWithEmptyAxes&&0===l.axes.length?c:s)}})};t.reduceLogSum=function(e,t){s(e.inputs),e.compute(l(e.inputs,"ReduceLogSum",t,(function(){return["value = 0.0;","","value += _A[inputIdx];","value = log(value);"]})),{inputs:[0]})},t.reduceL1=function(e,t){s(e.inputs),e.compute(l(e.inputs,"ReduceL1",t,(function(){return["value = 0.0;","","value += abs(_A[inputIdx]);",""]})),{inputs:[0]})},t.reduceL2=function(e,t){s(e.inputs),e.compute(l(e.inputs,"ReduceL2",t,(function(){return["var t = f32(0); value = 0.0;","","t = _A[inputIdx]; value += (t * t);","value = sqrt(value);"]})),{inputs:[0]})},t.reduceLogSumExp=function(e,t){s(e.inputs),e.compute(l(e.inputs,"ReduceLogSumExp",t,(function(){return["value = 0.0;","","value += exp(_A[inputIdx]);","value = log(value);"]})),{inputs:[0]})},t.reduceMax=function(e,t){s(e.inputs),e.compute(l(e.inputs,"ReduceMax",t,(function(e,t){for(var n=[],r=0;r<e[0].dims.length;r++)(t.indexOf(r)>=0||0===t.length)&&n.push("inputIndices[".concat(r,"] = 0;"));return["".concat(n.join("\n")),"value = _A[inputIdx];","value = max(value, _A[inputIdx]);",""]})),{inputs:[0]})},t.reduceMean=function(e,t){s(e.inputs),e.compute(l(e.inputs,"ReduceMean",t,(function(e,t){for(var n=1,r=0;r<e[0].dims.length;r++)(t.indexOf(r)>=0||0===t.length)&&(n*=e[0].dims[r]);return["value = 0.0;","","value += _A[inputIdx];","value = value / ".concat(n,".;")]})),{inputs:[0]})},t.reduceMin=function(e,t){s(e.inputs),e.compute(l(e.inputs,"ReduceMin",t,(function(e,t){for(var n=[],r=0;r<e[0].dims.length;r++)(t.indexOf(r)>=0||0===t.length)&&n.push("inputIndices[".concat(r,"] = 0;"));return["".concat(n.join("\n")),"value = _A[inputIdx];","value = min(value, _A[inputIdx]);",""]})),{inputs:[0]})},t.reduceProd=function(e,t){s(e.inputs),e.compute(l(e.inputs,"ReduceProd",t,(function(){return["value = 1.0;","","value *= _A[inputIdx];",""]})),{inputs:[0]})},t.reduceSum=function(e,t){s(e.inputs),e.compute(l(e.inputs,"ReduceSum",t,(function(){return["value = 0.0;","","value += _A[inputIdx];",""]})),{inputs:[0]})},t.reduceSumSquare=function(e,t){s(e.inputs),e.compute(l(e.inputs,"ReduceSumSquare",t,(function(){return["var t = f32(0); value = 0.0;","","t = _A[inputIdx]; value += t * t;",""]})),{inputs:[0]})},t.parseReduceAttributes=function(e){return(0,i.createAttributeWithCacheKey)(e)}},5101:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)},o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},i=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.parseSliceAttributes=t.slice=void 0;var a=n(6952),u=n(387),s=n(1163),c=n(2075),l=function(e,t){var n=[];if(e.length>t)if(7===e[t].dataType)e[t].getBigInt64Array().forEach((function(e){return n.push(Number(e))}));else{if(6!==e[1].dataType)throw new Error("Input ".concat(t," must be an array of int32 or int64"));e[t].getInt32Array().forEach((function(e){return n.push(Number(e))}))}return n},p=function(e,t,n,r,o){var i=e;return e<0&&(i+=n[r[t]]),o[t]<0?Math.max(0,Math.min(i,n[r[t]]-1)):Math.max(0,Math.min(i,n[r[t]]))},f=function(e,t){var n=function(e,t){if(e.length>1){var n=l(e,1),r=l(e,2),a=l(e,3);return 0===a.length&&(a=i([],o(Array(e[0].dims.length).keys()),!1)),(0,u.createAttributeWithCacheKey)({starts:n,ends:r,axes:a})}return t}(e,t),f={name:"Slice",inputTypes:[s.GpuDataType.default],cacheHint:n.cacheKey+(e.length>4?"steps_"+e[4].dims.toString():"")};return r(r({},f),{get:function(){return function(e,t,n){var u=t[0].dims,f=a.ShapeUtil.size(u),d=n.axes.length>0?a.ShapeUtil.normalizeAxes(n.axes,u.length):i([],o(Array(u.length).keys()),!1),h=l(t,4);h.forEach((function(e){return 0!==e||function(){throw new Error("step cannot be 0")}})),0===h.length&&(h=Array(d.length).fill(1));var g=n.starts.map((function(e,t){return p(e,t,u,d,h)})),y=n.ends.map((function(e,t){return p(e,t,u,d,h)}));if(d.length!==u.length)for(var m=0;m<u.length;++m)d.includes(m)||(g.splice(m,0,0),y.splice(m,0,u[m]),h.splice(m,0,1));var v=h.map((function(e){return Math.sign(e)}));h.forEach((function(e,t,n){if(e<0){var r=(y[t]-g[t])/e,o=g[t],i=o+r*h[t];g[t]=i,y[t]=o,n[t]=-e}}));var b=u.slice(0);d.forEach((function(e,t){b[e]=Math.ceil((y[e]-g[e])/h[e])}));var w={dims:b,dataType:t[0].dataType,gpuDataType:s.GpuDataType.default},_=(0,c.createIndicesHelper)("output",b),x=(0,c.createIndicesHelper)("input",u),T=a.ShapeUtil.size(b);return r(r({},e),{getShaderSource:function(e){return"\n        @group(0) @binding(0) var<storage, read> input: array<".concat("f32",">;\n        @group(0) @binding(1) var<storage, read_write> output: array<").concat("f32",">;\n        const signs = array<i32, ").concat(v.length,">(").concat(v.map((function(e){return"".concat(e,"i")})).join(","),");\n        const starts = array<u32, ").concat(g.length,">(").concat(g.map((function(e){return"".concat(e,"u")})).join(","),");\n        const ends = array<u32, ").concat(y.length,">(").concat(y.map((function(e){return"".concat(e,"u")})).join(","),");\n        const steps = array<u32, ").concat(h.length,">(").concat(h.map((function(e){return"".concat(e,"u")})).join(","),");\n        const inputShape = array<u32, ").concat(u.length,">(").concat(u.map((function(e){return"".concat(e,"u")})).join(","),");\n\n        ").concat(_.o2iImpl,"\n        ").concat(x.i2oImpl,"\n        ").concat(function(e,t){var n=(0,c.createIndicesHelper)("output",t),r=(0,c.createIndicesHelper)("input",e);return"fn calculateInputIndices(outputIndices: ".concat(n.iType,") -> ").concat(r.iType," {\n          ").concat(r.indicesVariableDeclaration("inputIndices"),";\n          var carry = 0u;\n          for (var i = ").concat(e.length,"; i >= 0; i--) {\n            var outputIndex = ").concat(1===t.length?"outputIndices":"outputIndices[i]",";\n            var inputIndex = outputIndex * steps[i] + starts[i] + carry;\n            carry = inputIndex / inputShape[i];\n            inputIndex = inputIndex % inputShape[i];\n            if (signs[i] < 0) {\n              inputIndex = inputShape[i] - inputIndex - 1u + starts[i];\n            }\n            ").concat(1===e.length?"inputIndices":"inputIndices[i]"," = inputIndex;\n          }\n          return inputIndices;\n      }")}(u,b),"\n        ").concat(e.mainStart(),"\n          ").concat(e.guardAgainstOutOfBoundsWorkgroupSizes(T),"\n          ").concat(_.indicesVariableDeclaration("outputIndices"),"\n          ").concat(_.o2iCall("global_idx","outputIndices"),"\n          ").concat(x.indicesVariableDeclaration("inputIndices"),"\n          inputIndices = calculateInputIndices(outputIndices);\n          output[global_idx] = input[").concat(x.i2oExpression("inputIndices"),"];\n      }")},outputs:[w],dispatchGroup:function(){return{x:Math.ceil(f/64)}}})}(f,e,n)}})};t.slice=function(e,t){!function(e,t){if(!e||e.length<1)throw new Error("too few inputs");if(0!==t.axes.length){if(t.axes.length!==t.starts.length||t.axes.length!==t.ends.length)throw new Error("axes, starts and ends must have the same length")}else if(t.starts.length!==t.ends.length)throw new Error("starts and ends must have the same length");e.slice(1).forEach((function(t,n){if(6!==e[n+1].dataType&&7!==e[n+1].dataType)throw new Error("Input ".concat(n," must be an array of int32 or int64"))}))}(e.inputs,t),e.compute(f(e.inputs,t),{inputs:[0]})},t.parseSliceAttributes=function(e){var t=e.starts,n=e.ends,r=e.axes;return(0,u.createAttributeWithCacheKey)({starts:t,ends:n,axes:r,steps:[]})}},2067:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.parseSplitAttributes=t.split=void 0;var o=n(6952),i=n(387),a=n(1163),u=n(2075);t.split=function(e,t){!function(e){if(!e||e.length<1)throw new Error("too few inputs")}(e.inputs),e.compute(function(e,t){var n=1===e.length?t:function(e,t){var n=[];return e[1].dims[0]>0&&e[1].getBigInt64Array().forEach((function(e){return n.push(Number(e))})),(0,i.createAttributeWithCacheKey)({numOutputs:t.numOutputs,axis:t.axis,splitSizes:n})}(e,t),s={name:"Split",inputTypes:[a.GpuDataType.default],cacheHint:n.cacheKey};return r(r({},s),{get:function(){return function(e,t,n,i){void 0===i&&(i="f32");for(var s=t[0].dims,c=o.ShapeUtil.size(s),l=s.length,p=n.axis,f=p<0?s.length+p:p,d=new Array(n.numOutputs),h=new Array(n.numOutputs),g=(0,u.createIndicesHelper)("input",s),y=new Array(n.numOutputs),m=[],v=[],b=0,w=0;w<n.numOutputs;w++){b+=n.splitSizes[w],y[w]=b,d[w]="@group(0) @binding(".concat(w+1,") var<storage, read_write> output").concat(w," : array<").concat(i,">;");var _=s.slice();_[n.axis]=n.splitSizes[w],v.push(_),h[w]=(0,u.createIndicesHelper)("output".concat(w),v[w]),m.push({dims:v[w],dataType:t[0].dataType,gpuDataType:a.GpuDataType.default})}var x=l<2?"indices":"indices[".concat(f,"]");return r(r({},e),{getShaderSource:function(e){return"\n  @group(0) @binding(0) var<storage, read> input : array<".concat(i,">;\n  ").concat(d.join("\n"),"\n  ").concat(g.o2iImpl,"\n  ").concat(h.map((function(e){return e.i2oImpl})).join("\n"),"\n  const sizeInConcatAxis = array<u32, ").concat(y.length,">(").concat(y.map((function(e){return"".concat(e,"u")})).join(","),");\n  ").concat((t=y.length,"\nfn calculateOutputIndex(index: u32) -> u32 {\n    for (var i: u32 = 0u; i < ".concat(t,"u; i += 1u ) {\n    if (index < sizeInConcatAxis[i]) {\n        return i;\n    }\n    }\n    return ").concat(t,"u;\n}")),"\n  ").concat(function(e){for(var t=e.length,n=[],r=0;r<t;++r){var o="output".concat(r,"[").concat(e[r].i2oExpression("indices",!0),"] = input[global_idx];");1===t?n.push(o):0===r?n.push("if (outputNumber == ".concat(r,"u) { ").concat(o," }")):r===t-1?n.push("else { ".concat(o," }")):n.push("else if (outputNumber == ".concat(r,") { ").concat(o," }"))}return"\n      fn writeBufferData(outputNumber: u32, indices: ptr<function, ".concat(e[0].iType,">, global_idx: u32) {\n        ").concat(n.join("\n"),"\n      }")}(h),"\n\n  ").concat(e.mainStart(),"\n    ").concat(e.guardAgainstOutOfBoundsWorkgroupSizes(c),"\n\n    ").concat(g.indicesVariableDeclaration("indices"),"\n    ").concat(g.o2iCall("global_idx","indices"),"\n    let outputNumber = calculateOutputIndex(").concat(x,");\n    if (outputNumber != 0) {\n        ").concat(x," -= sizeInConcatAxis[outputNumber - 1u];\n    }\n    writeBufferData(outputNumber, &indices, global_idx);\n  }");var t},outputs:m,dispatchGroup:function(){return{x:Math.ceil(c/64)}}})}(s,[e[0]],t)}})}(e.inputs,t),{inputs:[0]})},t.parseSplitAttributes=function(e){var t=e.axis,n=e.splitSizes,r=e.numOutputs<0?n.length:e.numOutputs;if(r!==n.length)throw new Error("numOutputs and splitSizes lengh must be equal");return(0,i.createAttributeWithCacheKey)({axis:t,numOutputs:r,splitSizes:n})}},2625:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)},o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},i=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.parseTransposeAttributes=t.transpose=t.createTransposeProgramInfo=t.transposeProgramMetadata=void 0;var a=n(6952),u=n(387),s=n(1163),c=n(2075);t.transposeProgramMetadata={name:"Transpose",inputTypes:[s.GpuDataType.default]};var l=function(e,t){return t&&t.length!==e.length?i([],o(e.keys()),!1).reverse():t};t.createTransposeProgramInfo=function(e,n){var o=e.dims,i=l(o,n),u=function(e,t){return a.ShapeUtil.sortBasedOnPerm(e,l(e,t))}(o,i),p=o.length,f=a.ShapeUtil.size(u),d=(0,c.createIndicesHelper)("output",u),h=(0,c.createIndicesHelper)("a",o);return r(r({},t.transposeProgramMetadata),{outputs:[{dims:u,dataType:e.dataType,gpuDataType:s.GpuDataType.default}],getShaderSource:function(e){return"\n  @group(0) @binding(0) var<storage, read> a : array<".concat("f32",">;\n  @group(0) @binding(1) var<storage, read_write> output : array<").concat("f32",">;\n\n  ").concat(function(e,t){var n=[];n.push("fn perm(a: ptr<function, array<u32, ".concat(t,">>, i: ptr<function, array<u32, ").concat(t,">>) {"));for(var r=0;r<t;++r)n.push("\t(*a)[".concat(e[r],"]=(*i)[").concat(r,"];"));return n.push("\t}"),n.join("\n")}(i,p),"\n  ").concat(d.o2iImpl,"\n  ").concat(h.i2oImpl,"\n\n  ").concat(e.mainStart(),"\n    ").concat(e.guardAgainstOutOfBoundsWorkgroupSizes(f),"\n\n    ").concat(d.indicesVariableDeclaration("indices"),"\n    ").concat(d.o2iCall("global_idx","indices"),"\n    ").concat(h.indicesVariableDeclaration("aIndices"),"\n    perm(&aIndices, &indices);\n\n    output[global_idx] = a[").concat(h.i2oExpression("aIndices"),"];\n  }")},dispatchGroup:function(){return{x:Math.ceil(f/64)}}})},t.transpose=function(e,n){!function(e){if(!e||1!==e.length)throw new Error("Transpose requires 1 input.");if(1!==e[0].dataType)throw new Error("input should be float tensor")}(e.inputs),e.compute(r(r({},t.transposeProgramMetadata),{cacheHint:n.cacheKey,get:function(){return(0,t.createTransposeProgramInfo)(e.inputs[0],n.perm)}}))},t.parseTransposeAttributes=function(e){return(0,u.createAttributeWithCacheKey)({perm:e.perm})}},9302:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.thresholdedRelu=t.tanh=t.tan=t.sqrt=t.sinh=t.sin=t.sigmoid=t.relu=t.reciprocal=t.neg=t.leakyRelu=t.floor=t.exp=t.erf=t.elu=t.parseAlphaAttributes=t.cosh=t.cos=t.ceil=t.clip=t.clipV10=t.atanh=t.atan=t.asinh=t.asin=t.acosh=t.acos=t.abs=void 0;var o=n(6952),i=n(387),a=n(1163),u=function(e,t,n,i,u){var s={name:t,inputTypes:[a.GpuDataType.default],cacheHint:u};return r(r({},s),{get:function(){return function(e,t,n,i){return r(r({},e),{getShaderSource:function(e){return function(e,t,n,r){var o,i=Math.ceil(t/4);return o="string"==typeof n?"".concat(n,"(a)"):n("a"),"\n  @group(0) @binding(0) var<storage, read> inputData : array<vec4<f32>>;\n  @group(0) @binding(1) var<storage, read_write> outputData : array<vec4<f32>>;\n\n  ".concat(null!=r?r:"","\n\n  ").concat(e.mainStart(),"\n    ").concat(e.guardAgainstOutOfBoundsWorkgroupSizes(i),"\n\n    let a = inputData[global_idx];\n    outputData[global_idx] = ").concat(o,";\n  }")}(e,o.ShapeUtil.size(t.dims),n,i)},outputs:[{dims:t.dims,dataType:t.dataType,gpuDataType:a.GpuDataType.default}],dispatchGroup:function(e){return{x:Math.ceil(o.ShapeUtil.size(e[0].dims)/64/4)}}})}(s,e,n,i)}})};t.abs=function(e){e.compute(u(e.inputs[0],"Abs","abs"))},t.acos=function(e){e.compute(u(e.inputs[0],"Acos","acos"))},t.acosh=function(e){e.compute(u(e.inputs[0],"Acosh","acosh"))},t.asin=function(e){e.compute(u(e.inputs[0],"Asin","asin"))},t.asinh=function(e){e.compute(u(e.inputs[0],"Asinh","asinh"))},t.atan=function(e){e.compute(u(e.inputs[0],"Atan","atan"))},t.atanh=function(e){e.compute(u(e.inputs[0],"Atanh","atanh"))},t.clipV10=function(e,t){e.compute(u(e.inputs[0],"Clip",(function(e){return"clamp(".concat(e,", clip_min_, clip_max_)")}),"\n    const clip_min_: vec4<f32> = vec4(f32(".concat(t.min,"));\n    const clip_max_: vec4<f32> = vec4(f32(").concat(t.max,"));\n"),t.cacheKey),{inputs:[0]})},t.clip=function(e){var n,r,a,u=(r=(n=e.inputs).length>=2?n[1].getFloat32Array()[0]:o.MIN_CLIP,a=n.length>=3?n[2].getFloat32Array()[0]:o.MAX_CLIP,(0,i.createAttributeWithCacheKey)({min:r,max:a}));(0,t.clipV10)(e,u)},t.ceil=function(e){e.compute(u(e.inputs[0],"Ceil","ceil"))},t.cos=function(e){e.compute(u(e.inputs[0],"Cos","cos"))},t.cosh=function(e){e.compute(u(e.inputs[0],"Cosh","cosh"))},t.parseAlphaAttributes=function(e){return(0,i.createAttributeWithCacheKey)(e)},t.elu=function(e,t){e.compute(u(e.inputs[0],"Elu",(function(e){return"elu_vf32(".concat(e,")")}),"\n  const elu_alpha_: f32 = f32(".concat(t.alpha,");\n\n  fn elu_f32(a: f32) -> f32 {\n  return select((exp(a) - 1.0) * elu_alpha_, a, a >= 0.0);\n  }\n\n  fn elu_vf32(v: vec4<f32>) -> vec4<f32> {\n  return vec4(elu_f32(v.x), elu_f32(v.y), elu_f32(v.z), elu_f32(v.w));\n  }"),t.cacheKey))},t.erf=function(e){e.compute(u(e.inputs[0],"Erf",(function(e){return"erf_vf32(".concat(e,")")}),"\n  const r0: f32 = 0.3275911;\n  const r1: f32 = 0.254829592;\n  const r2: f32 = -0.284496736;\n  const r3: f32 = 1.421413741;\n  const r4: f32 = -1.453152027;\n  const r5: f32 = 1.061405429;\n\n  fn erf_vf32(v: vec4<f32>) -> vec4<f32> {\n    let absv = abs(v);\n    let x = 1.0 / (1.0 + r0 * absv);\n    return sign(v) * (1.0 - ((((r5 * x + r4) * x + r3) * x + r2) * x + r1) * x * exp(-absv * absv));\n  }"))},t.exp=function(e){e.compute(u(e.inputs[0],"Exp","exp"))},t.floor=function(e){e.compute(u(e.inputs[0],"Floor","floor"))},t.leakyRelu=function(e,t){e.compute(u(e.inputs[0],"LeakyRelu",(function(e){return"select(leaky_relu_alpha_ * ".concat(e,", ").concat(e,", ").concat(e," >= vec4<f32>(0.0))")}),"const leaky_relu_alpha_: f32 = f32(".concat(t.alpha,");"),t.cacheKey))},t.neg=function(e){e.compute(u(e.inputs[0],"Neg",(function(e){return"-".concat(e)})))},t.reciprocal=function(e){e.compute(u(e.inputs[0],"Reciprocal",(function(e){return"1.0/".concat(e)})))},t.relu=function(e){e.compute(u(e.inputs[0],"Relu",(function(e){return"select(vec4<f32>(0.0), ".concat(e,", ").concat(e," > vec4<f32>(0.0))")})))},t.sigmoid=function(e){e.compute(u(e.inputs[0],"Sigmoid",(function(e){return"(1.0 / (1.0 + exp(-".concat(e,")))")})))},t.sin=function(e){e.compute(u(e.inputs[0],"Sin","sin"))},t.sinh=function(e){e.compute(u(e.inputs[0],"Sinh","sinh"))},t.sqrt=function(e){e.compute(u(e.inputs[0],"Sqrt","sqrt"))},t.tan=function(e){e.compute(u(e.inputs[0],"Tan","tan"))},t.tanh=function(e){e.compute(u(e.inputs[0],"Tanh","tanh"))},t.thresholdedRelu=function(e,t){return e.compute(u(e.inputs[0],"ThresholdedRelu",(function(e){return"select(vec4<f32>(0.0), ".concat(e,", ").concat(e," > thresholded_relu_alpha_)")}),"const thresholded_relu_alpha_: vec4<f32> = vec4<f32>(".concat(t.alpha,");"),t.cacheKey)),0}},8305:function(e,t,n){"use strict";var r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},i=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.ProgramManager=void 0;var a=n(4955),u=n(2075),s=function(){function e(e){this.backend=e,this.repo=new Map,this.attributesBound=!1}return e.prototype.getArtifact=function(e){return this.repo.get(e)},e.prototype.setArtifact=function(e,t){this.repo.set(e,t)},e.prototype.run=function(e,t,n,a){var u,s,c,l,p=this,f=this.backend.device,d=this.backend.getComputePassEncoder();this.backend.profilingEnabled&&d.writeTimestamp(this.backend.profilingQuerySet,0),d.setPipeline(e.computePipeline);var h=[];try{for(var g=r(t),y=g.next();!y.done;y=g.next()){var m=y.value;h.push({binding:h.length,resource:{buffer:m.buffer}})}}catch(e){u={error:e}}finally{try{y&&!y.done&&(s=g.return)&&s.call(g)}finally{if(u)throw u.error}}try{for(var v=r(n),b=v.next();!b.done;b=v.next()){var w=b.value;h.push({binding:h.length,resource:{buffer:w.buffer}})}}catch(e){c={error:e}}finally{try{b&&!b.done&&(l=v.return)&&l.call(v)}finally{if(c)throw c.error}}var _=f.createBindGroup({layout:e.computePipeline.getBindGroupLayout(0),entries:h});if(d.setBindGroup(0,_),d.dispatchWorkgroups.apply(d,i([],o(a),!1)),this.backend.pendingDispatchNumber++,this.backend.profilingEnabled){d.writeTimestamp(this.backend.profilingQuerySet,1);var x=this.backend.gpuDataManager.create(16,GPUBufferUsage.COPY_SRC|GPUBufferUsage.QUERY_RESOLVE),T=this.backend.gpuDataManager.create(16,GPUBufferUsage.MAP_READ|GPUBufferUsage.COPY_DST);this.backend.endComputePass(),this.backend.getCommandEncoder().resolveQuerySet(this.backend.profilingQuerySet,0,2,x.buffer,0),this.backend.getCommandEncoder().copyBufferToBuffer(x.buffer,0,T.buffer,0,16),this.backend.flush();var S=this.backend.currentKernelId,P=this.backend.kernels.get(S)[0];T.buffer.mapAsync(GPUMapMode.READ).then((function(){var e=new BigUint64Array(T.buffer.getMappedRange()),t=e[0],n=e[1];T.buffer.unmap(),void 0===p.backend.profilingTimeBase&&(p.backend.profilingTimeBase=t);var r=Number(t-p.backend.profilingTimeBase),o=Number(n-p.backend.profilingTimeBase);if(!Number.isSafeInteger(r)||!Number.isSafeInteger(o))throw new RangeError("incorrect timestamp range");p.backend.gpuDataManager.release(x.id),p.backend.gpuDataManager.release(T.id),console.log('[profiling] kernel "'.concat(S,"|").concat(P,'" execution time: ').concat(o-r," ns"))}))}this.backend.pendingDispatchNumber>=16&&this.backend.flush()},e.prototype.dispose=function(){},e.prototype.build=function(e,t){var n=this.backend.device,r=e.getShaderSource((0,u.createShaderHelper)(t)),o=n.createShaderModule({code:r});return(0,a.LOG_DEBUG)("verbose",(function(){return"[WebGPU] shader code: ".concat(r)})),{programInfo:e,computePipeline:n.createComputePipeline({compute:{module:o,entryPoint:"main"},layout:"auto"})}},e.prototype.normalizeDispatchGroupSize=function(e){var t="number"==typeof e?e:e.x,n="number"==typeof e?1:e.y||1,r="number"==typeof e?1:e.z||1,o=this.backend.device.limits.maxComputeWorkgroupsPerDimension;if(t<=o&&n<=o&&r<=o)return[t,n,r];var i=t*n*r,a=Math.ceil(Math.sqrt(i));if(a>o){if((a=Math.ceil(Math.cbrt(i)))>o)throw new Error("Total dispatch size exceeds WebGPU maximum.");return[a,a,a]}return[a,a,1]},e}();t.ProgramManager=s},1163:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.GpuDataType=void 0,(n=t.GpuDataType||(t.GpuDataType={}))[n.default=0]="default",n[n.upload=1]="upload",n[n.profile=2]="profile"},9544:function(e,t,n){"use strict";var r,o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return i(t,e),t},u=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function u(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,u)}s((r=r.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(s){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,r=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){a=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){a.label=u[1];break}if(6===u[0]&&a.label<o[1]){a.label=o[1],o=u;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(u);break}o[2]&&a.ops.pop(),a.trys.pop();continue}u=t.call(e,a)}catch(e){u=[6,e],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.endProfiling=t.run=t.releaseSession=t.createSession=t.createSessionFinalize=t.createSessionAllocate=t.initializeRuntime=t.initializeWebAssemblyInstance=void 0;var c,l,p,f=n(2235),d=a(n(1259)),h=n(263),g=function(){return!!f.env.wasm.proxy&&"undefined"!=typeof document},y=!1,m=!1,v=!1,b=[],w=[],_=[],x=[],T=[],S=[],P=function(){if(y||!m||v||!c)throw new Error("worker not ready")},A=function(e){switch(e.data.type){case"init-wasm":y=!1,e.data.err?(v=!0,l[1](e.data.err)):(m=!0,l[0]());break;case"init-ort":e.data.err?p[1](e.data.err):p[0]();break;case"create_allocate":e.data.err?b.shift()[1](e.data.err):b.shift()[0](e.data.out);break;case"create_finalize":e.data.err?w.shift()[1](e.data.err):w.shift()[0](e.data.out);break;case"create":e.data.err?_.shift()[1](e.data.err):_.shift()[0](e.data.out);break;case"release":e.data.err?x.shift()[1](e.data.err):x.shift()[0]();break;case"run":e.data.err?T.shift()[1](e.data.err):T.shift()[0](e.data.out);break;case"end-profiling":e.data.err?S.shift()[1](e.data.err):S.shift()[0]()}},O="undefined"!=typeof document?null===(r=null===document||void 0===document?void 0:document.currentScript)||void 0===r?void 0:r.src:void 0;t.initializeWebAssemblyInstance=function(){return u(void 0,void 0,void 0,(function(){return s(this,(function(e){if(g()){if(m)return[2];if(y)throw new Error("multiple calls to 'initWasm()' detected.");if(v)throw new Error("previous call to 'initWasm()' failed.");return y=!0,void 0===f.env.wasm.wasmPaths&&O&&0!==O.indexOf("blob:")&&(f.env.wasm.wasmPaths=O.substr(0,+O.lastIndexOf("/")+1)),[2,new Promise((function(e,t){null==c||c.terminate(),(c=n(8050).Z()).onmessage=A,l=[e,t];var r={type:"init-wasm",in:f.env.wasm};c.postMessage(r)}))]}return[2,(0,h.initializeWebAssembly)(f.env.wasm)]}))}))},t.initializeRuntime=function(e){return u(void 0,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return g()?(P(),[2,new Promise((function(t,n){p=[t,n];var r={type:"init-ort",in:e};c.postMessage(r)}))]):[3,1];case 1:return[4,d.initRuntime(e)];case 2:t.sent(),t.label=3;case 3:return[2]}}))}))},t.createSessionAllocate=function(e){return u(void 0,void 0,void 0,(function(){return s(this,(function(t){return g()?(P(),[2,new Promise((function(t,n){b.push([t,n]);var r={type:"create_allocate",in:{model:e}};c.postMessage(r,[e.buffer])}))]):[2,d.createSessionAllocate(e)]}))}))},t.createSessionFinalize=function(e,t){return u(void 0,void 0,void 0,(function(){return s(this,(function(n){return g()?(P(),[2,new Promise((function(n,r){w.push([n,r]);var o={type:"create_finalize",in:{modeldata:e,options:t}};c.postMessage(o)}))]):[2,d.createSessionFinalize(e,t)]}))}))},t.createSession=function(e,t){return u(void 0,void 0,void 0,(function(){return s(this,(function(n){return g()?(P(),[2,new Promise((function(n,r){_.push([n,r]);var o={type:"create",in:{model:e,options:t}};c.postMessage(o,[e.buffer])}))]):[2,d.createSession(e,t)]}))}))},t.releaseSession=function(e){return u(void 0,void 0,void 0,(function(){return s(this,(function(t){return g()?(P(),[2,new Promise((function(t,n){x.push([t,n]);var r={type:"release",in:e};c.postMessage(r)}))]):(d.releaseSession(e),[2])}))}))},t.run=function(e,t,n,r,o){return u(void 0,void 0,void 0,(function(){return s(this,(function(i){return g()?(P(),[2,new Promise((function(i,a){T.push([i,a]);var u={type:"run",in:{sessionId:e,inputIndices:t,inputs:n,outputIndices:r,options:o}};c.postMessage(u,d.extractTransferableBuffers(n))}))]):[2,d.run(e,t,n,r,o)]}))}))},t.endProfiling=function(e){return u(void 0,void 0,void 0,(function(){return s(this,(function(t){return g()?(P(),[2,new Promise((function(t,n){S.push([t,n]);var r={type:"end-profiling",in:e};c.postMessage(r)}))]):(d.endProfiling(e),[2])}))}))}},7918:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setRunOptions=void 0;var r=n(263),o=n(1497);t.setRunOptions=function(e){var t=(0,r.getInstance)(),n=0,i=[],a=e||{};try{if(void 0===(null==e?void 0:e.logSeverityLevel))a.logSeverityLevel=2;else if("number"!=typeof e.logSeverityLevel||!Number.isInteger(e.logSeverityLevel)||e.logSeverityLevel<0||e.logSeverityLevel>4)throw new Error("log serverity level is not valid: ".concat(e.logSeverityLevel));if(void 0===(null==e?void 0:e.logVerbosityLevel))a.logVerbosityLevel=0;else if("number"!=typeof e.logVerbosityLevel||!Number.isInteger(e.logVerbosityLevel))throw new Error("log verbosity level is not valid: ".concat(e.logVerbosityLevel));void 0===(null==e?void 0:e.terminate)&&(a.terminate=!1);var u=0;return void 0!==(null==e?void 0:e.tag)&&(u=(0,o.allocWasmString)(e.tag,i)),0===(n=t._OrtCreateRunOptions(a.logSeverityLevel,a.logVerbosityLevel,!!a.terminate,u))&&(0,o.checkLastError)("Can't create run options."),void 0!==(null==e?void 0:e.extra)&&(0,o.iterateExtraOptions)(e.extra,"",new WeakSet,(function(e,r){var a=(0,o.allocWasmString)(e,i),u=(0,o.allocWasmString)(r,i);0!==t._OrtAddRunConfigEntry(n,a,u)&&(0,o.checkLastError)("Can't set a run config entry: ".concat(e," - ").concat(r,"."))})),[n,i]}catch(e){throw 0!==n&&t._OrtReleaseRunOptions(n),i.forEach((function(e){return t._free(e)})),e}}},6640:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function u(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,u)}s((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(s){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,r=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){a=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){a.label=u[1];break}if(6===u[0]&&a.label<o[1]){a.label=o[1],o=u;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(u);break}o[2]&&a.ops.pop(),a.trys.pop();continue}u=t.call(e,a)}catch(e){u=[6,e],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,s])}}},i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};Object.defineProperty(t,"__esModule",{value:!0}),t.OnnxruntimeWebAssemblySessionHandler=void 0;var a,u=n(2806),s=n(2235),c=n(2850),l=n(9544),p=function(){function e(){}return e.prototype.createSessionAllocate=function(e){return r(this,void 0,void 0,(function(){var t;return o(this,(function(n){switch(n.label){case 0:return[4,fetch(e)];case 1:return[4,n.sent().arrayBuffer()];case 2:return t=n.sent(),[2,(0,l.createSessionAllocate)(new Uint8Array(t))]}}))}))},e.prototype.loadModel=function(e,t){return r(this,void 0,void 0,(function(){var n,r,p,f,d;return o(this,(function(o){switch(o.label){case 0:return a?[3,2]:[4,(0,l.initializeRuntime)(s.env)];case 1:o.sent(),a=!0,o.label=2;case 2:return"string"!=typeof e?[3,9]:"undefined"!=typeof process&&process.versions&&process.versions.node?[4,(0,c.promisify)(u.readFile)(e)]:[3,5];case 3:return n=o.sent(),[4,(0,l.createSession)(n,t)];case 4:return p=i.apply(void 0,[o.sent(),3]),this.sessionId=p[0],this.inputNames=p[1],this.outputNames=p[2],[3,8];case 5:return[4,this.createSessionAllocate(e)];case 6:return r=o.sent(),[4,(0,l.createSessionFinalize)(r,t)];case 7:f=i.apply(void 0,[o.sent(),3]),this.sessionId=f[0],this.inputNames=f[1],this.outputNames=f[2],o.label=8;case 8:return[3,11];case 9:return[4,(0,l.createSession)(e,t)];case 10:d=i.apply(void 0,[o.sent(),3]),this.sessionId=d[0],this.inputNames=d[1],this.outputNames=d[2],o.label=11;case 11:return[2]}}))}))},e.prototype.dispose=function(){return r(this,void 0,void 0,(function(){return o(this,(function(e){return[2,(0,l.releaseSession)(this.sessionId)]}))}))},e.prototype.run=function(e,t,n){return r(this,void 0,void 0,(function(){var r,i,a,u,c,p,f=this;return o(this,(function(o){switch(o.label){case 0:return r=[],i=[],Object.entries(e).forEach((function(e){var t=e[0],n=e[1],o=f.inputNames.indexOf(t);if(-1===o)throw new Error("invalid input '".concat(t,"'"));r.push(n),i.push(o)})),a=[],Object.entries(t).forEach((function(e){var t=e[0],n=f.outputNames.indexOf(t);if(-1===n)throw new Error("invalid output '".concat(t,"'"));a.push(n)})),[4,(0,l.run)(this.sessionId,i,r.map((function(e){return[e.type,e.dims,e.data]})),a,n)];case 1:for(u=o.sent(),c={},p=0;p<u.length;p++)c[this.outputNames[a[p]]]=new s.Tensor(u[p][0],u[p][2],u[p][1]);return[2,c]}}))}))},e.prototype.startProfiling=function(){},e.prototype.endProfiling=function(){(0,l.endProfiling)(this.sessionId)},e}();t.OnnxruntimeWebAssemblySessionHandler=p},7622:function(e,t,n){"use strict";var r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.setSessionOptions=void 0;var o=n(263),i=n(1497);t.setSessionOptions=function(e){var t,n,a,u,s=(0,o.getInstance)(),c=0,l=[],p=e||{};!function(e){e.extra||(e.extra={}),e.extra.session||(e.extra.session={});var t=e.extra.session;t.use_ort_model_bytes_directly||(t.use_ort_model_bytes_directly="1"),e.executionProviders&&e.executionProviders.some((function(e){return"webgpu"===("string"==typeof e?e:e.name)}))&&(e.enableMemPattern=!1)}(p);try{var f=function(e){switch(e){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error("unsupported graph optimization level: ".concat(e))}}(null!==(t=p.graphOptimizationLevel)&&void 0!==t?t:"all"),d=function(e){switch(e){case"sequential":return 0;case"parallel":return 1;default:throw new Error("unsupported execution mode: ".concat(e))}}(null!==(n=p.executionMode)&&void 0!==n?n:"sequential"),h="string"==typeof p.logId?(0,i.allocWasmString)(p.logId,l):0,g=null!==(a=p.logSeverityLevel)&&void 0!==a?a:2;if(!Number.isInteger(g)||g<0||g>4)throw new Error("log serverity level is not valid: ".concat(g));var y=null!==(u=p.logVerbosityLevel)&&void 0!==u?u:0;if(!Number.isInteger(y)||y<0||y>4)throw new Error("log verbosity level is not valid: ".concat(y));var m="string"==typeof p.optimizedModelFilePath?(0,i.allocWasmString)(p.optimizedModelFilePath,l):0;return 0===(c=s._OrtCreateSessionOptions(f,!!p.enableCpuMemArena,!!p.enableMemPattern,d,!!p.enableProfiling,0,h,g,y,m))&&(0,i.checkLastError)("Can't create session options."),p.executionProviders&&function(e,t,n){var a,u;try{for(var s=r(t),c=s.next();!c.done;c=s.next()){var l=c.value,p="string"==typeof l?l:l.name;switch(p){case"xnnpack":p="XNNPACK";break;case"webnn":if(p="WEBNN","string"!=typeof l){var f=l;if(null==f?void 0:f.deviceType){var d=(0,i.allocWasmString)("deviceType",n),h=(0,i.allocWasmString)(f.deviceType,n);0!==(0,o.getInstance)()._OrtAddSessionConfigEntry(e,d,h)&&(0,i.checkLastError)("Can't set a session config entry: 'deviceType' - ".concat(f.deviceType,"."))}(null==f?void 0:f.powerPreference)&&(d=(0,i.allocWasmString)("powerPreference",n),h=(0,i.allocWasmString)(f.powerPreference,n),0!==(0,o.getInstance)()._OrtAddSessionConfigEntry(e,d,h)&&(0,i.checkLastError)("Can't set a session config entry: 'powerPreference' - ".concat(f.powerPreference,".")))}break;case"webgpu":p="JS";break;case"wasm":case"cpu":continue;default:throw new Error("not supported execution provider: ".concat(p))}var g=(0,i.allocWasmString)(p,n);0!==(0,o.getInstance)()._OrtAppendExecutionProvider(e,g)&&(0,i.checkLastError)("Can't append execution provider: ".concat(p,"."))}}catch(e){a={error:e}}finally{try{c&&!c.done&&(u=s.return)&&u.call(s)}finally{if(a)throw a.error}}}(c,p.executionProviders,l),void 0!==p.extra&&(0,i.iterateExtraOptions)(p.extra,"",new WeakSet,(function(e,t){var n=(0,i.allocWasmString)(e,l),r=(0,i.allocWasmString)(t,l);0!==s._OrtAddSessionConfigEntry(c,n,r)&&(0,i.checkLastError)("Can't set a session config entry: ".concat(e," - ").concat(t,"."))})),[c,l]}catch(e){throw 0!==c&&s._OrtReleaseSessionOptions(c),l.forEach((function(e){return s._free(e)})),e}}},7917:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logLevelStringToEnum=t.tensorTypeToTypedArrayConstructor=t.getTensorElementSize=t.tensorDataTypeEnumToString=t.tensorDataTypeStringToEnum=void 0,t.tensorDataTypeStringToEnum=function(e){switch(e){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float16":return 10;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error("unsupported data type: ".concat(e))}},t.tensorDataTypeEnumToString=function(e){switch(e){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 10:return"float16";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error("unsupported data type: ".concat(e))}},t.getTensorElementSize=function(e){return[void 0,4,1,1,2,2,4,8,void 0,1,2,8,4,8,void 0,void 0,void 0][e]},t.tensorTypeToTypedArrayConstructor=function(e){switch(e){case"float16":case"uint16":return Uint16Array;case"float32":return Float32Array;case"uint8":case"bool":return Uint8Array;case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error("unsupported type: ".concat(e))}},t.logLevelStringToEnum=function(e){switch(e){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error("unsupported logging level: ".concat(e))}}},1259:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function u(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,u)}s((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(s){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,r=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){a=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){a.label=u[1];break}if(6===u[0]&&a.label<o[1]){a.label=o[1],o=u;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(u);break}o[2]&&a.ops.pop(),a.trys.pop();continue}u=t.call(e,a)}catch(e){u=[6,e],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,s])}}},i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},a=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.extractTransferableBuffers=t.endProfiling=t.run=t.releaseSession=t.createSession=t.createSessionFinalize=t.createSessionAllocate=t.initRuntime=void 0;var u=n(7918),s=n(7622),c=n(7917),l=n(263),p=n(1497);t.initRuntime=function(e){return r(void 0,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return n=e.wasm.numThreads,r=(0,c.logLevelStringToEnum)(e.logLevel),0!==(0,l.getInstance)()._OrtInit(n,r)&&(0,p.checkLastError)("Can't initialize onnxruntime."),[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}var n,r}))}))};var f=new Map;t.createSessionAllocate=function(e){var t=(0,l.getInstance)(),n=t._malloc(e.byteLength);if(0===n)throw new Error("Can't create a session. failed to allocate a buffer of size ".concat(e.byteLength,"."));return t.HEAPU8.set(e,n),[n,e.byteLength]},t.createSessionFinalize=function(e,t){var n,r=(0,l.getInstance)(),o=0,a=0,u=[],c=[],d=[];try{a=(n=i((0,s.setSessionOptions)(t),2))[0],u=n[1],0===(o=r._OrtCreateSession(e[0],e[1],a))&&(0,p.checkLastError)("Can't create a session.");for(var h=i(function(e){var t=(0,l.getInstance)(),n=t.stackSave();try{var r=t.stackAlloc(8);return 0!==t._OrtGetInputOutputCount(e,r,r+4)&&(0,p.checkLastError)("Can't get session input/output count."),[t.HEAP32[r/4],t.HEAP32[r/4+1]]}finally{t.stackRestore(n)}}(o),2),g=h[0],y=h[1],m=[],v=[],b=0;b<g;b++){var w=r._OrtGetInputName(o,b);0===w&&(0,p.checkLastError)("Can't get an input name."),c.push(w),m.push(r.UTF8ToString(w))}for(b=0;b<y;b++){var _=r._OrtGetOutputName(o,b);0===_&&(0,p.checkLastError)("Can't get an output name."),d.push(_),v.push(r.UTF8ToString(_))}return f.set(o,[o,c,d]),[o,m,v]}catch(e){throw c.forEach((function(e){return r._OrtFree(e)})),d.forEach((function(e){return r._OrtFree(e)})),0!==o&&r._OrtReleaseSession(o),e}finally{r._free(e[0]),0!==a&&r._OrtReleaseSessionOptions(a),u.forEach((function(e){return r._free(e)}))}},t.createSession=function(e,n){var r=(0,t.createSessionAllocate)(e);return(0,t.createSessionFinalize)(r,n)},t.releaseSession=function(e){var t=(0,l.getInstance)(),n=f.get(e);if(!n)throw new Error("cannot release session. invalid session id: ".concat(e));var r=i(n,3),o=r[0],a=r[1],u=r[2];a.forEach((function(e){return t._OrtFree(e)})),u.forEach((function(e){return t._OrtFree(e)})),t._OrtReleaseSession(o),f.delete(e)},t.run=function(e,t,n,a,s){return r(void 0,void 0,void 0,(function(){var r,d,h,g,y,m,v,b,w,_,x,T,S,P,A,O,I,E,C,D,k,R,M,j,L,F,N,B,U,z,G,V,W,H,q,K,X,Y,J,Z,$,Q,ee,te,ne,re;return o(this,(function(o){switch(o.label){case 0:if(r=(0,l.getInstance)(),!(d=f.get(e)))throw new Error("cannot run inference. invalid session id: ".concat(e));h=i(d,3),g=h[0],y=h[1],m=h[2],v=t.length,b=a.length,w=0,_=[],x=[],T=[],o.label=1;case 1:for(o.trys.push([1,,7,8]),re=i((0,u.setRunOptions)(s),2),w=re[0],_=re[1],S=function(e){var t=n[e][0],o=n[e][1],i=n[e][2],a=void 0,u=void 0;if(Array.isArray(i)){u=4*i.length,a=r._malloc(u),T.push(a);for(var s=a/4,l=0;l<i.length;l++){if("string"!=typeof i[l])throw new TypeError("tensor data at index ".concat(l," is not a string"));r.HEAPU32[s++]=(0,p.allocWasmString)(i[l],T)}}else u=i.byteLength,a=r._malloc(u),T.push(a),r.HEAPU8.set(new Uint8Array(i.buffer,i.byteOffset,u),a);var f=r.stackSave(),d=r.stackAlloc(4*o.length);try{var h=d/4;o.forEach((function(e){return r.HEAP32[h++]=e}));var g=r._OrtCreateTensor((0,c.tensorDataTypeStringToEnum)(t),a,u,d,o.length);0===g&&(0,p.checkLastError)("Can't create tensor for input[".concat(e,"].")),x.push(g)}finally{r.stackRestore(f)}},F=0;F<v;F++)S(F);P=r.stackSave(),A=r.stackAlloc(4*v),O=r.stackAlloc(4*v),I=r.stackAlloc(4*b),E=r.stackAlloc(4*b),o.label=2;case 2:for(o.trys.push([2,,5,6]),C=A/4,D=O/4,k=I/4,R=E/4,F=0;F<v;F++)r.HEAPU32[C++]=x[F],r.HEAPU32[D++]=y[t[F]];for(F=0;F<b;F++)r.HEAPU32[k++]=0,r.HEAPU32[R++]=m[a[F]];return M=r._OrtRun(g,O,A,v,E,b,I,w),(j=r.jsepRunPromise)&&void 0!==j.then?[4,j]:[3,4];case 3:M=o.sent(),o.label=4;case 4:for(L=[],0!==M&&(0,p.checkLastError)("failed to call OrtRun()."),F=0;F<b;F++){N=r.HEAPU32[I/4+F],B=r.stackSave(),U=r.stackAlloc(16),z=void 0,G=0;try{for(0!==(M=r._OrtGetTensorData(N,U,U+4,U+8,U+12))&&(0,p.checkLastError)("Can't access output tensor data on index ".concat(F,".")),V=U/4,W=r.HEAPU32[V++],G=r.HEAPU32[V++],H=r.HEAPU32[V++],q=r.HEAPU32[V++],K=[],X=0;X<q;X++)K.push(r.HEAPU32[H/4+X]);if(r._OrtFree(H),Y=0===K.length?1:K.reduce((function(e,t){return e*t})),"string"===(z=(0,c.tensorDataTypeEnumToString)(W))){for(J=[],Z=G/4,$=0;$<Y;$++)Q=r.HEAPU32[Z++],ee=$===Y-1?void 0:r.HEAPU32[Z]-Q,J.push(r.UTF8ToString(Q,ee));L.push([z,K,J])}else te=(0,c.tensorTypeToTypedArrayConstructor)(z),ne=new te(Y),new Uint8Array(ne.buffer,ne.byteOffset,ne.byteLength).set(r.HEAPU8.subarray(G,G+ne.byteLength)),L.push([z,K,ne])}finally{r.stackRestore(B),"string"===z&&G&&r._free(G),r._OrtReleaseTensor(N)}}return[2,L];case 5:return r.stackRestore(P),[7];case 6:return[3,8];case 7:return x.forEach((function(e){return r._OrtReleaseTensor(e)})),T.forEach((function(e){return r._free(e)})),0!==w&&r._OrtReleaseRunOptions(w),_.forEach((function(e){return r._free(e)})),[7];case 8:return[2]}}))}))},t.endProfiling=function(e){var t=(0,l.getInstance)(),n=f.get(e);if(!n)throw new Error("invalid session id");var r=n[0],o=t._OrtEndProfiling(r);0===o&&(0,p.checkLastError)("Can't get an profile file name."),t._OrtFree(o)},t.extractTransferableBuffers=function(e){var t,n,r=[];try{for(var o=a(e),i=o.next();!i.done;i=o.next()){var u=i.value[2];!Array.isArray(u)&&u.buffer&&r.push(u.buffer)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return r}},263:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t},a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function u(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,u)}s((r=r.apply(e,t||[])).next())}))},u=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(s){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,r=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){a=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){a.label=u[1];break}if(6===u[0]&&a.label<o[1]){a.label=o[1],o=u;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(u);break}o[2]&&a.ops.pop(),a.trys.pop();continue}u=t.call(e,a)}catch(e){u=[6,e],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.dispose=t.getInstance=t.initializeWebAssembly=void 0;var s,c=i(n(6449)),l=n(932),p=n(3474),f=!1,d=!1,h=!1;t.initializeWebAssembly=function(e){return a(void 0,void 0,void 0,(function(){var t,r,o,i,a,g,y,m,v,b,w;return u(this,(function(u){switch(u.label){case 0:if(f)return[2,Promise.resolve()];if(d)throw new Error("multiple calls to 'initializeWebAssembly()' detected.");if(h)throw new Error("previous call to 'initializeWebAssembly()' failed.");return d=!0,t=e.initTimeout,r=e.numThreads,o=e.simd,i=r>1&&function(){try{return"undefined"!=typeof SharedArrayBuffer&&("undefined"!=typeof MessageChannel&&(new MessageChannel).port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])))}catch(e){return!1}}(),a=o&&function(){try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch(e){return!1}}(),g=e.wasmPaths,y="string"==typeof g?g:void 0,m=function(e,t){return t?e?"ort-wasm-simd-threaded.wasm":"ort-wasm-threaded.wasm":e?"ort-wasm-simd.wasm":"ort-wasm.wasm"}(a,i),v="object"==typeof g?g[m]:void 0,b=!1,w=[],t>0&&w.push(new Promise((function(e){setTimeout((function(){b=!0,e()}),t)}))),w.push(new Promise((function(e,t){var r=i?p:l,o={locateFile:function(e,t){return i&&e.endsWith(".worker.js")&&"undefined"!=typeof Blob?URL.createObjectURL(new Blob([n(4154)],{type:"text/javascript"})):e.endsWith(".wasm")?v||(null!=y?y:t)+m:t+e}};if(i)if("undefined"==typeof Blob)o.mainScriptUrlOrBlob=c.join(__dirname,"ort-wasm-threaded.js");else{var a="var ortWasmThreaded=(function(){var _scriptDir;return ".concat(r.toString(),"})();");o.mainScriptUrlOrBlob=new Blob([a],{type:"text/javascript"})}r(o).then((function(t){d=!1,f=!0,s=t,e()}),(function(e){d=!1,h=!0,t(e)}))}))),[4,Promise.race(w)];case 1:if(u.sent(),b)throw new Error("WebAssembly backend initializing failed due to timeout: ".concat(t,"ms"));return[2]}}))}))},t.getInstance=function(){if(f&&s)return s;throw new Error("WebAssembly is not initialized yet.")},t.dispose=function(){var e;!f||d||h||(d=!0,null===(e=s.PThread)||void 0===e||e.terminateAllThreads(),s=void 0,d=!1,f=!1,h=!0)}},1497:function(e,t,n){"use strict";var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};Object.defineProperty(t,"__esModule",{value:!0}),t.checkLastError=t.iterateExtraOptions=t.allocWasmString=void 0;var o=n(263);t.allocWasmString=function(e,t){var n=(0,o.getInstance)(),r=n.lengthBytesUTF8(e)+1,i=n._malloc(r);return n.stringToUTF8(e,i,r),t.push(i),i},t.iterateExtraOptions=function(e,n,o,i){if("object"==typeof e&&null!==e){if(o.has(e))throw new Error("Circular reference in options");o.add(e)}Object.entries(e).forEach((function(e){var a=r(e,2),u=a[0],s=a[1],c=n?n+u:u;if("object"==typeof s)(0,t.iterateExtraOptions)(s,c+".",o,i);else if("string"==typeof s||"number"==typeof s)i(c,s.toString());else{if("boolean"!=typeof s)throw new Error("Can't handle extra config type: ".concat(typeof s));i(c,s?"1":"0")}}))},t.checkLastError=function(e){var t=(0,o.getInstance)(),n=t.stackSave();try{var r=t.stackAlloc(8);t._OrtGetLastError(r,r+4);var i=t.HEAP32[r/4],a=t.HEAPU32[r/4+1],u=a?t.UTF8ToString(a):"";throw new Error("".concat(e," ERROR_CODE: ").concat(i,", ERROR_MESSAGE: ").concat(u))}finally{t.stackRestore(n)}}},8050:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(6614),o=n.n(r);function i(){return o()('/*!\n* ONNX Runtime Web v1.16.0\n* Copyright (c) Microsoft Corporation. All rights reserved.\n* Licensed under the MIT License.\n*/\n!function(){var e={838:function(e,n,t){"use strict";var r=this&&this.__awaiter||function(e,n,t,r){return new(t||(t=Promise))((function(a,o){function i(e){try{u(r.next(e))}catch(e){o(e)}}function c(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var n;e.done?a(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(i,c)}u((r=r.apply(e,n||[])).next())}))},a=this&&this.__generator||function(e,n){var t,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(c){return function(u){return function(c){if(t)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(i=0)),i;)try{if(t=1,r&&(a=2&c[0]?r.return:c[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,c[1])).done)return a;switch(r=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,r=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==c[0]&&2!==c[0])){i=0;continue}if(3===c[0]&&(!a||c[1]>a[0]&&c[1]<a[3])){i.label=c[1];break}if(6===c[0]&&i.label<a[1]){i.label=a[1],a=c;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(c);break}a[2]&&i.ops.pop(),i.trys.pop();continue}c=n.call(e,i)}catch(e){c=[6,e],r=0}finally{t=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,u])}}},o=this&&this.__values||function(e){var n="function"==typeof Symbol&&Symbol.iterator,t=n&&e[n],r=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")},i=this&&this.__read||function(e,n){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var r,a,o=t.call(e),i=[];try{for(;(void 0===n||n-- >0)&&!(r=o.next()).done;)i.push(r.value)}catch(e){a={error:e}}finally{try{r&&!r.done&&(t=o.return)&&t.call(o)}finally{if(a)throw a.error}}return i};Object.defineProperty(n,"__esModule",{value:!0}),n.WebGpuBackend=void 0;var c=t(955),u=t(771),s=t(510),l=t(305),f=function(){function e(){this.currentKernelId=null,this.commandEncoder=null,this.computePassEncoder=null,this.pendingDispatchNumber=0,this.profilingEnabled=!1}return Object.defineProperty(e.prototype,"currentKernelCustomData",{get:function(){if(null===this.currentKernelId)throw new Error("currentKernelCustomData(): currentKernelId is null. (should not happen)");var e=this.kernelCustomData.get(this.currentKernelId);return e||(e={},this.kernelCustomData.set(this.currentKernelId,e)),e},enumerable:!1,configurable:!0}),e.prototype.initialize=function(e){return r(this,void 0,void 0,(function(){var n,t,r;return a(this,(function(a){switch(a.label){case 0:if(!navigator.gpu)throw new Error("WebGpuBackend: WebGPU is not available.");return[4,navigator.gpu.requestAdapter()];case 1:if(!(n=a.sent()))throw new Error("WebGpuBackend: Failed to get GPU adapter.");return t={requiredLimits:{maxComputeWorkgroupStorageSize:n.limits.maxComputeWorkgroupStorageSize,maxComputeWorkgroupsPerDimension:n.limits.maxComputeWorkgroupsPerDimension,maxStorageBufferBindingSize:n.limits.maxStorageBufferBindingSize}},n.features.has("timestamp-query-inside-passes")&&"default"===e.webgpu.profilingMode&&(this.profilingEnabled=!0,t.requiredFeatures=["timestamp-query-inside-passes"]),r=this,[4,n.requestDevice(t)];case 2:return r.device=a.sent(),this.gpuDataManager=(0,u.createGpuDataManager)(this),this.programManager=new l.ProgramManager(this),this.kernels=new Map,this.kernelPersistentData=new Map,this.kernelCustomData=new Map,(0,c.configureLogger)(e.logLevel,!!e.debug),this.device.onuncapturederror=function(e){e.error instanceof GPUValidationError&&console.error("An uncaught WebGPU validation error was raised: ".concat(e.error.message))},this.profilingEnabled&&(this.profilingQuerySet=this.device.createQuerySet({type:"timestamp",count:2})),[2]}}))}))},e.prototype.dispose=function(){},e.prototype.getCommandEncoder=function(){return this.commandEncoder||(this.commandEncoder=this.device.createCommandEncoder()),this.commandEncoder},e.prototype.getComputePassEncoder=function(){return this.computePassEncoder||(this.computePassEncoder=this.getCommandEncoder().beginComputePass()),this.computePassEncoder},e.prototype.endComputePass=function(){this.computePassEncoder&&(this.computePassEncoder.end(),this.computePassEncoder=null)},e.prototype.flush=function(){this.endComputePass(),this.device.queue.submit([this.getCommandEncoder().finish()]),this.gpuDataManager.refreshPendingBuffers(),this.commandEncoder=null,this.pendingDispatchNumber=0},e.prototype.run=function(e,n,t,r,a){if(n.length!==e.inputTypes.length)throw new Error("Input size must be equal to ".concat(e.inputTypes.length,"."));for(var o=[],i=0;i<n.length;++i){if(!(h=this.gpuDataManager.get(n[i].data)))throw new Error("no GPU data for input: ".concat(n[i].data));o[i]=h}var u=function(e,n,t){var r=n.map((function(e){return"".concat(e.join(","))})).join("_"),a=t.join("_"),o=e.name;return e.cacheHint&&(o+="["+e.cacheHint+"]"),o+":"+r+";"+a}(e,n.map((function(e){return e.dims})),o.map((function(e){return e.type}))),s=this.programManager.getArtifact(u),l=s?s.programInfo:"function"==typeof e.get?e.get():e,f=0===t.length?l.outputs.map((function(e,n){return n})):t;if(f.length!==l.outputs.length)throw new Error("Output size ".concat(f.length," must be equal to ").concat(l.outputs.length,"."));var p=[],d=[];for(i=0;i<l.outputs.length;++i){if(!Number.isInteger(f[i])||f[i]<-2||f[i]>=l.outputs.length)throw new Error("Invalid output index: ".concat(f[i]));var h,g=-1===f[i],v=-2===f[i],m=g||v?a(l.outputs[i].dataType,l.outputs[i].dims):r(f[i],l.outputs[i].dataType,l.outputs[i].dims);if(!(h=this.gpuDataManager.get(m.data)))throw new Error("no GPU data for output: ".concat(m.data));if(g&&this.temporaryData.push(h),v){var y=this.kernelPersistentData.get(this.currentKernelId);y||(y=[],this.kernelPersistentData.set(this.currentKernelId,y)),y.push(h)}p.push(m),d.push(h)}var b=this.programManager.normalizeDispatchGroupSize(l.dispatchGroup(n));return s||(s=this.programManager.build(l,b),this.programManager.setArtifact(u,s)),(0,c.LOG_DEBUG)("info",(function(){return\'[ProgramManager] run "\'.concat(l.name,\'" (key=\').concat(u,") with ").concat(b[0],"x").concat(b[1],"x").concat(b[2])})),this.programManager.run(s,o,d,b),p},e.prototype.upload=function(e,n){this.gpuDataManager.upload(e,n)},e.prototype.memcpy=function(e,n){this.gpuDataManager.memcpy(e,n)},e.prototype.download=function(e,n){return r(this,void 0,void 0,(function(){var t,r;return a(this,(function(a){switch(a.label){case 0:return[4,this.gpuDataManager.download(e)];case 1:return t=a.sent(),(r=n()).set(new Uint8Array(t,0,r.byteLength)),[2]}}))}))},e.prototype.alloc=function(e){return this.gpuDataManager.create(e).id},e.prototype.free=function(e){return this.gpuDataManager.release(e)},e.prototype.createKernel=function(e,n,t){var r=s.WEBGPU_OP_RESOLVE_RULES.get(e);if(!r)throw new Error("kernel not implemented: ".concat(e));this.kernels.set(n,[e,r[0],[r[1],t]])},e.prototype.releaseKernel=function(e){var n,t,r=this.kernelPersistentData.get(e);if(r){try{for(var a=o(r),i=a.next();!i.done;i=a.next()){var c=i.value;this.gpuDataManager.release(c.id)}}catch(e){n={error:e}}finally{try{i&&!i.done&&(t=a.return)&&t.call(a)}finally{if(n)throw n.error}}this.kernelPersistentData.delete(e)}this.kernelCustomData.delete(e),this.kernels.delete(e)},e.prototype.computeKernel=function(e,n){var t,r,a=this.kernels.get(e);if(!a)throw new Error("kernel not created: ".concat(e));var u=i(a,3),s=u[0],l=u[1],f=u[2];if(null!==this.currentKernelId)throw new Error(\'kernel "\'.concat(s,\'" is not allowed to be called recursively\'));this.currentKernelId=e,f[0]&&(f[1]=f[0](f[1]),f[0]=void 0),(0,c.LOG_DEBUG)("info",(function(){return\'[WebGPU] Start to run kernel "\'.concat(s,\'"...\')})),this.temporaryData=[];try{return l(n,f[1]),0}catch(e){return(0,c.LOG_DEBUG)("warning",\'[WebGPU] Kernel "\'.concat(s,\'" failed. Error: \').concat(e)),1}finally{try{for(var p=o(this.temporaryData),d=p.next();!d.done;d=p.next()){var h=d.value;this.gpuDataManager.release(h.id)}}catch(e){t={error:e}}finally{try{d&&!d.done&&(r=p.return)&&r.call(p)}finally{if(t)throw t.error}}this.temporaryData=[],this.currentKernelId=null}},e}();n.WebGpuBackend=f},675:function(e,n,t){"use strict";var r=this&&this.__awaiter||function(e,n,t,r){return new(t||(t=Promise))((function(a,o){function i(e){try{u(r.next(e))}catch(e){o(e)}}function c(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var n;e.done?a(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(i,c)}u((r=r.apply(e,n||[])).next())}))},a=this&&this.__generator||function(e,n){var t,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(c){return function(u){return function(c){if(t)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(i=0)),i;)try{if(t=1,r&&(a=2&c[0]?r.return:c[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,c[1])).done)return a;switch(r=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,r=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==c[0]&&2!==c[0])){i=0;continue}if(3===c[0]&&(!a||c[1]>a[0]&&c[1]<a[3])){i.label=c[1];break}if(6===c[0]&&i.label<a[1]){i.label=a[1],a=c;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(c);break}a[2]&&i.ops.pop(),i.trys.pop();continue}c=n.call(e,i)}catch(e){c=[6,e],r=0}finally{t=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,u])}}};Object.defineProperty(n,"__esModule",{value:!0}),n.init=void 0;var o=t(917),i=t(838),c=t(955),u=t(952),s=function(){function e(e,n,t,r){this.module=e,this.dataType=n,this.data=t,this.dims=r}return e.prototype.getFloat32Array=function(){if(1!==this.dataType)throw new Error("Invalid data type");var e=u.ShapeUtil.size(this.dims);return 0===e?new Float32Array:new Float32Array(this.module.HEAP8.buffer,this.data,e)},e.prototype.getBigInt64Array=function(){if(7!==this.dataType)throw new Error("Invalid data type");var e=u.ShapeUtil.size(this.dims);return 0===e?new BigInt64Array:new BigInt64Array(this.module.HEAP8.buffer,this.data,e)},e.prototype.getInt32Array=function(){if(6!==this.dataType)throw new Error("Invalid data type");var e=u.ShapeUtil.size(this.dims);return 0===e?new Int32Array:new Int32Array(this.module.HEAP8.buffer,this.data,e)},e.prototype.reshape=function(n){if(u.ShapeUtil.size(n)!==u.ShapeUtil.size(this.dims))throw new Error("Invalid new shape");return new e(this.module,this.dataType,this.data,n)},e}(),l=function(){function e(e,n,t){this.module=e,this.backend=n,this.customDataOffset=0,this.customDataSize=0;var r=e.HEAPU32,a=t>>2;this.opKernelContext=r[a++];var o=r[a++];this.customDataOffset=r[a++],this.customDataSize=r[a++];for(var i=[],c=0;c<o;c++){for(var u=r[a++],l=r[a++],f=r[a++],p=[],d=0;d<f;d++)p.push(r[a++]);i.push(new s(e,u,l,p))}this.inputs=i}return Object.defineProperty(e.prototype,"kernelCustomData",{get:function(){return this.backend.currentKernelCustomData},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"customDataBuffer",{get:function(){return this.module.HEAPU8.subarray(this.customDataOffset,this.customDataOffset+this.customDataSize)},enumerable:!1,configurable:!0}),e.prototype.compute=function(e,n){var t,r,a,i=this,c=null!==(r=null===(t=null==n?void 0:n.inputs)||void 0===t?void 0:t.map((function(e){return"number"==typeof e?i.inputs[e]:e})))&&void 0!==r?r:this.inputs,l=null!==(a=null==n?void 0:n.outputs)&&void 0!==a?a:[];return this.backend.run(e,c,l,(function(e,n,t){return new s(i.module,n,i.output(e,t),t)}),(function(e,n){var t=(0,o.getTensorElementSize)(e);if(!t)throw new Error("Unsupported data type: ".concat(e));var r=t*u.ShapeUtil.size(n);return new s(i.module,e,i.backend.gpuDataManager.create(r).id,n)}))},e.prototype.output=function(e,n){var t=this.module.stackSave();try{var r=this.module.stackAlloc(4*(1+n.length)),a=r>>2;this.module.HEAPU32[a++]=n.length;for(var o=0;o<n.length;o++)this.module.HEAPU32[a++]=n[o];return this.module._JsepOutput(this.opKernelContext,e,r)}finally{this.module.stackRestore(t)}},e}();n.init=function(e,n){return r(void 0,void 0,void 0,(function(){var t,o;return a(this,(function(u){switch(u.label){case 0:if(!(t=e.jsepInit)||!navigator.gpu)return[3,2];if(!n.wasm.simd)throw new Error("Not supported for WebGPU=ON and SIMD=OFF. Please set `env.wasm.simd` to true when using WebGPU EP");return[4,(o=new i.WebGpuBackend).initialize(n)];case 1:u.sent(),t({backend:o},(function(e){return o.alloc(e)}),(function(e){return o.free(e)}),(function(n,t,r,a){if(void 0===a&&(a=!1),a)(0,c.LOG_DEBUG)("verbose",(function(){return"[WebGPU] jsepCopyGpuToGpu: src=".concat(n,", dst=").concat(t,", size=").concat(r)})),o.memcpy(n,t);else{(0,c.LOG_DEBUG)("verbose",(function(){return"[WebGPU] jsepCopyCpuToGpu: dataOffset=".concat(n,", gpuDataId=").concat(t,", size=").concat(r)}));var i=e.HEAPU8.subarray(n,n+r);o.upload(t,i)}}),(function(n,t,i){return r(void 0,void 0,void 0,(function(){return a(this,(function(r){switch(r.label){case 0:return(0,c.LOG_DEBUG)("verbose",(function(){return"[WebGPU] jsepCopyGpuToCpu: gpuDataId=".concat(n,", dataOffset=").concat(t,", size=").concat(i)})),[4,o.download(n,(function(){return e.HEAPU8.subarray(t,t+i)}))];case 1:return r.sent(),[2]}}))}))}),(function(e,n,t){return o.createKernel(e,n,t)}),(function(e){return o.releaseKernel(e)}),(function(n,t){(0,c.LOG_DEBUG)("verbose",(function(){return"[WebGPU] jsepRun: kernel=".concat(n,", contextDataOffset=").concat(t)}));var r=new l(e,o,t);return o.computeKernel(n,r)})),u.label=2;case 2:return[2]}}))}))}},955:function(e,n,t){"use strict";var r=this&&this.__read||function(e,n){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var r,a,o=t.call(e),i=[];try{for(;(void 0===n||n-- >0)&&!(r=o.next()).done;)i.push(r.value)}catch(e){a={error:e}}finally{try{r&&!r.done&&(t=o.return)&&t.call(o)}finally{if(a)throw a.error}}return i},a=this&&this.__spreadArray||function(e,n,t){if(t||2===arguments.length)for(var r,a=0,o=n.length;a<o;a++)!r&&a in n||(r||(r=Array.prototype.slice.call(n,0,a)),r[a]=n[a]);return e.concat(r||Array.prototype.slice.call(n))};Object.defineProperty(n,"__esModule",{value:!0}),n.LOG_DEBUG=n.LOG=n.configureLogger=void 0;var o,i,c=t(917),u=["V","I","W","E","F"];n.configureLogger=function(e,n){o=e,i=n},n.LOG=function(e,n){var t,r,a=(0,c.logLevelStringToEnum)(e);a>=(0,c.logLevelStringToEnum)(o)&&(t=a,r="function"==typeof n?n():n,console.log("[".concat(u[t],",").concat((new Date).toISOString(),"]").concat(r)))},n.LOG_DEBUG=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];i&&n.LOG.apply(void 0,a([],r(e),!1))}},952:function(e,n){"use strict";var t=this&&this.__read||function(e,n){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var r,a,o=t.call(e),i=[];try{for(;(void 0===n||n-- >0)&&!(r=o.next()).done;)i.push(r.value)}catch(e){a={error:e}}finally{try{r&&!r.done&&(t=o.return)&&t.call(o)}finally{if(a)throw a.error}}return i};Object.defineProperty(n,"__esModule",{value:!0}),n.MAX_CLIP=n.MIN_CLIP=n.GemmUtil=n.PoolConvUtil=n.ShapeUtil=n.BroadcastUtil=n.MatMulUtil=void 0;var r=function(){function e(){}return e.calcMatMulShape=function(e,n){return e[1]!==n[0]?void 0:[e[0],n[1]]},e}();n.MatMulUtil=r;var a=function(){function e(){}return e.calcShape=function(e,n,a){var o;void 0===a&&(a=!1);var i=e.length,c=n.length;if(0===i)return n;if(0===c)return e;var u=Math.max(e.length,n.length),s=new Array(u);if(a){if(i<2||c<2)return;var l=r.calcMatMulShape([e[i-2],e[i-1]],[n[c-2],n[c-1]]);if(void 0===l)return;o=t(l,2),s[u-2]=o[0],s[u-1]=o[1]}for(var f=a?3:1;f<=u;f++){var p=i-f<0?1:e[i-f],d=c-f<0?1:n[c-f];if(p!==d&&p>1&&d>1)return;s[u-f]=Math.max(p,d)}return s},e.isValidBroadcast=function(e,n){var t=e.length,r=n.length;if(t>r)return!1;for(var a=1;a<=t;a++)if(1!==e[t-a]&&e[t-a]!==n[r-a])return!1;return!0},e}();n.BroadcastUtil=a;var o=function(){function e(){}return e.size=function(n){return e.getSizeFromDimensionRange(n,0,n.length)},e.sizeFromDimension=function(n,t){if(t<0||t>n.length)throw new Error("invalid dimension of ".concat(t," for sizeFromDimension as Tensor has ").concat(n.length," dimensions."));return e.getSizeFromDimensionRange(n,t,n.length)},e.sizeToDimension=function(n,t){if(t<0||t>n.length)throw new Error("invalid dimension of ".concat(t," for sizeToDimension as Tensor has ").concat(n.length," dimensions."));return e.getSizeFromDimensionRange(n,0,t)},e.getSizeFromDimensionRange=function(e,n,t){for(var r=1,a=n;a<t;a++){if(e[a]<0)throw new Error("cannot get valid size from specified dimension range. Most likely the range contains negative values in them.");r*=e[a]}return r},e.computeStrides=function(e){var n=e.length;if(0===n)return[];if(1===n)return[1];var t=new Array(n);t[n-1]=1,t[n-2]=e[n-1];for(var r=n-3;r>=0;--r)t[r]=t[r+1]*e[r+1];return t},e.normalizeAxis=function(e,n){if(e<-n&&e>=n)throw new Error("unsupported axis for this operation.");return e<0?e+n:e},e.normalizeAxes=function(e,n){var t=this;return e.map((function(r){return t.normalizeAxis(r,null!=n?n:e.length)}))},e.sortBasedOnPerm=function(e,n){return n?n.map((function(n){return e[n]})):e.slice().reverse()},e.padShape=function(e,n){var t=e.length;return e.map((function(e,r){return e+n[r]+n[r+t]}))},e.areEqual=function(e,n){return e.length===n.length&&e.every((function(e,t){return e===n[t]}))},e}();n.ShapeUtil=o;var i=function(){function e(){}return e.adjustPoolAttributes=function(e,n,t,r,a,o){if(!e&&t.length!==n.length-2)throw new Error("length of specified kernel shapes should be 2 less than length of input dimensions");if(e)for(var i=0;i<n.length-2;i++)i>=t.length?t.push(n[i+2]):t[i]=n[i+2];for(i=0;i<t.length;i++)if(i<r.length){if(r[i]<0)throw new Error("strides should be greater than or equal to 1")}else r.push(1);for(i=0;i<t.length;i++)if(i<a.length){if(a[i]<0)throw new Error("dilations should be greater than or equal to 1")}else a.push(1);for(i=0;i<2*t.length;i++)if(i<o.length){if(o[i]<0)throw new Error("pad should be greater than or equal to 1")}else o.push(0);for(i=0;i<t.length;i++){if(t[i]<=0)throw new Error("kernel shapes need to be greater than 0");if(o[i]>=t[i]||o[i+t.length]>=t[i])throw new Error("pads should be smaller than kernel")}},e.adjustPadsBasedOnAutoPad=function(n,t,r,a,o,i,c){if(c){if(o.length!==2*(n.length-2))throw new Error("length of pads should be twice the length of data dimensions");if(t.length!==n.length-2)throw new Error("length of strides should be the length of data dimensions");if(a.length!==n.length-2)throw new Error("length of kernel shapes should be the length of data dimensions");for(var u=0;u<n.length-2;u++)e.adjustPadAndReturnShape(n[u+(i?1:2)],t[u],r[u],a[u],o,u,u+n.length-2,c)}},e.computePoolOutputShape=function(n,t,r,a,o,i,c){if(t.length<=0)throw new Error("input shape must be of size greater than 0");var u=[t[0],t[1]];return e.computeShapeHelper(n,t,u,r,a,o,i,c),u},e.computeConvOutputShape=function(n,t,r,a,o,i,c){if(n.length<=0||t.length<=0)throw new Error("invalid input tensor dims or invalid filter tensor dims");var u=[n[0],t[0]];return e.computeShapeHelper(!1,n,u,r,a,o,i,c),u},e.computeShapeHelper=function(n,t,r,a,o,i,c,u){if(n)for(var s=0;s<t.length-2;s++)r.push(1);else for(s=0;s<t.length-2;s++)r.push(e.adjustPadAndReturnShape(t[s+2],a[s],o[s],i[s],c,s,s+t.length-2,u))},e.adjustPadAndReturnShape=function(e,n,t,r,a,o,i,c){var u=t*(r-1)+1;if(!c||"NOTSET"===c)return Math.floor((e+a[o]+a[i]-u)/n+1);switch(c){case"VALID":return a[o]=0,a[i]=0,Math.floor((e-u)/n+1);case"SAME_LOWER":case"SAME_UPPER":if(1!==t)throw new Error("Dilation not supported for SAME_UPPER or SAME_LOWER");var s=((e+n-1)/n-1)*n+r-e;return a[o]="SAME_LOWER"===c?Math.floor((s+1)/2):Math.floor(s/2),a[i]=s-a[o],Math.floor((e+s-r)/n+1);default:throw new Error("Unsupported AutoPad type")}},e}();n.PoolConvUtil=i;var c=function(){function e(){}return e.getShapeOfGemmResult=function(e,n,t,r,o){if(2!==e.length||2!==t.length)throw new Error("shape need to be of size 2");var i,c,u;n?(i=e[1],c=e[0]):(i=e[0],c=e[1]);var s=-1;if(r?(u=t[0],s=1):(u=t[1],s=0),t[s]!==c)throw new Error("dimension mismatch");if(i<=0||u<=0||c<=0)throw new Error("invalid shape specified");if(o&&!a.isValidBroadcast(o,[i,u]))throw new Error("gemm: invalid bias shape for broadcast");return[i,u,c]},e}();n.GemmUtil=c,n.MIN_CLIP=-34028234663852886e22,n.MAX_CLIP=34028234663852886e22},387:function(e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.createAttributeWithCacheKey=void 0;var t=function(){function e(e){Object.assign(this,e)}return Object.defineProperty(e.prototype,"cacheKey",{get:function(){var e=this;return this._cacheKey||(this._cacheKey=Object.getOwnPropertyNames(this).sort().map((function(n){return"".concat(e[n])})).join(";")),this._cacheKey},enumerable:!1,configurable:!0}),e}();n.createAttributeWithCacheKey=function(e){return new t(e)}},771:function(e,n,t){"use strict";var r=this&&this.__awaiter||function(e,n,t,r){return new(t||(t=Promise))((function(a,o){function i(e){try{u(r.next(e))}catch(e){o(e)}}function c(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var n;e.done?a(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(i,c)}u((r=r.apply(e,n||[])).next())}))},a=this&&this.__generator||function(e,n){var t,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(c){return function(u){return function(c){if(t)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(i=0)),i;)try{if(t=1,r&&(a=2&c[0]?r.return:c[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,c[1])).done)return a;switch(r=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,r=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==c[0]&&2!==c[0])){i=0;continue}if(3===c[0]&&(!a||c[1]>a[0]&&c[1]<a[3])){i.label=c[1];break}if(6===c[0]&&i.label<a[1]){i.label=a[1],a=c;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(c);break}a[2]&&i.ops.pop(),i.trys.pop();continue}c=n.call(e,i)}catch(e){c=[6,e],r=0}finally{t=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,u])}}},o=this&&this.__values||function(e){var n="function"==typeof Symbol&&Symbol.iterator,t=n&&e[n],r=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")},i=this&&this.__read||function(e,n){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var r,a,o=t.call(e),i=[];try{for(;(void 0===n||n-- >0)&&!(r=o.next()).done;)i.push(r.value)}catch(e){a={error:e}}finally{try{r&&!r.done&&(t=o.return)&&t.call(o)}finally{if(a)throw a.error}}return i},c=this&&this.__spreadArray||function(e,n,t){if(t||2===arguments.length)for(var r,a=0,o=n.length;a<o;a++)!r&&a in n||(r||(r=Array.prototype.slice.call(n,0,a)),r[a]=n[a]);return e.concat(r||Array.prototype.slice.call(n))};Object.defineProperty(n,"__esModule",{value:!0}),n.createGpuDataManager=void 0;var u=t(955),s=t(163),l=function(e){return 16*Math.ceil(e/16)},f=0,p=function(){function e(e){this.backend=e,this.storageCache=new Map,this.downloadCache=new Map,this.freeBuffers=new Map,this.buffersForUploadingPending=[],this.buffersPending=[]}return e.prototype.upload=function(e,n){var t=n.buffer,r=n.byteOffset,a=n.byteLength,o=l(a),i=this.storageCache.get(e);if(!i)throw new Error("gpu data for uploading does not exist");if(i.originalSize!==a)throw new Error("inconsistent data size. gpu data size=".concat(i.originalSize,", data size=").concat(a));var c=this.backend.device.createBuffer({mappedAtCreation:!0,size:o,usage:GPUBufferUsage.MAP_WRITE|GPUBufferUsage.COPY_SRC}),s=c.getMappedRange();new Uint8Array(s).set(new Uint8Array(t,r,a)),c.unmap();var f=this.backend.getCommandEncoder();this.backend.endComputePass(),f.copyBufferToBuffer(c,0,i.gpuData.buffer,0,o),(0,u.LOG_DEBUG)("verbose",(function(){return"[WebGPU] GpuDataManager.upload(id=".concat(e,")")})),this.buffersForUploadingPending.push(c)},e.prototype.memcpy=function(e,n){var t=this.storageCache.get(e);if(!t)throw new Error("source gpu data for memcpy does not exist");var r=this.storageCache.get(n);if(!r)throw new Error("destination gpu data for memcpy does not exist");if(t.originalSize!==r.originalSize)throw new Error("inconsistent source and destination gpu data size");var a=l(t.originalSize),o=this.backend.getCommandEncoder();this.backend.endComputePass(),o.copyBufferToBuffer(t.gpuData.buffer,0,r.gpuData.buffer,0,a)},e.prototype.create=function(e,n){void 0===n&&(n=GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST);var t,r=l(e),a=this.freeBuffers.get(r);a||(a=[],this.freeBuffers.set(r,a)),t=a.length>0?a.pop():this.backend.device.createBuffer({size:r,usage:n});var o={id:f++,type:s.GpuDataType.default,buffer:t};return this.storageCache.set(o.id,{gpuData:o,originalSize:e}),(0,u.LOG_DEBUG)("verbose",(function(){return"[WebGPU] GpuDataManager.create(size=".concat(e,") => id=").concat(o.id)})),o},e.prototype.get=function(e){var n;return null===(n=this.storageCache.get(e))||void 0===n?void 0:n.gpuData},e.prototype.release=function(e){var n=this.storageCache.get(e);if(!n)throw new Error("releasing data does not exist");return(0,u.LOG_DEBUG)("verbose",(function(){return"[WebGPU] GpuDataManager.release(id=".concat(e,"), gpuDataId=").concat(n.gpuData.id)})),this.storageCache.delete(e),this.buffersPending.push(n.gpuData.buffer),this.downloadCache.get(e)&&this.downloadCache.delete(e),n.originalSize},e.prototype.download=function(e){return r(this,void 0,void 0,(function(){var n,t,r,o,i,c;return a(this,(function(a){if(n=this.downloadCache.get(e))return[2,n.data];if(!(t=this.storageCache.get(e)))throw new Error("data does not exist");return r=this.backend.getCommandEncoder(),this.backend.endComputePass(),o=l(t.originalSize),i=this.backend.device.createBuffer({size:o,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}),r.copyBufferToBuffer(t.gpuData.buffer,0,i,0,o),this.backend.flush(),c=new Promise((function(e){i.mapAsync(GPUMapMode.READ).then((function(){var n=i.getMappedRange().slice(0);i.destroy(),e(n)}))})),this.downloadCache.set(e,{data:c}),[2,c]}))}))},e.prototype.refreshPendingBuffers=function(){var e,n,t,r;try{for(var a=o(this.buffersForUploadingPending),i=a.next();!i.done;i=a.next())(s=i.value).destroy()}catch(n){e={error:n}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}this.buffersForUploadingPending=[];try{for(var c=o(this.buffersPending),u=c.next();!u.done;u=c.next()){var s=u.value;this.freeBuffers.get(s.size).push(s)}}catch(e){t={error:e}}finally{try{u&&!u.done&&(r=c.return)&&r.call(c)}finally{if(t)throw t.error}}this.buffersPending=[]},e.prototype.dispose=function(){this.freeBuffers.forEach((function(e){e.forEach((function(e){e.destroy()}))})),this.storageCache.forEach((function(e){e.gpuData.buffer.destroy()})),this.storageCache=new Map,this.downloadCache=new Map,this.freeBuffers=new Map},e}();n.createGpuDataManager=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return new(p.bind.apply(p,c([void 0],i(e),!1)))}},510:function(e,n,t){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,n,t,r){void 0===r&&(r=t);var a=Object.getOwnPropertyDescriptor(n,t);a&&!("get"in a?!n.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return n[t]}}),Object.defineProperty(e,r,a)}:function(e,n,t,r){void 0===r&&(r=t),e[r]=n[t]}),a=this&&this.__setModuleDefault||(Object.create?function(e,n){Object.defineProperty(e,"default",{enumerable:!0,value:n})}:function(e,n){e.default=n}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var n={};if(null!=e)for(var t in e)"default"!==t&&Object.prototype.hasOwnProperty.call(e,t)&&r(n,e,t);return a(n,e),n};Object.defineProperty(n,"__esModule",{value:!0}),n.WEBGPU_OP_RESOLVE_RULES=void 0;var i=o(t(504)),c=t(513),u=t(770),s=t(640),l=t(856),f=t(271),p=t(522),d=o(t(262)),h=t(31),g=t(101),v=t(67),m=t(625),y=o(t(302));n.WEBGPU_OP_RESOLVE_RULES=new Map([["Abs",[y.abs]],["Acos",[y.acos]],["Acosh",[y.acosh]],["Add",[i.add]],["Asin",[y.asin]],["Asinh",[y.asinh]],["Atan",[y.atan]],["Atanh",[y.atanh]],["AveragePool",[d.averagePool,d.parseAveragePoolAttributes]],["Ceil",[y.ceil]],["ClipV10",[y.clipV10]],["Clip",[y.clip]],["Concat",[c.concat,c.parseConcatAttributes]],["Conv",[u.conv,u.parseConvAttributes]],["ConvTranspose",[s.convTranspose,s.parseConvTransposeAttributes]],["Cos",[y.cos]],["Cosh",[y.cosh]],["Div",[i.div]],["Elu",[y.elu,y.parseAlphaAttributes]],["Erf",[y.erf]],["Exp",[y.exp]],["Expand",[l.expand]],["Floor",[y.floor]],["Gemm",[f.gemm,f.parseGemmAttributes]],["GlobalAveragePool",[d.globalAveragePool,d.parseGlobalAveragePoolAttributes]],["GlobalMaxPool",[d.globalMaxPool,d.parseGlobalMaxPoolAttributes]],["LeakyRelu",[y.leakyRelu,y.parseAlphaAttributes]],["MatMul",[p.matMul]],["MaxPool",[d.maxPool,d.parseMaxPoolAttributes]],["Mul",[i.mul]],["Neg",[y.neg]],["Pow",[i.pow]],["Reciprocal",[y.reciprocal]],["ReduceMin",[h.reduceMin,h.parseReduceAttributes]],["ReduceMean",[h.reduceMean,h.parseReduceAttributes]],["ReduceMax",[h.reduceMax,h.parseReduceAttributes]],["ReduceSum",[h.reduceSum,h.parseReduceAttributes]],["ReduceProd",[h.reduceProd,h.parseReduceAttributes]],["ReduceL1",[h.reduceL1,h.parseReduceAttributes]],["ReduceL2",[h.reduceL2,h.parseReduceAttributes]],["ReduceLogSum",[h.reduceLogSum,h.parseReduceAttributes]],["ReduceLogSumExp",[h.reduceLogSumExp,h.parseReduceAttributes]],["ReduceSumSquare",[h.reduceSumSquare,h.parseReduceAttributes]],["Relu",[y.relu]],["Sigmoid",[y.sigmoid]],["Sin",[y.sin]],["Sinh",[y.sinh]],["Slice",[g.slice,g.parseSliceAttributes]],["Split",[v.split,v.parseSplitAttributes]],["Sqrt",[y.sqrt]],["Sub",[i.sub]],["Tan",[y.tan]],["Tanh",[y.tanh]],["ThresholdedRelu",[y.thresholdedRelu,y.parseAlphaAttributes]],["Transpose",[m.transpose,m.parseTransposeAttributes]]])},427:function(e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.biasActivationSnippet=n.activationFnSnippet=n.typeSnippet=void 0,n.typeSnippet=function(e){switch(e){case 1:return"f32";case 2:return"vec2<f32>";case 3:return"vec3<f32>";case 4:return"vec4<f32>";default:throw new Error("".concat(e,"-component is not supported."))}},n.activationFnSnippet=function(e,n,t,r){return void 0===n&&(n=!1),void 0===t&&(t=!1),void 0===r&&(r=3),""},n.biasActivationSnippet=function(e,n){return"\\n      ".concat(e?"value = value + getBiasByOutputCoords(coords);":"","\\n      ").concat(n?"value = activation(value, coords);":"","\\n      ")}},456:function(e,n,t){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},r.apply(this,arguments)};Object.defineProperty(n,"__esModule",{value:!0}),n.createConv2DMatMulProgramInfo=void 0;var a=t(955),o=t(952),i=t(163),c=t(427),u=t(85),s=t(158);n.createConv2DMatMulProgramInfo=function(e,n,t,l,f,p,d,h,g){var v="NHWC"===t.format,m=v?e[0].dims[3]:e[0].dims[1],y=l[0],b=v?l[2]:l[3],w=v?l[1]:l[2],_=v?l[3]:l[1],S=((m%4==0||m%3==0)&&v||b%4==0&&!v)&&_%4==0,A=v?_:b*w,C=v?b*w:_,x=S?[8,8,1]:[A<=4?4:16,A>4&&C<=4?4:16,1],T=S?[4,4,1]:[A<=4?1:2,A>4&&C<=4?1:2,1],P=[Math.ceil(A/x[0]/T[0]),Math.ceil(C/x[1]/T[1]),Math.ceil(y/x[2]/T[1])];(0,a.LOG_DEBUG)("verbose",(function(){return"[conv2d_mm_webgpu] dispatch = ".concat(P)}));var E=S?v&&m%4!=0?3:4:T[0],O=x[1]*T[1],I=x[0]*T[0],k=Math.max(x[0]*E,x[1]),R=f%O==0,D=p%I==0,M=d%k==0,U=S?[E,4,4]:[1,1,1],W=["@group(0) @binding(0) var<storage, read> x: array<".concat(S&&4===E?"vec4<f32>":"f32",">;"),"@group(0) @binding(1) var<storage, read> w: array<".concat(S?"vec4<f32>":"f32",">;")],j="\\n      fn setOutputAtIndex(flatIndex : i32, value : ".concat(S?"vec4<f32>":"f32",") {\\n        result[flatIndex] = ").concat(S?"vec4<f32>":"f32","(value);\\n      }\\n      fn setOutputAtCoords(d0 : i32, d1 : i32, d2 : i32, d3 : i32, value : ").concat(S?"vec4<f32>":"f32",") {\\n        let flatIndex = getOutputIndexFromCoords(vec4<i32>(d0, d1, d2, d3));\\n        setOutputAtIndex(flatIndex ").concat(S?"/ 4":"",", value);\\n      }");return h&&(W.push("@group(0) @binding(2) var<storage, read> bias: array<".concat(S?"vec4<f32>":"f32",">;")),j+="\\n        fn getBiasByOutputCoords(coords : vec4<i32>) -> ".concat(S?"vec4<f32>":"f32"," {\\n          return bias[coords.").concat(v?"w":"y").concat(S?"/ 4":"","];\\n        }")),r(r({},n),{outputs:[{dims:l,dataType:e[0].dataType,gpuDataType:i.GpuDataType.default}],dispatchGroup:function(){return{x:P[0],y:P[1],z:P[2]}},getShaderSource:function(){return"\\n        ".concat(u.utilFunctions,"\\n        //struct Uniforms { xShape : vec4<i32>, wShape : vec4<i32>, outShape : vec4<i32>,\\n        //  outShapeStrides: vec3<i32>, filterDims : vec2<i32>, pad : vec2<i32>, stride : vec2<i32>,\\n        //  dilation : vec2<i32>, dimAOuter : i32, dimBOuter : i32, dimInner : i32 };\\n        ").concat(W.join(""),"\\n        @group(0) @binding(").concat(W.length,") var<storage, read_write> result: array<").concat(S?"vec4<f32>":"f32",">;\\n        //@group(0) @binding(").concat(W.length+1,") var<uniform> uniforms: Uniforms;\\n\\n        const xShape : vec4<i32> = vec4<i32>(").concat(e[0].dims.join(","),");\\n        const wShape : vec4<i32> = vec4<i32>(").concat(e[1].dims.join(","),");\\n        const outShape : vec4<i32> = vec4<i32>(").concat(l.join(","),");\\n        const outShapeStrides : vec3<i32> = vec3<i32>(").concat(o.ShapeUtil.computeStrides(l).slice(0,3).join(","),");\\n        const filterDims : vec2<i32> = vec2<i32>(").concat(t.kernelShape[0],", ").concat(t.kernelShape[1],");\\n        const pad : vec2<i32> = vec2<i32>(").concat(t.pads[0],", ").concat(t.pads[1],");\\n        const stride : vec2<i32> = vec2<i32>(").concat(t.strides[0],", ").concat(t.strides[1],");\\n        const dilation : vec2<i32> = vec2<i32>(").concat(t.dilations[0],", ").concat(t.dilations[1],");\\n        const dimAOuter : i32 = ").concat(f,";\\n        const dimBOuter : i32 = ").concat(p,";\\n        const dimInner : i32 = ").concat(d,";\\n        ").concat(j,"\\n        ").concat(function(e,n,t,r,a,o,i,u,s,l){void 0===a&&(a=!1),void 0===i&&(i=!1),void 0===u&&(u=4),void 0===s&&(s=4),void 0===l&&(l=4);var f=e?"\\n    let coord = vec4<i32>(batch, xRow, xCol, xCh);\\n    ":"\\n    let coord = vec4<i32>(batch, xCh, xRow, xCol);\\n    ",p=e?"\\n    let coords = vec4<i32>(\\n      batch,\\n      row / outWidth,\\n      row % outWidth,\\n      col);\\n    ":"\\n    let coords = vec4<i32>(\\n      batch,\\n      row,\\n      col / outWidth,\\n      col % outWidth);\\n    ",d=e?"xShape[1]":"xShape[2]",h=e?"xShape[2]":"xShape[3]",g=e?"row":"col",v=e?"col":"row",m="\\n    let inChannels = wShape[2];\\n    let outWidth = ".concat(e?"outShape[2]":"outShape[3]",";\\n    let outRow = ").concat(g," / outWidth;\\n    let outCol = ").concat(g," % outWidth;\\n\\n    let WRow = ").concat(v," / (filterDims[1] * inChannels);\\n    let WCol = ").concat(v," / inChannels % filterDims[1];\\n    let xRow = outRow * stride[0] + dilation[0] * WRow - pad[0];\\n    let xCol = outCol * stride[1] + dilation[1] * WCol - pad[1];\\n    let xCh = ").concat(v," % inChannels;\\n    var resData = ").concat((0,c.typeSnippet)(u),"(0.0);\\n    // The bounds checking is always needed since we use it to pad zero for\\n    // the \'same\' padding type.\\n    if (xRow >= 0 && xRow < ").concat(d," && xCol >= 0 && xCol < ").concat(h,") {\\n      ").concat(f,"\\n      let xIndex = getIndexFromCoords4D(coord, xShape);\\n      ").concat(function(e){switch(e){case 1:return"resData = x[xIndex];";case 3:return"resData = vec3<f32>(x[xIndex], x[xIndex + 1], x[xIndex + 2]);";case 4:return"resData = x[xIndex / 4];";default:throw new Error("innerElementSize ".concat(e," is not supported."))}}(u),"\\n    }\\n    return resData;"),y=e?n&&r?"\\n    let col = colIn * ".concat(u,";\\n    ").concat(m):"\\n    let col = colIn * ".concat(u,";\\n    if (row < dimAOuter && col < dimInner) {\\n      ").concat(m,"\\n    }\\n    return ").concat((0,c.typeSnippet)(u),"(0.0);"):r&&t?"\\n    let col = colIn * ".concat(u,";\\n    ").concat(m):"\\n    let col = colIn * ".concat(u,";\\n    if (row < dimInner && col < dimBOuter) {\\n      ").concat(m,"\\n    }\\n    return ").concat((0,c.typeSnippet)(u),"(0.0);"),b="".concat(function(e){switch(e){case 1:return"return w[row * wShape[3] + colIn];";case 4:return"return w[row * wShape[3] / 4 + colIn];";default:throw new Error("innerElementSize ".concat(e," is not supported."))}}(s)),w=(0,c.typeSnippet)(l),_=e?(0,c.typeSnippet)(u):(0,c.typeSnippet)(s),S=e?(0,c.typeSnippet)(s):(0,c.typeSnippet)(u);return"\\n    ".concat((0,c.activationFnSnippet)(o,i,4===l,4),"\\n    fn mm_readA(batch: i32, row : i32, colIn : i32) -> ").concat(_," {\\n      ").concat(e?y:b,"\\n    }\\n\\n    fn mm_readB(batch: i32, row : i32, colIn : i32) -> ").concat(S," {\\n      ").concat(e?b:y,"\\n    }\\n\\n    fn mm_write(batch: i32, row : i32, colIn : i32, valueIn : ").concat(w,") {\\n      let col = colIn * ").concat(l,";\\n      if (row < dimAOuter && col < dimBOuter)\\n      {\\n      var value = valueIn;\\n      let outWidth = ").concat(e?"outShape[2]":"outShape[3]",";\\n      ").concat(p,"\\n      ").concat((0,c.biasActivationSnippet)(a,o),"\\n      setOutputAtCoords(coords[0], coords[1], coords[2], coords[3], value);\\n      }\\n    }")}(v,R,D,M,h,void 0,!1,U[0],U[1],U[2]),"\\n            ").concat(S?(0,s.makeMatMulPackedVec4Source)(T,x,!v,k):(0,s.makeMatMulPackedSource)(T,x,!v,k,!1,void 0,g))}})}},514:function(e,n,t){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},r.apply(this,arguments)};Object.defineProperty(n,"__esModule",{value:!0}),n.createConvTranspose2DProgramInfo=void 0;var a=t(955),o=t(952),i=t(163),c=t(75);n.createConvTranspose2DProgramInfo=function(e,n,t,u){var s=e.length>2,l="NHWC"===t.format,f=t.outputShape,p=f[0],d=f[l?1:2],h=f[l?2:3],g=f[l?3:1],v=e[0].dims[l?3:1]%4==0&&g%4==0,m=l?g:d*h,y=l?d*h:g,b=v?[8,8,1]:[m<=4?4:16,m>4&&y<=4?4:16,1],w=v?[4,4,1]:[m<=4?1:2,m>4&&y<=4?1:2,1],_=[Math.ceil(m/b[0]/w[0]),Math.ceil(y/b[1]/w[1]),Math.ceil(p/b[2]/w[1])];return(0,a.LOG_DEBUG)("verbose",(function(){return"[conv2d_backprop_webgpu] dispatch = ".concat(_)})),r(r({},n),{outputs:[{dims:u?u(f):f,dataType:e[0].dataType,gpuDataType:i.GpuDataType.default}],dispatchGroup:function(){return{x:_[0],y:_[1],z:_[2]}},getShaderSource:function(n){return function(e,n,t,r,a,i){var u="NHWC"===t.format,s=u?1:2,l=u?2:3,f=u?3:1,p=o.ShapeUtil.size(r),d=r[u?3:1],h=n[0].dims[u?3:1],g=h%4==0&&d%4==0,v=g?2:1,m=["@group(0) @binding(0) var<storage, read> Dy: array<".concat(g&&4===(g?u&&h%4!=0?3:4:i[0])?"vec4<f32>":"f32",">;"),"@group(0) @binding(1) var<storage, read> W: array<".concat(g?"vec4<f32>":"f32",">;")],y="\\n  fn setOutputAtIndex(flatIndex : u32, value : ".concat(g?"vec4<f32>":"f32",") {\\n    result[flatIndex] = ").concat(g?"vec4<f32>":"f32","(value);\\n  }");a&&(m.push("@group(0) @binding(2) var<storage, read> bias: array<".concat(g?"vec4<f32>":"f32",">;")),y+="\\n    fn getBiasByOutputCoords(coords : vec4<u32>) -> ".concat(g?"vec4<f32>":"f32"," {\\n      return bias[coords.").concat(u?"w":"y").concat(g?"/ 4":"","];\\n    }"));var b=(0,c.createIndicesHelper)("W",n[1].dims),w=(0,c.createIndicesHelper)("Dy",n[0].dims),_=(0,c.createIndicesHelper)("result",r),S="{\\n        let batch: u32 = global_id.z / outShape[1];\\n        let r = global_id.z % outShape[1];\\n        let c = global_id.y * ".concat(v,";\\n        let d1: u32 = global_id.x * 4;\\n\\n        let dyCorner = vec2<i32>(i32(r), i32(c)) - vec2<i32>(pads);\\n\\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\\n        // ? = to be determined. : = across all values in that axis.\\n        var dotProd: array<vec4<f32>, ").concat(v,">;\\n        for (var i = 0; i < ").concat(v,"; i++) {\\n          dotProd[i] = vec4<f32>(0.0);\\n        }\\n        for (var wR: u32 = 0; wR < filterDims[0]; wR = wR + 1) {\\n          var dyR = f32(dyCorner.x + wR) / f32(strides.x);\\n          let wRPerm: u32= filterDims[0] - 1 - wR;\\n          if (dyR < 0.0 || dyR >= f32(outBackprop[1]) ||\\n              fract(dyR) > 0.0) {\\n            continue;\\n          }\\n          let idyR: u32 = u32(dyR);\\n\\n          for (var wC: u32 = 0; wC < filterDims[1]; wC = wC + 1) {\\n            let dyC = f32(dyCorner.y + wC) / f32(strides.y);\\n            let dyC2 = f32(dyCorner.y + 1 + wC) / f32(strides.y);\\n            let wCPerm: u32 = filterDims[1] - 1 - wC;\\n            var bDyCVal = true;\\n            var bDyCVal2 = true;\\n            if (dyC < 0.0 || dyC >= f32(outBackprop[2]) ||\\n                fract(dyC) > 0.0) {\\n              bDyCVal = false;\\n            }\\n            if (dyC2 < 0.0 || dyC2 >= f32(outBackprop[2]) ||\\n                fract(dyC2) > 0.0) {\\n              bDyCVal2 = false;\\n            }\\n\\n            let idyC: u32 = u32(dyC);\\n            let idyC2: u32 = u32(dyC2);\\n            if (bDyCVal && bDyCVal2) {\\n              let d2Length = outBackprop[3];\\n              for (var d2 :u32 = 0; d2 < d2Length; d2 = d2 + 4) {\\n                ").concat(b.indicesVariableDeclaration("wIndices0",["d2","d1","wRPerm","wCPerm"]),";\\n                ").concat(b.indicesVariableDeclaration("wIndices1",["d2","d1+1","wRPerm","wCPerm"]),";\\n                ").concat(b.indicesVariableDeclaration("wIndices2",["d2","d1+2","wRPerm","wCPerm"]),";\\n                ").concat(b.indicesVariableDeclaration("wIndices3",["d2","d1+3","wRPerm","wCPerm"]),";\\n                let wValue0 = W[").concat(b.i2oExpression("wIndices0"),"];\\n                let wValue1 = W[").concat(b.i2oExpression("wIndices1"),"];\\n                let wValue2 = W[").concat(b.i2oExpression("wIndices2"),"];\\n                let wValue3 = W[").concat(b.i2oExpression("wIndices3"),"];\\n                ").concat(w.indicesVariableDeclaration("dyIndices",u?["batch","idyR","idyC","d2"]:["batch","d2","idyR","idyC"]),";\\n                var xValue =  Dy[").concat(w.i2oExpression("dyIndices"),"];\\n                let tmpval = vec4<f32>(xValue * wValue0,\\n                                      xValue * wValue1,\\n                                      xValue * wValue2,\\n                                      xValue * wValue3);\\n                dotProd[0] = dotProd[0] + tmpval;\\n\\n                ").concat(w.indicesVariableDeclaration("dyIndices2",u?["batch","idyR","idyC2","d2"]:["batch","d2","idyR","idyC2"]),";\\n                xValue =  Dy[").concat(w.i2oExpression("dyIndices"),"];\\n\\n                dotProd[1] = dotProd[1] + vec4<f32>(xValue * wValue0,\\n                                                    xValue * wValue1,\\n                                                    xValue * wValue2,\\n                                                    xValue * wValue3);\\n              }\\n            } else if (bDyCVal) {\\n              let d2Length = outBackprop[3];\\n              for (var d2: u32 = 0; d2 < d2Length; d2 = d2 + 4) {\\n                ").concat(b.indicesVariableDeclaration("wIndices0",["d2","d1","wRPerm","wCPerm"]),";\\n                ").concat(b.indicesVariableDeclaration("wIndices1",["d2","d1+1","wRPerm","wCPerm"]),";\\n                ").concat(b.indicesVariableDeclaration("wIndices2",["d2","d1+2","wRPerm","wCPerm"]),";\\n                ").concat(b.indicesVariableDeclaration("wIndices3",["d2","d1+3","wRPerm","wCPerm"]),";\\n                let wValue0 = W[").concat(b.i2oExpression("wIndices0"),"];\\n                let wValue1 = W[").concat(b.i2oExpression("wIndices1"),"];\\n                let wValue2 = W[").concat(b.i2oExpression("wIndices2"),"];\\n                let wValue3 = W[").concat(b.i2oExpression("wIndices3"),"];\\n                ").concat(w.indicesVariableDeclaration("dyIndices",u?["batch","idyR","idyC","d2"]:["batch","d2","idyR","idyC"]),";\\n                var xValue =  Dy[").concat(w.i2oExpression("dyIndices"),"];\\n                let tmpval = vec4<f32>(xValue * wValue0,\\n                                      xValue * wValue1,\\n                                      xValue * wValue2,\\n                                      xValue * wValue3);\\n                dotProd[0] = dotProd[0] + tmpval;\\n              }\\n            } else if (bDyCVal2) {\\n              let d2Length = outBackprop[3];\\n              for (var d2: u32 = 0; d2 < d2Length; d2 = d2 + 4) {\\n                ").concat(b.indicesVariableDeclaration("wIndices0",["d2","d1","wRPerm","wCPerm"]),";\\n                ").concat(b.indicesVariableDeclaration("wIndices1",["d2","d1+1","wRPerm","wCPerm"]),";\\n                ").concat(b.indicesVariableDeclaration("wIndices2",["d2","d1+2","wRPerm","wCPerm"]),";\\n                ").concat(b.indicesVariableDeclaration("wIndices3",["d2","d1+3","wRPerm","wCPerm"]),";\\n                let wValue0 = W[").concat(b.i2oExpression("wIndices0"),"];\\n                let wValue1 = W[").concat(b.i2oExpression("wIndices1"),"];\\n                let wValue2 = W[").concat(b.i2oExpression("wIndices2"),"];\\n                let wValue3 = W[").concat(b.i2oExpression("wIndices3"),"];\\n                ").concat(w.indicesVariableDeclaration("dyIndices",u?["batch","idyR","idyC","d2"]:["batch","d2","idyR","idyC"]),";\\n                var xValue =  Dy[").concat(w.i2oExpression("dyIndices"),"];\\n                let tmpval = vec4<f32>(xValue * wValue0,\\n                                      xValue * wValue1,\\n                                      xValue * wValue2,\\n                                      xValue * wValue3);\\n                dotProd[1] = dotProd[1] + tmpval;\\n              }\\n            }\\n          }\\n        }\\n\\n        for (var i: u32 = 0; i < ").concat(v,"; i = i + 1) {\\n          ").concat(_.indicesVariableDeclaration("outputIndices",["batch","r","c+i","d1"]),";\\n          result[").concat(_.i2oExpression("outputIndices"),"] = dotProd[i];\\n        }\\n      }"),A="\\n          ".concat(_.o2iCall("global_idx","outputIndices"),"\\n          let batch = outputIndices[0];\\n          let d1 = outputIndices[").concat(f,"];\\n          let dyCorner = vec2<i32>(i32(outputIndices[").concat(s,"]), i32(outputIndices[").concat(l,"])) - pads;\\n          let dyRCorner = dyCorner.x;\\n          let dyCCorner = dyCorner.y;\\n          // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\\n          // ? = to be determined. : = across all values in that axis.\\n          var dotProd = 0.0;\\n          for (var wR: u32 = 0; wR < effectiveFilterDims.x; wR = wR + 1) {\\n            if (wR % dilations.x != 0) {\\n              continue;\\n            }\\n            let dyR = (f32(dyRCorner) + f32(wR)) / f32(strides[0]);\\n            let wRPerm = filterDims.x - 1 - wR / dilations.x;\\n            if (dyR < 0.0 || dyR >= f32(outBackprop[1]) || fract(dyR) > 0.0 ||\\n                wRPerm < 0) {\\n              continue;\\n            }\\n            let idyR: u32 = u32(dyR);\\n\\n            for (var wC: u32 = 0; wC < effectiveFilterDims.y; wC = wC + 1) {\\n              if (wC % dilations.y != 0) {\\n                continue;\\n              }\\n              let dyC = (f32(dyCCorner) + f32(wC)) / f32(strides.y);\\n              let wCPerm = filterDims.y - 1 - wC / dilations.y;\\n              if (dyC < 0.0 || dyC >= f32(outBackprop[2]) ||\\n                  fract(dyC) > 0.0 || wCPerm < 0) {\\n                continue;\\n              }\\n              let idyC: u32 = u32(dyC);\\n\\n              for (var d2: u32 = 0; d2 < outBackprop[3]; d2 = d2 + 1) {\\n                ").concat(w.indicesVariableDeclaration("dyIndices",u?["batch","idyR","idyC","d2"]:["batch","d2","idyR","idyC"]),";\\n                let xValue =  Dy[").concat(w.i2oExpression("dyIndices"),"];\\n                  ").concat(b.indicesVariableDeclaration("wIndices",["d2","d1","wRPerm","wCPerm"]),";\\n\\n                let wValue = W[").concat(b.i2oExpression("wIndices"),"];\\n                dotProd = dotProd + xValue * wValue;\\n              }\\n            }\\n          }\\n          result[global_idx] = dotProd;\\n        ");return"\\n".concat(b.i2oImpl,"\\n  ").concat(w.i2oImpl,"\\n  ").concat(_.o2iImpl,"\\n  ").concat(y,"\\n  ").concat(m.join("\\n"),"\\n  @group(0) @binding(").concat(m.length,") var<storage, read_write> result: array<").concat(g?"vec4<f32>":"f32",">;\\n  const outShape : vec4<u32> = vec4<u32>(").concat(r.join(","),");\\n  const outBackprop : vec4<u32> = vec4<u32>(").concat(n[0].dims.join(","),");\\n  const strides : vec2<u32> = vec2<u32>(").concat(t.strides[0],", ").concat(t.strides[1],");\\n  const filterDims : vec2<u32> = vec2<u32>(").concat(t.kernelShape[u?1:2],", ").concat(t.kernelShape[u?2:3],");\\n  const dilations : vec2<u32> = vec2<u32>(").concat(t.dilations[0],", ").concat(t.dilations[1],");\\n  const effectiveFilterDims : vec2<u32> = filterDims + vec2<u32>(\\n          ").concat(t.dilations[0]<=1?0:(t.kernelShape[u?1:2]-1)*(t.dilations[0]-1),",\\n          ").concat(t.dilations[1]<=1?0:(t.kernelShape[u?2:3]-1)*(t.dilations[1]-1),");\\n  const pads : vec2<i32> = vec2<i32>(i32(effectiveFilterDims[0]) - 1 - (").concat(t.pads[0]+t.pads[2],")/2,\\n                                     i32(effectiveFilterDims[1]) - 1 - (").concat(t.pads[1]+t.pads[3],")/2);\\n    ").concat(e.mainStart(),"\\n    ").concat(_.indicesVariableDeclaration("outputIndices"),"\\n    ").concat(e.guardAgainstOutOfBoundsWorkgroupSizes(p),";\\n  ").concat(g?S:A,"}")}(n,e,t,f,s,w)}})}},85:function(e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.utilFunctions=void 0,n.utilFunctions="\\nfn getIndexFromCoords4D(coords : vec4<i32>, shape : vec4<i32>) -> i32 {\\n  return dot(coords, vec4<i32>(\\n      shape.y * shape.z * shape.w, shape.z * shape.w, shape.w, 1));\\n}\\nfn getOutputIndexFromCoords(coords : vec4<i32>) -> i32 {\\n  return dot(coords, vec4<i32>(\\n    outShapeStrides.x, outShapeStrides.y, outShapeStrides.z, 1));\\n}\\n"},158:function(e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.makeMatMulPackedSource=n.makeMatMulPackedVec4Source=void 0,n.makeMatMulPackedVec4Source=function(e,n,t,r,a,o,i){void 0===t&&(t=!1),void 0===r&&(r=32),void 0===a&&(a=!1),void 0===o&&(o=32),void 0===i&&(i=!1);var c,u=n[1]*e[1],s=n[0]*e[0],l=t?u:r,f=t?r:u,p=l/n[0],d=r/n[1];if((!t||4!==p||4!==e[1])&&(t||3!==p&&4!==p)||l%n[0]!=0||r%n[1]!=0||4!==e[0])throw new Error("If transposeA ".concat(t," is true, innerElementSize ").concat(p," and workPerThread[1] ").concat(e[1]," must be 4.\\n      Otherwise, innerElementSize ").concat(p," must be 3 or 4.\\n  tileAWidth ").concat(l," must be divisible by workgroupSize[0]").concat(n[0],". tileInner ").concat(r," must be divisible by workgroupSize[1] ").concat(n[1],". colPerThread ").concat(e[0]," must be 4."));return"\\nvar<workgroup> mm_Asub : array<array<vec".concat(p,"<f32>, ").concat(l/p,">, ").concat(f,">;\\nvar<workgroup> mm_Bsub : array<array<vec4<f32>, ").concat(s/e[0],">, ").concat(r,">;\\n\\nconst rowPerThread = ").concat(e[1],";\\nconst colPerThread = ").concat(e[0],";\\nconst innerElementSize = ").concat(p,";\\nconst tileInner = ").concat(r,";\\n\\n@compute @workgroup_size(").concat(n[0],", ").concat(n[1],", ").concat(n[2],")\\nfn main(@builtin(local_invocation_id) localId : vec3<u32>,\\n        @builtin(global_invocation_id) globalId : vec3<u32>,\\n        @builtin(workgroup_id) workgroupId : vec3<u32>) {\\n  let localRow = i32(localId.y);\\n  let tileRow = ").concat(i?"0":"localRow * rowPerThread",";\\n  let tileCol = i32(localId.x);\\n\\n  let globalRow = ").concat(i?"0":"i32(globalId.y) * rowPerThread",";\\n  let globalCol = i32(globalId.x);\\n  let batch = ").concat(a?"0":"i32(globalId.z)",";\\n  let globalRowStart = i32(workgroupId.y) * ").concat(u,";\\n\\n  let numTiles = ").concat(a?"".concat(Math.ceil(o/r)):"(dimInner - 1) / tileInner + 1",";\\n  var kStart = ").concat(a?"i32(globalId.z) * ".concat(o):"0",";\\n\\n  var acc: array<vec4<f32>, rowPerThread>;\\n\\n  // Loop over shared dimension.\\n  let tileRowB = localRow * ").concat(d,";\\n  for (var t = 0; t < numTiles; t = t + 1) {\\n      // Load one tile of A into local memory.\\n      for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {\\n          let inputRow = tileRow + innerRow;\\n          let inputCol = tileCol;\\n          ").concat((c=t,c?"\\n        mm_Asub[inputRow][inputCol] = mm_readA(batch,\\n          kStart + inputRow,\\n          globalRowStart / innerElementSize + inputCol);\\n        ":"\\n        mm_Asub[inputRow][inputCol] = mm_readA(batch,\\n          globalRow + innerRow,\\n          kStart / innerElementSize + inputCol);\\n        "),"\\n      }\\n\\n      // Load one tile of B into local memory.\\n      for (var innerRow = 0; innerRow < ").concat(d,"; innerRow = innerRow + 1) {\\n          let inputRow = tileRowB + innerRow;\\n          let inputCol = tileCol;\\n          mm_Bsub[inputRow][inputCol] = mm_readB(batch, kStart + inputRow, globalCol);\\n      }\\n      kStart = kStart + tileInner;\\n      workgroupBarrier();\\n\\n      // Compute acc values for a single thread.\\n      for (var k = 0; k < tileInner / innerElementSize; k = k + 1) {\\n          let BCached0 = mm_Bsub[k * innerElementSize][tileCol];\\n          let BCached1 = mm_Bsub[k * innerElementSize + 1][tileCol];\\n          let BCached2 = mm_Bsub[k * innerElementSize + 2][tileCol];\\n          ").concat(3===p?"":"let BCached3 = mm_Bsub[k * innerElementSize + 3][tileCol];","\\n\\n          ").concat(function(e,n){return e?"\\n        let ACached0 = mm_Asub[k * innerElementSize][localRow];\\n        let ACached1 = mm_Asub[k * innerElementSize + 1][localRow];\\n        let ACached2 = mm_Asub[k * innerElementSize + 2][localRow];\\n        ".concat(3===n?"":"let ACached3 = mm_Asub[k * innerElementSize + 3][localRow];","\\n        for (var i = 0; i < rowPerThread; i = i + 1) {\\n          acc[i] = BCached0 * ACached0[i] + acc[i];\\n          acc[i] = BCached1 * ACached1[i] + acc[i];\\n          acc[i] = BCached2 * ACached2[i] + acc[i];\\n          ").concat(3===n?"":"acc[i] = BCached3 * ACached3[i] + acc[i];","\\n        }"):"\\n        for (var i = 0; i < rowPerThread; i = i + 1) {\\n          let ACached = mm_Asub[tileRow + i][k];\\n          acc[i] = BCached0 * ACached.x + acc[i];\\n          acc[i] = BCached1 * ACached.y + acc[i];\\n          acc[i] = BCached2 * ACached.z + acc[i];\\n          ".concat(3===n?"":"acc[i] = BCached3 * ACached.w + acc[i];","\\n        }")}(t,p),"\\n      }\\n\\n      workgroupBarrier();\\n  }\\n\\n  for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {\\n      mm_write(batch, globalRow + innerRow, globalCol, acc[innerRow]);\\n  }\\n}")};var t=function(e){return e?"\\n            mm_Asub[inputRow][inputCol] = mm_readA(batch,\\n              kStart + inputRow,\\n              globalRowStart + inputCol);\\n            ":"\\n            mm_Asub[inputRow][inputCol] = mm_readA(batch,\\n              globalRowStart + inputRow,\\n              kStart + inputCol);\\n            "};n.makeMatMulPackedSource=function(e,n,r,a,o,i,c){void 0===r&&(r=!1),void 0===a&&(a=32),void 0===o&&(o=!1),void 0===i&&(i=32),void 0===c&&(c=!1);var u=e[1]*n[1],s=e[0]*n[0],l=r?u:a,f=r?a:u;if(f%n[1]!=0||l%n[0]!=0||a%n[1]!=0)throw new Error("tileAHight ".concat(f," must be divisible by workgroupSize[1]").concat(n[1],", tileAWidth ").concat(l," must be divisible by workgroupSize[0]").concat(n[0],", tileInner ").concat(a," must be divisible by workgroupSize[1]").concat(n[1]));var p=f/n[1],d=l/n[0],h=a/n[1],g=c?"\\n    let localRow = i32(localId.y);\\n    let localCol = i32(localId.x);\\n    let globalRowStart = i32(workgroupId.y) * ".concat(u,";\\n    let globalColStart = i32(workgroupId.x) * ").concat(s,";\\n\\n    // Loop over shared dimension.\\n    for (var t = 0; t < numTiles; t = t + 1) {\\n      // Load one tile of A into local memory.\\n      for (var inputRow = localRow; inputRow < ").concat(f,"; inputRow = inputRow + ").concat(n[1],") {\\n        for (var inputCol = localCol; inputCol < ").concat(l,"; inputCol = inputCol + ").concat(n[0],") {\\n          ").concat(t(r),"\\n        }\\n      }\\n      // Load one tile of B into local memory.\\n      for (var inputRow = localRow; inputRow < ").concat(a,"; inputRow = inputRow + ").concat(n[1],") {\\n            for (var inputCol = localCol; inputCol < ").concat(s,"; inputCol = inputCol + ").concat(n[0],") {\\n          mm_Bsub[inputRow][inputCol] = mm_readB(batch,\\n            kStart + inputRow,\\n            globalColStart + inputCol);\\n        }\\n      }\\n      kStart = kStart + tileInner;\\n      workgroupBarrier();\\n\\n      // Compute acc values for a single thread.\\n      var BCached : array<f32, colPerThread>;\\n      for (var k = 0; k < tileInner; k = k + 1) {\\n        for (var inner = 0; inner < colPerThread; inner = inner + 1) {\\n          BCached[inner] = mm_Bsub[k][localCol + inner * ").concat(n[0],"];\\n        }\\n        for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {\\n          let ACached = ").concat(r?"mm_Asub[k][localRow + innerRow * ".concat(n[1],"];"):"mm_Asub[localRow + innerRow * ".concat(n[1],"][k];"),"\\n          for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {\\n            acc[innerRow][innerCol] = acc[innerRow][innerCol] +\\n                ACached * BCached[innerCol];\\n          }\\n        }\\n      }\\n      workgroupBarrier();\\n    }\\n    for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {\\n      let gRow = globalRowStart + localRow + innerRow * ").concat(n[1],";\\n      for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {\\n        let gCol = globalColStart + localCol + innerCol * ").concat(n[0],";\\n        mm_write(batch, gRow, gCol, acc[innerRow][innerCol]);\\n      }\\n    }\\n    "):"\\nlet tileRow = i32(localId.y) * rowPerThread;\\nlet tileCol = i32(localId.x) * colPerThread;\\n\\nlet globalRow = i32(globalId.y) * rowPerThread;\\nlet globalCol = i32(globalId.x) * colPerThread;\\nlet globalRowStart = i32(workgroupId.y) * ".concat(u,";\\n\\nlet tileRowA = i32(localId.y) * ").concat(p,";\\nlet tileColA = i32(localId.x) * ").concat(d,";\\nlet tileRowB = i32(localId.y) * ").concat(h,";\\n// Loop over shared dimension.\\nfor (var t = 0; t < numTiles; t = t + 1) {\\n  // Load one tile of A into local memory.\\n  for (var innerRow = 0; innerRow < ").concat(p,"; innerRow = innerRow + 1) {\\n    for (var innerCol = 0; innerCol < ").concat(d,"; innerCol = innerCol + 1) {\\n      let inputRow = tileRowA + innerRow;\\n      let inputCol = tileColA + innerCol;\\n      ").concat(t(r),"\\n    }\\n  }\\n\\n  // Load one tile of B into local memory.\\n  for (var innerRow = 0; innerRow < ").concat(h,"; innerRow = innerRow + 1) {\\n    for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {\\n      let inputRow = tileRowB + innerRow;\\n      let inputCol = tileCol + innerCol;\\n      mm_Bsub[inputRow][inputCol] = mm_readB(batch,\\n        kStart + inputRow,\\n        globalCol + innerCol);\\n    }\\n  }\\n  kStart = kStart + tileInner;\\n  workgroupBarrier();\\n\\n  // Compute acc values for a single thread.\\n  var BCached : array<f32, colPerThread>;\\n  for (var k = 0; k < tileInner; k = k + 1) {\\n    for (var inner = 0; inner < colPerThread; inner = inner + 1) {\\n      BCached[inner] = mm_Bsub[k][tileCol + inner];\\n    }\\n\\n    for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {\\n      ").concat(function(e){return e?"let ACached = mm_Asub[k][tileRow + innerRow];":"let ACached = mm_Asub[tileRow + innerRow][k];"}(r),"\\n      for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {\\n        acc[innerRow][innerCol] = acc[innerRow][innerCol] + ACached * BCached[innerCol];\\n      }\\n    }\\n  }\\n\\n  workgroupBarrier();\\n}\\n\\nfor (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {\\n  for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {\\n    mm_write(batch, globalRow + innerRow, globalCol + innerCol,\\n        acc[innerRow][innerCol]);\\n  }\\n}\\n");return"\\n  var<workgroup> mm_Asub : array<array<f32, ".concat(l,">, ").concat(f,">;\\n  var<workgroup> mm_Bsub : array<array<f32, ").concat(s,">, ").concat(a,">;\\n  const rowPerThread = ").concat(e[1],";\\n  const colPerThread = ").concat(e[0],";\\n  const tileInner = ").concat(a,";\\n\\n@compute @workgroup_size(").concat(n[0],", ").concat(n[1],", ").concat(n[2],")\\nfn main(@builtin(local_invocation_id) localId : vec3<u32>,\\n        @builtin(global_invocation_id) globalId : vec3<u32>,\\n        @builtin(workgroup_id) workgroupId : vec3<u32>) {\\n    let batch = ").concat(o?"0":"i32(globalId.z)",";\\n    let numTiles = ").concat(o?"".concat(Math.ceil(i/a)):"(dimInner - 1) / tileInner + 1",";\\n    var kStart = ").concat(o?"i32(globalId.z) * ".concat(i):"0",";\\n\\n    var acc : array<array<f32, colPerThread>, rowPerThread>;\\n\\n    // Without this initialization strange values show up in acc.\\n    for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {\\n      for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {\\n        acc[innerRow][innerCol] = 0.0;\\n      }\\n    }\\n    ").concat(g,"\\n  }\\n")}},504:function(e,n,t){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},r.apply(this,arguments)};Object.defineProperty(n,"__esModule",{value:!0}),n.sub=n.pow=n.mul=n.div=n.add=void 0;var a=t(952),o=t(163),i=t(75),c=function(e,n,t,c,u){var s={name:n,inputTypes:[o.GpuDataType.default,o.GpuDataType.default],cacheHint:u};return r(r({},s),{get:function(){return function(e,n,t,c,u,s){var l,f;void 0===s&&(s=n.dataType);var p=!a.ShapeUtil.areEqual(n.dims,t.dims),d=n.dims,h=a.ShapeUtil.size(n.dims),g=!1;if(p){var v=a.BroadcastUtil.calcShape(n.dims,t.dims,!1);if(!v)throw new Error("Can\'t perform binary op on the given tensors");d=v,h=a.ShapeUtil.size(d);for(var m=1,y=0;y<d.length;y++){var b=null!==(l=n.dims[n.dims.length-y])&&void 0!==l?l:1;if(b!==(null!==(f=t.dims[t.dims.length-y])&&void 0!==f?f:1))break;m*=b}m%4==0&&(g=!0)}else g=!0;return r(r({},e),{getShaderSource:function(e){return function(e,n,t,r,o,c,u,s,l,f,p){void 0===l&&(l="f32"),void 0===f&&(f="f32"),void 0===p&&(p="f32");var d,h,g=a.ShapeUtil.size(r),v=Math.ceil(g/4);"string"==typeof u?d=h=function(e,n){return"".concat(u,"((").concat(e,"),(").concat(n,"))")}:"function"==typeof u?d=h=u:(d=u.scalar,h=u.vector);var m,y="",b=(0,i.createIndicesHelper)("output",r);if(c){var w=function(e){for(var n=a.ShapeUtil.computeStrides(e),t=[],o=e.length-1;o>=0;o--){var i=0===r.length?"0u":1===r.length?"(*outputIndices)":"(*outputIndices)[".concat(o+r.length-e.length,"]");t.push("".concat(n[o],"u * (").concat(i," % ").concat(e[o],"u)"))}return t.length>0?t.join("+"):"0u"};y="\\n  ".concat(b.o2iImpl,"\\n\\n  fn calcOffsetA(outputIndices: ptr<function, ").concat(b.iType,">) -> u32 {\\n    return ").concat(w(n),";\\n  }\\n\\n  fn calcOffsetB(outputIndices: ptr<function, ").concat(b.iType,">) -> u32 {\\n    return ").concat(w(t),";\\n  }\\n  ")}if(o)m=c?"\\n      ".concat(b.indicesVariableDeclaration("outputIndices"),"\\n      ").concat(b.o2iCall("global_idx * 4u","outputIndices"),"\\n      let offsetA = calcOffsetA(&outputIndices);\\n      let offsetB = calcOffsetB(&outputIndices);\\n      outputData[global_idx] = ").concat(h("aData[offsetA / 4u]","bData[offsetB / 4u]"),";"):"outputData[global_idx] = ".concat(h("aData[global_idx]","bData[global_idx]"),";");else{if(!c)throw new Error("no necessary to use scalar implementation for element-wise binary op implementation.");var _=function(e){var n="aData[indexA".concat(e,"][componentA").concat(e,"]"),t="bData[indexB".concat(e,"][componentB").concat(e,"]");return"\\n      ".concat(b.o2iCall("global_idx * 4u + ".concat(e,"u"),"outputIndices"),"\\n      let offsetA").concat(e," = calcOffsetA(&outputIndices);\\n      let offsetB").concat(e," = calcOffsetB(&outputIndices);\\n      let indexA").concat(e," = offsetA").concat(e," / 4u;\\n      let indexB").concat(e," = offsetB").concat(e," / 4u;\\n      let componentA").concat(e," = offsetA").concat(e," % 4u;\\n      let componentB").concat(e," = offsetB").concat(e," % 4u;\\n      outputData[global_idx][").concat(e,"] = ").concat(d(n,t),";")};m="\\n      ".concat(b.indicesVariableDeclaration("outputIndices"),"\\n      ").concat(_(0),"\\n      ").concat(_(1),"\\n      ").concat(_(2),"\\n      ").concat(_(3))}return"\\n  @group(0) @binding(0) var<storage, read> aData : array<vec4<".concat(l,">>;\\n  @group(0) @binding(1) var<storage, read> bData : array<vec4<").concat(f,">>;\\n  @group(0) @binding(2) var<storage, read_write> outputData : array<vec4<").concat(p,">>;\\n\\n  ").concat(null!=s?s:"","\\n  ").concat(y,"\\n\\n  ").concat(e.mainStart(),"\\n    ").concat(e.guardAgainstOutOfBoundsWorkgroupSizes(v),"\\n    ").concat(m,"\\n  }")}(e,n.dims,t.dims,d,g,p,c,u)},outputs:[{dims:d,dataType:s,gpuDataType:o.GpuDataType.default}],dispatchGroup:function(){return{x:Math.ceil(h/64/(g?4:1))}}})}(s,e[0],e[1],t,c)}})};n.add=function(e){e.compute(c(e.inputs,"Add",(function(e,n){return"".concat(e,"+").concat(n)})))},n.div=function(e){e.compute(c(e.inputs,"Div",(function(e,n){return"".concat(e,"/").concat(n)})))},n.mul=function(e){e.compute(c(e.inputs,"Mul",(function(e,n){return"".concat(e,"*").concat(n)})))},n.pow=function(e){e.compute(c(e.inputs,"Pow",{scalar:function(e,n){return"pow_f32(".concat(e,",").concat(n,")")},vector:function(e,n){return"pow_vf32(".concat(e,",").concat(n,")")}},"\\n    fn pow_f32(a : f32, b : f32) -> f32 {\\n      if (b == 0.0) {\\n        return 1.0;\\n      } else if (a < 0.0 && b != floor(b)) {\\n        return pow(a, b); // NaN\\n      }\\n      return select(sign(a), 1.0, round(abs(b) % 2.0) != 1.0) * pow(abs(a), b);\\n    }\\n    fn pow_vf32(a : vec4<f32>, b : vec4<f32>) -> vec4<f32> {\\n      // TODO: implement vectorized pow\\n      return vec4<f32>(pow_f32(a.x, b.x), pow_f32(a.y, b.y), pow_f32(a.z, b.z), pow_f32(a.w, b.w));\\n    }\\n      "))},n.sub=function(e){e.compute(c(e.inputs,"Sub",(function(e,n){return"".concat(e,"-").concat(n)})))}},75:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.createShaderHelper=n.createIndicesHelper=n.WORKGROUP_SIZE=void 0;var r=t(952);n.WORKGROUP_SIZE=64,n.createIndicesHelper=function(e,n){for(var t=n.length<2?"u32":"array<u32, ".concat(n.length,">"),a=r.ShapeUtil.computeStrides(n),o="",i=0;i<n.length-1;i++)o+="\\n    let dim".concat(i," = current / ").concat(a[i],"u;\\n    let rest").concat(i," = current % ").concat(a[i],"u;\\n    (*indices)[").concat(i,"] = dim").concat(i,";\\n    current = rest").concat(i,";\\n    ");o+="(*indices)[".concat(n.length-1,"] = current;");var c=n.length<2?"":"\\n  fn ih_o2i_".concat(e,"(offset: u32, indices: ptr<function, ").concat(t,">) {\\n    var current = offset;\\n    ").concat(o,"\\n  }"),u=[];if(0===n.length)u.push("0u");else if(n.length<2)u.push("(*indices)");else for(i=n.length-1;i>=0;i--)u.push("".concat(a[i],"u * ((*indices)[").concat(i,"])"));return{o2iImpl:c,o2iCall:function(t,r){return n.length<2?"".concat(r,"=").concat(t,";"):"ih_o2i_".concat(e,"(").concat(t,", &").concat(r,");")},i2oImpl:n.length<2?"":"\\n  fn ih_i2o_".concat(e,"(indices: ptr<function, ").concat(t,">) -> u32 {\\n    return ").concat(u.join("+"),";\\n  }"),i2oExpression:function(t,r){return n.length<2?"(".concat(r?"*":"").concat(t,")"):"ih_i2o_".concat(e,"(").concat(r?"":"&").concat(t,")")},indicesVariableDeclaration:function(e,n){return"var ".concat(e,":").concat(t).concat(n?"=".concat(t,"(").concat(n.join(","),")"):"",";")},iType:t}};var a=function(){function e(e){this.normalizedDispatchGroup=e}return e.prototype.guardAgainstOutOfBoundsWorkgroupSizes=function(e){var n="number"==typeof e?"".concat(e,"u"):e;return"if (global_idx >= ".concat(n,") { return; }")},e.prototype.mainStart=function(e){void 0===e&&(e=n.WORKGROUP_SIZE);var t="number"==typeof e?e:e[0],r="number"==typeof e?1:e[1],a="number"==typeof e?1:e[2],o=1===this.normalizedDispatchGroup[1]&&1===this.normalizedDispatchGroup[2],i=o?"@builtin(global_invocation_id) global_id : vec3<u32>":"@builtin(local_invocation_index) local_index : u32,\\n    @builtin(workgroup_id) workgroup_id : vec3<u32>",c=o?"let global_idx = global_id.x;":"let global_idx = (workgroup_id.z * ".concat(this.normalizedDispatchGroup[0]*this.normalizedDispatchGroup[1],"u +\\n          workgroup_id.y * ").concat(this.normalizedDispatchGroup[0],"u + workgroup_id.x) * ").concat(t*r*a,"u + local_index;");return"@compute @workgroup_size(".concat(t,", ").concat(r,", ").concat(a,")\\n  fn main(").concat(i,") {\\n    ").concat(c,"\\n  ")},e}();n.createShaderHelper=function(e){return new a(e)}},513:function(e,n,t){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},r.apply(this,arguments)},a=this&&this.__values||function(e){var n="function"==typeof Symbol&&Symbol.iterator,t=n&&e[n],r=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.parseConcatAttributes=n.concat=void 0;var o=t(952),i=t(387),c=t(163),u=t(75);n.concat=function(e,n){!function(e){var n,t;if(!e||e.length<1)throw new Error("too few inputs");var r=e[0].dataType,o=e[0].dims.length;try{for(var i=a(e),c=i.next();!c.done;c=i.next()){var u=c.value;if(u.dataType!==r)throw new Error("input tensors should be one type");if(u.dims.length!==o)throw new Error("input tensors should have the same shape")}}catch(e){n={error:e}}finally{try{c&&!c.done&&(t=i.return)&&t.call(i)}finally{if(n)throw n.error}}}(e.inputs),e.compute(function(e,n){var t,a,i=(t=e.length,a=n.cacheKey,{name:"Concat",inputTypes:Array(t).fill(c.GpuDataType.default),cacheHint:a});return r(r({},i),{get:function(){return function(e,n,t,a){void 0===a&&(a="f32");var i=n[0].dims.slice();if(t>=i.length||t<-1*i.length)throw new Error("axis specified for concat doesn\'t match input dimensionality");for(var s=t<0?i.length+t:t,l=i.slice(0),f=1;f<n.length;f++)for(var p=n[f].dims.slice(),d=0;d<i.length;d++)if(d===s)l[s]+=p[d];else if(i[d]!==p[d])throw new Error("non concat dimensions must match");var h=o.ShapeUtil.size(l),g=l.length,v=new Array(n.length),m=new Array(n.length),y=new Array(n.length),b=0;for(f=0;f<n.length;++f)b+=n[f].dims[s],v[f]=b,m[f]="@group(0) @binding(".concat(f,") var<storage, read> input").concat(f," : array<").concat(a,">;"),y[f]=(0,u.createIndicesHelper)("input".concat(f),n[f].dims);var w=(0,u.createIndicesHelper)("output",l),_=g<2?"indices":"indices[".concat(s,"]");return r(r({},e),{outputs:[{dims:l,dataType:n[0].dataType,gpuDataType:c.GpuDataType.default}],getShaderSource:function(e){return"\\n\\n  ".concat(m.join("\\n"),"\\n  @group(0) @binding(").concat(n.length,") var<storage, read_write> output : array<").concat(a,">;\\n\\n  ").concat(y.map((function(e){return e.i2oImpl})).join("\\n"),"\\n  ").concat(w.o2iImpl,"\\n\\n  const sizeInConcatAxis = array<u32, ").concat(v.length,">(").concat(v.map((function(e){return"".concat(e,"u")})).join(","),");\\n  ").concat((t=v.length,"\\n  fn calculateInputIndex(index: u32) -> u32 {\\n    for (var i: u32 = 0u; i < ".concat(t,"u; i += 1u ) {\\n      if (index < sizeInConcatAxis[i]) {\\n        return i;\\n      }\\n    }\\n    return ").concat(t,"u;\\n  }")),"\\n  ").concat(function(e,n,t){for(var r=e.length,a=[],o=0;o<r;++o){var i="return input".concat(o,"[").concat(e[o].i2oExpression("indices",!0),"];");1===r?a.push(i):0===o?a.push("if (textureIndex == ".concat(o,"u) { ").concat(i," }")):o===r-1?a.push("else { ".concat(i," }")):a.push("else if (textureIndex == ".concat(o,") { ").concat(i," }"))}return"\\n    fn readBufferData(textureIndex: u32, indices: ptr<function, ".concat(e[0].iType,">) -> ").concat(t," {\\n      ").concat(a.join("\\n"),"\\n    }")}(y,0,a),"\\n\\n  ").concat(e.mainStart(),"\\n    ").concat(e.guardAgainstOutOfBoundsWorkgroupSizes(h),"\\n\\n    ").concat(w.indicesVariableDeclaration("indices"),"\\n    ").concat(w.o2iCall("global_idx","indices"),"\\n\\n    let textureIndex = calculateInputIndex(").concat(_,");\\n    if (textureIndex != 0u) {\\n      ").concat(_," -= sizeInConcatAxis[textureIndex - 1u];\\n    }\\n\\n    output[global_idx] = readBufferData(textureIndex, &indices);\\n  }");var t},dispatchGroup:function(){return{x:Math.ceil(h/64)}}})}(i,e,n.axis)}})}(e.inputs,n))},n.parseConcatAttributes=function(e){return(0,i.createAttributeWithCacheKey)({axis:e.axis})}},192:function(e,n,t){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},r.apply(this,arguments)};Object.defineProperty(n,"__esModule",{value:!0}),n.createGroupedConvProgramInfoLoader=void 0;var a=t(952),o=t(163),i=t(75),c=t(770),u=t(997);n.createGroupedConvProgramInfoLoader=function(e,n,t){var s,l,f=(s=e.length>2,l=n.cacheKey,{name:"GroupedConv",inputTypes:s?[o.GpuDataType.default,o.GpuDataType.default,o.GpuDataType.default]:[o.GpuDataType.default,o.GpuDataType.default],cacheHint:l});return r(r({},f),{get:function(){return function(e,n,t,s){var l=e.length>2,f=l?"value += b[output_channel];":"",p=e[0].dims,d=e[1].dims,h=d[0]/t.group,g="f32",v=(0,u.getActicationSnippet)(t),m=v.activationFunction,y=v.applyActivation,b=["@group(0) @binding(0) var<storage, read> x : array<".concat(g,">;"),"@group(0) @binding(1) var<storage, read> w : array<".concat(g,">;")];l&&b.push("@group(0) @binding(2) var<storage, read> b : array<".concat(g,">;"));var w="NHWC"===t.format,_=(0,c.calculateOutputShape)(p,d,t.dilations,t.pads,t.strides,w),S=a.ShapeUtil.size(_),A=(0,i.createIndicesHelper)("output",_),C=(0,i.createIndicesHelper)("x",p),x=(0,i.createIndicesHelper)("w",d);return r(r({},n),{outputs:[{dims:s?s(_):_,dataType:e[0].dataType,gpuDataType:o.GpuDataType.default}],getShaderSource:function(e){return"\\n  const strides: vec2<u32> = vec2(".concat(t.strides[0],"u, ").concat(t.strides[1],"u);\\n  const pads: vec2<u32> = vec2(").concat(t.pads[0],"u, ").concat(t.pads[1],"u);\\n\\n  ").concat(b.join("\\n"),"\\n  @group(0) @binding(").concat(b.length,") var<storage, read_write> output : array<").concat(g,">;\\n\\n  ").concat(m,"\\n  ").concat(A.o2iImpl,"\\n  ").concat(C.i2oImpl,"\\n  ").concat(x.i2oImpl,"\\n\\n  ").concat(e.mainStart(),"\\n    ").concat(e.guardAgainstOutOfBoundsWorkgroupSizes(S),"\\n\\n    ").concat(A.indicesVariableDeclaration("outputIndices"),"\\n    ").concat(A.o2iCall("global_idx","outputIndices"),"\\n    let batch: u32 = outputIndices[0];\\n    let output_channel: u32 = outputIndices[").concat(w?3:1,"];\\n    let xRCCorner: vec2<u32> = vec2<u32>(outputIndices[").concat(w?1:2,"], outputIndices[").concat(w?2:3,"]) * strides - pads;\\n    let group_id: u32 = output_channel / ").concat(h,"u;\\n\\n    var value: ").concat(g," = ").concat(g,"(0);\\n    for (var wInChannel: u32 = 0u; wInChannel < ").concat(d[1],"u; wInChannel++) {\\n      let input_channel = group_id * ").concat(d[1],"u + wInChannel;\\n      for (var wHeight: u32 = 0u; wHeight < ").concat(d[2],"u; wHeight++) {\\n        let xHeight = xRCCorner.x + wHeight * ").concat(t.dilations[0],"u;\\n\\n        if (xHeight < 0u || xHeight >= ").concat(p[w?1:2],"u) {\\n          continue;\\n        }\\n\\n        for (var wWidth: u32 = 0u; wWidth < ").concat(d[3],"u; wWidth++) {\\n          let xWidth = xRCCorner.y + wWidth * ").concat(t.dilations[1],"u;\\n          if (xWidth < 0u || xWidth >= ").concat(p[w?2:3],"u) {\\n            continue;\\n          }\\n\\n          ").concat(C.indicesVariableDeclaration("xIndices",w?["batch","xHeight","xWidth","input_channel"]:["batch","input_channel","xHeight","xWidth"]),"\\n          let xVal = x[").concat(C.i2oExpression("xIndices"),"];\\n          ").concat(x.indicesVariableDeclaration("wIndices",["output_channel","wInChannel","wHeight","wWidth"]),"\\n          let wVal = w[").concat(x.i2oExpression("wIndices"),"];\\n          value += xVal*wVal;\\n        }\\n      }\\n    }\\n    ").concat(f,"\\n    ").concat(y,"\\n    output[global_idx] = value;\\n  }")},dispatchGroup:function(){return{x:Math.ceil(S/64)}}})}(e,f,n,t)}})}},640:function(e,n,t){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},r.apply(this,arguments)};Object.defineProperty(n,"__esModule",{value:!0}),n.convTranspose=n.parseConvTransposeAttributes=void 0;var a=t(387),o=t(163),i=t(514),c=t(997),u=function(e,n,t,r,a,o){return(e-1)*n+t+(r-1)*a+1-o},s=function(e,n,t,r,a){var o=Math.floor(e/2);"SAME_UPPER"===n?(t[r]=o,t[a]=e-o):"SAME_LOWER"===n&&(t[r]=e-o,t[a]=o)},l=function(e,n){var t=e.kernelShape.slice();if(0===e.kernelShape.length||0===e.kernelShape.reduce((function(e,n){return e*n}),0)){t.length=0;for(var r=2;r<n[1].dims.length;++r)t.push(n[1].dims[r])}var a="NHWC"===e.format;t.splice(0,0,n[1].dims[0]),t.splice(a?3:1,0,n[1].dims[1]);var o=e.pads.slice(),i=e.outputShape.slice(),c=e.outputPadding.slice(),l=n[0].dims,f=e.dilations.slice();if(0===f.reduce((function(e,n){return e+n}),0)){var p=n[0].dims.length-2;f=new Array(p).fill(1)}var d=e.strides.slice();0===d.reduce((function(e,n){return e+n}),0)&&(p=n[0].dims.length-2,d=new Array(p).fill(1)),function(e,n,t,r,a,o,i,c,l,f){var p=e.length-2,d=0===f.length;if(0===l.length)for(var h=0;h<p;++h)l.push(0);for(var g=e[0],v=n[c?3:1]*a,m=(h=0,e.length-p-(c?1:0));h<p;++h,++m){var y=e[m],b=d?y*i[h]:f[h],w=u(y,i[h],o[h],n[m],t[h],b);s(w,r,o,h,h+p),d&&f.push(i[h]*(y-1)+l[h]+(n[m]-1)*t[h]+1-o[h]-o[h+p])}f.splice(0,0,g),f.splice(c?3:1,0,v)}(l,t,f,e.autoPad,e.group,o,d,a,c,i);var h=Object.assign({},e);return Object.assign(h,{kernelShape:t,pads:o,outputPadding:c,outputShape:i,dilations:f,strides:d,cacheKey:e.cacheKey}),h};n.parseConvTransposeAttributes=function(e){var n=(0,c.parseInternalActivationAttributes)(e),t=e.format,o=["NOTSET","VALID","SAME_UPPER","SAME_LOWER"][void 0===e.autoPad?0:e.autoPad],i=e.dilations,u=e.group,s=e.kernelShape,l=e.pads,f=e.strides,p=e.wIsConst(),d=e.outputPadding,h=e.outputShape;return(0,a.createAttributeWithCacheKey)(r({autoPad:o,format:t,dilations:i,group:u,kernelShape:s,outputPadding:d,outputShape:h,pads:l,strides:f,wIsConst:p},n))};var f=function(e,n,t){var a,c,u=(a=3===e.length,c=n.cacheKey,{name:"ConvTranspose2D",inputTypes:a?[o.GpuDataType.default,o.GpuDataType.default,o.GpuDataType.default]:[o.GpuDataType.default,o.GpuDataType.default],cacheHint:c});return r(r({},u),{get:function(){return(0,i.createConvTranspose2DProgramInfo)(e,u,n,t)}})};n.convTranspose=function(e,n){!function(e,n){if(!e||2!==e.length&&3!==e.length)throw new Error("Conv requires 2 or 3 inputs");if(4!==e[0].dims.length&&3!==e[0].dims.length)throw new Error("currently only support 2-dimensional conv");if(e[0].dims.length!==e[1].dims.length)throw new Error("filter does not have same dimension as input");if(e[0].dims["NHWC"===n.format?e[0].dims.length-1:1]!==e[1].dims[0])throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");var t=e[1].dims[1]*n.group;if(3===e.length&&(1!==e[2].dims.length||e[2].dims[0]!==t))throw new Error("invalid bias");var r=e[0].dims.length-2;if(n.dilations.reduce((function(e,n){return e+n}),0)>0&&n.dilations.length!==r)throw new Error("dilations should be ".concat(r,"D"));if(n.strides.reduce((function(e,n){return e+n}),0)>0&&n.strides.length!==r)throw new Error("strides should be ".concat(r,"D"));if(n.pads.reduce((function(e,n){return e+n}),0)>0&&n.pads.length!==2*r)throw new Error("pads should be ".concat(2*r,"D"));if(n.outputPadding.length!==r&&0!==n.outputPadding.length)throw new Error("output_padding should be ".concat(r,"D"));if(n.kernelShape.reduce((function(e,n){return e+n}),0)>0&&0!==n.kernelShape.length&&n.kernelShape.length!==e[1].dims.length-2)throw new Error("invalid kernel shape");if(0!==n.outputShape.length&&n.outputShape.length!==e[0].dims.length-2)throw new Error("invalid output shape");if(1!==e[0].dataType||1!==e[1].dataType)throw new Error("ConvTranspose input(X,W) should be float tensor");if(3===e.length&&1!==e[2].dataType)throw new Error("ConvTranspose input(bias) should be float tensor")}(e.inputs,n),3===e.inputs[0].dims.length?function(e,n){var t="NHWC"===n.format,a=[e.inputs[0].reshape(t?[e.inputs[0].dims[0],1,e.inputs[0].dims[1],e.inputs[0].dims[2]]:[e.inputs[0].dims[0],e.inputs[0].dims[1],1,e.inputs[0].dims[2]]),e.inputs[1].reshape([e.inputs[1].dims[0],e.inputs[1].dims[1],1,e.inputs[1].dims[2]])];3===a.length&&a.push(e.inputs[2]);var o=n.kernelShape;0!==o.length&&0!==o[0]||(o=[e.inputs[1].dims[2]]);var i=n.dilations;0!==i.length&&0!==i[0]||(i=[1]);var c=n.strides;0!==c.length&&0!==c[0]||(c=[1]);var u=n.pads;0===u.length&&(u=[0,0]),u=[0,u[0],0,u[1]],c=[1].concat(c),i=[1].concat(i),o=[1].concat(o);var s=l(r(r({},n),{pads:u,strides:c,dilations:i,kernelShape:o}),a);e.compute(f(a,s,(function(e){return t?[e[0],e[2],e[3]]:[e[0],e[1],e[3]]})))}(e,n):function(e,n,t){var r=l(t,n);e.compute(f(n,r))}(e,e.inputs,n)}},770:function(e,n,t){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},r.apply(this,arguments)};Object.defineProperty(n,"__esModule",{value:!0}),n.conv=n.parseConvAttributes=n.calculateOutputShape=void 0;var a=t(952),o=t(387),i=t(192),c=t(822),u=t(997),s=t(625);n.calculateOutputShape=function(e,n,t,r,a,o){var i=e[0],c=e.slice(o?1:2,o?3:4),u=c.length,s=n[0],l=n.slice(2).map((function(e,n){return e+(e-1)*(t[n]-1)})),f=c.map((function(e,n){return e+r[n]+r[n+u]})).map((function(e,n){return Math.floor((e-l[n]+a[n])/a[n])}));return f.splice(0,0,i),f.splice(o?3:1,0,s),f};var l=(0,o.createAttributeWithCacheKey)({perm:[2,3,1,0]}),f=function(e,n){for(var t=e.kernelShape.slice(),r=2;r<n[1].dims.length;++r)0===t[r-2]&&(t[r-2]=n[1].dims[r]);var o=e.pads.slice();a.PoolConvUtil.adjustPadsBasedOnAutoPad(n[0].dims,e.strides,e.dilations,t,o,"NHWC"===e.format,e.autoPad);var i=Object.assign({},e);return Object.assign(i,{kernelShape:t,pads:o,cacheKey:e.cacheKey}),i};n.parseConvAttributes=function(e){var n=(0,u.parseInternalActivationAttributes)(e),t=e.format,a=["NOTSET","VALID","SAME_UPPER","SAME_LOWER"][e.auto_pad],i=e.dilations,c=e.group,s=e.kernel_shape,l=e.pads,f=e.strides,p=e.w_is_const();return(0,o.createAttributeWithCacheKey)(r({autoPad:a,format:t,dilations:i,group:c,kernelShape:s,pads:l,strides:f,wIsConst:p},n))},n.conv=function(e,t){!function(e,n){if(!e||2!==e.length&&3!==e.length)throw new Error("Conv requires 2 or 3 inputs");if(4!==e[0].dims.length&&3!==e[0].dims.length)throw new Error("currently only support conv 1D and 2D");if(e[0].dims.length!==e[1].dims.length)throw new Error("filter does not have same dimension as input");if(e[0].dims["NHWC"===n.format?e[0].dims.length-1:1]!==e[1].dims[1]*n.group)throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");if(3===e.length&&(1!==e[2].dims.length||e[1].dims[0]!==e[2].dims[0]))throw new Error("invalid bias");var t=e[0].dims.length-2;if(n.dilations.length!==t)throw new Error("dilations should be ".concat(t,"D"));if(n.strides.length!==t)throw new Error("strides should be ".concat(t,"D"));if(n.pads.length!==2*t)throw new Error("pads should be ".concat(2*t,"D"));if(0!==n.kernelShape.length&&n.kernelShape.length!==e[1].dims.length-2)throw new Error("invalid kernel shape");if(1!==e[0].dataType||1!==e[1].dataType)throw new Error("Conv input(X,W) should be float tensor");if(3===e.length&&1!==e[2].dataType)throw new Error("Conv input(bias) should be float tensor")}(e.inputs,t),3===e.inputs[0].dims.length?function(e,n){var t="NHWC"===n.format,a=[e.inputs[0].reshape(t?[e.inputs[0].dims[0],1,e.inputs[0].dims[1],e.inputs[0].dims[2]]:[e.inputs[0].dims[0],e.inputs[0].dims[1],1,e.inputs[0].dims[2]]),e.inputs[1].reshape([e.inputs[1].dims[0],e.inputs[1].dims[1],1,e.inputs[1].dims[2]])];3===e.inputs.length&&a.push(e.inputs[2]);var o=[0,n.pads[0],0,n.pads[1]],c=[1].concat(n.strides),u=[1].concat(n.dilations),s=[1].concat(n.kernelShape),l=f(r(r({},n),{pads:o,strides:c,dilations:u,kernelShape:s}),a);e.compute((0,i.createGroupedConvProgramInfoLoader)(a,l,(function(e){return t?[e[0],e[2],e[3]]:[]})))}(e,t):function(e,t,a){var o,u=f(a,t),p=3===t.length,d="NHWC"===a.format,h=t[0].dims[d?1:2],g=t[0].dims[d?2:3],v=t[0].dims[d?3:1],m=t[1].dims[2],y=t[1].dims[3],b=(0,n.calculateOutputShape)(t[0].dims,t[1].dims,a.dilations,u.pads,a.strides,d),w=b[d?1:2],_=b[d?2:3],S=b[d?3:1];if(d&&m===h&&y===g&&"VALID"===a.autoPad||1===m&&1===y&&1===a.dilations[0]&&1===a.dilations[1]&&1===a.strides[0]&&1===a.strides[1]&&("SAME_UPPER"===a.autoPad||"SAME_LOWER"===a.autoPad||"VALID"===a.autoPad))e.compute((0,i.createGroupedConvProgramInfoLoader)(t,u));else if(d&&1===a.group){var A=d?w*_:S,C=d?S:w*_,x=m*y*v,T=null!==(o=e.kernelCustomData.wT)&&void 0!==o?o:e.compute(r(r({},s.transposeProgramMetadata),{cacheHint:l.cacheKey,get:function(){return(0,s.createTransposeProgramInfo)(t[1],l.perm)}}),{inputs:[1],outputs:[a.wIsConst?-2:-1]})[0];a.wIsConst&&!e.kernelCustomData.wT&&(e.kernelCustomData.wT=T);var P=[t[0],T];p&&(d||1!==t[2].dims.length?P.push(t[2]):P.push(t[2].reshape([t[2].dims[0],1,1]))),e.compute((0,c.createConv2DMatMulProgramInfoLoader)(P,u,b,A,C,x,p,!0),{inputs:P})}else e.compute((0,i.createGroupedConvProgramInfoLoader)(t,u))}(e,e.inputs,t)}},822:function(e,n,t){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},r.apply(this,arguments)};Object.defineProperty(n,"__esModule",{value:!0}),n.createConv2DMatMulProgramInfoLoader=void 0;var a=t(163),o=t(456);n.createConv2DMatMulProgramInfoLoader=function(e,n,t,i,c,u,s,l){var f=function(e,n){return{name:"Conv2DMatMul",inputTypes:e?[a.GpuDataType.default,a.GpuDataType.default,a.GpuDataType.default]:[a.GpuDataType.default,a.GpuDataType.default],cacheHint:n}}(s,n.cacheKey);return r(r({},f),{get:function(){return(0,o.createConv2DMatMulProgramInfo)(e,f,n,t,i,c,u,s,l)}})}},856:function(e,n,t){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},r.apply(this,arguments)};Object.defineProperty(n,"__esModule",{value:!0}),n.expand=n.expandProgramMetadata=void 0;var a=t(952),o=t(163),i=t(75);n.expandProgramMetadata={name:"Expand",inputTypes:[o.GpuDataType.default]};var c=function(e,n){for(var t=e.length-n.length,r=[],a=0;a<t;++a)r.push(e[a]);for(a=0;a<n.length;++a)r.push(1===n[a]?e[a+t]:n[a]);return r};n.expand=function(e){!function(e){if(!e||2!==e.length)throw new Error("Expand requires 2 input.");var n=e[0].dims,t=[];e[1].dims[0]>0&&e[1].getBigInt64Array().forEach((function(e){return t.push(Number(e))}));for(var r=t.length<n.length?0:t.length-n.length,a=n.length<t.length?0:n.length-t.length;r<t.length&&a<n.length;++r,++a)if(t[r]!==n[a]&&1!==t[r]&&1!==n[a])throw new Error("Expand requires shape to be broadcastable to input")}(e.inputs),e.compute(r(r({},n.expandProgramMetadata),{get:function(){return function(e,n){var t=n[0].dims,u=[];n[1].dims[0]>0&&n[1].getBigInt64Array().forEach((function(e){return u.push(Number(e))}));var s=function(e,n){return e.length>n.length?c(e,n):c(n,e)}(t,u),l=a.ShapeUtil.size(s),f=(0,i.createIndicesHelper)("input",t),p=(0,i.createIndicesHelper)("output",s);return r(r({},e),{getShaderSource:function(e){return"\\n  const inputShape = array<u32, ".concat(t.length,">(").concat(t.map((function(e){return"".concat(e,"u")})).join(","),");\\n  ").concat("\\n  fn calculateInputIndex(outputIndices: array<u32, ".concat(s.length,">) -> array<u32,").concat(t.length,"> {\\n    ").concat(f.indicesVariableDeclaration("inputIndices"),"\\n    for (var i = 0; i < ").concat(t.length,"; i++) {\\n        if (inputShape[i] == 1) {\\n            inputIndices[i] = 0;\\n        } else {\\n            inputIndices[i] = outputIndices[i + ").concat(s.length-t.length,"];\\n        }\\n    }\\n    return inputIndices;\\n}"),";\\n  @group(0) @binding(0) var<storage, read> input : array<").concat("f32",">;\\n  @group(0) @binding(1) var<storage, read_write> output : array<").concat("f32",">;\\n  ").concat(p.o2iImpl,"\\n  ").concat(f.i2oImpl,"\\n  ").concat(e.mainStart(),"\\n  ").concat(e.guardAgainstOutOfBoundsWorkgroupSizes(l),"\\n  ").concat(f.indicesVariableDeclaration("inputIndices"),"\\n  ").concat(p.indicesVariableDeclaration("outputIndices"),"\\n  ").concat(p.o2iCall("global_idx","outputIndices"),"\\n  inputIndices = calculateInputIndex(outputIndices);\\n  output[global_idx] = input[").concat(f.i2oExpression("inputIndices"),"];\\n}")},outputs:[{dims:s,dataType:n[0].dataType,gpuDataType:o.GpuDataType.default}],dispatchGroup:function(){return{x:Math.ceil(l/64)}}})}(n.expandProgramMetadata,e.inputs)}}),{inputs:[0]})}},997:function(e,n,t){"use strict";var r=this&&this.__read||function(e,n){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var r,a,o=t.call(e),i=[];try{for(;(void 0===n||n-- >0)&&!(r=o.next()).done;)i.push(r.value)}catch(e){a={error:e}}finally{try{r&&!r.done&&(t=o.return)&&t.call(o)}finally{if(a)throw a.error}}return i};Object.defineProperty(n,"__esModule",{value:!0}),n.parseInternalActivationAttributes=n.getActicationSnippet=void 0;var a=t(952);n.getActicationSnippet=function(e){switch(e.activation){case"Relu":return{activationFunction:"",applyActivation:"value = max(value, 0.0);"};case"Sigmoid":return{activationFunction:"",applyActivation:"value = (1.0 / (1.0 + exp(-value)));"};case"Clip":return{activationFunction:"const clip_min_=f32(".concat(e.clipMin,");const clip_max_=f32(").concat(e.clipMax,");"),applyActivation:"value = clamp(value, clip_min_, clip_max_);"};default:return{activationFunction:"",applyActivation:""}}},n.parseInternalActivationAttributes=function(e){var n=(null==e?void 0:e.activation)||"";if("Clip"===n){var t=r((null==e?void 0:e.activation_params)||[a.MIN_CLIP,a.MAX_CLIP],2),o=t[0],i=t[1];return{activation:n,clipMax:i,clipMin:o,activationCacheKey:"".concat(n,":").concat(o,",").concat(i)}}return{activation:n,activationCacheKey:n}}},271:function(e,n,t){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},r.apply(this,arguments)},a=this&&this.__read||function(e,n){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var r,a,o=t.call(e),i=[];try{for(;(void 0===n||n-- >0)&&!(r=o.next()).done;)i.push(r.value)}catch(e){a={error:e}}finally{try{r&&!r.done&&(t=o.return)&&t.call(o)}finally{if(a)throw a.error}}return i};Object.defineProperty(n,"__esModule",{value:!0}),n.parseGemmAttributes=n.gemm=void 0;var o=t(952),i=t(387),c=t(163);n.gemm=function(e,n){!function(e){if(!e)throw new Error("Input is missing");if(e.length<2||e.length>3)throw new Error("Invaid input number.");if(3===e.length&&e[2].dims.length>2)throw new Error("Invalid input shape of C");if(1!==e[0].dataType||1!==e[1].dataType||3===e.length&&1!==e[2].dataType)throw new Error("Invalid input type.");if(e[0].dataType!==e[1].dataType||3===e.length&&e[0].dataType!==e[2].dataType)throw new Error("Input types are mismatched")}(e.inputs),e.compute(function(e,n){var t={name:"Gemm",inputTypes:3===e.length?[c.GpuDataType.default,c.GpuDataType.default,c.GpuDataType.default]:[c.GpuDataType.default,c.GpuDataType.default],cacheHint:n.cacheKey};return r(r({},t),{get:function(){return function(e,n,t){var i=n[0].dims.slice(),u=n[1].dims.slice(),s=a(o.GemmUtil.getShapeOfGemmResult(i,t.transA,u,t.transB,3===n.length?n[2].dims:void 0),3),l=s[0],f=s[1],p=s[2],d=[l,f];if(!d)throw new Error("Can\'t use gemm on the given tensors");var h=o.ShapeUtil.size(d),g="";t.transA&&t.transB?g="value += a[k * M + m] * b[n * K + k];":t.transA&&!t.transB?g="value += a[k * M + m] * b[k * N + n];":!t.transA&&t.transB?g="value += a[m * K + k] * b[n * K + k];":t.transA||t.transB||(g="value += a[m * K + k] * b[k * N + n];");var v="f32",m=1===t.alpha?"":"value *= alpha;",y=3===n.length?"value += beta * c[".concat(function(e,n,t){if(0===t.length)return"0u";var r=1===t.length&&1!==e||2===t.length&&t[0]!==e,a=t[t.length-1]!==n,o="0u";return r||(o+="+ m * ".concat(t[t.length-1],"u")),a||(o+="+n"),o}(l,f,n[2].dims),"];"):"",b=["@group(0) @binding(0) var<storage, read> a : array<".concat(v,">;"),"@group(0) @binding(1) var<storage, read> b : array<".concat(v,">;")];return 3===n.length&&b.push("@group(0) @binding(2) var<storage, read> c : array<".concat(v,">;")),r(r({},e),{outputs:[{dims:d,dataType:n[0].dataType,gpuDataType:c.GpuDataType.default}],getShaderSource:function(e){return"\\n  const M: u32 = ".concat(l,"u;\\n  const N: u32 = ").concat(f,"u;\\n  const K: u32 = ").concat(p,"u;\\n  const alpha = ").concat(v,"(").concat(t.alpha,");\\n  const beta = ").concat(v,"(").concat(t.beta,");\\n\\n  ").concat(b.join("\\n"),"\\n  @group(0) @binding(").concat(n.length,") var<storage, read_write> output : array<").concat(v,">;\\n\\n  ").concat(e.mainStart(),"\\n    ").concat(e.guardAgainstOutOfBoundsWorkgroupSizes(h),"\\n\\n    let m = global_id.x / N;\\n    let n = global_id.x % N;\\n\\n    var value = ").concat(v,"(0);\\n    for (var k: u32 = 0u; k<").concat(p,"u; k++) {\\n      ").concat(g,"\\n    }\\n\\n    ").concat(m,"\\n    ").concat(y,"\\n    output[global_id.x] = value;\\n\\n  }")},dispatchGroup:function(){return{x:Math.ceil(h/64)}}})}(t,e,n)}})}(e.inputs,n))},n.parseGemmAttributes=function(e){return(0,i.createAttributeWithCacheKey)(e)}},522:function(e,n,t){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},r.apply(this,arguments)};Object.defineProperty(n,"__esModule",{value:!0}),n.matMul=n.createMatmulProgramInfoLoader=void 0;var a=t(952),o=t(163),i=t(997);n.createMatmulProgramInfoLoader=function(e,n){var t,c,u=(t=e.length>2,c=n.activationCacheKey,{name:"MatMul",inputTypes:t?[o.GpuDataType.default,o.GpuDataType.default,o.GpuDataType.default]:[o.GpuDataType.default,o.GpuDataType.default],cacheHint:c});return r(r({},u),{get:function(){return function(e,n,t){var c=n[0].dims,u=n[1].dims,s=a.BroadcastUtil.calcShape(c,u,!0);if(!s)throw new Error("Can\'t use matmul on the given tensors");var l=a.ShapeUtil.size(s),f="f32",p=(0,i.getActicationSnippet)(t),d=p.activationFunction,h=p.applyActivation,g=s[s.length-2],v=c[c.length-1],m=s[s.length-1];return r(r({},e),{outputs:[{dims:s,dataType:n[0].dataType,gpuDataType:o.GpuDataType.default}],getShaderSource:function(e){return"\\n  const M: u32 = ".concat(g,"u;\\n  const N: u32 = ").concat(m,"u;\\n  const K: u32 = ").concat(v,"u;\\n\\n  @group(0) @binding(0) var<storage, read> a : array<").concat(f,">;\\n  @group(0) @binding(1) var<storage, read> b : array<").concat(f,">;\\n  @group(0) @binding(2) var<storage, read_write> output : array<").concat(f,">;\\n\\n  ").concat(d,"\\n\\n  ").concat(e.mainStart(),"\\n    ").concat(e.guardAgainstOutOfBoundsWorkgroupSizes(l),"\\n\\n    let stack = global_idx / (M * N);\\n    let mn = global_idx % (M * N);\\n    let n = global_idx % N;\\n    let m = mn / N;\\n\\n    let offsetA = stack * (M * K);\\n    let offsetB = stack * (K * N);\\n\\n    var value = ").concat(f,"(0);\\n    for (var k: u32 = 0u; k<").concat(v,"u; k++) {\\n      value += a[offsetA + m * K + k] * b[offsetB + k * N + n];\\n    }\\n    ").concat(h,"\\n    output[global_idx] = value;\\n  }")},dispatchGroup:function(){return{x:Math.ceil(l/64)}}})}(u,e,n)}})},n.matMul=function(e){!function(e){if(!e||2!==e.length)throw new Error("MatMul requires 2 inputs.");if(e[0].dims[e[0].dims.length-1]!==e[1].dims[e[1].dims.length-2])throw new Error("shared dimension does not match.");if(1!==e[0].dataType||1!==e[1].dataType)throw new Error("inputs should be float type")}(e.inputs),e.compute((0,n.createMatmulProgramInfoLoader)(e.inputs,{activation:"",activationCacheKey:""}))}},262:function(e,n,t){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},r.apply(this,arguments)},a=this&&this.__read||function(e,n){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var r,a,o=t.call(e),i=[];try{for(;(void 0===n||n-- >0)&&!(r=o.next()).done;)i.push(r.value)}catch(e){a={error:e}}finally{try{r&&!r.done&&(t=o.return)&&t.call(o)}finally{if(a)throw a.error}}return i};Object.defineProperty(n,"__esModule",{value:!0}),n.globalMaxPool=n.parseGlobalMaxPoolAttributes=n.parseMaxPoolAttributes=n.maxPool=n.globalAveragePool=n.parseGlobalAveragePoolAttributes=n.averagePool=n.parseAveragePoolAttributes=void 0;var o=t(952),i=t(387),c=t(163),u=t(75),s=function(e){if(!e||1!==e.length)throw new Error("Pool ops requires 1 input.");if(4!==e[0].dims.length)throw new Error("Pool ops supports 2-D inputs only for now.");if(1!==e[0].dataType)throw new Error("Invalid input type.")},l=function(e,n,t){var r="NHWC"===n.format,a=r?[e[0].dims[0],e[0].dims[3],e[0].dims[1],e[0].dims[2]]:e[0].dims.slice(),i=Object.hasOwnProperty.call(n,"dilations"),c=n.kernelShape.slice(),u=n.strides.slice(),s=i?n.dilations.slice():[],l=n.pads.slice();o.PoolConvUtil.adjustPoolAttributes(t,a,c,u,s,l);var f=o.PoolConvUtil.computePoolOutputShape(t,a,u,s,c,l,n.autoPad),p=Object.assign({},n);return i?Object.assign(p,{kernelShape:c,strides:u,pads:l,dilations:s,cacheKey:n.cacheKey}):Object.assign(p,{kernelShape:c,strides:u,pads:l,cacheKey:n.cacheKey}),[p,r?[f[0],f[2],f[3],f[1]]:f]},f=function(e,n,t,r,a,i,c,s){var l="NHWC"===r.format,f=n.length,p=o.ShapeUtil.size(t),d=(0,u.createIndicesHelper)("output",t),h=(0,u.createIndicesHelper)("x",n);if(r.kernelShape.length<=2){var g,v=r.kernelShape[r.kernelShape.length-1],m=r.strides[r.strides.length-1],y=r.pads[r.pads.length/2-1],b=f-(l?2:1),w="",_="";if(g=y+r.pads[r.pads.length-1]!==0?"\\n              for (var i: u32 = 0u; i < ".concat(v,"u; i++) {\\n                xIndices[").concat(b,"] = indices[").concat(b,"] * ").concat(m," - ").concat(y," + i;\\n                if (xIndices[").concat(b,"] < 0 || xIndices[").concat(b,"] >= ").concat(n[b],") {\\n                  pad++;\\n                  continue;\\n                }\\n                let x_val = x[").concat(h.i2oExpression("xIndices"),"];\\n                ").concat(a,"\\n              }"):"\\n              for (var i: u32 = 0u; i < ".concat(v,"u; i++) {\\n                xIndices[").concat(b,"] = indices[").concat(b,"] * ").concat(m," - ").concat(y," + i;\\n                let x_val = x[").concat(h.i2oExpression("xIndices"),"];\\n                ").concat(a,"\\n              }"),2===r.kernelShape.length){var S=r.kernelShape[r.kernelShape.length-2],A=r.strides[r.strides.length-2],C=r.pads[r.pads.length/2-2],x=r.pads[r.pads.length-2],T=f-(l?3:2),P=n[T];w=C+x!==0?"\\n                for (var j: u32 = 0u; j < ".concat(S,"u; j++) {\\n                  xIndices[").concat(T,"] = indices[").concat(T,"] * ").concat(A," - ").concat(C," + j;\\n                  if (xIndices[").concat(T,"] < 0 || xIndices[").concat(T,"] >= ").concat(P,") {\\n                    pad+= ").concat(v,";\\n                    continue;\\n                  }\\n              "):"\\n                for (var j: u32 = 0u; j < ".concat(S,"u; j++) {\\n                  xIndices[").concat(T,"] = indices[").concat(T,"] * ").concat(A," - ").concat(C," + j;\\n                "),_="\\n              }\\n            "}return"\\n            @group(0) @binding(0) var<storage, read> x : array<".concat(c,">;\\n            @group(0) @binding(1) var<storage, read_write> output : array<").concat(c,">;\\n\\n            ").concat(d.o2iImpl,"\\n            ").concat(h.i2oImpl,"\\n\\n            ").concat(e.mainStart(),"\\n              ").concat(e.guardAgainstOutOfBoundsWorkgroupSizes(p),"\\n\\n              ").concat(d.indicesVariableDeclaration("indices"),"\\n              ").concat(d.o2iCall("global_idx","indices"),"\\n              ").concat(d.indicesVariableDeclaration("xIndices"),"\\n              ").concat(d.o2iCall("global_idx","xIndices"),"\\n\\n              var value: ").concat(c," = ").concat(c,"(").concat(s,");\\n              var pad = 0;\\n              ").concat(w,"\\n              ").concat(g,"\\n              ").concat(_,"\\n              ").concat(i,"\\n\\n              output[global_idx] = value;\\n            }")}if(l)throw new Error("Pooling with kernelShape.length > 2 is not supported for NHWC format.");var E,O=o.ShapeUtil.size(r.kernelShape),I=o.ShapeUtil.computeStrides(r.kernelShape),k=I.length,R=r.pads.length;return E=r.pads.reduce((function(e,n){return e+n}))?"\\n                if (xIndices[j] >= inputDims[j]) {\\n                  pad++;\\n                  isPad = true;\\n                  break;\\n                }\\n              }\\n              if (!isPad) {\\n                let x_val = x[".concat(h.i2oExpression("xIndices"),"];\\n                ").concat(a,"\\n              }"):"\\n              }\\n              let x_val = x[".concat(h.i2oExpression("xIndices"),"];\\n              ").concat(a,"\\n            "),"\\n            @group(0) @binding(0) var<storage, read> x : array<".concat(c,">;\\n            @group(0) @binding(1) var<storage, read_write> output : array<").concat(c,">;\\n\\n            ").concat(d.o2iImpl,"\\n            ").concat(h.i2oImpl,"\\n\\n            const pads = array<u32, ").concat(R,">(").concat(r.pads.map((function(e){return"".concat(e,"u")})).join(","),");\\n            const inputDims = array<u32, ").concat(f,">(").concat(n.map((function(e){return"".concat(e,"u")})).join(","),");\\n            const kernelStrides = array<u32, ").concat(k,">(").concat(I.map((function(e){return"".concat(e,"u")})).join(","),");\\n            const strides = array<u32, ").concat(k,">(").concat(r.strides.map((function(e){return"".concat(e,"u")})).join(","),");\\n\\n            ").concat(e.mainStart(),"\\n              ").concat(e.guardAgainstOutOfBoundsWorkgroupSizes(p),"\\n\\n              ").concat(d.indicesVariableDeclaration("indices"),"\\n              ").concat(d.o2iCall("global_idx","indices"),"\\n              ").concat(d.indicesVariableDeclaration("xIndices"),"\\n              ").concat(d.o2iCall("global_idx","xIndices"),"\\n\\n              var offsets: array<u32, ").concat(k,">;\\n\\n              var value = ").concat(c,"(").concat(s,");\\n              var pad = 0;\\n              var isPad = false;\\n\\n              for (var i: u32 = 0u; i < ").concat(O,"u; i++) {\\n                var offset = i;\\n                for (var j = 0u; j < ").concat(k-1,"u; j++) {\\n                  offsets[j] = offset / kernelStrides[j];\\n                  offset -= offsets[j] * kernelStrides[j];\\n                }\\n                offsets[").concat(k-1,"] = offset;\\n\\n                isPad = false;\\n                for (var j = ").concat(f-k,"u; j < ").concat(f,"u; j++) {\\n                  xIndices[j] = indices[j] * strides[j - ").concat(f-k,"u]\\n                    + offsets[j - ").concat(f-k,"u] - pads[j - 2u];\\n                  ").concat(E,"\\n              }\\n              ").concat(i,"\\n\\n              output[global_idx] = value;\\n            }")},p=function(e){return{format:e.format,autoPad:["NOTSET","VALID","SAME_UPPER","SAME_LOWER"][e.auto_pad],ceilMode:e.ceil_mode,kernelShape:e.kernel_shape,strides:e.strides,pads:e.pads}},d=function(e,n,t,i){var u=a(l(e,i,t),2),s=u[0],p=u[1],d=o.ShapeUtil.size(s.kernelShape),h="f32",g="";return s.countIncludePad?g+="value /= ".concat(h,"(").concat(d,");"):g+="value /= ".concat(h,"(").concat(d," - pad);"),r(r({},n),{outputs:[{dims:p,dataType:e[0].dataType,gpuDataType:c.GpuDataType.default}],getShaderSource:function(n){return f(n,e[0].dims,p,s,"value += x_val;",g,h,"0.0")},dispatchGroup:function(){return{x:Math.ceil(o.ShapeUtil.size(p)/64)}}})};n.parseAveragePoolAttributes=function(e){var n=0!==e.count_include_pad,t=p(e);if(0!==t.ceilMode)throw new Error("using ceil() in shape computation is not yet supported for AveragePool");return(0,i.createAttributeWithCacheKey)(r({countIncludePad:n},t))},n.averagePool=function(e,n){s(e.inputs);var t={name:"AveragePool",inputTypes:[c.GpuDataType.default],cacheHint:n.cacheKey};e.compute(r(r({},t),{get:function(){return d(e.inputs,t,!1,n)}}))};var h={autoPad:"",ceilMode:0,countIncludePad:!1,kernelShape:[],strides:[],pads:[],storageOrder:0,dilations:[],cacheKey:""};n.parseGlobalAveragePoolAttributes=function(e){var n=e.format;return r(r({format:n},h),{cacheKey:n})},n.globalAveragePool=function(e,n){s(e.inputs);var t={name:"GlobalAveragePool",inputTypes:[c.GpuDataType.default],cacheHint:n.cacheKey};e.compute(r(r({},t),{get:function(){return d(e.inputs,t,!0,n)}}))};var g=function(e,n,t,i){var u=a(l(e,i,t),2),s=u[0],p=u[1];return r(r({},n),{outputs:[{dims:p,dataType:e[0].dataType,gpuDataType:c.GpuDataType.default}],getShaderSource:function(n){return f(n,e[0].dims,p,s,"\\n      value = max(x_val, value);\\n    ","","f32","-1e5")},dispatchGroup:function(){return{x:Math.ceil(o.ShapeUtil.size(p)/64)}}})};n.maxPool=function(e,n){s(e.inputs);var t={name:"MaxPool",inputTypes:[c.GpuDataType.default],cacheHint:n.cacheKey};e.compute(r(r({},t),{get:function(){return g(e.inputs,t,!1,n)}}))},n.parseMaxPoolAttributes=function(e){var n=e.storage_order,t=e.dilations,a=p(e);if(0!==n)throw new Error("column major storage order is not yet supported for MaxPool");if(0!==a.ceilMode)throw new Error("using ceil() in shape computation is not yet supported for MaxPool");return(0,i.createAttributeWithCacheKey)(r({storageOrder:n,dilations:t},a))},n.parseGlobalMaxPoolAttributes=function(e){var n=e.format;return r(r({format:n},h),{cacheKey:n})},n.globalMaxPool=function(e,n){s(e.inputs);var t={name:"GlobalMaxPool",inputTypes:[c.GpuDataType.default],cacheHint:n.cacheKey};e.compute(r(r({},t),{get:function(){return g(e.inputs,t,!0,n)}}))}},31:function(e,n,t){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},r.apply(this,arguments)};Object.defineProperty(n,"__esModule",{value:!0}),n.parseReduceAttributes=n.reduceSumSquare=n.reduceSum=n.reduceProd=n.reduceMin=n.reduceMean=n.reduceMax=n.reduceLogSumExp=n.reduceL2=n.reduceL1=n.reduceLogSum=void 0;var a=t(952),o=t(387),i=t(163),c=t(75),u=function(e){if(!e||0===e.length||e.length>2)throw new Error("Reduce op requires 1 or 2 inputs.");if(2===e.length&&1!==e[1].dims.length)throw new Error("Invalid axes input dims.");if(1!==e[0].dataType)throw new Error("Invalid input type.")},s=function(){return["","","value = _A[inputIdx];",""]},l=function(e,n,t,u){var l=1===e.length?t:function(e,n){var t=[];return e[1].dims[0]>0&&e[1].getBigInt64Array().forEach((function(e){return t.push(Number(e))})),(0,o.createAttributeWithCacheKey)({axes:t,keepDims:n.keepDims,noopWithEmptyAxes:n.noopWithEmptyAxes})}(e,t),f={name:n,inputTypes:[i.GpuDataType.default],cacheHint:l.cacheKey};return r(r({},f),{get:function(){return function(e,n,t,o){for(var u=[],s=n[0].dims,l=[],f=a.ShapeUtil.normalizeAxes(t.axes,n[0].dims.length),p=n[0].dims.length-(t.keepDims?0:f.length),d=o(n,f),h=(0,c.createIndicesHelper)("input",s),g=""===d[1]?"":"let inputIdx = ".concat(h.i2oExpression("inputIndices"),";"),v="\\n          let inputIdx = ".concat(h.i2oExpression("inputIndices"),";\\n          ").concat(d[2],";"),m=!t.noopWithEmptyAxes&&0===t.axes.length,y=0;y<n[0].dims.length;y++)m||f.indexOf(y)>=0?(t.keepDims&&u.push(1),v="for(var j".concat(y,": u32 = 0; j").concat(y," < ").concat(n[0].dims[y],"; j").concat(y,"++) {\\n                            inputIndices[").concat(y,"] = j").concat(y,";\\n                            ").concat(v,"\\n                          }")):(p>1?l.push("inputIndices[".concat(y,"] = outputIndices[").concat(u.length,"];")):l.push("inputIndices[".concat(y,"] = outputIndices;")),u.push(n[0].dims[y]));var b=(0,c.createIndicesHelper)("output",u),w=a.ShapeUtil.size(u),_="f32";return r(r({},e),{getShaderSource:function(e){return"\\n          @group(0) @binding(0) var<storage, read> _A : array<".concat(_,">;\\n          @group(0) @binding(1) var<storage, read_write> output : array<").concat(_,">;\\n\\n          ").concat(b.o2iImpl,"\\n          ").concat(h.i2oImpl,"\\n\\n          ").concat(e.mainStart(),"\\n          ").concat(e.guardAgainstOutOfBoundsWorkgroupSizes(w),"\\n          ").concat(h.indicesVariableDeclaration("inputIndices"),"\\n          ").concat(b.indicesVariableDeclaration("outputIndices"),"\\n          ").concat(b.o2iCall("global_idx","outputIndices"),"\\n\\n          var value = ").concat(_,"(0);\\n\\n          ").concat(l.join("\\n"),"\\n          ").concat(d[0],"       // init ops for reduce max/min\\n          ").concat(g,"\\n          ").concat(d[1],"\\n          ").concat(v,"\\n          ").concat(d[3],"       // final computation for reduce mean\\n          output[global_idx] = value;\\n        }")},outputs:[{dims:u,dataType:n[0].dataType,gpuDataType:i.GpuDataType.default}],dispatchGroup:function(){return{x:Math.ceil(w/64)}}})}(f,[e[0]],l,l.noopWithEmptyAxes&&0===l.axes.length?s:u)}})};n.reduceLogSum=function(e,n){u(e.inputs),e.compute(l(e.inputs,"ReduceLogSum",n,(function(){return["value = 0.0;","","value += _A[inputIdx];","value = log(value);"]})),{inputs:[0]})},n.reduceL1=function(e,n){u(e.inputs),e.compute(l(e.inputs,"ReduceL1",n,(function(){return["value = 0.0;","","value += abs(_A[inputIdx]);",""]})),{inputs:[0]})},n.reduceL2=function(e,n){u(e.inputs),e.compute(l(e.inputs,"ReduceL2",n,(function(){return["var t = f32(0); value = 0.0;","","t = _A[inputIdx]; value += (t * t);","value = sqrt(value);"]})),{inputs:[0]})},n.reduceLogSumExp=function(e,n){u(e.inputs),e.compute(l(e.inputs,"ReduceLogSumExp",n,(function(){return["value = 0.0;","","value += exp(_A[inputIdx]);","value = log(value);"]})),{inputs:[0]})},n.reduceMax=function(e,n){u(e.inputs),e.compute(l(e.inputs,"ReduceMax",n,(function(e,n){for(var t=[],r=0;r<e[0].dims.length;r++)(n.indexOf(r)>=0||0===n.length)&&t.push("inputIndices[".concat(r,"] = 0;"));return["".concat(t.join("\\n")),"value = _A[inputIdx];","value = max(value, _A[inputIdx]);",""]})),{inputs:[0]})},n.reduceMean=function(e,n){u(e.inputs),e.compute(l(e.inputs,"ReduceMean",n,(function(e,n){for(var t=1,r=0;r<e[0].dims.length;r++)(n.indexOf(r)>=0||0===n.length)&&(t*=e[0].dims[r]);return["value = 0.0;","","value += _A[inputIdx];","value = value / ".concat(t,".;")]})),{inputs:[0]})},n.reduceMin=function(e,n){u(e.inputs),e.compute(l(e.inputs,"ReduceMin",n,(function(e,n){for(var t=[],r=0;r<e[0].dims.length;r++)(n.indexOf(r)>=0||0===n.length)&&t.push("inputIndices[".concat(r,"] = 0;"));return["".concat(t.join("\\n")),"value = _A[inputIdx];","value = min(value, _A[inputIdx]);",""]})),{inputs:[0]})},n.reduceProd=function(e,n){u(e.inputs),e.compute(l(e.inputs,"ReduceProd",n,(function(){return["value = 1.0;","","value *= _A[inputIdx];",""]})),{inputs:[0]})},n.reduceSum=function(e,n){u(e.inputs),e.compute(l(e.inputs,"ReduceSum",n,(function(){return["value = 0.0;","","value += _A[inputIdx];",""]})),{inputs:[0]})},n.reduceSumSquare=function(e,n){u(e.inputs),e.compute(l(e.inputs,"ReduceSumSquare",n,(function(){return["var t = f32(0); value = 0.0;","","t = _A[inputIdx]; value += t * t;",""]})),{inputs:[0]})},n.parseReduceAttributes=function(e){return(0,o.createAttributeWithCacheKey)(e)}},101:function(e,n,t){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},r.apply(this,arguments)},a=this&&this.__read||function(e,n){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var r,a,o=t.call(e),i=[];try{for(;(void 0===n||n-- >0)&&!(r=o.next()).done;)i.push(r.value)}catch(e){a={error:e}}finally{try{r&&!r.done&&(t=o.return)&&t.call(o)}finally{if(a)throw a.error}}return i},o=this&&this.__spreadArray||function(e,n,t){if(t||2===arguments.length)for(var r,a=0,o=n.length;a<o;a++)!r&&a in n||(r||(r=Array.prototype.slice.call(n,0,a)),r[a]=n[a]);return e.concat(r||Array.prototype.slice.call(n))};Object.defineProperty(n,"__esModule",{value:!0}),n.parseSliceAttributes=n.slice=void 0;var i=t(952),c=t(387),u=t(163),s=t(75),l=function(e,n){var t=[];if(e.length>n)if(7===e[n].dataType)e[n].getBigInt64Array().forEach((function(e){return t.push(Number(e))}));else{if(6!==e[1].dataType)throw new Error("Input ".concat(n," must be an array of int32 or int64"));e[n].getInt32Array().forEach((function(e){return t.push(Number(e))}))}return t},f=function(e,n,t,r,a){var o=e;return e<0&&(o+=t[r[n]]),a[n]<0?Math.max(0,Math.min(o,t[r[n]]-1)):Math.max(0,Math.min(o,t[r[n]]))},p=function(e,n){var t=function(e,n){if(e.length>1){var t=l(e,1),r=l(e,2),i=l(e,3);return 0===i.length&&(i=o([],a(Array(e[0].dims.length).keys()),!1)),(0,c.createAttributeWithCacheKey)({starts:t,ends:r,axes:i})}return n}(e,n),p={name:"Slice",inputTypes:[u.GpuDataType.default],cacheHint:t.cacheKey+(e.length>4?"steps_"+e[4].dims.toString():"")};return r(r({},p),{get:function(){return function(e,n,t){var c=n[0].dims,p=i.ShapeUtil.size(c),d=t.axes.length>0?i.ShapeUtil.normalizeAxes(t.axes,c.length):o([],a(Array(c.length).keys()),!1),h=l(n,4);h.forEach((function(e){return 0!==e||function(){throw new Error("step cannot be 0")}})),0===h.length&&(h=Array(d.length).fill(1));var g=t.starts.map((function(e,n){return f(e,n,c,d,h)})),v=t.ends.map((function(e,n){return f(e,n,c,d,h)}));if(d.length!==c.length)for(var m=0;m<c.length;++m)d.includes(m)||(g.splice(m,0,0),v.splice(m,0,c[m]),h.splice(m,0,1));var y=h.map((function(e){return Math.sign(e)}));h.forEach((function(e,n,t){if(e<0){var r=(v[n]-g[n])/e,a=g[n],o=a+r*h[n];g[n]=o,v[n]=a,t[n]=-e}}));var b=c.slice(0);d.forEach((function(e,n){b[e]=Math.ceil((v[e]-g[e])/h[e])}));var w={dims:b,dataType:n[0].dataType,gpuDataType:u.GpuDataType.default},_=(0,s.createIndicesHelper)("output",b),S=(0,s.createIndicesHelper)("input",c),A=i.ShapeUtil.size(b);return r(r({},e),{getShaderSource:function(e){return"\\n        @group(0) @binding(0) var<storage, read> input: array<".concat("f32",">;\\n        @group(0) @binding(1) var<storage, read_write> output: array<").concat("f32",">;\\n        const signs = array<i32, ").concat(y.length,">(").concat(y.map((function(e){return"".concat(e,"i")})).join(","),");\\n        const starts = array<u32, ").concat(g.length,">(").concat(g.map((function(e){return"".concat(e,"u")})).join(","),");\\n        const ends = array<u32, ").concat(v.length,">(").concat(v.map((function(e){return"".concat(e,"u")})).join(","),");\\n        const steps = array<u32, ").concat(h.length,">(").concat(h.map((function(e){return"".concat(e,"u")})).join(","),");\\n        const inputShape = array<u32, ").concat(c.length,">(").concat(c.map((function(e){return"".concat(e,"u")})).join(","),");\\n\\n        ").concat(_.o2iImpl,"\\n        ").concat(S.i2oImpl,"\\n        ").concat(function(e,n){var t=(0,s.createIndicesHelper)("output",n),r=(0,s.createIndicesHelper)("input",e);return"fn calculateInputIndices(outputIndices: ".concat(t.iType,") -> ").concat(r.iType," {\\n          ").concat(r.indicesVariableDeclaration("inputIndices"),";\\n          var carry = 0u;\\n          for (var i = ").concat(e.length,"; i >= 0; i--) {\\n            var outputIndex = ").concat(1===n.length?"outputIndices":"outputIndices[i]",";\\n            var inputIndex = outputIndex * steps[i] + starts[i] + carry;\\n            carry = inputIndex / inputShape[i];\\n            inputIndex = inputIndex % inputShape[i];\\n            if (signs[i] < 0) {\\n              inputIndex = inputShape[i] - inputIndex - 1u + starts[i];\\n            }\\n            ").concat(1===e.length?"inputIndices":"inputIndices[i]"," = inputIndex;\\n          }\\n          return inputIndices;\\n      }")}(c,b),"\\n        ").concat(e.mainStart(),"\\n          ").concat(e.guardAgainstOutOfBoundsWorkgroupSizes(A),"\\n          ").concat(_.indicesVariableDeclaration("outputIndices"),"\\n          ").concat(_.o2iCall("global_idx","outputIndices"),"\\n          ").concat(S.indicesVariableDeclaration("inputIndices"),"\\n          inputIndices = calculateInputIndices(outputIndices);\\n          output[global_idx] = input[").concat(S.i2oExpression("inputIndices"),"];\\n      }")},outputs:[w],dispatchGroup:function(){return{x:Math.ceil(p/64)}}})}(p,e,t)}})};n.slice=function(e,n){!function(e,n){if(!e||e.length<1)throw new Error("too few inputs");if(0!==n.axes.length){if(n.axes.length!==n.starts.length||n.axes.length!==n.ends.length)throw new Error("axes, starts and ends must have the same length")}else if(n.starts.length!==n.ends.length)throw new Error("starts and ends must have the same length");e.slice(1).forEach((function(n,t){if(6!==e[t+1].dataType&&7!==e[t+1].dataType)throw new Error("Input ".concat(t," must be an array of int32 or int64"))}))}(e.inputs,n),e.compute(p(e.inputs,n),{inputs:[0]})},n.parseSliceAttributes=function(e){var n=e.starts,t=e.ends,r=e.axes;return(0,c.createAttributeWithCacheKey)({starts:n,ends:t,axes:r,steps:[]})}},67:function(e,n,t){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},r.apply(this,arguments)};Object.defineProperty(n,"__esModule",{value:!0}),n.parseSplitAttributes=n.split=void 0;var a=t(952),o=t(387),i=t(163),c=t(75);n.split=function(e,n){!function(e){if(!e||e.length<1)throw new Error("too few inputs")}(e.inputs),e.compute(function(e,n){var t=1===e.length?n:function(e,n){var t=[];return e[1].dims[0]>0&&e[1].getBigInt64Array().forEach((function(e){return t.push(Number(e))})),(0,o.createAttributeWithCacheKey)({numOutputs:n.numOutputs,axis:n.axis,splitSizes:t})}(e,n),u={name:"Split",inputTypes:[i.GpuDataType.default],cacheHint:t.cacheKey};return r(r({},u),{get:function(){return function(e,n,t,o){void 0===o&&(o="f32");for(var u=n[0].dims,s=a.ShapeUtil.size(u),l=u.length,f=t.axis,p=f<0?u.length+f:f,d=new Array(t.numOutputs),h=new Array(t.numOutputs),g=(0,c.createIndicesHelper)("input",u),v=new Array(t.numOutputs),m=[],y=[],b=0,w=0;w<t.numOutputs;w++){b+=t.splitSizes[w],v[w]=b,d[w]="@group(0) @binding(".concat(w+1,") var<storage, read_write> output").concat(w," : array<").concat(o,">;");var _=u.slice();_[t.axis]=t.splitSizes[w],y.push(_),h[w]=(0,c.createIndicesHelper)("output".concat(w),y[w]),m.push({dims:y[w],dataType:n[0].dataType,gpuDataType:i.GpuDataType.default})}var S=l<2?"indices":"indices[".concat(p,"]");return r(r({},e),{getShaderSource:function(e){return"\\n  @group(0) @binding(0) var<storage, read> input : array<".concat(o,">;\\n  ").concat(d.join("\\n"),"\\n  ").concat(g.o2iImpl,"\\n  ").concat(h.map((function(e){return e.i2oImpl})).join("\\n"),"\\n  const sizeInConcatAxis = array<u32, ").concat(v.length,">(").concat(v.map((function(e){return"".concat(e,"u")})).join(","),");\\n  ").concat((n=v.length,"\\nfn calculateOutputIndex(index: u32) -> u32 {\\n    for (var i: u32 = 0u; i < ".concat(n,"u; i += 1u ) {\\n    if (index < sizeInConcatAxis[i]) {\\n        return i;\\n    }\\n    }\\n    return ").concat(n,"u;\\n}")),"\\n  ").concat(function(e){for(var n=e.length,t=[],r=0;r<n;++r){var a="output".concat(r,"[").concat(e[r].i2oExpression("indices",!0),"] = input[global_idx];");1===n?t.push(a):0===r?t.push("if (outputNumber == ".concat(r,"u) { ").concat(a," }")):r===n-1?t.push("else { ".concat(a," }")):t.push("else if (outputNumber == ".concat(r,") { ").concat(a," }"))}return"\\n      fn writeBufferData(outputNumber: u32, indices: ptr<function, ".concat(e[0].iType,">, global_idx: u32) {\\n        ").concat(t.join("\\n"),"\\n      }")}(h),"\\n\\n  ").concat(e.mainStart(),"\\n    ").concat(e.guardAgainstOutOfBoundsWorkgroupSizes(s),"\\n\\n    ").concat(g.indicesVariableDeclaration("indices"),"\\n    ").concat(g.o2iCall("global_idx","indices"),"\\n    let outputNumber = calculateOutputIndex(").concat(S,");\\n    if (outputNumber != 0) {\\n        ").concat(S," -= sizeInConcatAxis[outputNumber - 1u];\\n    }\\n    writeBufferData(outputNumber, &indices, global_idx);\\n  }");var n},outputs:m,dispatchGroup:function(){return{x:Math.ceil(s/64)}}})}(u,[e[0]],n)}})}(e.inputs,n),{inputs:[0]})},n.parseSplitAttributes=function(e){var n=e.axis,t=e.splitSizes,r=e.numOutputs<0?t.length:e.numOutputs;if(r!==t.length)throw new Error("numOutputs and splitSizes lengh must be equal");return(0,o.createAttributeWithCacheKey)({axis:n,numOutputs:r,splitSizes:t})}},625:function(e,n,t){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},r.apply(this,arguments)},a=this&&this.__read||function(e,n){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var r,a,o=t.call(e),i=[];try{for(;(void 0===n||n-- >0)&&!(r=o.next()).done;)i.push(r.value)}catch(e){a={error:e}}finally{try{r&&!r.done&&(t=o.return)&&t.call(o)}finally{if(a)throw a.error}}return i},o=this&&this.__spreadArray||function(e,n,t){if(t||2===arguments.length)for(var r,a=0,o=n.length;a<o;a++)!r&&a in n||(r||(r=Array.prototype.slice.call(n,0,a)),r[a]=n[a]);return e.concat(r||Array.prototype.slice.call(n))};Object.defineProperty(n,"__esModule",{value:!0}),n.parseTransposeAttributes=n.transpose=n.createTransposeProgramInfo=n.transposeProgramMetadata=void 0;var i=t(952),c=t(387),u=t(163),s=t(75);n.transposeProgramMetadata={name:"Transpose",inputTypes:[u.GpuDataType.default]};var l=function(e,n){return n&&n.length!==e.length?o([],a(e.keys()),!1).reverse():n};n.createTransposeProgramInfo=function(e,t){var a=e.dims,o=l(a,t),c=function(e,n){return i.ShapeUtil.sortBasedOnPerm(e,l(e,n))}(a,o),f=a.length,p=i.ShapeUtil.size(c),d=(0,s.createIndicesHelper)("output",c),h=(0,s.createIndicesHelper)("a",a);return r(r({},n.transposeProgramMetadata),{outputs:[{dims:c,dataType:e.dataType,gpuDataType:u.GpuDataType.default}],getShaderSource:function(e){return"\\n  @group(0) @binding(0) var<storage, read> a : array<".concat("f32",">;\\n  @group(0) @binding(1) var<storage, read_write> output : array<").concat("f32",">;\\n\\n  ").concat(function(e,n){var t=[];t.push("fn perm(a: ptr<function, array<u32, ".concat(n,">>, i: ptr<function, array<u32, ").concat(n,">>) {"));for(var r=0;r<n;++r)t.push("\\t(*a)[".concat(e[r],"]=(*i)[").concat(r,"];"));return t.push("\\t}"),t.join("\\n")}(o,f),"\\n  ").concat(d.o2iImpl,"\\n  ").concat(h.i2oImpl,"\\n\\n  ").concat(e.mainStart(),"\\n    ").concat(e.guardAgainstOutOfBoundsWorkgroupSizes(p),"\\n\\n    ").concat(d.indicesVariableDeclaration("indices"),"\\n    ").concat(d.o2iCall("global_idx","indices"),"\\n    ").concat(h.indicesVariableDeclaration("aIndices"),"\\n    perm(&aIndices, &indices);\\n\\n    output[global_idx] = a[").concat(h.i2oExpression("aIndices"),"];\\n  }")},dispatchGroup:function(){return{x:Math.ceil(p/64)}}})},n.transpose=function(e,t){!function(e){if(!e||1!==e.length)throw new Error("Transpose requires 1 input.");if(1!==e[0].dataType)throw new Error("input should be float tensor")}(e.inputs),e.compute(r(r({},n.transposeProgramMetadata),{cacheHint:t.cacheKey,get:function(){return(0,n.createTransposeProgramInfo)(e.inputs[0],t.perm)}}))},n.parseTransposeAttributes=function(e){return(0,c.createAttributeWithCacheKey)({perm:e.perm})}},302:function(e,n,t){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},r.apply(this,arguments)};Object.defineProperty(n,"__esModule",{value:!0}),n.thresholdedRelu=n.tanh=n.tan=n.sqrt=n.sinh=n.sin=n.sigmoid=n.relu=n.reciprocal=n.neg=n.leakyRelu=n.floor=n.exp=n.erf=n.elu=n.parseAlphaAttributes=n.cosh=n.cos=n.ceil=n.clip=n.clipV10=n.atanh=n.atan=n.asinh=n.asin=n.acosh=n.acos=n.abs=void 0;var a=t(952),o=t(387),i=t(163),c=function(e,n,t,o,c){var u={name:n,inputTypes:[i.GpuDataType.default],cacheHint:c};return r(r({},u),{get:function(){return function(e,n,t,o){return r(r({},e),{getShaderSource:function(e){return function(e,n,t,r){var a,o=Math.ceil(n/4);return a="string"==typeof t?"".concat(t,"(a)"):t("a"),"\\n  @group(0) @binding(0) var<storage, read> inputData : array<vec4<f32>>;\\n  @group(0) @binding(1) var<storage, read_write> outputData : array<vec4<f32>>;\\n\\n  ".concat(null!=r?r:"","\\n\\n  ").concat(e.mainStart(),"\\n    ").concat(e.guardAgainstOutOfBoundsWorkgroupSizes(o),"\\n\\n    let a = inputData[global_idx];\\n    outputData[global_idx] = ").concat(a,";\\n  }")}(e,a.ShapeUtil.size(n.dims),t,o)},outputs:[{dims:n.dims,dataType:n.dataType,gpuDataType:i.GpuDataType.default}],dispatchGroup:function(e){return{x:Math.ceil(a.ShapeUtil.size(e[0].dims)/64/4)}}})}(u,e,t,o)}})};n.abs=function(e){e.compute(c(e.inputs[0],"Abs","abs"))},n.acos=function(e){e.compute(c(e.inputs[0],"Acos","acos"))},n.acosh=function(e){e.compute(c(e.inputs[0],"Acosh","acosh"))},n.asin=function(e){e.compute(c(e.inputs[0],"Asin","asin"))},n.asinh=function(e){e.compute(c(e.inputs[0],"Asinh","asinh"))},n.atan=function(e){e.compute(c(e.inputs[0],"Atan","atan"))},n.atanh=function(e){e.compute(c(e.inputs[0],"Atanh","atanh"))},n.clipV10=function(e,n){e.compute(c(e.inputs[0],"Clip",(function(e){return"clamp(".concat(e,", clip_min_, clip_max_)")}),"\\n    const clip_min_: vec4<f32> = vec4(f32(".concat(n.min,"));\\n    const clip_max_: vec4<f32> = vec4(f32(").concat(n.max,"));\\n"),n.cacheKey),{inputs:[0]})},n.clip=function(e){var t,r,i,c=(r=(t=e.inputs).length>=2?t[1].getFloat32Array()[0]:a.MIN_CLIP,i=t.length>=3?t[2].getFloat32Array()[0]:a.MAX_CLIP,(0,o.createAttributeWithCacheKey)({min:r,max:i}));(0,n.clipV10)(e,c)},n.ceil=function(e){e.compute(c(e.inputs[0],"Ceil","ceil"))},n.cos=function(e){e.compute(c(e.inputs[0],"Cos","cos"))},n.cosh=function(e){e.compute(c(e.inputs[0],"Cosh","cosh"))},n.parseAlphaAttributes=function(e){return(0,o.createAttributeWithCacheKey)(e)},n.elu=function(e,n){e.compute(c(e.inputs[0],"Elu",(function(e){return"elu_vf32(".concat(e,")")}),"\\n  const elu_alpha_: f32 = f32(".concat(n.alpha,");\\n\\n  fn elu_f32(a: f32) -> f32 {\\n  return select((exp(a) - 1.0) * elu_alpha_, a, a >= 0.0);\\n  }\\n\\n  fn elu_vf32(v: vec4<f32>) -> vec4<f32> {\\n  return vec4(elu_f32(v.x), elu_f32(v.y), elu_f32(v.z), elu_f32(v.w));\\n  }"),n.cacheKey))},n.erf=function(e){e.compute(c(e.inputs[0],"Erf",(function(e){return"erf_vf32(".concat(e,")")}),"\\n  const r0: f32 = 0.3275911;\\n  const r1: f32 = 0.254829592;\\n  const r2: f32 = -0.284496736;\\n  const r3: f32 = 1.421413741;\\n  const r4: f32 = -1.453152027;\\n  const r5: f32 = 1.061405429;\\n\\n  fn erf_vf32(v: vec4<f32>) -> vec4<f32> {\\n    let absv = abs(v);\\n    let x = 1.0 / (1.0 + r0 * absv);\\n    return sign(v) * (1.0 - ((((r5 * x + r4) * x + r3) * x + r2) * x + r1) * x * exp(-absv * absv));\\n  }"))},n.exp=function(e){e.compute(c(e.inputs[0],"Exp","exp"))},n.floor=function(e){e.compute(c(e.inputs[0],"Floor","floor"))},n.leakyRelu=function(e,n){e.compute(c(e.inputs[0],"LeakyRelu",(function(e){return"select(leaky_relu_alpha_ * ".concat(e,", ").concat(e,", ").concat(e," >= vec4<f32>(0.0))")}),"const leaky_relu_alpha_: f32 = f32(".concat(n.alpha,");"),n.cacheKey))},n.neg=function(e){e.compute(c(e.inputs[0],"Neg",(function(e){return"-".concat(e)})))},n.reciprocal=function(e){e.compute(c(e.inputs[0],"Reciprocal",(function(e){return"1.0/".concat(e)})))},n.relu=function(e){e.compute(c(e.inputs[0],"Relu",(function(e){return"select(vec4<f32>(0.0), ".concat(e,", ").concat(e," > vec4<f32>(0.0))")})))},n.sigmoid=function(e){e.compute(c(e.inputs[0],"Sigmoid",(function(e){return"(1.0 / (1.0 + exp(-".concat(e,")))")})))},n.sin=function(e){e.compute(c(e.inputs[0],"Sin","sin"))},n.sinh=function(e){e.compute(c(e.inputs[0],"Sinh","sinh"))},n.sqrt=function(e){e.compute(c(e.inputs[0],"Sqrt","sqrt"))},n.tan=function(e){e.compute(c(e.inputs[0],"Tan","tan"))},n.tanh=function(e){e.compute(c(e.inputs[0],"Tanh","tanh"))},n.thresholdedRelu=function(e,n){return e.compute(c(e.inputs[0],"ThresholdedRelu",(function(e){return"select(vec4<f32>(0.0), ".concat(e,", ").concat(e," > thresholded_relu_alpha_)")}),"const thresholded_relu_alpha_: vec4<f32> = vec4<f32>(".concat(n.alpha,");"),n.cacheKey)),0}},305:function(e,n,t){"use strict";var r=this&&this.__values||function(e){var n="function"==typeof Symbol&&Symbol.iterator,t=n&&e[n],r=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")},a=this&&this.__read||function(e,n){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var r,a,o=t.call(e),i=[];try{for(;(void 0===n||n-- >0)&&!(r=o.next()).done;)i.push(r.value)}catch(e){a={error:e}}finally{try{r&&!r.done&&(t=o.return)&&t.call(o)}finally{if(a)throw a.error}}return i},o=this&&this.__spreadArray||function(e,n,t){if(t||2===arguments.length)for(var r,a=0,o=n.length;a<o;a++)!r&&a in n||(r||(r=Array.prototype.slice.call(n,0,a)),r[a]=n[a]);return e.concat(r||Array.prototype.slice.call(n))};Object.defineProperty(n,"__esModule",{value:!0}),n.ProgramManager=void 0;var i=t(955),c=t(75),u=function(){function e(e){this.backend=e,this.repo=new Map,this.attributesBound=!1}return e.prototype.getArtifact=function(e){return this.repo.get(e)},e.prototype.setArtifact=function(e,n){this.repo.set(e,n)},e.prototype.run=function(e,n,t,i){var c,u,s,l,f=this,p=this.backend.device,d=this.backend.getComputePassEncoder();this.backend.profilingEnabled&&d.writeTimestamp(this.backend.profilingQuerySet,0),d.setPipeline(e.computePipeline);var h=[];try{for(var g=r(n),v=g.next();!v.done;v=g.next()){var m=v.value;h.push({binding:h.length,resource:{buffer:m.buffer}})}}catch(e){c={error:e}}finally{try{v&&!v.done&&(u=g.return)&&u.call(g)}finally{if(c)throw c.error}}try{for(var y=r(t),b=y.next();!b.done;b=y.next()){var w=b.value;h.push({binding:h.length,resource:{buffer:w.buffer}})}}catch(e){s={error:e}}finally{try{b&&!b.done&&(l=y.return)&&l.call(y)}finally{if(s)throw s.error}}var _=p.createBindGroup({layout:e.computePipeline.getBindGroupLayout(0),entries:h});if(d.setBindGroup(0,_),d.dispatchWorkgroups.apply(d,o([],a(i),!1)),this.backend.pendingDispatchNumber++,this.backend.profilingEnabled){d.writeTimestamp(this.backend.profilingQuerySet,1);var S=this.backend.gpuDataManager.create(16,GPUBufferUsage.COPY_SRC|GPUBufferUsage.QUERY_RESOLVE),A=this.backend.gpuDataManager.create(16,GPUBufferUsage.MAP_READ|GPUBufferUsage.COPY_DST);this.backend.endComputePass(),this.backend.getCommandEncoder().resolveQuerySet(this.backend.profilingQuerySet,0,2,S.buffer,0),this.backend.getCommandEncoder().copyBufferToBuffer(S.buffer,0,A.buffer,0,16),this.backend.flush();var C=this.backend.currentKernelId,x=this.backend.kernels.get(C)[0];A.buffer.mapAsync(GPUMapMode.READ).then((function(){var e=new BigUint64Array(A.buffer.getMappedRange()),n=e[0],t=e[1];A.buffer.unmap(),void 0===f.backend.profilingTimeBase&&(f.backend.profilingTimeBase=n);var r=Number(n-f.backend.profilingTimeBase),a=Number(t-f.backend.profilingTimeBase);if(!Number.isSafeInteger(r)||!Number.isSafeInteger(a))throw new RangeError("incorrect timestamp range");f.backend.gpuDataManager.release(S.id),f.backend.gpuDataManager.release(A.id),console.log(\'[profiling] kernel "\'.concat(C,"|").concat(x,\'" execution time: \').concat(a-r," ns"))}))}this.backend.pendingDispatchNumber>=16&&this.backend.flush()},e.prototype.dispose=function(){},e.prototype.build=function(e,n){var t=this.backend.device,r=e.getShaderSource((0,c.createShaderHelper)(n)),a=t.createShaderModule({code:r});return(0,i.LOG_DEBUG)("verbose",(function(){return"[WebGPU] shader code: ".concat(r)})),{programInfo:e,computePipeline:t.createComputePipeline({compute:{module:a,entryPoint:"main"},layout:"auto"})}},e.prototype.normalizeDispatchGroupSize=function(e){var n="number"==typeof e?e:e.x,t="number"==typeof e?1:e.y||1,r="number"==typeof e?1:e.z||1,a=this.backend.device.limits.maxComputeWorkgroupsPerDimension;if(n<=a&&t<=a&&r<=a)return[n,t,r];var o=n*t*r,i=Math.ceil(Math.sqrt(o));if(i>a){if((i=Math.ceil(Math.cbrt(o)))>a)throw new Error("Total dispatch size exceeds WebGPU maximum.");return[i,i,i]}return[i,i,1]},e}();n.ProgramManager=u},163:function(e,n){"use strict";var t;Object.defineProperty(n,"__esModule",{value:!0}),n.GpuDataType=void 0,(t=n.GpuDataType||(n.GpuDataType={}))[t.default=0]="default",t[t.upload=1]="upload",t[t.profile=2]="profile"},918:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.setRunOptions=void 0;var r=t(263),a=t(497);n.setRunOptions=function(e){var n=(0,r.getInstance)(),t=0,o=[],i=e||{};try{if(void 0===(null==e?void 0:e.logSeverityLevel))i.logSeverityLevel=2;else if("number"!=typeof e.logSeverityLevel||!Number.isInteger(e.logSeverityLevel)||e.logSeverityLevel<0||e.logSeverityLevel>4)throw new Error("log serverity level is not valid: ".concat(e.logSeverityLevel));if(void 0===(null==e?void 0:e.logVerbosityLevel))i.logVerbosityLevel=0;else if("number"!=typeof e.logVerbosityLevel||!Number.isInteger(e.logVerbosityLevel))throw new Error("log verbosity level is not valid: ".concat(e.logVerbosityLevel));void 0===(null==e?void 0:e.terminate)&&(i.terminate=!1);var c=0;return void 0!==(null==e?void 0:e.tag)&&(c=(0,a.allocWasmString)(e.tag,o)),0===(t=n._OrtCreateRunOptions(i.logSeverityLevel,i.logVerbosityLevel,!!i.terminate,c))&&(0,a.checkLastError)("Can\'t create run options."),void 0!==(null==e?void 0:e.extra)&&(0,a.iterateExtraOptions)(e.extra,"",new WeakSet,(function(e,r){var i=(0,a.allocWasmString)(e,o),c=(0,a.allocWasmString)(r,o);0!==n._OrtAddRunConfigEntry(t,i,c)&&(0,a.checkLastError)("Can\'t set a run config entry: ".concat(e," - ").concat(r,"."))})),[t,o]}catch(e){throw 0!==t&&n._OrtReleaseRunOptions(t),o.forEach((function(e){return n._free(e)})),e}}},622:function(e,n,t){"use strict";var r=this&&this.__values||function(e){var n="function"==typeof Symbol&&Symbol.iterator,t=n&&e[n],r=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.setSessionOptions=void 0;var a=t(263),o=t(497);n.setSessionOptions=function(e){var n,t,i,c,u=(0,a.getInstance)(),s=0,l=[],f=e||{};!function(e){e.extra||(e.extra={}),e.extra.session||(e.extra.session={});var n=e.extra.session;n.use_ort_model_bytes_directly||(n.use_ort_model_bytes_directly="1"),e.executionProviders&&e.executionProviders.some((function(e){return"webgpu"===("string"==typeof e?e:e.name)}))&&(e.enableMemPattern=!1)}(f);try{var p=function(e){switch(e){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error("unsupported graph optimization level: ".concat(e))}}(null!==(n=f.graphOptimizationLevel)&&void 0!==n?n:"all"),d=function(e){switch(e){case"sequential":return 0;case"parallel":return 1;default:throw new Error("unsupported execution mode: ".concat(e))}}(null!==(t=f.executionMode)&&void 0!==t?t:"sequential"),h="string"==typeof f.logId?(0,o.allocWasmString)(f.logId,l):0,g=null!==(i=f.logSeverityLevel)&&void 0!==i?i:2;if(!Number.isInteger(g)||g<0||g>4)throw new Error("log serverity level is not valid: ".concat(g));var v=null!==(c=f.logVerbosityLevel)&&void 0!==c?c:0;if(!Number.isInteger(v)||v<0||v>4)throw new Error("log verbosity level is not valid: ".concat(v));var m="string"==typeof f.optimizedModelFilePath?(0,o.allocWasmString)(f.optimizedModelFilePath,l):0;return 0===(s=u._OrtCreateSessionOptions(p,!!f.enableCpuMemArena,!!f.enableMemPattern,d,!!f.enableProfiling,0,h,g,v,m))&&(0,o.checkLastError)("Can\'t create session options."),f.executionProviders&&function(e,n,t){var i,c;try{for(var u=r(n),s=u.next();!s.done;s=u.next()){var l=s.value,f="string"==typeof l?l:l.name;switch(f){case"xnnpack":f="XNNPACK";break;case"webnn":if(f="WEBNN","string"!=typeof l){var p=l;if(null==p?void 0:p.deviceType){var d=(0,o.allocWasmString)("deviceType",t),h=(0,o.allocWasmString)(p.deviceType,t);0!==(0,a.getInstance)()._OrtAddSessionConfigEntry(e,d,h)&&(0,o.checkLastError)("Can\'t set a session config entry: \'deviceType\' - ".concat(p.deviceType,"."))}(null==p?void 0:p.powerPreference)&&(d=(0,o.allocWasmString)("powerPreference",t),h=(0,o.allocWasmString)(p.powerPreference,t),0!==(0,a.getInstance)()._OrtAddSessionConfigEntry(e,d,h)&&(0,o.checkLastError)("Can\'t set a session config entry: \'powerPreference\' - ".concat(p.powerPreference,".")))}break;case"webgpu":f="JS";break;case"wasm":case"cpu":continue;default:throw new Error("not supported execution provider: ".concat(f))}var g=(0,o.allocWasmString)(f,t);0!==(0,a.getInstance)()._OrtAppendExecutionProvider(e,g)&&(0,o.checkLastError)("Can\'t append execution provider: ".concat(f,"."))}}catch(e){i={error:e}}finally{try{s&&!s.done&&(c=u.return)&&c.call(u)}finally{if(i)throw i.error}}}(s,f.executionProviders,l),void 0!==f.extra&&(0,o.iterateExtraOptions)(f.extra,"",new WeakSet,(function(e,n){var t=(0,o.allocWasmString)(e,l),r=(0,o.allocWasmString)(n,l);0!==u._OrtAddSessionConfigEntry(s,t,r)&&(0,o.checkLastError)("Can\'t set a session config entry: ".concat(e," - ").concat(n,"."))})),[s,l]}catch(e){throw 0!==s&&u._OrtReleaseSessionOptions(s),l.forEach((function(e){return u._free(e)})),e}}},917:function(e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.logLevelStringToEnum=n.tensorTypeToTypedArrayConstructor=n.getTensorElementSize=n.tensorDataTypeEnumToString=n.tensorDataTypeStringToEnum=void 0,n.tensorDataTypeStringToEnum=function(e){switch(e){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float16":return 10;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error("unsupported data type: ".concat(e))}},n.tensorDataTypeEnumToString=function(e){switch(e){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 10:return"float16";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error("unsupported data type: ".concat(e))}},n.getTensorElementSize=function(e){return[void 0,4,1,1,2,2,4,8,void 0,1,2,8,4,8,void 0,void 0,void 0][e]},n.tensorTypeToTypedArrayConstructor=function(e){switch(e){case"float16":case"uint16":return Uint16Array;case"float32":return Float32Array;case"uint8":case"bool":return Uint8Array;case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error("unsupported type: ".concat(e))}},n.logLevelStringToEnum=function(e){switch(e){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error("unsupported logging level: ".concat(e))}}},259:function(e,n,t){"use strict";var r=this&&this.__awaiter||function(e,n,t,r){return new(t||(t=Promise))((function(a,o){function i(e){try{u(r.next(e))}catch(e){o(e)}}function c(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var n;e.done?a(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(i,c)}u((r=r.apply(e,n||[])).next())}))},a=this&&this.__generator||function(e,n){var t,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(c){return function(u){return function(c){if(t)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(i=0)),i;)try{if(t=1,r&&(a=2&c[0]?r.return:c[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,c[1])).done)return a;switch(r=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,r=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==c[0]&&2!==c[0])){i=0;continue}if(3===c[0]&&(!a||c[1]>a[0]&&c[1]<a[3])){i.label=c[1];break}if(6===c[0]&&i.label<a[1]){i.label=a[1],a=c;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(c);break}a[2]&&i.ops.pop(),i.trys.pop();continue}c=n.call(e,i)}catch(e){c=[6,e],r=0}finally{t=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,u])}}},o=this&&this.__read||function(e,n){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var r,a,o=t.call(e),i=[];try{for(;(void 0===n||n-- >0)&&!(r=o.next()).done;)i.push(r.value)}catch(e){a={error:e}}finally{try{r&&!r.done&&(t=o.return)&&t.call(o)}finally{if(a)throw a.error}}return i},i=this&&this.__values||function(e){var n="function"==typeof Symbol&&Symbol.iterator,t=n&&e[n],r=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.extractTransferableBuffers=n.endProfiling=n.run=n.releaseSession=n.createSession=n.createSessionFinalize=n.createSessionAllocate=n.initRuntime=void 0;var c=t(918),u=t(622),s=t(917),l=t(263),f=t(497);n.initRuntime=function(e){return r(void 0,void 0,void 0,(function(){return a(this,(function(n){switch(n.label){case 0:return t=e.wasm.numThreads,r=(0,s.logLevelStringToEnum)(e.logLevel),0!==(0,l.getInstance)()._OrtInit(t,r)&&(0,f.checkLastError)("Can\'t initialize onnxruntime."),[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}var t,r}))}))};var p=new Map;n.createSessionAllocate=function(e){var n=(0,l.getInstance)(),t=n._malloc(e.byteLength);if(0===t)throw new Error("Can\'t create a session. failed to allocate a buffer of size ".concat(e.byteLength,"."));return n.HEAPU8.set(e,t),[t,e.byteLength]},n.createSessionFinalize=function(e,n){var t,r=(0,l.getInstance)(),a=0,i=0,c=[],s=[],d=[];try{i=(t=o((0,u.setSessionOptions)(n),2))[0],c=t[1],0===(a=r._OrtCreateSession(e[0],e[1],i))&&(0,f.checkLastError)("Can\'t create a session.");for(var h=o(function(e){var n=(0,l.getInstance)(),t=n.stackSave();try{var r=n.stackAlloc(8);return 0!==n._OrtGetInputOutputCount(e,r,r+4)&&(0,f.checkLastError)("Can\'t get session input/output count."),[n.HEAP32[r/4],n.HEAP32[r/4+1]]}finally{n.stackRestore(t)}}(a),2),g=h[0],v=h[1],m=[],y=[],b=0;b<g;b++){var w=r._OrtGetInputName(a,b);0===w&&(0,f.checkLastError)("Can\'t get an input name."),s.push(w),m.push(r.UTF8ToString(w))}for(b=0;b<v;b++){var _=r._OrtGetOutputName(a,b);0===_&&(0,f.checkLastError)("Can\'t get an output name."),d.push(_),y.push(r.UTF8ToString(_))}return p.set(a,[a,s,d]),[a,m,y]}catch(e){throw s.forEach((function(e){return r._OrtFree(e)})),d.forEach((function(e){return r._OrtFree(e)})),0!==a&&r._OrtReleaseSession(a),e}finally{r._free(e[0]),0!==i&&r._OrtReleaseSessionOptions(i),c.forEach((function(e){return r._free(e)}))}},n.createSession=function(e,t){var r=(0,n.createSessionAllocate)(e);return(0,n.createSessionFinalize)(r,t)},n.releaseSession=function(e){var n=(0,l.getInstance)(),t=p.get(e);if(!t)throw new Error("cannot release session. invalid session id: ".concat(e));var r=o(t,3),a=r[0],i=r[1],c=r[2];i.forEach((function(e){return n._OrtFree(e)})),c.forEach((function(e){return n._OrtFree(e)})),n._OrtReleaseSession(a),p.delete(e)},n.run=function(e,n,t,i,u){return r(void 0,void 0,void 0,(function(){var r,d,h,g,v,m,y,b,w,_,S,A,C,x,T,P,E,O,I,k,R,D,M,U,W,j,B,G,z,L,F,H,V,N,K,Y,q,J,X,Q,Z,$,ee,ne,te,re;return a(this,(function(a){switch(a.label){case 0:if(r=(0,l.getInstance)(),!(d=p.get(e)))throw new Error("cannot run inference. invalid session id: ".concat(e));h=o(d,3),g=h[0],v=h[1],m=h[2],y=n.length,b=i.length,w=0,_=[],S=[],A=[],a.label=1;case 1:for(a.trys.push([1,,7,8]),re=o((0,c.setRunOptions)(u),2),w=re[0],_=re[1],C=function(e){var n=t[e][0],a=t[e][1],o=t[e][2],i=void 0,c=void 0;if(Array.isArray(o)){c=4*o.length,i=r._malloc(c),A.push(i);for(var u=i/4,l=0;l<o.length;l++){if("string"!=typeof o[l])throw new TypeError("tensor data at index ".concat(l," is not a string"));r.HEAPU32[u++]=(0,f.allocWasmString)(o[l],A)}}else c=o.byteLength,i=r._malloc(c),A.push(i),r.HEAPU8.set(new Uint8Array(o.buffer,o.byteOffset,c),i);var p=r.stackSave(),d=r.stackAlloc(4*a.length);try{var h=d/4;a.forEach((function(e){return r.HEAP32[h++]=e}));var g=r._OrtCreateTensor((0,s.tensorDataTypeStringToEnum)(n),i,c,d,a.length);0===g&&(0,f.checkLastError)("Can\'t create tensor for input[".concat(e,"].")),S.push(g)}finally{r.stackRestore(p)}},j=0;j<y;j++)C(j);x=r.stackSave(),T=r.stackAlloc(4*y),P=r.stackAlloc(4*y),E=r.stackAlloc(4*b),O=r.stackAlloc(4*b),a.label=2;case 2:for(a.trys.push([2,,5,6]),I=T/4,k=P/4,R=E/4,D=O/4,j=0;j<y;j++)r.HEAPU32[I++]=S[j],r.HEAPU32[k++]=v[n[j]];for(j=0;j<b;j++)r.HEAPU32[R++]=0,r.HEAPU32[D++]=m[i[j]];return M=r._OrtRun(g,P,T,y,O,b,E,w),(U=r.jsepRunPromise)&&void 0!==U.then?[4,U]:[3,4];case 3:M=a.sent(),a.label=4;case 4:for(W=[],0!==M&&(0,f.checkLastError)("failed to call OrtRun()."),j=0;j<b;j++){B=r.HEAPU32[E/4+j],G=r.stackSave(),z=r.stackAlloc(16),L=void 0,F=0;try{for(0!==(M=r._OrtGetTensorData(B,z,z+4,z+8,z+12))&&(0,f.checkLastError)("Can\'t access output tensor data on index ".concat(j,".")),H=z/4,V=r.HEAPU32[H++],F=r.HEAPU32[H++],N=r.HEAPU32[H++],K=r.HEAPU32[H++],Y=[],q=0;q<K;q++)Y.push(r.HEAPU32[N/4+q]);if(r._OrtFree(N),J=0===Y.length?1:Y.reduce((function(e,n){return e*n})),"string"===(L=(0,s.tensorDataTypeEnumToString)(V))){for(X=[],Q=F/4,Z=0;Z<J;Z++)$=r.HEAPU32[Q++],ee=Z===J-1?void 0:r.HEAPU32[Q]-$,X.push(r.UTF8ToString($,ee));W.push([L,Y,X])}else ne=(0,s.tensorTypeToTypedArrayConstructor)(L),te=new ne(J),new Uint8Array(te.buffer,te.byteOffset,te.byteLength).set(r.HEAPU8.subarray(F,F+te.byteLength)),W.push([L,Y,te])}finally{r.stackRestore(G),"string"===L&&F&&r._free(F),r._OrtReleaseTensor(B)}}return[2,W];case 5:return r.stackRestore(x),[7];case 6:return[3,8];case 7:return S.forEach((function(e){return r._OrtReleaseTensor(e)})),A.forEach((function(e){return r._free(e)})),0!==w&&r._OrtReleaseRunOptions(w),_.forEach((function(e){return r._free(e)})),[7];case 8:return[2]}}))}))},n.endProfiling=function(e){var n=(0,l.getInstance)(),t=p.get(e);if(!t)throw new Error("invalid session id");var r=t[0],a=n._OrtEndProfiling(r);0===a&&(0,f.checkLastError)("Can\'t get an profile file name."),n._OrtFree(a)},n.extractTransferableBuffers=function(e){var n,t,r=[];try{for(var a=i(e),o=a.next();!o.done;o=a.next()){var c=o.value[2];!Array.isArray(c)&&c.buffer&&r.push(c.buffer)}}catch(e){n={error:e}}finally{try{o&&!o.done&&(t=a.return)&&t.call(a)}finally{if(n)throw n.error}}return r}},263:function(e,n,t){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,n,t,r){void 0===r&&(r=t);var a=Object.getOwnPropertyDescriptor(n,t);a&&!("get"in a?!n.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return n[t]}}),Object.defineProperty(e,r,a)}:function(e,n,t,r){void 0===r&&(r=t),e[r]=n[t]}),a=this&&this.__setModuleDefault||(Object.create?function(e,n){Object.defineProperty(e,"default",{enumerable:!0,value:n})}:function(e,n){e.default=n}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var n={};if(null!=e)for(var t in e)"default"!==t&&Object.prototype.hasOwnProperty.call(e,t)&&r(n,e,t);return a(n,e),n},i=this&&this.__awaiter||function(e,n,t,r){return new(t||(t=Promise))((function(a,o){function i(e){try{u(r.next(e))}catch(e){o(e)}}function c(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var n;e.done?a(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(i,c)}u((r=r.apply(e,n||[])).next())}))},c=this&&this.__generator||function(e,n){var t,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(c){return function(u){return function(c){if(t)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(i=0)),i;)try{if(t=1,r&&(a=2&c[0]?r.return:c[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,c[1])).done)return a;switch(r=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,r=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==c[0]&&2!==c[0])){i=0;continue}if(3===c[0]&&(!a||c[1]>a[0]&&c[1]<a[3])){i.label=c[1];break}if(6===c[0]&&i.label<a[1]){i.label=a[1],a=c;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(c);break}a[2]&&i.ops.pop(),i.trys.pop();continue}c=n.call(e,i)}catch(e){c=[6,e],r=0}finally{t=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,u])}}};Object.defineProperty(n,"__esModule",{value:!0}),n.dispose=n.getInstance=n.initializeWebAssembly=void 0;var u,s=o(t(449)),l=t(932),f=t(474),p=!1,d=!1,h=!1;n.initializeWebAssembly=function(e){return i(void 0,void 0,void 0,(function(){var n,r,a,o,i,g,v,m,y,b,w;return c(this,(function(c){switch(c.label){case 0:if(p)return[2,Promise.resolve()];if(d)throw new Error("multiple calls to \'initializeWebAssembly()\' detected.");if(h)throw new Error("previous call to \'initializeWebAssembly()\' failed.");return d=!0,n=e.initTimeout,r=e.numThreads,a=e.simd,o=r>1&&function(){try{return"undefined"!=typeof SharedArrayBuffer&&("undefined"!=typeof MessageChannel&&(new MessageChannel).port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])))}catch(e){return!1}}(),i=a&&function(){try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch(e){return!1}}(),g=e.wasmPaths,v="string"==typeof g?g:void 0,m=function(e,n){return n?e?"ort-wasm-simd-threaded.wasm":"ort-wasm-threaded.wasm":e?"ort-wasm-simd.wasm":"ort-wasm.wasm"}(i,o),y="object"==typeof g?g[m]:void 0,b=!1,w=[],n>0&&w.push(new Promise((function(e){setTimeout((function(){b=!0,e()}),n)}))),w.push(new Promise((function(e,n){var r=o?f:l,a={locateFile:function(e,n){return o&&e.endsWith(".worker.js")&&"undefined"!=typeof Blob?URL.createObjectURL(new Blob([t(154)],{type:"text/javascript"})):e.endsWith(".wasm")?y||(null!=v?v:n)+m:n+e}};if(o)if("undefined"==typeof Blob)a.mainScriptUrlOrBlob=s.join(__dirname,"ort-wasm-threaded.js");else{var i="var ortWasmThreaded=(function(){var _scriptDir;return ".concat(r.toString(),"})();");a.mainScriptUrlOrBlob=new Blob([i],{type:"text/javascript"})}r(a).then((function(n){d=!1,p=!0,u=n,e()}),(function(e){d=!1,h=!0,n(e)}))}))),[4,Promise.race(w)];case 1:if(c.sent(),b)throw new Error("WebAssembly backend initializing failed due to timeout: ".concat(n,"ms"));return[2]}}))}))},n.getInstance=function(){if(p&&u)return u;throw new Error("WebAssembly is not initialized yet.")},n.dispose=function(){var e;!p||d||h||(d=!0,null===(e=u.PThread)||void 0===e||e.terminateAllThreads(),u=void 0,d=!1,p=!1,h=!0)}},497:function(e,n,t){"use strict";var r=this&&this.__read||function(e,n){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var r,a,o=t.call(e),i=[];try{for(;(void 0===n||n-- >0)&&!(r=o.next()).done;)i.push(r.value)}catch(e){a={error:e}}finally{try{r&&!r.done&&(t=o.return)&&t.call(o)}finally{if(a)throw a.error}}return i};Object.defineProperty(n,"__esModule",{value:!0}),n.checkLastError=n.iterateExtraOptions=n.allocWasmString=void 0;var a=t(263);n.allocWasmString=function(e,n){var t=(0,a.getInstance)(),r=t.lengthBytesUTF8(e)+1,o=t._malloc(r);return t.stringToUTF8(e,o,r),n.push(o),o},n.iterateExtraOptions=function(e,t,a,o){if("object"==typeof e&&null!==e){if(a.has(e))throw new Error("Circular reference in options");a.add(e)}Object.entries(e).forEach((function(e){var i=r(e,2),c=i[0],u=i[1],s=t?t+c:c;if("object"==typeof u)(0,n.iterateExtraOptions)(u,s+".",a,o);else if("string"==typeof u||"number"==typeof u)o(s,u.toString());else{if("boolean"!=typeof u)throw new Error("Can\'t handle extra config type: ".concat(typeof u));o(s,u?"1":"0")}}))},n.checkLastError=function(e){var n=(0,a.getInstance)(),t=n.stackSave();try{var r=n.stackAlloc(8);n._OrtGetLastError(r,r+4);var o=n.HEAP32[r/4],i=n.HEAPU32[r/4+1],c=i?n.UTF8ToString(i):"";throw new Error("".concat(e," ERROR_CODE: ").concat(o,", ERROR_MESSAGE: ").concat(c))}finally{n.stackRestore(t)}}},474:function(e,n,t){var _scriptDir,r=(_scriptDir="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0,"undefined"!=typeof __filename&&(_scriptDir=_scriptDir||__filename),function(e={}){function n(){return R.buffer!=U.buffer&&K(),U}function r(){return R.buffer!=U.buffer&&K(),W}function a(){return R.buffer!=U.buffer&&K(),j}function o(){return R.buffer!=U.buffer&&K(),B}function i(){return R.buffer!=U.buffer&&K(),G}function c(){return R.buffer!=U.buffer&&K(),z}function u(){return R.buffer!=U.buffer&&K(),V}var s,l,f;s||(s=void 0!==e?e:{}),s.ready=new Promise(((e,n)=>{l=e,f=n}));var p,d,h,g=Object.assign({},s),v="./this.program",m=(e,n)=>{throw n},y="object"==typeof window,b="function"==typeof importScripts,w="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,_=s.ENVIRONMENT_IS_PTHREAD||!1,S="";function A(e){return s.locateFile?s.locateFile(e,S):S+e}if(w){var C=t(384),x=t(908);let n;S=b?x.dirname(S)+"/":__dirname+"/",p=(e,n)=>(e=e.startsWith("file://")?new URL(e):x.normalize(e),C.readFileSync(e,n?void 0:"utf8")),h=e=>((e=p(e,!0)).buffer||(e=new Uint8Array(e)),e),d=(e,n,t,r=!0)=>{e=e.startsWith("file://")?new URL(e):x.normalize(e),C.readFile(e,r?void 0:"utf8",((e,a)=>{e?t(e):n(r?a.buffer:a)}))},!s.thisProgram&&1<process.argv.length&&(v=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2),m=(e,n)=>{throw process.exitCode=e,n},s.inspect=()=>"[Emscripten Module object]";try{n=t(925)}catch(e){throw console.error(\'The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?\'),e}global.Worker=n.Worker}else(y||b)&&(b?S=self.location.href:"undefined"!=typeof document&&document.currentScript&&(S=document.currentScript.src),_scriptDir&&(S=_scriptDir),S=0!==S.indexOf("blob:")?S.substr(0,S.replace(/[?#].*/,"").lastIndexOf("/")+1):"",w||(p=e=>{var n=new XMLHttpRequest;return n.open("GET",e,!1),n.send(null),n.responseText},b&&(h=e=>{var n=new XMLHttpRequest;return n.open("GET",e,!1),n.responseType="arraybuffer",n.send(null),new Uint8Array(n.response)}),d=(e,n,t)=>{var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=()=>{200==r.status||0==r.status&&r.response?n(r.response):t()},r.onerror=t,r.send(null)}));w&&"undefined"==typeof performance&&(global.performance=t(953).performance);var T=console.log.bind(console),P=console.warn.bind(console);w&&(T=(...e)=>C.writeSync(1,e.join(" ")+"\\n"),P=(...e)=>C.writeSync(2,e.join(" ")+"\\n"));var E,O=s.print||T,I=s.printErr||P;Object.assign(s,g),g=null,s.thisProgram&&(v=s.thisProgram),s.quit&&(m=s.quit),s.wasmBinary&&(E=s.wasmBinary);var k=s.noExitRuntime||!0;"object"!=typeof WebAssembly&&oe("no native wasm support detected");var R,D,M,U,W,j,B,G,z,L,F,H,V,N=!1;function K(){var e=R.buffer;s.HEAP8=U=new Int8Array(e),s.HEAP16=j=new Int16Array(e),s.HEAP32=G=new Int32Array(e),s.HEAPU8=W=new Uint8Array(e),s.HEAPU16=B=new Uint16Array(e),s.HEAPU32=z=new Uint32Array(e),s.HEAPF32=L=new Float32Array(e),s.HEAPF64=V=new Float64Array(e),s.HEAP64=F=new BigInt64Array(e),s.HEAPU64=H=new BigUint64Array(e)}var Y=s.INITIAL_MEMORY||16777216;if(5242880<=Y||oe("INITIAL_MEMORY should be larger than STACK_SIZE, was "+Y+"! (STACK_SIZE=5242880)"),_)R=s.wasmMemory;else if(s.wasmMemory)R=s.wasmMemory;else if(!((R=new WebAssembly.Memory({initial:Y/65536,maximum:65536,shared:!0})).buffer instanceof SharedArrayBuffer))throw I("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),w&&I("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and/or recent version)"),Error("bad memory");K(),Y=R.buffer.byteLength;var q,J=[],X=[],Q=[],Z=0;function $(){return k||0<Z}function ee(){var e=s.preRun.shift();J.unshift(e)}var ne,te=0,re=null,ae=null;function oe(e){throw s.onAbort&&s.onAbort(e),I(e="Aborted("+e+")"),N=!0,M=1,e=new WebAssembly.RuntimeError(e+". Build with -sASSERTIONS for more info."),f(e),e}function ie(e){return e.startsWith("data:application/octet-stream;base64,")}function ce(e){try{if(e==ne&&E)return new Uint8Array(E);if(h)return h(e);throw"both async and sync fetching of the wasm failed"}catch(e){oe(e)}}function ue(e,n,t){return function(e){if(!E&&(y||b)){if("function"==typeof fetch&&!e.startsWith("file://"))return fetch(e,{credentials:"same-origin"}).then((n=>{if(!n.ok)throw"failed to load wasm binary file at \'"+e+"\'";return n.arrayBuffer()})).catch((()=>ce(e)));if(d)return new Promise(((n,t)=>{d(e,(e=>n(new Uint8Array(e))),t)}))}return Promise.resolve().then((()=>ce(e)))}(e).then((e=>WebAssembly.instantiate(e,n))).then((e=>e)).then(t,(e=>{I("failed to asynchronously prepare wasm: "+e),oe(e)}))}function se(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function le(e){e.terminate(),e.onmessage=()=>{}}function fe(e){(e=be.hb[e])||oe(),be.Lb(e)}function pe(e){var n=be.Db();if(!n)return 6;be.kb.push(n),be.hb[e.jb]=n,n.jb=e.jb;var t={cmd:"run",start_routine:e.Mb,arg:e.Bb,pthread_ptr:e.jb};return w&&n.unref(),n.postMessage(t,e.Sb),0}ie(ne="ort-wasm-threaded.wasm")||(ne=A(ne));var de="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function he(e,n,t){var r=(n>>>=0)+t;for(t=n;e[t]&&!(t>=r);)++t;if(16<t-n&&e.buffer&&de)return de.decode(e.buffer instanceof SharedArrayBuffer?e.slice(n,t):e.subarray(n,t));for(r="";n<t;){var a=e[n++];if(128&a){var o=63&e[n++];if(192==(224&a))r+=String.fromCharCode((31&a)<<6|o);else{var i=63&e[n++];65536>(a=224==(240&a)?(15&a)<<12|o<<6|i:(7&a)<<18|o<<12|i<<6|63&e[n++])?r+=String.fromCharCode(a):(a-=65536,r+=String.fromCharCode(55296|a>>10,56320|1023&a))}}else r+=String.fromCharCode(a)}return r}function ge(e,n){return(e>>>=0)?he(r(),e,n):""}function ve(e){if(_)return Mn(1,1,e);M=e,$()||(be.Nb(),s.onExit&&s.onExit(e),N=!0),m(e,new se(e))}function me(e){if(M=e,_)throw _e(e),"unwind";ve(e)}function ye(e){e instanceof se||"unwind"==e||m(1,e)}var be={nb:[],kb:[],zb:[],hb:{},tb:function(){_&&be.Fb()},Vb:function(){},Fb:function(){be.receiveObjectTransfer=be.Kb,be.threadInitTLS=be.yb,be.setExitStatus=be.xb,k=!1},xb:function(e){M=e},Xb:["$terminateWorker"],Nb:function(){for(var e of be.kb)le(e);for(e of be.nb)le(e);be.nb=[],be.kb=[],be.hb=[]},Lb:function(e){var n=e.jb;delete be.hb[n],be.nb.push(e),be.kb.splice(be.kb.indexOf(e),1),e.jb=0,ot(n)},Kb:function(){},yb:function(){be.zb.forEach((e=>e()))},Jb:e=>new Promise((n=>{e.onmessage=t=>{var r=(t=t.data).cmd;if(e.jb&&(be.Cb=e.jb),t.targetThread&&t.targetThread!=$n()){var a=be.hb[t.Wb];a?a.postMessage(t,t.transferList):I(\'Internal error! Worker sent a message "\'+r+\'" to target pthread \'+t.targetThread+", but that thread no longer exists!")}else"checkMailbox"===r?mn():"spawnThread"===r?pe(t):"cleanupThread"===r?fe(t.thread):"killThread"===r?(t=t.thread,r=be.hb[t],delete be.hb[t],le(r),ot(t),be.kb.splice(be.kb.indexOf(r),1),r.jb=0):"cancelThread"===r?be.hb[t.thread].postMessage({cmd:"cancel"}):"loaded"===r?(e.loaded=!0,n(e)):"print"===r?O("Thread "+t.threadId+": "+t.text):"printErr"===r?I("Thread "+t.threadId+": "+t.text):"alert"===r?alert("Thread "+t.threadId+": "+t.text):"setimmediate"===t.target?e.postMessage(t):"callHandler"===r?s[t.handler](...t.args):r&&I("worker sent an unknown command "+r);be.Cb=void 0},e.onerror=e=>{throw I("worker sent an error! "+e.filename+":"+e.lineno+": "+e.message),e},w&&(e.on("message",(function(n){e.onmessage({data:n})})),e.on("error",(function(n){e.onerror(n)})));var t,r=[];for(t of["onExit","onAbort","print","printErr"])s.hasOwnProperty(t)&&r.push(t);e.postMessage({cmd:"load",handlers:r,urlOrBlob:s.mainScriptUrlOrBlob||_scriptDir,wasmMemory:R,wasmModule:D})})),Ib:function(e){e()},Ab:function(){var e=A("ort-wasm-threaded.worker.js");e=new Worker(e),be.nb.push(e)},Db:function(){return 0==be.nb.length&&(be.Ab(),be.Jb(be.nb[0])),be.nb.pop()}};function we(e){for(;0<e.length;)e.shift()(s)}function _e(e){if(_)return Mn(2,0,e);me(e)}s.PThread=be,s.establishStackSpace=function(){var e=$n(),n=i()[e+52>>2>>>0];st(n,n-(e=i()[e+56>>2>>>0])),ft(n)};var Se=[];function Ae(e){this.gb=e-24,this.ub=function(e){c()[this.gb+4>>2>>>0]=e},this.qb=function(e){c()[this.gb+8>>2>>>0]=e},this.tb=function(e,n){this.pb(),this.ub(e),this.qb(n)},this.pb=function(){c()[this.gb+16>>2>>>0]=0}}function Ce(e,n,t,r){return _?Mn(3,1,e,n,t,r):xe(e,n,t,r)}function xe(e,n,t,r){if("undefined"==typeof SharedArrayBuffer)return I("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var a=[];return _&&0===a.length?Ce(e,n,t,r):(e={Mb:t,jb:e,Bb:r,Sb:a},_?(e.Ub="spawnThread",postMessage(e,a),0):pe(e))}function Te(e,n,t){return _?Mn(4,1,e,n,t):0}function Pe(e,n){if(_)return Mn(5,1,e,n)}function Ee(e){for(var n=0,t=0;t<e.length;++t){var r=e.charCodeAt(t);127>=r?n++:2047>=r?n+=2:55296<=r&&57343>=r?(n+=4,++t):n+=3}return n}function Oe(e,n,t,r){if(!(0<r))return 0;var a=t>>>=0;r=t+r-1;for(var o=0;o<e.length;++o){var i=e.charCodeAt(o);if(55296<=i&&57343>=i&&(i=65536+((1023&i)<<10)|1023&e.charCodeAt(++o)),127>=i){if(t>=r)break;n[t++>>>0]=i}else{if(2047>=i){if(t+1>=r)break;n[t++>>>0]=192|i>>6}else{if(65535>=i){if(t+2>=r)break;n[t++>>>0]=224|i>>12}else{if(t+3>=r)break;n[t++>>>0]=240|i>>18,n[t++>>>0]=128|i>>12&63}n[t++>>>0]=128|i>>6&63}n[t++>>>0]=128|63&i}}return n[t>>>0]=0,t-a}function Ie(e,n,t){return Oe(e,r(),n,t)}function ke(e,n){if(_)return Mn(6,1,e,n)}function Re(e,n,t){if(_)return Mn(7,1,e,n,t)}function De(e,n,t){return _?Mn(8,1,e,n,t):0}function Me(e,n){if(_)return Mn(9,1,e,n)}function Ue(e,n,t){if(_)return Mn(10,1,e,n,t)}function We(e,n,t,r){if(_)return Mn(11,1,e,n,t,r)}function je(e,n,t,r){if(_)return Mn(12,1,e,n,t,r)}function Be(e,n,t,r){if(_)return Mn(13,1,e,n,t,r)}function Ge(e){if(_)return Mn(14,1,e)}function ze(e,n){if(_)return Mn(15,1,e,n)}function Le(e,n,t){if(_)return Mn(16,1,e,n,t)}function Fe(e){if(null===e)return"null";var n=typeof e;return"object"===n||"array"===n||"function"===n?e.toString():""+e}s.invokeEntryPoint=function(e,n){var t=Se[e];t||(e>=Se.length&&(Se.length=e+1),Se[e]=t=q.get(e)),e=t(n),$()?be.xb(e):ct(e)};var He=void 0;function Ve(e){for(var n="";r()[e>>>0];)n+=He[r()[e++>>>0]];return n}var Ne={},Ke={},Ye={};function qe(e){if(void 0===e)return"_unknown";var n=(e=e.replace(/[^a-zA-Z0-9_]/g,"$")).charCodeAt(0);return 48<=n&&57>=n?"_"+e:e}function Je(e,n){return{[e=qe(e)]:function(){return n.apply(this,arguments)}}[e]}function Xe(e){var n=Error,t=Je(e,(function(n){this.name=e,this.message=n,void 0!==(n=Error(n).stack)&&(this.stack=this.toString()+"\\n"+n.replace(/^Error(:[^\\n]*)?\\n/,""))}));return t.prototype=Object.create(n.prototype),t.prototype.constructor=t,t.prototype.toString=function(){return void 0===this.message?this.name:this.name+": "+this.message},t}var Qe=void 0;function Ze(e){throw new Qe(e)}function $e(e,n,t={}){if(!("argPackAdvance"in n))throw new TypeError("registerType registeredInstance requires argPackAdvance");var r=n.name;if(e||Ze(\'type "\'+r+\'" must have a positive integer typeid pointer\'),Ke.hasOwnProperty(e)){if(t.Eb)return;Ze("Cannot register type \'"+r+"\' twice")}Ke[e]=n,delete Ye[e],Ne.hasOwnProperty(e)&&(n=Ne[e],delete Ne[e],n.forEach((e=>e())))}function en(e,t,u){switch(t){case 0:return u?function(e){return n()[e>>>0]}:function(e){return r()[e>>>0]};case 1:return u?function(e){return a()[e>>>1]}:function(e){return o()[e>>>1]};case 2:return u?function(e){return i()[e>>>2]}:function(e){return c()[e>>>2]};case 3:return u?function(e){return F[e>>3]}:function(e){return H[e>>3]};default:throw new TypeError("Unknown integer type: "+e)}}function nn(e){switch(e){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+e)}}var tn=new function(){this.gb=[void 0],this.pb=[],this.get=function(e){return this.gb[e]},this.ub=function(e){let n=this.pb.pop()||this.gb.length;return this.gb[n]=e,n},this.Hb=function(e){this.gb[e]=void 0,this.pb.push(e)}};function rn(e){e>=tn.qb&&0==--tn.get(e).wb&&tn.Hb(e)}var an=e=>(e||Ze("Cannot use deleted val. handle = "+e),tn.get(e).value),on=e=>{switch(e){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:return tn.ub({wb:1,value:e})}};function cn(e){return this.fromWireType(i()[e>>2>>>0])}function un(e,n){switch(n){case 2:return function(e){var n=this.fromWireType;return R.buffer!=U.buffer&&K(),n.call(this,L[e>>>2])};case 3:return function(e){return this.fromWireType(u()[e>>>3])};default:throw new TypeError("Unknown float type: "+e)}}var sn="undefined"!=typeof TextDecoder?new TextDecoder("utf-16le"):void 0;function ln(e,n){for(var t=e>>1,i=t+n/2;!(t>=i)&&o()[t>>>0];)++t;if(32<(t<<=1)-e&&sn)return sn.decode(r().slice(e,t));for(t="",i=0;!(i>=n/2);++i){var c=a()[e+2*i>>1>>>0];if(0==c)break;t+=String.fromCharCode(c)}return t}function fn(e,n,t){if(void 0===t&&(t=2147483647),2>t)return 0;var r=n;t=(t-=2)<2*e.length?t/2:e.length;for(var o=0;o<t;++o){var i=e.charCodeAt(o);a()[n>>1>>>0]=i,n+=2}return a()[n>>1>>>0]=0,n-r}function pn(e){return 2*e.length}function dn(e,n){for(var t=0,r="";!(t>=n/4);){var a=i()[e+4*t>>2>>>0];if(0==a)break;++t,65536<=a?(a-=65536,r+=String.fromCharCode(55296|a>>10,56320|1023&a)):r+=String.fromCharCode(a)}return r}function hn(e,n,t){if(void 0===t&&(t=2147483647),4>t)return 0;var r=n>>>=0;t=r+t-4;for(var a=0;a<e.length;++a){var o=e.charCodeAt(a);if(55296<=o&&57343>=o&&(o=65536+((1023&o)<<10)|1023&e.charCodeAt(++a)),i()[n>>2>>>0]=o,(n+=4)+4>t)break}return i()[n>>2>>>0]=0,n-r}function gn(e){for(var n=0,t=0;t<e.length;++t){var r=e.charCodeAt(t);55296<=r&&57343>=r&&++t,n+=4}return n}function vn(e){"function"==typeof Atomics.Tb&&(Atomics.Tb(i(),e>>2,e).value.then(mn),e+=128,Atomics.store(i(),e>>2,1))}function mn(){var e=$n();e&&(vn(e),function(e){if(!N)try{if(ut(),!$())try{_?ct(M):me(M)}catch(e){ye(e)}}catch(e){ye(e)}}())}function yn(e,n){var t=Ke[e];if(void 0===t){var r=Ve(e=tt(e));nt(e),Ze(n+" has unknown type "+r)}return t}s.__emscripten_thread_mailbox_await=vn,s.checkMailbox=mn;var bn={};function wn(e){var n=bn[e];return void 0===n?Ve(e):n}var _n=[];function Sn(){return"object"==typeof globalThis?globalThis:Function("return this")()}var An=[],Cn={};function xn(e){return c()[e>>>2]+4294967296*i()[e+4>>>2]}function Tn(e){return 0==e%4&&(0!=e%100||0==e%400)}var Pn,En=[0,31,60,91,121,152,182,213,244,274,305,335],On=[0,31,59,90,120,151,181,212,243,273,304,334];function In(e){return(Tn(e.getFullYear())?En:On)[e.getMonth()]+e.getDate()-1}function kn(e,n,t,r,a,o,i){return _?Mn(17,1,e,n,t,r,a,o,i):-52}function Rn(e,n,t,r,a,o){if(_)return Mn(18,1,e,n,t,r,a,o)}function Dn(e){var n=Ee(e)+1,t=et(n);return t&&Ie(e,t,n),t}function Mn(e,n){var t=arguments.length-2,r=arguments;return function(e){var n=lt();return e=e(),ft(n),e}((()=>{for(var a=2*t,o=pt(8*a),i=o>>3,c=0;c<t;c++){var s=r[2+c];"bigint"==typeof s?(F[i+2*c]=1n,F[i+2*c+1]=s):(F[i+2*c]=0n,u()[i+2*c+1>>>0]=s)}return at(e,a,o,n)}))}Pn=w?()=>{var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}:()=>performance.timeOrigin+performance.now();var Un,Wn=[],jn={};function Bn(){if(!Un){var e,n={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:v||"./this.program"};for(e in jn)void 0===jn[e]?delete n[e]:n[e]=jn[e];var t=[];for(e in n)t.push(e+"="+n[e]);Un=t}return Un}function Gn(e,t){if(_)return Mn(19,1,e,t);var r=0;return Bn().forEach((function(a,o){var i=t+r;for(o=c()[e+4*o>>2>>>0]=i,i=0;i<a.length;++i)n()[o++>>0>>>0]=a.charCodeAt(i);n()[o>>0>>>0]=0,r+=a.length+1})),0}function zn(e,n){if(_)return Mn(20,1,e,n);var t=Bn();c()[e>>2>>>0]=t.length;var r=0;return t.forEach((function(e){r+=e.length+1})),c()[n>>2>>>0]=r,0}function Ln(e){return _?Mn(21,1,e):52}function Fn(e,n,t,r){return _?Mn(22,1,e,n,t,r):52}function Hn(e,n,t,r){return _?Mn(23,1,e,n,t,r):70}var Vn=[null,[],[]];function Nn(e,n,t,a){if(_)return Mn(24,1,e,n,t,a);for(var o=0,i=0;i<t;i++){var u=c()[n>>2>>>0],s=c()[n+4>>2>>>0];n+=8;for(var l=0;l<s;l++){var f=r()[u+l>>>0],p=Vn[e];0===f||10===f?((1===e?O:I)(he(p,0)),p.length=0):p.push(f)}o+=s}return c()[a>>2>>>0]=o,0}var Kn=[31,29,31,30,31,30,31,31,30,31,30,31],Yn=[31,28,31,30,31,30,31,31,30,31,30,31];function qn(e,t,r,a){function o(e,n,t){for(e="number"==typeof e?e.toString():e||"";e.length<n;)e=t[0]+e;return e}function c(e,n){return o(e,n,"0")}function u(e,n){function t(e){return 0>e?-1:0<e?1:0}var r;return 0===(r=t(e.getFullYear()-n.getFullYear()))&&0===(r=t(e.getMonth()-n.getMonth()))&&(r=t(e.getDate()-n.getDate())),r}function s(e){switch(e.getDay()){case 0:return new Date(e.getFullYear()-1,11,29);case 1:return e;case 2:return new Date(e.getFullYear(),0,3);case 3:return new Date(e.getFullYear(),0,2);case 4:return new Date(e.getFullYear(),0,1);case 5:return new Date(e.getFullYear()-1,11,31);case 6:return new Date(e.getFullYear()-1,11,30)}}function l(e){var n=e.lb;for(e=new Date(new Date(e.mb+1900,0,1).getTime());0<n;){var t=e.getMonth(),r=(Tn(e.getFullYear())?Kn:Yn)[t];if(!(n>r-e.getDate())){e.setDate(e.getDate()+n);break}n-=r-e.getDate()+1,e.setDate(1),11>t?e.setMonth(t+1):(e.setMonth(0),e.setFullYear(e.getFullYear()+1))}return t=new Date(e.getFullYear()+1,0,4),n=s(new Date(e.getFullYear(),0,4)),t=s(t),0>=u(n,e)?0>=u(t,e)?e.getFullYear()+1:e.getFullYear():e.getFullYear()-1}var f=i()[a+40>>2>>>0];for(var p in a={Qb:i()[a>>2>>>0],Pb:i()[a+4>>2>>>0],rb:i()[a+8>>2>>>0],vb:i()[a+12>>2>>>0],sb:i()[a+16>>2>>>0],mb:i()[a+20>>2>>>0],ib:i()[a+24>>2>>>0],lb:i()[a+28>>2>>>0],Yb:i()[a+32>>2>>>0],Ob:i()[a+36>>2>>>0],Rb:f?ge(f):""},r=ge(r),f={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})r=r.replace(new RegExp(p,"g"),f[p]);var d="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),h="January February March April May June July August September October November December".split(" ");for(p in f={"%a":function(e){return d[e.ib].substring(0,3)},"%A":function(e){return d[e.ib]},"%b":function(e){return h[e.sb].substring(0,3)},"%B":function(e){return h[e.sb]},"%C":function(e){return c((e.mb+1900)/100|0,2)},"%d":function(e){return c(e.vb,2)},"%e":function(e){return o(e.vb,2," ")},"%g":function(e){return l(e).toString().substring(2)},"%G":function(e){return l(e)},"%H":function(e){return c(e.rb,2)},"%I":function(e){return 0==(e=e.rb)?e=12:12<e&&(e-=12),c(e,2)},"%j":function(e){for(var n=0,t=0;t<=e.sb-1;n+=(Tn(e.mb+1900)?Kn:Yn)[t++]);return c(e.vb+n,3)},"%m":function(e){return c(e.sb+1,2)},"%M":function(e){return c(e.Pb,2)},"%n":function(){return"\\n"},"%p":function(e){return 0<=e.rb&&12>e.rb?"AM":"PM"},"%S":function(e){return c(e.Qb,2)},"%t":function(){return"\\t"},"%u":function(e){return e.ib||7},"%U":function(e){return c(Math.floor((e.lb+7-e.ib)/7),2)},"%V":function(e){var n=Math.floor((e.lb+7-(e.ib+6)%7)/7);if(2>=(e.ib+371-e.lb-2)%7&&n++,n)53==n&&(4==(t=(e.ib+371-e.lb)%7)||3==t&&Tn(e.mb)||(n=1));else{n=52;var t=(e.ib+7-e.lb-1)%7;(4==t||5==t&&Tn(e.mb%400-1))&&n++}return c(n,2)},"%w":function(e){return e.ib},"%W":function(e){return c(Math.floor((e.lb+7-(e.ib+6)%7)/7),2)},"%y":function(e){return(e.mb+1900).toString().substring(2)},"%Y":function(e){return e.mb+1900},"%z":function(e){var n=0<=(e=e.Ob);return e=Math.abs(e)/60,(n?"+":"-")+String("0000"+(e/60*100+e%60)).slice(-4)},"%Z":function(e){return e.Rb},"%%":function(){return"%"}},r=r.replace(/%%/g,"\\0\\0"),f)r.includes(p)&&(r=r.replace(new RegExp(p,"g"),f[p](a)));return p=function(e){var n=Array(Ee(e)+1);return Oe(e,n,0,n.length),n}(r=r.replace(/\\0\\0/g,"%")),p.length>t?0:(function(e,t){n().set(e,t>>>0)}(p,e),p.length-1)}be.tb();for(var Jn=Array(256),Xn=0;256>Xn;++Xn)Jn[Xn]=String.fromCharCode(Xn);He=Jn,Qe=s.BindingError=Xe("BindingError"),s.InternalError=Xe("InternalError"),tn.gb.push({value:void 0},{value:null},{value:!0},{value:!1}),tn.qb=tn.gb.length,s.count_emval_handles=function(){for(var e=0,n=tn.qb;n<tn.gb.length;++n)void 0!==tn.gb[n]&&++e;return e};var Qn=[null,ve,_e,Ce,Te,Pe,ke,Re,De,Me,Ue,We,je,Be,Ge,ze,Le,kn,Rn,Gn,zn,Ln,Fn,Hn,Nn],Zn={b:function(e,n,t){throw new Ae(e).tb(n,t),e},ra:function(){oe("To use dlopen, you need enable dynamic linking, see https://emscripten.org/docs/compiling/Dynamic-Linking.html")},ga:function(e){rt(e,!b,1,!y),be.yb()},D:function(e){_?postMessage({cmd:"cleanupThread",thread:e}):fe(e)},W:xe,y:Te,na:Pe,S:ke,U:Re,L:De,ka:Me,ba:Ue,ja:We,F:je,T:Be,Q:Ge,la:ze,R:Le,I:function(e,n,t,r,a){n=Ve(n),t=nn(t);var o=-1!=n.indexOf("u");o&&(a=(1n<<64n)-1n),$e(e,{name:n,fromWireType:function(e){return e},toWireType:function(e,t){if("bigint"!=typeof t&&"number"!=typeof t)throw new TypeError(\'Cannot convert "\'+Fe(t)+\'" to \'+this.name);if(t<r||t>a)throw new TypeError(\'Passing a number "\'+Fe(t)+\'" from JS side to C/C++ side to an argument of type "\'+n+\'", which is outside the valid range [\'+r+", "+a+"]!");return t},argPackAdvance:8,readValueFromPointer:en(n,t,!o),ob:null})},ta:function(e,t,r,o,c){var u=nn(r);$e(e,{name:t=Ve(t),fromWireType:function(e){return!!e},toWireType:function(e,n){return n?o:c},argPackAdvance:8,readValueFromPointer:function(e){if(1===r)var o=n();else if(2===r)o=a();else{if(4!==r)throw new TypeError("Unknown boolean type size: "+t);o=i()}return this.fromWireType(o[e>>>u])},ob:null})},sa:function(e,n){$e(e,{name:n=Ve(n),fromWireType:function(e){var n=an(e);return rn(e),n},toWireType:function(e,n){return on(n)},argPackAdvance:8,readValueFromPointer:cn,ob:null})},H:function(e,n,t){t=nn(t),$e(e,{name:n=Ve(n),fromWireType:function(e){return e},toWireType:function(e,n){return n},argPackAdvance:8,readValueFromPointer:un(n,t),ob:null})},u:function(e,n,t,r,a){n=Ve(n),-1===a&&(a=4294967295),a=nn(t);var o=e=>e;if(0===r){var i=32-8*t;o=e=>e<<i>>>i}t=n.includes("unsigned")?function(e,n){return n>>>0}:function(e,n){return n},$e(e,{name:n,fromWireType:o,toWireType:t,argPackAdvance:8,readValueFromPointer:en(n,a,0!==r),ob:null})},m:function(e,n,t){function r(e){e>>=2;var n=c();return new a(n.buffer,n[e+1>>>0],n[e>>>0])}var a=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,BigInt64Array,BigUint64Array][n];$e(e,{name:t=Ve(t),fromWireType:r,argPackAdvance:8,readValueFromPointer:r},{Eb:!0})},J:function(e,n){var t="std::string"===(n=Ve(n));$e(e,{name:n,fromWireType:function(e){var n=c()[e>>2>>>0],a=e+4;if(t)for(var o=a,i=0;i<=n;++i){var u=a+i;if(i==n||0==r()[u>>>0]){if(o=ge(o,u-o),void 0===s)var s=o;else s+=String.fromCharCode(0),s+=o;o=u+1}}else{for(s=Array(n),i=0;i<n;++i)s[i]=String.fromCharCode(r()[a+i>>>0]);s=s.join("")}return nt(e),s},toWireType:function(e,n){n instanceof ArrayBuffer&&(n=new Uint8Array(n));var a="string"==typeof n;a||n instanceof Uint8Array||n instanceof Uint8ClampedArray||n instanceof Int8Array||Ze("Cannot pass non-string to std::string");var o=t&&a?Ee(n):n.length,i=et(4+o+1),u=i+4>>>0;if(c()[i>>2>>>0]=o,t&&a)Ie(n,u,o+1);else if(a)for(a=0;a<o;++a){var s=n.charCodeAt(a);255<s&&(nt(u),Ze("String has UTF-16 code units that do not fit in 8 bits")),r()[u+a>>>0]=s}else for(a=0;a<o;++a)r()[u+a>>>0]=n[a];return null!==e&&e.push(nt,i),i},argPackAdvance:8,readValueFromPointer:cn,ob:function(e){nt(e)}})},A:function(e,n,t){if(t=Ve(t),2===n)var r=ln,a=fn,i=pn,u=()=>o(),s=1;else 4===n&&(r=dn,a=hn,i=gn,u=()=>c(),s=2);$e(e,{name:t,fromWireType:function(e){for(var t,a=c()[e>>>2],o=u(),i=e+4,l=0;l<=a;++l){var f=e+4+l*n;l!=a&&0!=o[f>>>s]||(i=r(i,f-i),void 0===t?t=i:(t+=String.fromCharCode(0),t+=i),i=f+n)}return nt(e),t},toWireType:function(e,r){"string"!=typeof r&&Ze("Cannot pass non-string to C++ string type "+t);var o=i(r),u=et(4+o+n);return u>>>=0,c()[u>>>2]=o>>s,a(r,u+4,o+n),null!==e&&e.push(nt,u),u},argPackAdvance:8,readValueFromPointer:cn,ob:function(e){nt(e)}})},ua:function(e,n){$e(e,{Gb:!0,name:n=Ve(n),argPackAdvance:0,fromWireType:function(){},toWireType:function(){}})},X:function(){return 131072},qa:function(){return!0},O:function(e,n){e==n?setTimeout((()=>mn())):_?postMessage({targetThread:e,cmd:"checkMailbox"}):(e=be.hb[e])&&e.postMessage({cmd:"checkMailbox"})},ea:function(){return-1},fa:vn,pa:function(e){w&&be.hb[e].ref()},r:function(e,n,t){e=an(e),n=yn(n,"emval::as");var r=[],a=on(r);return c()[t>>2>>>0]=a,n.toWireType(r,e)},i:function(e,n,t,r,a){e=_n[e],n=an(n),t=wn(t);var o=[];return c()[r>>2>>>0]=on(o),e(n,t,o,a)},s:function(e,n,t,r){(e=_n[e])(n=an(n),t=wn(t),null,r)},c:rn,K:function(e,n){return(e=an(e))==an(n)},o:function(e){return 0===e?on(Sn()):(e=wn(e),on(Sn()[e]))},g:function(e,n){var t=function(e,n){for(var t=Array(e),r=0;r<e;++r)t[r]=yn(c()[n+4*r>>2>>>0],"parameter "+r);return t}(e,n),r=t[0];n=r.name+"_$"+t.slice(1).map((function(e){return e.name})).join("_")+"$";var a=An[n];if(void 0!==a)return a;a=["retType"];for(var o=[r],i="",u=0;u<e-1;++u)i+=(0!==u?", ":"")+"arg"+u,a.push("argType"+u),o.push(t[1+u]);var s="return function "+qe("methodCaller_"+n)+"(handle, name, destructors, args) {\\n",l=0;for(u=0;u<e-1;++u)s+="    var arg"+u+" = argType"+u+".readValueFromPointer(args"+(l?"+"+l:"")+");\\n",l+=t[u+1].argPackAdvance;for(s+="    var rv = handle[name]("+i+");\\n",u=0;u<e-1;++u)t[u+1].deleteObject&&(s+="    argType"+u+".deleteObject(arg"+u+");\\n");return r.Gb||(s+="    return retType.toWireType(destructors, rv);\\n"),a.push(s+"};\\n"),e=function(e){var n=Function;if(!(n instanceof Function))throw new TypeError("new_ called with constructor type "+typeof n+" which is not a function");var t=Je(n.name||"unknownFunctionName",(function(){}));return t.prototype=n.prototype,t=new t,(e=n.apply(t,e))instanceof Object?e:t}(a).apply(null,o),a=function(e){var n=_n.length;return _n.push(e),n}(e),An[n]=a},t:function(e,n){return e=an(e),n=an(n),on(e[n])},d:function(e){4<e&&(tn.get(e).wb+=1)},x:function(e,n,t,r){e=an(e);var a=Cn[n];return a||(a=function(e){for(var n="",t=0;t<e;++t)n+=(0!==t?", ":"")+"arg"+t;var r="return function emval_allocator_"+e+"(constructor, argTypes, args) {\\n  var HEAPU32 = getMemory();\\n";for(t=0;t<e;++t)r+="var argType"+t+" = requireRegisteredType(HEAPU32[((argTypes)>>2)], \'parameter "+t+"\');\\nvar arg"+t+" = argType"+t+".readValueFromPointer(args);\\nargs += argType"+t+"[\'argPackAdvance\'];\\nargTypes += 4;\\n";return new Function("requireRegisteredType","Module","valueToHandle","getMemory",r+"var obj = new constructor("+n+");\\nreturn valueToHandle(obj);\\n}\\n")(yn,s,on,(()=>c()))}(n),Cn[n]=a),a(e,t,r)},v:function(){return on([])},l:function(e){e=an(e);for(var n=Array(e.length),t=0;t<e.length;t++)n[t]=e[t];return on(n)},e:function(e){return on(wn(e))},k:function(){return on({})},h:function(e){for(var n=an(e);n.length;){var t=n.pop();n.pop()(t)}rn(e)},j:function(e,n,t){e=an(e),n=an(n),t=an(t),e[n]=t},f:function(e,n){return e=(e=yn(e,"_emval_take_value")).readValueFromPointer(n),on(e)},_:function(e,n){e=new Date(1e3*xn(e)),i()[n>>2>>>0]=e.getUTCSeconds(),i()[n+4>>2>>>0]=e.getUTCMinutes(),i()[n+8>>2>>>0]=e.getUTCHours(),i()[n+12>>2>>>0]=e.getUTCDate(),i()[n+16>>2>>>0]=e.getUTCMonth(),i()[n+20>>2>>>0]=e.getUTCFullYear()-1900,i()[n+24>>2>>>0]=e.getUTCDay(),e=(e.getTime()-Date.UTC(e.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,i()[n+28>>2>>>0]=e},$:function(e,n){e=new Date(1e3*xn(e)),i()[n>>2>>>0]=e.getSeconds(),i()[n+4>>2>>>0]=e.getMinutes(),i()[n+8>>2>>>0]=e.getHours(),i()[n+12>>2>>>0]=e.getDate(),i()[n+16>>2>>>0]=e.getMonth(),i()[n+20>>2>>>0]=e.getFullYear()-1900,i()[n+24>>2>>>0]=e.getDay();var t=0|In(e);i()[n+28>>2>>>0]=t,i()[n+36>>2>>>0]=-60*e.getTimezoneOffset(),t=new Date(e.getFullYear(),6,1).getTimezoneOffset();var r=new Date(e.getFullYear(),0,1).getTimezoneOffset();e=0|(t!=r&&e.getTimezoneOffset()==Math.min(r,t)),i()[n+32>>2>>>0]=e},aa:function(e){var n=new Date(i()[e+20>>2>>>0]+1900,i()[e+16>>2>>>0],i()[e+12>>2>>>0],i()[e+8>>2>>>0],i()[e+4>>2>>>0],i()[e>>2>>>0],0),t=i()[e+32>>2>>>0],r=n.getTimezoneOffset(),a=new Date(n.getFullYear(),6,1).getTimezoneOffset(),o=new Date(n.getFullYear(),0,1).getTimezoneOffset(),c=Math.min(o,a);return 0>t?i()[e+32>>2>>>0]=Number(a!=o&&c==r):0<t!=(c==r)&&(a=Math.max(o,a),n.setTime(n.getTime()+6e4*((0<t?c:a)-r))),i()[e+24>>2>>>0]=n.getDay(),t=0|In(n),i()[e+28>>2>>>0]=t,i()[e>>2>>>0]=n.getSeconds(),i()[e+4>>2>>>0]=n.getMinutes(),i()[e+8>>2>>>0]=n.getHours(),i()[e+12>>2>>>0]=n.getDate(),i()[e+16>>2>>>0]=n.getMonth(),i()[e+20>>2>>>0]=n.getYear(),n.getTime()/1e3|0},Y:kn,Z:Rn,N:function(e,n,t){function r(e){return(e=e.toTimeString().match(/\\(([A-Za-z ]+)\\)$/))?e[1]:"GMT"}var a=(new Date).getFullYear(),o=new Date(a,0,1),u=new Date(a,6,1);a=o.getTimezoneOffset();var s=u.getTimezoneOffset(),l=Math.max(a,s);c()[e>>2>>>0]=60*l,i()[n>>2>>>0]=Number(a!=s),e=r(o),n=r(u),e=Dn(e),n=Dn(n),s<a?(c()[t>>2>>>0]=e,c()[t+4>>2>>>0]=n):(c()[t>>2>>>0]=n,c()[t+4>>2>>>0]=e)},n:function(){oe("")},va:function(){oe("To use dlopen, you need enable dynamic linking, see https://emscripten.org/docs/compiling/Dynamic-Linking.html")},E:function(){},G:function(){return Date.now()},oa:function(){throw Z+=1,"unwind"},P:function(){return 4294901760},q:Pn,w:function(){return w?t(993).cpus().length:navigator.hardwareConcurrency},da:function(e,n,t){n/=2,Wn.length=n,t>>=3;for(var r=0;r<n;r++)Wn[r]=F[t+2*r]?F[t+2*r+1]:u()[t+2*r+1>>>0];return Qn[e].apply(null,Wn)},M:function(e){var n=r().length;if((e>>>=0)<=n||4294901760<e)return!1;for(var t=1;4>=t;t*=2){var a=n*(1+.2/t);a=Math.min(a,e+100663296);var o=Math,i=o.min;a=Math.max(e,a),a+=(65536-a%65536)%65536;e:{var c=R.buffer;try{R.grow(i.call(o,4294901760,a)-c.byteLength+65535>>>16),K();var u=1;break e}catch(e){}u=void 0}if(u)return!0}return!1},ha:Gn,ia:zn,V:me,z:Ln,C:Fn,ca:Hn,B:Nn,a:R||s.wasmMemory,ma:qn,p:function(e,n,t,r){return qn(e,n,t,r)}};!function(){function e(e,n){return e=e.exports,s.asm=e,be.zb.push(s.asm.Ua),q=s.asm.Xa,X.unshift(s.asm.wa),D=n,be.Ib((()=>{if(te--,s.monitorRunDependencies&&s.monitorRunDependencies(te),0==te&&(null!==re&&(clearInterval(re),re=null),ae)){var e=ae;ae=null,e()}})),e}var n={a:Zn};if(te++,s.monitorRunDependencies&&s.monitorRunDependencies(te),s.instantiateWasm)try{return s.instantiateWasm(n,e)}catch(e){I("Module.instantiateWasm callback failed with error: "+e),f(e)}(function(e,n){var t=ne;return E||"function"!=typeof WebAssembly.instantiateStreaming||ie(t)||t.startsWith("file://")||w||"function"!=typeof fetch?ue(t,e,n):fetch(t,{credentials:"same-origin"}).then((r=>WebAssembly.instantiateStreaming(r,e).then(n,(function(r){return I("wasm streaming compile failed: "+r),I("falling back to ArrayBuffer instantiation"),ue(t,e,n)}))))})(n,(function(n){e(n.instance,n.module)})).catch(f)}(),s._OrtInit=function(){return(s._OrtInit=s.asm.xa).apply(null,arguments)},s._OrtGetLastError=function(){return(s._OrtGetLastError=s.asm.ya).apply(null,arguments)},s._OrtCreateSessionOptions=function(){return(s._OrtCreateSessionOptions=s.asm.za).apply(null,arguments)},s._OrtAppendExecutionProvider=function(){return(s._OrtAppendExecutionProvider=s.asm.Aa).apply(null,arguments)},s._OrtAddSessionConfigEntry=function(){return(s._OrtAddSessionConfigEntry=s.asm.Ba).apply(null,arguments)},s._OrtReleaseSessionOptions=function(){return(s._OrtReleaseSessionOptions=s.asm.Ca).apply(null,arguments)},s._OrtCreateSession=function(){return(s._OrtCreateSession=s.asm.Da).apply(null,arguments)},s._OrtReleaseSession=function(){return(s._OrtReleaseSession=s.asm.Ea).apply(null,arguments)},s._OrtGetInputOutputCount=function(){return(s._OrtGetInputOutputCount=s.asm.Fa).apply(null,arguments)},s._OrtGetInputName=function(){return(s._OrtGetInputName=s.asm.Ga).apply(null,arguments)},s._OrtGetOutputName=function(){return(s._OrtGetOutputName=s.asm.Ha).apply(null,arguments)},s._OrtFree=function(){return(s._OrtFree=s.asm.Ia).apply(null,arguments)},s._OrtCreateTensor=function(){return(s._OrtCreateTensor=s.asm.Ja).apply(null,arguments)},s._OrtGetTensorData=function(){return(s._OrtGetTensorData=s.asm.Ka).apply(null,arguments)},s._OrtReleaseTensor=function(){return(s._OrtReleaseTensor=s.asm.La).apply(null,arguments)},s._OrtCreateRunOptions=function(){return(s._OrtCreateRunOptions=s.asm.Ma).apply(null,arguments)},s._OrtAddRunConfigEntry=function(){return(s._OrtAddRunConfigEntry=s.asm.Na).apply(null,arguments)},s._OrtReleaseRunOptions=function(){return(s._OrtReleaseRunOptions=s.asm.Oa).apply(null,arguments)},s._OrtRun=function(){return(s._OrtRun=s.asm.Pa).apply(null,arguments)},s._OrtEndProfiling=function(){return(s._OrtEndProfiling=s.asm.Qa).apply(null,arguments)};var $n=s._pthread_self=function(){return($n=s._pthread_self=s.asm.Ra).apply(null,arguments)},et=s._malloc=function(){return(et=s._malloc=s.asm.Sa).apply(null,arguments)},nt=s._free=function(){return(nt=s._free=s.asm.Ta).apply(null,arguments)};function tt(){return(tt=s.asm.Va).apply(null,arguments)}s.__emscripten_tls_init=function(){return(s.__emscripten_tls_init=s.asm.Ua).apply(null,arguments)},s.__embind_initialize_bindings=function(){return(s.__embind_initialize_bindings=s.asm.Wa).apply(null,arguments)};var rt=s.__emscripten_thread_init=function(){return(rt=s.__emscripten_thread_init=s.asm.Ya).apply(null,arguments)};function at(){return(at=s.asm._a).apply(null,arguments)}function ot(){return(ot=s.asm.$a).apply(null,arguments)}s.__emscripten_thread_crashed=function(){return(s.__emscripten_thread_crashed=s.asm.Za).apply(null,arguments)};var it,ct=s.__emscripten_thread_exit=function(){return(ct=s.__emscripten_thread_exit=s.asm.ab).apply(null,arguments)},ut=s.__emscripten_check_mailbox=function(){return(ut=s.__emscripten_check_mailbox=s.asm.bb).apply(null,arguments)};function st(){return(st=s.asm.cb).apply(null,arguments)}function lt(){return(lt=s.asm.db).apply(null,arguments)}function ft(){return(ft=s.asm.eb).apply(null,arguments)}function pt(){return(pt=s.asm.fb).apply(null,arguments)}function dt(){function e(){if(!it&&(it=!0,s.calledRun=!0,!N)&&(_||we(X),l(s),s.onRuntimeInitialized&&s.onRuntimeInitialized(),!_)){if(s.postRun)for("function"==typeof s.postRun&&(s.postRun=[s.postRun]);s.postRun.length;){var e=s.postRun.shift();Q.unshift(e)}we(Q)}}if(!(0<te))if(_)l(s),_||we(X),startWorker(s);else{if(s.preRun)for("function"==typeof s.preRun&&(s.preRun=[s.preRun]);s.preRun.length;)ee();we(J),0<te||(s.setStatus?(s.setStatus("Running..."),setTimeout((function(){setTimeout((function(){s.setStatus("")}),1),e()}),1)):e())}}if(s.keepRuntimeAlive=$,s.wasmMemory=R,s.stackAlloc=pt,s.stackSave=lt,s.stackRestore=ft,s.UTF8ToString=ge,s.stringToUTF8=Ie,s.lengthBytesUTF8=Ee,s.ExitStatus=se,s.PThread=be,ae=function e(){it||dt(),it||(ae=e)},s.preInit)for("function"==typeof s.preInit&&(s.preInit=[s.preInit]);0<s.preInit.length;)s.preInit.pop()();return dt(),e.ready});e.exports=r},932:function(e,n,t){var _scriptDir,r=(_scriptDir="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0,"undefined"!=typeof __filename&&(_scriptDir=_scriptDir||__filename),function(e={}){var n,r,a;n||(n=void 0!==e?e:{}),n.ready=new Promise(((e,n)=>{r=e,a=n}));var o,i,c,u=Object.assign({},n),s="./this.program",l="object"==typeof window,f="function"==typeof importScripts,p="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,d="";if(p){var h=t(384),g=t(908);d=f?g.dirname(d)+"/":__dirname+"/",o=(e,n)=>(e=e.startsWith("file://")?new URL(e):g.normalize(e),h.readFileSync(e,n?void 0:"utf8")),c=e=>((e=o(e,!0)).buffer||(e=new Uint8Array(e)),e),i=(e,n,t,r=!0)=>{e=e.startsWith("file://")?new URL(e):g.normalize(e),h.readFile(e,r?void 0:"utf8",((e,a)=>{e?t(e):n(r?a.buffer:a)}))},!n.thisProgram&&1<process.argv.length&&(s=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2),n.inspect=()=>"[Emscripten Module object]"}else(l||f)&&(f?d=self.location.href:"undefined"!=typeof document&&document.currentScript&&(d=document.currentScript.src),_scriptDir&&(d=_scriptDir),d=0!==d.indexOf("blob:")?d.substr(0,d.replace(/[?#].*/,"").lastIndexOf("/")+1):"",o=e=>{var n=new XMLHttpRequest;return n.open("GET",e,!1),n.send(null),n.responseText},f&&(c=e=>{var n=new XMLHttpRequest;return n.open("GET",e,!1),n.responseType="arraybuffer",n.send(null),new Uint8Array(n.response)}),i=(e,n,t)=>{var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=()=>{200==r.status||0==r.status&&r.response?n(r.response):t()},r.onerror=t,r.send(null)});var v,m=n.print||console.log.bind(console),y=n.printErr||console.warn.bind(console);Object.assign(n,u),u=null,n.thisProgram&&(s=n.thisProgram),n.wasmBinary&&(v=n.wasmBinary),n.noExitRuntime,"object"!=typeof WebAssembly&&z("no native wasm support detected");var b,w,_,S,A,C,x,T,P,E,O,I=!1;function k(){var e=b.buffer;n.HEAP8=w=new Int8Array(e),n.HEAP16=S=new Int16Array(e),n.HEAP32=C=new Int32Array(e),n.HEAPU8=_=new Uint8Array(e),n.HEAPU16=A=new Uint16Array(e),n.HEAPU32=x=new Uint32Array(e),n.HEAPF32=T=new Float32Array(e),n.HEAPF64=O=new Float64Array(e),n.HEAP64=P=new BigInt64Array(e),n.HEAPU64=E=new BigUint64Array(e)}var R=[],D=[],M=[];function U(){var e=n.preRun.shift();R.unshift(e)}var W,j=0,B=null,G=null;function z(e){throw n.onAbort&&n.onAbort(e),y(e="Aborted("+e+")"),I=!0,e=new WebAssembly.RuntimeError(e+". Build with -sASSERTIONS for more info."),a(e),e}function L(e){return e.startsWith("data:application/octet-stream;base64,")}if(!L(W="ort-wasm.wasm")){var F=W;W=n.locateFile?n.locateFile(F,d):d+F}function H(e){try{if(e==W&&v)return new Uint8Array(v);if(c)return c(e);throw"both async and sync fetching of the wasm failed"}catch(e){z(e)}}function V(e,n,t){return function(e){if(!v&&(l||f)){if("function"==typeof fetch&&!e.startsWith("file://"))return fetch(e,{credentials:"same-origin"}).then((n=>{if(!n.ok)throw"failed to load wasm binary file at \'"+e+"\'";return n.arrayBuffer()})).catch((()=>H(e)));if(i)return new Promise(((n,t)=>{i(e,(e=>n(new Uint8Array(e))),t)}))}return Promise.resolve().then((()=>H(e)))}(e).then((e=>WebAssembly.instantiate(e,n))).then((e=>e)).then(t,(e=>{y("failed to asynchronously prepare wasm: "+e),z(e)}))}function N(e){for(;0<e.length;)e.shift()(n)}function K(e){this.Ja=e-24,this.Wa=function(e){x[this.Ja+4>>2>>>0]=e},this.Va=function(e){x[this.Ja+8>>2>>>0]=e},this.Ra=function(e,n){this.Sa(),this.Wa(e),this.Va(n)},this.Sa=function(){x[this.Ja+16>>2>>>0]=0}}var Y="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function q(e,n,t){var r=(n>>>=0)+t;for(t=n;e[t]&&!(t>=r);)++t;if(16<t-n&&e.buffer&&Y)return Y.decode(e.subarray(n,t));for(r="";n<t;){var a=e[n++];if(128&a){var o=63&e[n++];if(192==(224&a))r+=String.fromCharCode((31&a)<<6|o);else{var i=63&e[n++];65536>(a=224==(240&a)?(15&a)<<12|o<<6|i:(7&a)<<18|o<<12|i<<6|63&e[n++])?r+=String.fromCharCode(a):(a-=65536,r+=String.fromCharCode(55296|a>>10,56320|1023&a))}}else r+=String.fromCharCode(a)}return r}function J(e,n){return(e>>>=0)?q(_,e,n):""}function X(e){for(var n=0,t=0;t<e.length;++t){var r=e.charCodeAt(t);127>=r?n++:2047>=r?n+=2:55296<=r&&57343>=r?(n+=4,++t):n+=3}return n}function Q(e,n,t,r){if(!(0<r))return 0;var a=t>>>=0;r=t+r-1;for(var o=0;o<e.length;++o){var i=e.charCodeAt(o);if(55296<=i&&57343>=i&&(i=65536+((1023&i)<<10)|1023&e.charCodeAt(++o)),127>=i){if(t>=r)break;n[t++>>>0]=i}else{if(2047>=i){if(t+1>=r)break;n[t++>>>0]=192|i>>6}else{if(65535>=i){if(t+2>=r)break;n[t++>>>0]=224|i>>12}else{if(t+3>=r)break;n[t++>>>0]=240|i>>18,n[t++>>>0]=128|i>>12&63}n[t++>>>0]=128|i>>6&63}n[t++>>>0]=128|63&i}}return n[t>>>0]=0,t-a}function Z(e,n,t){return Q(e,_,n,t)}function $(e){if(null===e)return"null";var n=typeof e;return"object"===n||"array"===n||"function"===n?e.toString():""+e}var ee=void 0;function ne(e){for(var n="";_[e>>>0];)n+=ee[_[e++>>>0]];return n}var te={},re={},ae={};function oe(e){if(void 0===e)return"_unknown";var n=(e=e.replace(/[^a-zA-Z0-9_]/g,"$")).charCodeAt(0);return 48<=n&&57>=n?"_"+e:e}function ie(e,n){return{[e=oe(e)]:function(){return n.apply(this,arguments)}}[e]}function ce(e){var n=Error,t=ie(e,(function(n){this.name=e,this.message=n,void 0!==(n=Error(n).stack)&&(this.stack=this.toString()+"\\n"+n.replace(/^Error(:[^\\n]*)?\\n/,""))}));return t.prototype=Object.create(n.prototype),t.prototype.constructor=t,t.prototype.toString=function(){return void 0===this.message?this.name:this.name+": "+this.message},t}var ue=void 0;function se(e){throw new ue(e)}function le(e,n,t={}){if(!("argPackAdvance"in n))throw new TypeError("registerType registeredInstance requires argPackAdvance");var r=n.name;if(e||se(\'type "\'+r+\'" must have a positive integer typeid pointer\'),re.hasOwnProperty(e)){if(t.Za)return;se("Cannot register type \'"+r+"\' twice")}re[e]=n,delete ae[e],te.hasOwnProperty(e)&&(n=te[e],delete te[e],n.forEach((e=>e())))}function fe(e,n,t){switch(n){case 0:return t?function(e){return w[e>>>0]}:function(e){return _[e>>>0]};case 1:return t?function(e){return S[e>>>1]}:function(e){return A[e>>>1]};case 2:return t?function(e){return C[e>>>2]}:function(e){return x[e>>>2]};case 3:return t?function(e){return P[e>>3]}:function(e){return E[e>>3]};default:throw new TypeError("Unknown integer type: "+e)}}function pe(e){switch(e){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+e)}}var de=new function(){this.Ja=[void 0],this.Ra=[],this.get=function(e){return this.Ja[e]},this.Va=function(e){let n=this.Ra.pop()||this.Ja.length;return this.Ja[n]=e,n},this.Wa=function(e){this.Ja[e]=void 0,this.Ra.push(e)}};function he(e){e>=de.Sa&&0==--de.get(e).Ya&&de.Wa(e)}var ge=e=>(e||se("Cannot use deleted val. handle = "+e),de.get(e).value),ve=e=>{switch(e){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:return de.Va({Ya:1,value:e})}};function me(e){return this.fromWireType(C[e>>2>>>0])}function ye(e,n){switch(n){case 2:return function(e){return this.fromWireType(T[e>>>2])};case 3:return function(e){return this.fromWireType(O[e>>>3])};default:throw new TypeError("Unknown float type: "+e)}}var be="undefined"!=typeof TextDecoder?new TextDecoder("utf-16le"):void 0;function we(e,n){for(var t=e>>1,r=t+n/2;!(t>=r)&&A[t>>>0];)++t;if(32<(t<<=1)-e&&be)return be.decode(_.subarray(e>>>0,t>>>0));for(t="",r=0;!(r>=n/2);++r){var a=S[e+2*r>>1>>>0];if(0==a)break;t+=String.fromCharCode(a)}return t}function _e(e,n,t){if(void 0===t&&(t=2147483647),2>t)return 0;var r=n;t=(t-=2)<2*e.length?t/2:e.length;for(var a=0;a<t;++a)S[n>>1>>>0]=e.charCodeAt(a),n+=2;return S[n>>1>>>0]=0,n-r}function Se(e){return 2*e.length}function Ae(e,n){for(var t=0,r="";!(t>=n/4);){var a=C[e+4*t>>2>>>0];if(0==a)break;++t,65536<=a?(a-=65536,r+=String.fromCharCode(55296|a>>10,56320|1023&a)):r+=String.fromCharCode(a)}return r}function Ce(e,n,t){if(void 0===t&&(t=2147483647),4>t)return 0;var r=n>>>=0;t=r+t-4;for(var a=0;a<e.length;++a){var o=e.charCodeAt(a);if(55296<=o&&57343>=o&&(o=65536+((1023&o)<<10)|1023&e.charCodeAt(++a)),C[n>>2>>>0]=o,(n+=4)+4>t)break}return C[n>>2>>>0]=0,n-r}function xe(e){for(var n=0,t=0;t<e.length;++t){var r=e.charCodeAt(t);55296<=r&&57343>=r&&++t,n+=4}return n}function Te(e,n){var t=re[e];if(void 0===t){var r=ne(e=Ze(e));Qe(e),se(n+" has unknown type "+r)}return t}var Pe={};function Ee(e){var n=Pe[e];return void 0===n?ne(e):n}var Oe=[];function Ie(){return"object"==typeof globalThis?globalThis:Function("return this")()}var ke=[],Re={};function De(e){return 0==e%4&&(0!=e%100||0==e%400)}var Me,Ue=[0,31,60,91,121,152,182,213,244,274,305,335],We=[0,31,59,90,120,151,181,212,243,273,304,334];function je(e){return(De(e.getFullYear())?Ue:We)[e.getMonth()]+e.getDate()-1}function Be(e){var n=X(e)+1,t=Xe(n);return t&&Z(e,t,n),t}Me=p?()=>{var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}:()=>performance.now();var Ge={};function ze(){if(!Le){var e,n={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:s||"./this.program"};for(e in Ge)void 0===Ge[e]?delete n[e]:n[e]=Ge[e];var t=[];for(e in n)t.push(e+"="+n[e]);Le=t}return Le}var Le,Fe=[null,[],[]],He=[31,29,31,30,31,30,31,31,30,31,30,31],Ve=[31,28,31,30,31,30,31,31,30,31,30,31];function Ne(e,n,t,r){function a(e,n,t){for(e="number"==typeof e?e.toString():e||"";e.length<n;)e=t[0]+e;return e}function o(e,n){return a(e,n,"0")}function i(e,n){function t(e){return 0>e?-1:0<e?1:0}var r;return 0===(r=t(e.getFullYear()-n.getFullYear()))&&0===(r=t(e.getMonth()-n.getMonth()))&&(r=t(e.getDate()-n.getDate())),r}function c(e){switch(e.getDay()){case 0:return new Date(e.getFullYear()-1,11,29);case 1:return e;case 2:return new Date(e.getFullYear(),0,3);case 3:return new Date(e.getFullYear(),0,2);case 4:return new Date(e.getFullYear(),0,1);case 5:return new Date(e.getFullYear()-1,11,31);case 6:return new Date(e.getFullYear()-1,11,30)}}function u(e){var n=e.Oa;for(e=new Date(new Date(e.Pa+1900,0,1).getTime());0<n;){var t=e.getMonth(),r=(De(e.getFullYear())?He:Ve)[t];if(!(n>r-e.getDate())){e.setDate(e.getDate()+n);break}n-=r-e.getDate()+1,e.setDate(1),11>t?e.setMonth(t+1):(e.setMonth(0),e.setFullYear(e.getFullYear()+1))}return t=new Date(e.getFullYear()+1,0,4),n=c(new Date(e.getFullYear(),0,4)),t=c(t),0>=i(n,e)?0>=i(t,e)?e.getFullYear()+1:e.getFullYear():e.getFullYear()-1}var s=C[r+40>>2>>>0];for(var l in r={cb:C[r>>2>>>0],bb:C[r+4>>2>>>0],Ta:C[r+8>>2>>>0],Xa:C[r+12>>2>>>0],Ua:C[r+16>>2>>>0],Pa:C[r+20>>2>>>0],Na:C[r+24>>2>>>0],Oa:C[r+28>>2>>>0],fb:C[r+32>>2>>>0],ab:C[r+36>>2>>>0],eb:s?J(s):""},t=J(t),s={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})t=t.replace(new RegExp(l,"g"),s[l]);var f="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),p="January February March April May June July August September October November December".split(" ");for(l in s={"%a":function(e){return f[e.Na].substring(0,3)},"%A":function(e){return f[e.Na]},"%b":function(e){return p[e.Ua].substring(0,3)},"%B":function(e){return p[e.Ua]},"%C":function(e){return o((e.Pa+1900)/100|0,2)},"%d":function(e){return o(e.Xa,2)},"%e":function(e){return a(e.Xa,2," ")},"%g":function(e){return u(e).toString().substring(2)},"%G":function(e){return u(e)},"%H":function(e){return o(e.Ta,2)},"%I":function(e){return 0==(e=e.Ta)?e=12:12<e&&(e-=12),o(e,2)},"%j":function(e){for(var n=0,t=0;t<=e.Ua-1;n+=(De(e.Pa+1900)?He:Ve)[t++]);return o(e.Xa+n,3)},"%m":function(e){return o(e.Ua+1,2)},"%M":function(e){return o(e.bb,2)},"%n":function(){return"\\n"},"%p":function(e){return 0<=e.Ta&&12>e.Ta?"AM":"PM"},"%S":function(e){return o(e.cb,2)},"%t":function(){return"\\t"},"%u":function(e){return e.Na||7},"%U":function(e){return o(Math.floor((e.Oa+7-e.Na)/7),2)},"%V":function(e){var n=Math.floor((e.Oa+7-(e.Na+6)%7)/7);if(2>=(e.Na+371-e.Oa-2)%7&&n++,n)53==n&&(4==(t=(e.Na+371-e.Oa)%7)||3==t&&De(e.Pa)||(n=1));else{n=52;var t=(e.Na+7-e.Oa-1)%7;(4==t||5==t&&De(e.Pa%400-1))&&n++}return o(n,2)},"%w":function(e){return e.Na},"%W":function(e){return o(Math.floor((e.Oa+7-(e.Na+6)%7)/7),2)},"%y":function(e){return(e.Pa+1900).toString().substring(2)},"%Y":function(e){return e.Pa+1900},"%z":function(e){var n=0<=(e=e.ab);return e=Math.abs(e)/60,(n?"+":"-")+String("0000"+(e/60*100+e%60)).slice(-4)},"%Z":function(e){return e.eb},"%%":function(){return"%"}},t=t.replace(/%%/g,"\\0\\0"),s)t.includes(l)&&(t=t.replace(new RegExp(l,"g"),s[l](r)));return l=function(e){var n=Array(X(e)+1);return Q(e,n,0,n.length),n}(t=t.replace(/\\0\\0/g,"%")),l.length>n?0:(w.set(l,e>>>0),l.length-1)}for(var Ke=Array(256),Ye=0;256>Ye;++Ye)Ke[Ye]=String.fromCharCode(Ye);ee=Ke,ue=n.BindingError=ce("BindingError"),n.InternalError=ce("InternalError"),de.Ja.push({value:void 0},{value:null},{value:!0},{value:!1}),de.Sa=de.Ja.length,n.count_emval_handles=function(){for(var e=0,n=de.Sa;n<de.Ja.length;++n)void 0!==de.Ja[n]&&++e;return e};var qe={a:function(e,n,t){throw new K(e).Ra(n,t),e},da:function(){z("To use dlopen, you need enable dynamic linking, see https://emscripten.org/docs/compiling/Dynamic-Linking.html")},v:function(){return 0},ba:function(){},N:function(){},P:function(){},H:function(){return 0},$:function(){},V:function(){},_:function(){},A:function(){},O:function(){},L:function(){},aa:function(){},M:function(){},D:function(e,n,t,r,a){n=ne(n),t=pe(t);var o=-1!=n.indexOf("u");o&&(a=(1n<<64n)-1n),le(e,{name:n,fromWireType:function(e){return e},toWireType:function(e,t){if("bigint"!=typeof t&&"number"!=typeof t)throw new TypeError(\'Cannot convert "\'+$(t)+\'" to \'+this.name);if(t<r||t>a)throw new TypeError(\'Passing a number "\'+$(t)+\'" from JS side to C/C++ side to an argument of type "\'+n+\'", which is outside the valid range [\'+r+", "+a+"]!");return t},argPackAdvance:8,readValueFromPointer:fe(n,t,!o),Qa:null})},ga:function(e,n,t,r,a){var o=pe(t);le(e,{name:n=ne(n),fromWireType:function(e){return!!e},toWireType:function(e,n){return n?r:a},argPackAdvance:8,readValueFromPointer:function(e){if(1===t)var r=w;else if(2===t)r=S;else{if(4!==t)throw new TypeError("Unknown boolean type size: "+n);r=C}return this.fromWireType(r[e>>>o])},Qa:null})},fa:function(e,n){le(e,{name:n=ne(n),fromWireType:function(e){var n=ge(e);return he(e),n},toWireType:function(e,n){return ve(n)},argPackAdvance:8,readValueFromPointer:me,Qa:null})},C:function(e,n,t){t=pe(t),le(e,{name:n=ne(n),fromWireType:function(e){return e},toWireType:function(e,n){return n},argPackAdvance:8,readValueFromPointer:ye(n,t),Qa:null})},p:function(e,n,t,r,a){n=ne(n),-1===a&&(a=4294967295),a=pe(t);var o=e=>e;if(0===r){var i=32-8*t;o=e=>e<<i>>>i}t=n.includes("unsigned")?function(e,n){return n>>>0}:function(e,n){return n},le(e,{name:n,fromWireType:o,toWireType:t,argPackAdvance:8,readValueFromPointer:fe(n,a,0!==r),Qa:null})},l:function(e,n,t){function r(e){e>>=2;var n=x;return new a(n.buffer,n[e+1>>>0],n[e>>>0])}var a=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,BigInt64Array,BigUint64Array][n];le(e,{name:t=ne(t),fromWireType:r,argPackAdvance:8,readValueFromPointer:r},{Za:!0})},E:function(e,n){var t="std::string"===(n=ne(n));le(e,{name:n,fromWireType:function(e){var n=x[e>>2>>>0],r=e+4;if(t)for(var a=r,o=0;o<=n;++o){var i=r+o;if(o==n||0==_[i>>>0]){if(a=J(a,i-a),void 0===c)var c=a;else c+=String.fromCharCode(0),c+=a;a=i+1}}else{for(c=Array(n),o=0;o<n;++o)c[o]=String.fromCharCode(_[r+o>>>0]);c=c.join("")}return Qe(e),c},toWireType:function(e,n){n instanceof ArrayBuffer&&(n=new Uint8Array(n));var r="string"==typeof n;r||n instanceof Uint8Array||n instanceof Uint8ClampedArray||n instanceof Int8Array||se("Cannot pass non-string to std::string");var a=t&&r?X(n):n.length,o=Xe(4+a+1),i=o+4>>>0;if(x[o>>2>>>0]=a,t&&r)Z(n,i,a+1);else if(r)for(r=0;r<a;++r){var c=n.charCodeAt(r);255<c&&(Qe(i),se("String has UTF-16 code units that do not fit in 8 bits")),_[i+r>>>0]=c}else for(r=0;r<a;++r)_[i+r>>>0]=n[r];return null!==e&&e.push(Qe,o),o},argPackAdvance:8,readValueFromPointer:me,Qa:function(e){Qe(e)}})},x:function(e,n,t){if(t=ne(t),2===n)var r=we,a=_e,o=Se,i=()=>A,c=1;else 4===n&&(r=Ae,a=Ce,o=xe,i=()=>x,c=2);le(e,{name:t,fromWireType:function(e){for(var t,a=x[e>>>2],o=i(),u=e+4,s=0;s<=a;++s){var l=e+4+s*n;s!=a&&0!=o[l>>>c]||(u=r(u,l-u),void 0===t?t=u:(t+=String.fromCharCode(0),t+=u),u=l+n)}return Qe(e),t},toWireType:function(e,r){"string"!=typeof r&&se("Cannot pass non-string to C++ string type "+t);var i=o(r),u=Xe(4+i+n);return x[(u>>>=0)>>>2]=i>>c,a(r,u+4,i+n),null!==e&&e.push(Qe,u),u},argPackAdvance:8,readValueFromPointer:me,Qa:function(e){Qe(e)}})},ha:function(e,n){le(e,{$a:!0,name:n=ne(n),argPackAdvance:0,fromWireType:function(){},toWireType:function(){}})},ca:function(){return!0},o:function(e,n,t){e=ge(e),n=Te(n,"emval::as");var r=[],a=ve(r);return x[t>>2>>>0]=a,n.toWireType(r,e)},h:function(e,n,t,r,a){e=Oe[e],n=ge(n),t=Ee(t);var o=[];return x[r>>2>>>0]=ve(o),e(n,t,o,a)},q:function(e,n,t,r){(e=Oe[e])(n=ge(n),t=Ee(t),null,r)},b:he,F:function(e,n){return(e=ge(e))==ge(n)},u:function(e){return 0===e?ve(Ie()):(e=Ee(e),ve(Ie()[e]))},g:function(e,n){var t=function(e,n){for(var t=Array(e),r=0;r<e;++r)t[r]=Te(x[n+4*r>>2>>>0],"parameter "+r);return t}(e,n),r=t[0];n=r.name+"_$"+t.slice(1).map((function(e){return e.name})).join("_")+"$";var a=ke[n];if(void 0!==a)return a;a=["retType"];for(var o=[r],i="",c=0;c<e-1;++c)i+=(0!==c?", ":"")+"arg"+c,a.push("argType"+c),o.push(t[1+c]);var u="return function "+oe("methodCaller_"+n)+"(handle, name, destructors, args) {\\n",s=0;for(c=0;c<e-1;++c)u+="    var arg"+c+" = argType"+c+".readValueFromPointer(args"+(s?"+"+s:"")+");\\n",s+=t[c+1].argPackAdvance;for(u+="    var rv = handle[name]("+i+");\\n",c=0;c<e-1;++c)t[c+1].deleteObject&&(u+="    argType"+c+".deleteObject(arg"+c+");\\n");return r.$a||(u+="    return retType.toWireType(destructors, rv);\\n"),a.push(u+"};\\n"),e=function(e){var n=Function;if(!(n instanceof Function))throw new TypeError("new_ called with constructor type "+typeof n+" which is not a function");var t=ie(n.name||"unknownFunctionName",(function(){}));return t.prototype=n.prototype,t=new t,(e=n.apply(t,e))instanceof Object?e:t}(a).apply(null,o),a=function(e){var n=Oe.length;return Oe.push(e),n}(e),ke[n]=a},r:function(e,n){return e=ge(e),n=ge(n),ve(e[n])},c:function(e){4<e&&(de.get(e).Ya+=1)},G:function(e,t,r,a){e=ge(e);var o=Re[t];return o||(o=function(e){for(var t="",r=0;r<e;++r)t+=(0!==r?", ":"")+"arg"+r;var a="return function emval_allocator_"+e+"(constructor, argTypes, args) {\\n  var HEAPU32 = getMemory();\\n";for(r=0;r<e;++r)a+="var argType"+r+" = requireRegisteredType(HEAPU32[((argTypes)>>2)], \'parameter "+r+"\');\\nvar arg"+r+" = argType"+r+".readValueFromPointer(args);\\nargs += argType"+r+"[\'argPackAdvance\'];\\nargTypes += 4;\\n";return new Function("requireRegisteredType","Module","valueToHandle","getMemory",a+"var obj = new constructor("+t+");\\nreturn valueToHandle(obj);\\n}\\n")(Te,n,ve,(()=>x))}(t),Re[t]=o),o(e,r,a)},s:function(){return ve([])},k:function(e){e=ge(e);for(var n=Array(e.length),t=0;t<e.length;t++)n[t]=e[t];return ve(n)},d:function(e){return ve(Ee(e))},j:function(){return ve({})},f:function(e){for(var n=ge(e);n.length;){var t=n.pop();n.pop()(t)}he(e)},i:function(e,n,t){e=ge(e),n=ge(n),t=ge(t),e[n]=t},e:function(e,n){return e=(e=Te(e,"_emval_take_value")).readValueFromPointer(n),ve(e)},S:function(e,n){e=new Date(1e3*(x[e>>>2]+4294967296*C[e+4>>>2])),C[n>>2>>>0]=e.getUTCSeconds(),C[n+4>>2>>>0]=e.getUTCMinutes(),C[n+8>>2>>>0]=e.getUTCHours(),C[n+12>>2>>>0]=e.getUTCDate(),C[n+16>>2>>>0]=e.getUTCMonth(),C[n+20>>2>>>0]=e.getUTCFullYear()-1900,C[n+24>>2>>>0]=e.getUTCDay(),C[n+28>>2>>>0]=(e.getTime()-Date.UTC(e.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},T:function(e,n){e=new Date(1e3*(x[e>>>2]+4294967296*C[e+4>>>2])),C[n>>2>>>0]=e.getSeconds(),C[n+4>>2>>>0]=e.getMinutes(),C[n+8>>2>>>0]=e.getHours(),C[n+12>>2>>>0]=e.getDate(),C[n+16>>2>>>0]=e.getMonth(),C[n+20>>2>>>0]=e.getFullYear()-1900,C[n+24>>2>>>0]=e.getDay(),C[n+28>>2>>>0]=0|je(e),C[n+36>>2>>>0]=-60*e.getTimezoneOffset();var t=new Date(e.getFullYear(),6,1).getTimezoneOffset(),r=new Date(e.getFullYear(),0,1).getTimezoneOffset();C[n+32>>2>>>0]=0|(t!=r&&e.getTimezoneOffset()==Math.min(r,t))},U:function(e){var n=new Date(C[e+20>>2>>>0]+1900,C[e+16>>2>>>0],C[e+12>>2>>>0],C[e+8>>2>>>0],C[e+4>>2>>>0],C[e>>2>>>0],0),t=C[e+32>>2>>>0],r=n.getTimezoneOffset(),a=new Date(n.getFullYear(),6,1).getTimezoneOffset(),o=new Date(n.getFullYear(),0,1).getTimezoneOffset(),i=Math.min(o,a);return 0>t?C[e+32>>2>>>0]=Number(a!=o&&i==r):0<t!=(i==r)&&(a=Math.max(o,a),n.setTime(n.getTime()+6e4*((0<t?i:a)-r))),C[e+24>>2>>>0]=n.getDay(),C[e+28>>2>>>0]=0|je(n),C[e>>2>>>0]=n.getSeconds(),C[e+4>>2>>>0]=n.getMinutes(),C[e+8>>2>>>0]=n.getHours(),C[e+12>>2>>>0]=n.getDate(),C[e+16>>2>>>0]=n.getMonth(),C[e+20>>2>>>0]=n.getYear(),n.getTime()/1e3|0},Q:function(){return-52},R:function(){},J:function(e,n,t){function r(e){return(e=e.toTimeString().match(/\\(([A-Za-z ]+)\\)$/))?e[1]:"GMT"}var a=(new Date).getFullYear(),o=new Date(a,0,1),i=new Date(a,6,1);a=o.getTimezoneOffset();var c=i.getTimezoneOffset();x[e>>2>>>0]=60*Math.max(a,c),C[n>>2>>>0]=Number(a!=c),e=r(o),n=r(i),e=Be(e),n=Be(n),c<a?(x[t>>2>>>0]=e,x[t+4>>2>>>0]=n):(x[t>>2>>>0]=n,x[t+4>>2>>>0]=e)},t:function(){z("")},ia:function(){z("To use dlopen, you need enable dynamic linking, see https://emscripten.org/docs/compiling/Dynamic-Linking.html")},B:function(){return Date.now()},K:function(){return 4294901760},n:Me,Z:function(e,n,t){_.copyWithin(e>>>0,n>>>0,n+t>>>0)},I:function(e){var n=_.length;if(4294901760<(e>>>=0))return!1;for(var t=1;4>=t;t*=2){var r=n*(1+.2/t);r=Math.min(r,e+100663296);var a=Math,o=a.min;r=Math.max(e,r),r+=(65536-r%65536)%65536;e:{var i=b.buffer;try{b.grow(o.call(a,4294901760,r)-i.byteLength+65535>>>16),k();var c=1;break e}catch(e){}c=void 0}if(c)return!0}return!1},X:function(e,n){var t=0;return ze().forEach((function(r,a){var o=n+t;for(a=x[e+4*a>>2>>>0]=o,o=0;o<r.length;++o)w[a++>>0>>>0]=r.charCodeAt(o);w[a>>0>>>0]=0,t+=r.length+1})),0},Y:function(e,n){var t=ze();x[e>>2>>>0]=t.length;var r=0;return t.forEach((function(e){r+=e.length+1})),x[n>>2>>>0]=r,0},w:function(){return 52},z:function(){return 52},W:function(){return 70},y:function(e,n,t,r){for(var a=0,o=0;o<t;o++){var i=x[n>>2>>>0],c=x[n+4>>2>>>0];n+=8;for(var u=0;u<c;u++){var s=_[i+u>>>0],l=Fe[e];0===s||10===s?((1===e?m:y)(q(l,0)),l.length=0):l.push(s)}a+=c}return x[r>>2>>>0]=a,0},ea:Ne,m:function(e,n,t,r){return Ne(e,n,t,r)}};!function(){function e(e){if(e=e.exports,n.asm=e,b=n.asm.ja,k(),D.unshift(n.asm.ka),j--,n.monitorRunDependencies&&n.monitorRunDependencies(j),0==j&&(null!==B&&(clearInterval(B),B=null),G)){var t=G;G=null,t()}return e}var t={a:qe};if(j++,n.monitorRunDependencies&&n.monitorRunDependencies(j),n.instantiateWasm)try{return n.instantiateWasm(t,e)}catch(e){y("Module.instantiateWasm callback failed with error: "+e),a(e)}(function(e,n){var t=W;return v||"function"!=typeof WebAssembly.instantiateStreaming||L(t)||t.startsWith("file://")||p||"function"!=typeof fetch?V(t,e,n):fetch(t,{credentials:"same-origin"}).then((r=>WebAssembly.instantiateStreaming(r,e).then(n,(function(r){return y("wasm streaming compile failed: "+r),y("falling back to ArrayBuffer instantiation"),V(t,e,n)}))))})(t,(function(n){e(n.instance)})).catch(a)}(),n._OrtInit=function(){return(n._OrtInit=n.asm.la).apply(null,arguments)},n._OrtGetLastError=function(){return(n._OrtGetLastError=n.asm.ma).apply(null,arguments)},n._OrtCreateSessionOptions=function(){return(n._OrtCreateSessionOptions=n.asm.na).apply(null,arguments)},n._OrtAppendExecutionProvider=function(){return(n._OrtAppendExecutionProvider=n.asm.oa).apply(null,arguments)},n._OrtAddSessionConfigEntry=function(){return(n._OrtAddSessionConfigEntry=n.asm.pa).apply(null,arguments)},n._OrtReleaseSessionOptions=function(){return(n._OrtReleaseSessionOptions=n.asm.qa).apply(null,arguments)},n._OrtCreateSession=function(){return(n._OrtCreateSession=n.asm.ra).apply(null,arguments)},n._OrtReleaseSession=function(){return(n._OrtReleaseSession=n.asm.sa).apply(null,arguments)},n._OrtGetInputOutputCount=function(){return(n._OrtGetInputOutputCount=n.asm.ta).apply(null,arguments)},n._OrtGetInputName=function(){return(n._OrtGetInputName=n.asm.ua).apply(null,arguments)},n._OrtGetOutputName=function(){return(n._OrtGetOutputName=n.asm.va).apply(null,arguments)},n._OrtFree=function(){return(n._OrtFree=n.asm.wa).apply(null,arguments)},n._OrtCreateTensor=function(){return(n._OrtCreateTensor=n.asm.xa).apply(null,arguments)},n._OrtGetTensorData=function(){return(n._OrtGetTensorData=n.asm.ya).apply(null,arguments)},n._OrtReleaseTensor=function(){return(n._OrtReleaseTensor=n.asm.za).apply(null,arguments)},n._OrtCreateRunOptions=function(){return(n._OrtCreateRunOptions=n.asm.Aa).apply(null,arguments)},n._OrtAddRunConfigEntry=function(){return(n._OrtAddRunConfigEntry=n.asm.Ba).apply(null,arguments)},n._OrtReleaseRunOptions=function(){return(n._OrtReleaseRunOptions=n.asm.Ca).apply(null,arguments)},n._OrtRun=function(){return(n._OrtRun=n.asm.Da).apply(null,arguments)},n._OrtEndProfiling=function(){return(n._OrtEndProfiling=n.asm.Ea).apply(null,arguments)};var Je,Xe=n._malloc=function(){return(Xe=n._malloc=n.asm.Fa).apply(null,arguments)},Qe=n._free=function(){return(Qe=n._free=n.asm.Ga).apply(null,arguments)};function Ze(){return(Ze=n.asm.Ha).apply(null,arguments)}function $e(){return($e=n.asm.Ka).apply(null,arguments)}function en(){return(en=n.asm.La).apply(null,arguments)}function nn(){return(nn=n.asm.Ma).apply(null,arguments)}function tn(){function e(){if(!Je&&(Je=!0,n.calledRun=!0,!I)){if(N(D),r(n),n.onRuntimeInitialized&&n.onRuntimeInitialized(),n.postRun)for("function"==typeof n.postRun&&(n.postRun=[n.postRun]);n.postRun.length;){var e=n.postRun.shift();M.unshift(e)}N(M)}}if(!(0<j)){if(n.preRun)for("function"==typeof n.preRun&&(n.preRun=[n.preRun]);n.preRun.length;)U();N(R),0<j||(n.setStatus?(n.setStatus("Running..."),setTimeout((function(){setTimeout((function(){n.setStatus("")}),1),e()}),1)):e())}}if(n.__embind_initialize_bindings=function(){return(n.__embind_initialize_bindings=n.asm.Ia).apply(null,arguments)},n.stackAlloc=nn,n.stackSave=$e,n.stackRestore=en,n.UTF8ToString=J,n.stringToUTF8=Z,n.lengthBytesUTF8=X,G=function e(){Je||tn(),Je||(G=e)},n.preInit)for("function"==typeof n.preInit&&(n.preInit=[n.preInit]);0<n.preInit.length;)n.preInit.pop()();return tn(),e.ready});e.exports=r},154:function(e){"use strict";e.exports=\'"use strict";var e={},a="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node;if(a){var r=require("worker_threads"),t=r.parentPort;t.on("message",(e=>onmessage({data:e})));var s=require("fs");Object.assign(global,{self:global,require:require,Module:e,location:{href:__filename},Worker:r.Worker,importScripts:function(e){(0,eval)(s.readFileSync(e,"utf8")+"//# sourceURL="+e)},postMessage:function(e){t.postMessage(e)},performance:global.performance||{now:function(){return Date.now()}}})}var o=!1,n=function(){var e=Array.prototype.slice.call(arguments).join(" ");a?s.writeSync(2,e+"\\\\n"):console.error(e)};self.alert=function(){var a=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:a,threadId:e._pthread_self()})},e.instantiateWasm=(a,r)=>{var t=e.wasmModule;return e.wasmModule=null,r(new WebAssembly.Instance(t,a))},self.onunhandledrejection=e=>{throw e.reason??e},self.onmessage=function a(r){try{if("load"===r.data.cmd){let s=[];self.onmessage=e=>s.push(e),self.startWorker=r=>{e=r,postMessage({cmd:"loaded"});for(let e of s)a(e);self.onmessage=a},e.wasmModule=r.data.wasmModule;for(const a of r.data.handlers)e[a]=function(){postMessage({cmd:"callHandler",handler:a,args:[...arguments]})};if(e.wasmMemory=r.data.wasmMemory,e.buffer=e.wasmMemory.buffer,e.ENVIRONMENT_IS_PTHREAD=!0,"string"==typeof r.data.urlOrBlob)importScripts(r.data.urlOrBlob);else{var t=URL.createObjectURL(r.data.urlOrBlob);importScripts(t),URL.revokeObjectURL(t)}ortWasmThreaded(e)}else if("run"===r.data.cmd){e.__emscripten_thread_init(r.data.pthread_ptr,0,0,1),e.__emscripten_thread_mailbox_await(r.data.pthread_ptr),e.establishStackSpace(),e.PThread.receiveObjectTransfer(r.data),e.PThread.threadInitTLS(),o||(e.__embind_initialize_bindings(),o=!0);try{e.invokeEntryPoint(r.data.start_routine,r.data.arg)}catch(e){if("unwind"!=e)throw e}}else"cancel"===r.data.cmd?e._pthread_self()&&e.__emscripten_thread_exit(-1):"setimmediate"===r.data.target||("checkMailbox"===r.data.cmd?o&&e.checkMailbox():r.data.cmd&&(n("worker.js received unknown command "+r.data.cmd),n(r.data)))}catch(a){throw e.__emscripten_thread_crashed&&e.__emscripten_thread_crashed(),a}};\\n\'},384:function(){},993:function(){},908:function(){},953:function(){},925:function(){},449:function(){}},n={};function t(r){var a=n[r];if(void 0!==a)return a.exports;var o=n[r]={exports:{}};return e[r].call(o.exports,o,o.exports,t),o.exports}!function(){"use strict";var e=t(259),n=t(263);self.onmessage=function(t){switch(t.data.type){case"init-wasm":try{(0,n.initializeWebAssembly)(t.data.in).then((function(){return postMessage({type:"init-wasm"})}),(function(e){return postMessage({type:"init-wasm",err:e})}))}catch(e){postMessage({type:"init-wasm",err:e})}break;case"init-ort":try{(0,e.initRuntime)(t.data.in).then((function(){return postMessage({type:"init-ort"})}),(function(e){return postMessage({type:"init-ort",err:e})})),postMessage({type:"init-ort"})}catch(e){postMessage({type:"init-ort",err:e})}break;case"create_allocate":try{var r=t.data.in.model,a=(0,e.createSessionAllocate)(r);postMessage({type:"create_allocate",out:a})}catch(e){postMessage({type:"create_allocate",err:e})}break;case"create_finalize":try{var o=t.data.in,i=(a=o.modeldata,o.options),c=(0,e.createSessionFinalize)(a,i);postMessage({type:"create_finalize",out:c})}catch(e){postMessage({type:"create_finalize",err:e})}break;case"create":try{var u=t.data.in;r=u.model,i=u.options,c=(0,e.createSession)(r,i),postMessage({type:"create",out:c})}catch(e){postMessage({type:"create",err:e})}break;case"release":try{var s=t.data.in;(0,e.releaseSession)(s),postMessage({type:"release"})}catch(e){postMessage({type:"release",err:e})}break;case"run":try{var l=t.data.in,f=l.sessionId,p=l.inputIndices,d=l.inputs,h=l.outputIndices;i=l.options,(0,e.run)(f,p,d,h,i).then((function(n){postMessage({type:"run",out:n},(0,e.extractTransferableBuffers)(n))}),(function(e){postMessage({type:"run",err:e})}))}catch(e){postMessage({type:"run",err:e})}break;case"end-profiling":try{s=t.data.in,(0,e.endProfiling)(s),postMessage({type:"end-profiling"})}catch(e){postMessage({type:"end-profiling",err:e})}}}}()}();\n',"Worker",void 0,void 0)}},6614:function(e){"use strict";e.exports=function(e,t,n,r){var o=self||window;try{try{var i;try{i=new o.Blob([e])}catch(t){(i=new(o.BlobBuilder||o.WebKitBlobBuilder||o.MozBlobBuilder||o.MSBlobBuilder)).append(e),i=i.getBlob()}var a=o.URL||o.webkitURL,u=a.createObjectURL(i),s=new o[t](u,n);return a.revokeObjectURL(u),s}catch(r){return new o[t]("data:application/javascript,".concat(encodeURIComponent(e)),n)}}catch(e){if(!r)throw Error("Inline worker is not supported");return new o[t](r,n)}}},2446:function(e,t,n){"use strict";var r,o,i,a=n(2100),u=a.Reader,s=a.Writer,c=a.util,l=a.roots.default||(a.roots.default={});l.onnx=((i={}).Version=(r={},(o=Object.create(r))[r[0]="_START_VERSION"]=0,o[r[1]="IR_VERSION_2017_10_10"]=1,o[r[2]="IR_VERSION_2017_10_30"]=2,o[r[3]="IR_VERSION_2017_11_3"]=3,o[r[4]="IR_VERSION_2019_1_22"]=4,o[r[5]="IR_VERSION_2019_3_18"]=5,o[r[6]="IR_VERSION_2019_9_19"]=6,o[r[7]="IR_VERSION_2020_5_8"]=7,o[r[8]="IR_VERSION_2021_7_30"]=8,o[r[9]="IR_VERSION"]=9,o),i.AttributeProto=function(){function e(e){if(this.floats=[],this.ints=[],this.strings=[],this.tensors=[],this.graphs=[],this.sparseTensors=[],this.typeProtos=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.name="",e.prototype.refAttrName="",e.prototype.docString="",e.prototype.type=0,e.prototype.f=0,e.prototype.i=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.s=c.newBuffer([]),e.prototype.t=null,e.prototype.g=null,e.prototype.sparseTensor=null,e.prototype.tp=null,e.prototype.floats=c.emptyArray,e.prototype.ints=c.emptyArray,e.prototype.strings=c.emptyArray,e.prototype.tensors=c.emptyArray,e.prototype.graphs=c.emptyArray,e.prototype.sparseTensors=c.emptyArray,e.prototype.typeProtos=c.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=s.create()),null!=e.name&&Object.hasOwnProperty.call(e,"name")&&t.uint32(10).string(e.name),null!=e.f&&Object.hasOwnProperty.call(e,"f")&&t.uint32(21).float(e.f),null!=e.i&&Object.hasOwnProperty.call(e,"i")&&t.uint32(24).int64(e.i),null!=e.s&&Object.hasOwnProperty.call(e,"s")&&t.uint32(34).bytes(e.s),null!=e.t&&Object.hasOwnProperty.call(e,"t")&&l.onnx.TensorProto.encode(e.t,t.uint32(42).fork()).ldelim(),null!=e.g&&Object.hasOwnProperty.call(e,"g")&&l.onnx.GraphProto.encode(e.g,t.uint32(50).fork()).ldelim(),null!=e.floats&&e.floats.length){t.uint32(58).fork();for(var n=0;n<e.floats.length;++n)t.float(e.floats[n]);t.ldelim()}if(null!=e.ints&&e.ints.length){for(t.uint32(66).fork(),n=0;n<e.ints.length;++n)t.int64(e.ints[n]);t.ldelim()}if(null!=e.strings&&e.strings.length)for(n=0;n<e.strings.length;++n)t.uint32(74).bytes(e.strings[n]);if(null!=e.tensors&&e.tensors.length)for(n=0;n<e.tensors.length;++n)l.onnx.TensorProto.encode(e.tensors[n],t.uint32(82).fork()).ldelim();if(null!=e.graphs&&e.graphs.length)for(n=0;n<e.graphs.length;++n)l.onnx.GraphProto.encode(e.graphs[n],t.uint32(90).fork()).ldelim();if(null!=e.docString&&Object.hasOwnProperty.call(e,"docString")&&t.uint32(106).string(e.docString),null!=e.tp&&Object.hasOwnProperty.call(e,"tp")&&l.onnx.TypeProto.encode(e.tp,t.uint32(114).fork()).ldelim(),null!=e.typeProtos&&e.typeProtos.length)for(n=0;n<e.typeProtos.length;++n)l.onnx.TypeProto.encode(e.typeProtos[n],t.uint32(122).fork()).ldelim();if(null!=e.type&&Object.hasOwnProperty.call(e,"type")&&t.uint32(160).int32(e.type),null!=e.refAttrName&&Object.hasOwnProperty.call(e,"refAttrName")&&t.uint32(170).string(e.refAttrName),null!=e.sparseTensor&&Object.hasOwnProperty.call(e,"sparseTensor")&&l.onnx.SparseTensorProto.encode(e.sparseTensor,t.uint32(178).fork()).ldelim(),null!=e.sparseTensors&&e.sparseTensors.length)for(n=0;n<e.sparseTensors.length;++n)l.onnx.SparseTensorProto.encode(e.sparseTensors[n],t.uint32(186).fork()).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof u||(e=u.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new l.onnx.AttributeProto;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.name=e.string();break;case 21:r.refAttrName=e.string();break;case 13:r.docString=e.string();break;case 20:r.type=e.int32();break;case 2:r.f=e.float();break;case 3:r.i=e.int64();break;case 4:r.s=e.bytes();break;case 5:r.t=l.onnx.TensorProto.decode(e,e.uint32());break;case 6:r.g=l.onnx.GraphProto.decode(e,e.uint32());break;case 22:r.sparseTensor=l.onnx.SparseTensorProto.decode(e,e.uint32());break;case 14:r.tp=l.onnx.TypeProto.decode(e,e.uint32());break;case 7:if(r.floats&&r.floats.length||(r.floats=[]),2==(7&o))for(var i=e.uint32()+e.pos;e.pos<i;)r.floats.push(e.float());else r.floats.push(e.float());break;case 8:if(r.ints&&r.ints.length||(r.ints=[]),2==(7&o))for(i=e.uint32()+e.pos;e.pos<i;)r.ints.push(e.int64());else r.ints.push(e.int64());break;case 9:r.strings&&r.strings.length||(r.strings=[]),r.strings.push(e.bytes());break;case 10:r.tensors&&r.tensors.length||(r.tensors=[]),r.tensors.push(l.onnx.TensorProto.decode(e,e.uint32()));break;case 11:r.graphs&&r.graphs.length||(r.graphs=[]),r.graphs.push(l.onnx.GraphProto.decode(e,e.uint32()));break;case 23:r.sparseTensors&&r.sparseTensors.length||(r.sparseTensors=[]),r.sparseTensors.push(l.onnx.SparseTensorProto.decode(e,e.uint32()));break;case 15:r.typeProtos&&r.typeProtos.length||(r.typeProtos=[]),r.typeProtos.push(l.onnx.TypeProto.decode(e,e.uint32()));break;default:e.skipType(7&o)}}return r},e.decodeDelimited=function(e){return e instanceof u||(e=new u(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.name&&e.hasOwnProperty("name")&&!c.isString(e.name))return"name: string expected";if(null!=e.refAttrName&&e.hasOwnProperty("refAttrName")&&!c.isString(e.refAttrName))return"refAttrName: string expected";if(null!=e.docString&&e.hasOwnProperty("docString")&&!c.isString(e.docString))return"docString: string expected";if(null!=e.type&&e.hasOwnProperty("type"))switch(e.type){default:return"type: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 11:case 13:case 6:case 7:case 8:case 9:case 10:case 12:case 14:}if(null!=e.f&&e.hasOwnProperty("f")&&"number"!=typeof e.f)return"f: number expected";if(null!=e.i&&e.hasOwnProperty("i")&&!(c.isInteger(e.i)||e.i&&c.isInteger(e.i.low)&&c.isInteger(e.i.high)))return"i: integer|Long expected";if(null!=e.s&&e.hasOwnProperty("s")&&!(e.s&&"number"==typeof e.s.length||c.isString(e.s)))return"s: buffer expected";if(null!=e.t&&e.hasOwnProperty("t")&&(n=l.onnx.TensorProto.verify(e.t)))return"t."+n;if(null!=e.g&&e.hasOwnProperty("g")&&(n=l.onnx.GraphProto.verify(e.g)))return"g."+n;if(null!=e.sparseTensor&&e.hasOwnProperty("sparseTensor")&&(n=l.onnx.SparseTensorProto.verify(e.sparseTensor)))return"sparseTensor."+n;if(null!=e.tp&&e.hasOwnProperty("tp")&&(n=l.onnx.TypeProto.verify(e.tp)))return"tp."+n;if(null!=e.floats&&e.hasOwnProperty("floats")){if(!Array.isArray(e.floats))return"floats: array expected";for(var t=0;t<e.floats.length;++t)if("number"!=typeof e.floats[t])return"floats: number[] expected"}if(null!=e.ints&&e.hasOwnProperty("ints")){if(!Array.isArray(e.ints))return"ints: array expected";for(t=0;t<e.ints.length;++t)if(!(c.isInteger(e.ints[t])||e.ints[t]&&c.isInteger(e.ints[t].low)&&c.isInteger(e.ints[t].high)))return"ints: integer|Long[] expected"}if(null!=e.strings&&e.hasOwnProperty("strings")){if(!Array.isArray(e.strings))return"strings: array expected";for(t=0;t<e.strings.length;++t)if(!(e.strings[t]&&"number"==typeof e.strings[t].length||c.isString(e.strings[t])))return"strings: buffer[] expected"}if(null!=e.tensors&&e.hasOwnProperty("tensors")){if(!Array.isArray(e.tensors))return"tensors: array expected";for(t=0;t<e.tensors.length;++t)if(n=l.onnx.TensorProto.verify(e.tensors[t]))return"tensors."+n}if(null!=e.graphs&&e.hasOwnProperty("graphs")){if(!Array.isArray(e.graphs))return"graphs: array expected";for(t=0;t<e.graphs.length;++t)if(n=l.onnx.GraphProto.verify(e.graphs[t]))return"graphs."+n}if(null!=e.sparseTensors&&e.hasOwnProperty("sparseTensors")){if(!Array.isArray(e.sparseTensors))return"sparseTensors: array expected";for(t=0;t<e.sparseTensors.length;++t)if(n=l.onnx.SparseTensorProto.verify(e.sparseTensors[t]))return"sparseTensors."+n}if(null!=e.typeProtos&&e.hasOwnProperty("typeProtos")){if(!Array.isArray(e.typeProtos))return"typeProtos: array expected";for(t=0;t<e.typeProtos.length;++t){var n;if(n=l.onnx.TypeProto.verify(e.typeProtos[t]))return"typeProtos."+n}}return null},e.fromObject=function(e){if(e instanceof l.onnx.AttributeProto)return e;var t=new l.onnx.AttributeProto;switch(null!=e.name&&(t.name=String(e.name)),null!=e.refAttrName&&(t.refAttrName=String(e.refAttrName)),null!=e.docString&&(t.docString=String(e.docString)),e.type){default:if("number"==typeof e.type){t.type=e.type;break}break;case"UNDEFINED":case 0:t.type=0;break;case"FLOAT":case 1:t.type=1;break;case"INT":case 2:t.type=2;break;case"STRING":case 3:t.type=3;break;case"TENSOR":case 4:t.type=4;break;case"GRAPH":case 5:t.type=5;break;case"SPARSE_TENSOR":case 11:t.type=11;break;case"TYPE_PROTO":case 13:t.type=13;break;case"FLOATS":case 6:t.type=6;break;case"INTS":case 7:t.type=7;break;case"STRINGS":case 8:t.type=8;break;case"TENSORS":case 9:t.type=9;break;case"GRAPHS":case 10:t.type=10;break;case"SPARSE_TENSORS":case 12:t.type=12;break;case"TYPE_PROTOS":case 14:t.type=14}if(null!=e.f&&(t.f=Number(e.f)),null!=e.i&&(c.Long?(t.i=c.Long.fromValue(e.i)).unsigned=!1:"string"==typeof e.i?t.i=parseInt(e.i,10):"number"==typeof e.i?t.i=e.i:"object"==typeof e.i&&(t.i=new c.LongBits(e.i.low>>>0,e.i.high>>>0).toNumber())),null!=e.s&&("string"==typeof e.s?c.base64.decode(e.s,t.s=c.newBuffer(c.base64.length(e.s)),0):e.s.length>=0&&(t.s=e.s)),null!=e.t){if("object"!=typeof e.t)throw TypeError(".onnx.AttributeProto.t: object expected");t.t=l.onnx.TensorProto.fromObject(e.t)}if(null!=e.g){if("object"!=typeof e.g)throw TypeError(".onnx.AttributeProto.g: object expected");t.g=l.onnx.GraphProto.fromObject(e.g)}if(null!=e.sparseTensor){if("object"!=typeof e.sparseTensor)throw TypeError(".onnx.AttributeProto.sparseTensor: object expected");t.sparseTensor=l.onnx.SparseTensorProto.fromObject(e.sparseTensor)}if(null!=e.tp){if("object"!=typeof e.tp)throw TypeError(".onnx.AttributeProto.tp: object expected");t.tp=l.onnx.TypeProto.fromObject(e.tp)}if(e.floats){if(!Array.isArray(e.floats))throw TypeError(".onnx.AttributeProto.floats: array expected");t.floats=[];for(var n=0;n<e.floats.length;++n)t.floats[n]=Number(e.floats[n])}if(e.ints){if(!Array.isArray(e.ints))throw TypeError(".onnx.AttributeProto.ints: array expected");for(t.ints=[],n=0;n<e.ints.length;++n)c.Long?(t.ints[n]=c.Long.fromValue(e.ints[n])).unsigned=!1:"string"==typeof e.ints[n]?t.ints[n]=parseInt(e.ints[n],10):"number"==typeof e.ints[n]?t.ints[n]=e.ints[n]:"object"==typeof e.ints[n]&&(t.ints[n]=new c.LongBits(e.ints[n].low>>>0,e.ints[n].high>>>0).toNumber())}if(e.strings){if(!Array.isArray(e.strings))throw TypeError(".onnx.AttributeProto.strings: array expected");for(t.strings=[],n=0;n<e.strings.length;++n)"string"==typeof e.strings[n]?c.base64.decode(e.strings[n],t.strings[n]=c.newBuffer(c.base64.length(e.strings[n])),0):e.strings[n].length>=0&&(t.strings[n]=e.strings[n])}if(e.tensors){if(!Array.isArray(e.tensors))throw TypeError(".onnx.AttributeProto.tensors: array expected");for(t.tensors=[],n=0;n<e.tensors.length;++n){if("object"!=typeof e.tensors[n])throw TypeError(".onnx.AttributeProto.tensors: object expected");t.tensors[n]=l.onnx.TensorProto.fromObject(e.tensors[n])}}if(e.graphs){if(!Array.isArray(e.graphs))throw TypeError(".onnx.AttributeProto.graphs: array expected");for(t.graphs=[],n=0;n<e.graphs.length;++n){if("object"!=typeof e.graphs[n])throw TypeError(".onnx.AttributeProto.graphs: object expected");t.graphs[n]=l.onnx.GraphProto.fromObject(e.graphs[n])}}if(e.sparseTensors){if(!Array.isArray(e.sparseTensors))throw TypeError(".onnx.AttributeProto.sparseTensors: array expected");for(t.sparseTensors=[],n=0;n<e.sparseTensors.length;++n){if("object"!=typeof e.sparseTensors[n])throw TypeError(".onnx.AttributeProto.sparseTensors: object expected");t.sparseTensors[n]=l.onnx.SparseTensorProto.fromObject(e.sparseTensors[n])}}if(e.typeProtos){if(!Array.isArray(e.typeProtos))throw TypeError(".onnx.AttributeProto.typeProtos: array expected");for(t.typeProtos=[],n=0;n<e.typeProtos.length;++n){if("object"!=typeof e.typeProtos[n])throw TypeError(".onnx.AttributeProto.typeProtos: object expected");t.typeProtos[n]=l.onnx.TypeProto.fromObject(e.typeProtos[n])}}return t},e.toObject=function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.floats=[],n.ints=[],n.strings=[],n.tensors=[],n.graphs=[],n.typeProtos=[],n.sparseTensors=[]),t.defaults){if(n.name="",n.f=0,c.Long){var r=new c.Long(0,0,!1);n.i=t.longs===String?r.toString():t.longs===Number?r.toNumber():r}else n.i=t.longs===String?"0":0;t.bytes===String?n.s="":(n.s=[],t.bytes!==Array&&(n.s=c.newBuffer(n.s))),n.t=null,n.g=null,n.docString="",n.tp=null,n.type=t.enums===String?"UNDEFINED":0,n.refAttrName="",n.sparseTensor=null}if(null!=e.name&&e.hasOwnProperty("name")&&(n.name=e.name),null!=e.f&&e.hasOwnProperty("f")&&(n.f=t.json&&!isFinite(e.f)?String(e.f):e.f),null!=e.i&&e.hasOwnProperty("i")&&("number"==typeof e.i?n.i=t.longs===String?String(e.i):e.i:n.i=t.longs===String?c.Long.prototype.toString.call(e.i):t.longs===Number?new c.LongBits(e.i.low>>>0,e.i.high>>>0).toNumber():e.i),null!=e.s&&e.hasOwnProperty("s")&&(n.s=t.bytes===String?c.base64.encode(e.s,0,e.s.length):t.bytes===Array?Array.prototype.slice.call(e.s):e.s),null!=e.t&&e.hasOwnProperty("t")&&(n.t=l.onnx.TensorProto.toObject(e.t,t)),null!=e.g&&e.hasOwnProperty("g")&&(n.g=l.onnx.GraphProto.toObject(e.g,t)),e.floats&&e.floats.length){n.floats=[];for(var o=0;o<e.floats.length;++o)n.floats[o]=t.json&&!isFinite(e.floats[o])?String(e.floats[o]):e.floats[o]}if(e.ints&&e.ints.length)for(n.ints=[],o=0;o<e.ints.length;++o)"number"==typeof e.ints[o]?n.ints[o]=t.longs===String?String(e.ints[o]):e.ints[o]:n.ints[o]=t.longs===String?c.Long.prototype.toString.call(e.ints[o]):t.longs===Number?new c.LongBits(e.ints[o].low>>>0,e.ints[o].high>>>0).toNumber():e.ints[o];if(e.strings&&e.strings.length)for(n.strings=[],o=0;o<e.strings.length;++o)n.strings[o]=t.bytes===String?c.base64.encode(e.strings[o],0,e.strings[o].length):t.bytes===Array?Array.prototype.slice.call(e.strings[o]):e.strings[o];if(e.tensors&&e.tensors.length)for(n.tensors=[],o=0;o<e.tensors.length;++o)n.tensors[o]=l.onnx.TensorProto.toObject(e.tensors[o],t);if(e.graphs&&e.graphs.length)for(n.graphs=[],o=0;o<e.graphs.length;++o)n.graphs[o]=l.onnx.GraphProto.toObject(e.graphs[o],t);if(null!=e.docString&&e.hasOwnProperty("docString")&&(n.docString=e.docString),null!=e.tp&&e.hasOwnProperty("tp")&&(n.tp=l.onnx.TypeProto.toObject(e.tp,t)),e.typeProtos&&e.typeProtos.length)for(n.typeProtos=[],o=0;o<e.typeProtos.length;++o)n.typeProtos[o]=l.onnx.TypeProto.toObject(e.typeProtos[o],t);if(null!=e.type&&e.hasOwnProperty("type")&&(n.type=t.enums===String?void 0===l.onnx.AttributeProto.AttributeType[e.type]?e.type:l.onnx.AttributeProto.AttributeType[e.type]:e.type),null!=e.refAttrName&&e.hasOwnProperty("refAttrName")&&(n.refAttrName=e.refAttrName),null!=e.sparseTensor&&e.hasOwnProperty("sparseTensor")&&(n.sparseTensor=l.onnx.SparseTensorProto.toObject(e.sparseTensor,t)),e.sparseTensors&&e.sparseTensors.length)for(n.sparseTensors=[],o=0;o<e.sparseTensors.length;++o)n.sparseTensors[o]=l.onnx.SparseTensorProto.toObject(e.sparseTensors[o],t);return n},e.prototype.toJSON=function(){return this.constructor.toObject(this,a.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/onnx.AttributeProto"},e.AttributeType=function(){var e={},t=Object.create(e);return t[e[0]="UNDEFINED"]=0,t[e[1]="FLOAT"]=1,t[e[2]="INT"]=2,t[e[3]="STRING"]=3,t[e[4]="TENSOR"]=4,t[e[5]="GRAPH"]=5,t[e[11]="SPARSE_TENSOR"]=11,t[e[13]="TYPE_PROTO"]=13,t[e[6]="FLOATS"]=6,t[e[7]="INTS"]=7,t[e[8]="STRINGS"]=8,t[e[9]="TENSORS"]=9,t[e[10]="GRAPHS"]=10,t[e[12]="SPARSE_TENSORS"]=12,t[e[14]="TYPE_PROTOS"]=14,t}(),e}(),i.ValueInfoProto=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.name="",e.prototype.type=null,e.prototype.docString="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=s.create()),null!=e.name&&Object.hasOwnProperty.call(e,"name")&&t.uint32(10).string(e.name),null!=e.type&&Object.hasOwnProperty.call(e,"type")&&l.onnx.TypeProto.encode(e.type,t.uint32(18).fork()).ldelim(),null!=e.docString&&Object.hasOwnProperty.call(e,"docString")&&t.uint32(26).string(e.docString),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof u||(e=u.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new l.onnx.ValueInfoProto;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.name=e.string();break;case 2:r.type=l.onnx.TypeProto.decode(e,e.uint32());break;case 3:r.docString=e.string();break;default:e.skipType(7&o)}}return r},e.decodeDelimited=function(e){return e instanceof u||(e=new u(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.name&&e.hasOwnProperty("name")&&!c.isString(e.name))return"name: string expected";if(null!=e.type&&e.hasOwnProperty("type")){var t=l.onnx.TypeProto.verify(e.type);if(t)return"type."+t}return null!=e.docString&&e.hasOwnProperty("docString")&&!c.isString(e.docString)?"docString: string expected":null},e.fromObject=function(e){if(e instanceof l.onnx.ValueInfoProto)return e;var t=new l.onnx.ValueInfoProto;if(null!=e.name&&(t.name=String(e.name)),null!=e.type){if("object"!=typeof e.type)throw TypeError(".onnx.ValueInfoProto.type: object expected");t.type=l.onnx.TypeProto.fromObject(e.type)}return null!=e.docString&&(t.docString=String(e.docString)),t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.name="",n.type=null,n.docString=""),null!=e.name&&e.hasOwnProperty("name")&&(n.name=e.name),null!=e.type&&e.hasOwnProperty("type")&&(n.type=l.onnx.TypeProto.toObject(e.type,t)),null!=e.docString&&e.hasOwnProperty("docString")&&(n.docString=e.docString),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,a.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/onnx.ValueInfoProto"},e}(),i.NodeProto=function(){function e(e){if(this.input=[],this.output=[],this.attribute=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.input=c.emptyArray,e.prototype.output=c.emptyArray,e.prototype.name="",e.prototype.opType="",e.prototype.domain="",e.prototype.attribute=c.emptyArray,e.prototype.docString="",e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=s.create()),null!=e.input&&e.input.length)for(var n=0;n<e.input.length;++n)t.uint32(10).string(e.input[n]);if(null!=e.output&&e.output.length)for(n=0;n<e.output.length;++n)t.uint32(18).string(e.output[n]);if(null!=e.name&&Object.hasOwnProperty.call(e,"name")&&t.uint32(26).string(e.name),null!=e.opType&&Object.hasOwnProperty.call(e,"opType")&&t.uint32(34).string(e.opType),null!=e.attribute&&e.attribute.length)for(n=0;n<e.attribute.length;++n)l.onnx.AttributeProto.encode(e.attribute[n],t.uint32(42).fork()).ldelim();return null!=e.docString&&Object.hasOwnProperty.call(e,"docString")&&t.uint32(50).string(e.docString),null!=e.domain&&Object.hasOwnProperty.call(e,"domain")&&t.uint32(58).string(e.domain),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof u||(e=u.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new l.onnx.NodeProto;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.input&&r.input.length||(r.input=[]),r.input.push(e.string());break;case 2:r.output&&r.output.length||(r.output=[]),r.output.push(e.string());break;case 3:r.name=e.string();break;case 4:r.opType=e.string();break;case 7:r.domain=e.string();break;case 5:r.attribute&&r.attribute.length||(r.attribute=[]),r.attribute.push(l.onnx.AttributeProto.decode(e,e.uint32()));break;case 6:r.docString=e.string();break;default:e.skipType(7&o)}}return r},e.decodeDelimited=function(e){return e instanceof u||(e=new u(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.input&&e.hasOwnProperty("input")){if(!Array.isArray(e.input))return"input: array expected";for(var t=0;t<e.input.length;++t)if(!c.isString(e.input[t]))return"input: string[] expected"}if(null!=e.output&&e.hasOwnProperty("output")){if(!Array.isArray(e.output))return"output: array expected";for(t=0;t<e.output.length;++t)if(!c.isString(e.output[t]))return"output: string[] expected"}if(null!=e.name&&e.hasOwnProperty("name")&&!c.isString(e.name))return"name: string expected";if(null!=e.opType&&e.hasOwnProperty("opType")&&!c.isString(e.opType))return"opType: string expected";if(null!=e.domain&&e.hasOwnProperty("domain")&&!c.isString(e.domain))return"domain: string expected";if(null!=e.attribute&&e.hasOwnProperty("attribute")){if(!Array.isArray(e.attribute))return"attribute: array expected";for(t=0;t<e.attribute.length;++t){var n=l.onnx.AttributeProto.verify(e.attribute[t]);if(n)return"attribute."+n}}return null!=e.docString&&e.hasOwnProperty("docString")&&!c.isString(e.docString)?"docString: string expected":null},e.fromObject=function(e){if(e instanceof l.onnx.NodeProto)return e;var t=new l.onnx.NodeProto;if(e.input){if(!Array.isArray(e.input))throw TypeError(".onnx.NodeProto.input: array expected");t.input=[];for(var n=0;n<e.input.length;++n)t.input[n]=String(e.input[n])}if(e.output){if(!Array.isArray(e.output))throw TypeError(".onnx.NodeProto.output: array expected");for(t.output=[],n=0;n<e.output.length;++n)t.output[n]=String(e.output[n])}if(null!=e.name&&(t.name=String(e.name)),null!=e.opType&&(t.opType=String(e.opType)),null!=e.domain&&(t.domain=String(e.domain)),e.attribute){if(!Array.isArray(e.attribute))throw TypeError(".onnx.NodeProto.attribute: array expected");for(t.attribute=[],n=0;n<e.attribute.length;++n){if("object"!=typeof e.attribute[n])throw TypeError(".onnx.NodeProto.attribute: object expected");t.attribute[n]=l.onnx.AttributeProto.fromObject(e.attribute[n])}}return null!=e.docString&&(t.docString=String(e.docString)),t},e.toObject=function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.input=[],n.output=[],n.attribute=[]),t.defaults&&(n.name="",n.opType="",n.docString="",n.domain=""),e.input&&e.input.length){n.input=[];for(var r=0;r<e.input.length;++r)n.input[r]=e.input[r]}if(e.output&&e.output.length)for(n.output=[],r=0;r<e.output.length;++r)n.output[r]=e.output[r];if(null!=e.name&&e.hasOwnProperty("name")&&(n.name=e.name),null!=e.opType&&e.hasOwnProperty("opType")&&(n.opType=e.opType),e.attribute&&e.attribute.length)for(n.attribute=[],r=0;r<e.attribute.length;++r)n.attribute[r]=l.onnx.AttributeProto.toObject(e.attribute[r],t);return null!=e.docString&&e.hasOwnProperty("docString")&&(n.docString=e.docString),null!=e.domain&&e.hasOwnProperty("domain")&&(n.domain=e.domain),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,a.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/onnx.NodeProto"},e}(),i.TrainingInfoProto=function(){function e(e){if(this.initializationBinding=[],this.updateBinding=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.initialization=null,e.prototype.algorithm=null,e.prototype.initializationBinding=c.emptyArray,e.prototype.updateBinding=c.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=s.create()),null!=e.initialization&&Object.hasOwnProperty.call(e,"initialization")&&l.onnx.GraphProto.encode(e.initialization,t.uint32(10).fork()).ldelim(),null!=e.algorithm&&Object.hasOwnProperty.call(e,"algorithm")&&l.onnx.GraphProto.encode(e.algorithm,t.uint32(18).fork()).ldelim(),null!=e.initializationBinding&&e.initializationBinding.length)for(var n=0;n<e.initializationBinding.length;++n)l.onnx.StringStringEntryProto.encode(e.initializationBinding[n],t.uint32(26).fork()).ldelim();if(null!=e.updateBinding&&e.updateBinding.length)for(n=0;n<e.updateBinding.length;++n)l.onnx.StringStringEntryProto.encode(e.updateBinding[n],t.uint32(34).fork()).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof u||(e=u.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new l.onnx.TrainingInfoProto;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.initialization=l.onnx.GraphProto.decode(e,e.uint32());break;case 2:r.algorithm=l.onnx.GraphProto.decode(e,e.uint32());break;case 3:r.initializationBinding&&r.initializationBinding.length||(r.initializationBinding=[]),r.initializationBinding.push(l.onnx.StringStringEntryProto.decode(e,e.uint32()));break;case 4:r.updateBinding&&r.updateBinding.length||(r.updateBinding=[]),r.updateBinding.push(l.onnx.StringStringEntryProto.decode(e,e.uint32()));break;default:e.skipType(7&o)}}return r},e.decodeDelimited=function(e){return e instanceof u||(e=new u(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.initialization&&e.hasOwnProperty("initialization")&&(n=l.onnx.GraphProto.verify(e.initialization)))return"initialization."+n;if(null!=e.algorithm&&e.hasOwnProperty("algorithm")&&(n=l.onnx.GraphProto.verify(e.algorithm)))return"algorithm."+n;if(null!=e.initializationBinding&&e.hasOwnProperty("initializationBinding")){if(!Array.isArray(e.initializationBinding))return"initializationBinding: array expected";for(var t=0;t<e.initializationBinding.length;++t)if(n=l.onnx.StringStringEntryProto.verify(e.initializationBinding[t]))return"initializationBinding."+n}if(null!=e.updateBinding&&e.hasOwnProperty("updateBinding")){if(!Array.isArray(e.updateBinding))return"updateBinding: array expected";for(t=0;t<e.updateBinding.length;++t){var n;if(n=l.onnx.StringStringEntryProto.verify(e.updateBinding[t]))return"updateBinding."+n}}return null},e.fromObject=function(e){if(e instanceof l.onnx.TrainingInfoProto)return e;var t=new l.onnx.TrainingInfoProto;if(null!=e.initialization){if("object"!=typeof e.initialization)throw TypeError(".onnx.TrainingInfoProto.initialization: object expected");t.initialization=l.onnx.GraphProto.fromObject(e.initialization)}if(null!=e.algorithm){if("object"!=typeof e.algorithm)throw TypeError(".onnx.TrainingInfoProto.algorithm: object expected");t.algorithm=l.onnx.GraphProto.fromObject(e.algorithm)}if(e.initializationBinding){if(!Array.isArray(e.initializationBinding))throw TypeError(".onnx.TrainingInfoProto.initializationBinding: array expected");t.initializationBinding=[];for(var n=0;n<e.initializationBinding.length;++n){if("object"!=typeof e.initializationBinding[n])throw TypeError(".onnx.TrainingInfoProto.initializationBinding: object expected");t.initializationBinding[n]=l.onnx.StringStringEntryProto.fromObject(e.initializationBinding[n])}}if(e.updateBinding){if(!Array.isArray(e.updateBinding))throw TypeError(".onnx.TrainingInfoProto.updateBinding: array expected");for(t.updateBinding=[],n=0;n<e.updateBinding.length;++n){if("object"!=typeof e.updateBinding[n])throw TypeError(".onnx.TrainingInfoProto.updateBinding: object expected");t.updateBinding[n]=l.onnx.StringStringEntryProto.fromObject(e.updateBinding[n])}}return t},e.toObject=function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.initializationBinding=[],n.updateBinding=[]),t.defaults&&(n.initialization=null,n.algorithm=null),null!=e.initialization&&e.hasOwnProperty("initialization")&&(n.initialization=l.onnx.GraphProto.toObject(e.initialization,t)),null!=e.algorithm&&e.hasOwnProperty("algorithm")&&(n.algorithm=l.onnx.GraphProto.toObject(e.algorithm,t)),e.initializationBinding&&e.initializationBinding.length){n.initializationBinding=[];for(var r=0;r<e.initializationBinding.length;++r)n.initializationBinding[r]=l.onnx.StringStringEntryProto.toObject(e.initializationBinding[r],t)}if(e.updateBinding&&e.updateBinding.length)for(n.updateBinding=[],r=0;r<e.updateBinding.length;++r)n.updateBinding[r]=l.onnx.StringStringEntryProto.toObject(e.updateBinding[r],t);return n},e.prototype.toJSON=function(){return this.constructor.toObject(this,a.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/onnx.TrainingInfoProto"},e}(),i.ModelProto=function(){function e(e){if(this.opsetImport=[],this.metadataProps=[],this.trainingInfo=[],this.functions=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.irVersion=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.opsetImport=c.emptyArray,e.prototype.producerName="",e.prototype.producerVersion="",e.prototype.domain="",e.prototype.modelVersion=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.docString="",e.prototype.graph=null,e.prototype.metadataProps=c.emptyArray,e.prototype.trainingInfo=c.emptyArray,e.prototype.functions=c.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=s.create()),null!=e.irVersion&&Object.hasOwnProperty.call(e,"irVersion")&&t.uint32(8).int64(e.irVersion),null!=e.producerName&&Object.hasOwnProperty.call(e,"producerName")&&t.uint32(18).string(e.producerName),null!=e.producerVersion&&Object.hasOwnProperty.call(e,"producerVersion")&&t.uint32(26).string(e.producerVersion),null!=e.domain&&Object.hasOwnProperty.call(e,"domain")&&t.uint32(34).string(e.domain),null!=e.modelVersion&&Object.hasOwnProperty.call(e,"modelVersion")&&t.uint32(40).int64(e.modelVersion),null!=e.docString&&Object.hasOwnProperty.call(e,"docString")&&t.uint32(50).string(e.docString),null!=e.graph&&Object.hasOwnProperty.call(e,"graph")&&l.onnx.GraphProto.encode(e.graph,t.uint32(58).fork()).ldelim(),null!=e.opsetImport&&e.opsetImport.length)for(var n=0;n<e.opsetImport.length;++n)l.onnx.OperatorSetIdProto.encode(e.opsetImport[n],t.uint32(66).fork()).ldelim();if(null!=e.metadataProps&&e.metadataProps.length)for(n=0;n<e.metadataProps.length;++n)l.onnx.StringStringEntryProto.encode(e.metadataProps[n],t.uint32(114).fork()).ldelim();if(null!=e.trainingInfo&&e.trainingInfo.length)for(n=0;n<e.trainingInfo.length;++n)l.onnx.TrainingInfoProto.encode(e.trainingInfo[n],t.uint32(162).fork()).ldelim();if(null!=e.functions&&e.functions.length)for(n=0;n<e.functions.length;++n)l.onnx.FunctionProto.encode(e.functions[n],t.uint32(202).fork()).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof u||(e=u.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new l.onnx.ModelProto;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.irVersion=e.int64();break;case 8:r.opsetImport&&r.opsetImport.length||(r.opsetImport=[]),r.opsetImport.push(l.onnx.OperatorSetIdProto.decode(e,e.uint32()));break;case 2:r.producerName=e.string();break;case 3:r.producerVersion=e.string();break;case 4:r.domain=e.string();break;case 5:r.modelVersion=e.int64();break;case 6:r.docString=e.string();break;case 7:r.graph=l.onnx.GraphProto.decode(e,e.uint32());break;case 14:r.metadataProps&&r.metadataProps.length||(r.metadataProps=[]),r.metadataProps.push(l.onnx.StringStringEntryProto.decode(e,e.uint32()));break;case 20:r.trainingInfo&&r.trainingInfo.length||(r.trainingInfo=[]),r.trainingInfo.push(l.onnx.TrainingInfoProto.decode(e,e.uint32()));break;case 25:r.functions&&r.functions.length||(r.functions=[]),r.functions.push(l.onnx.FunctionProto.decode(e,e.uint32()));break;default:e.skipType(7&o)}}return r},e.decodeDelimited=function(e){return e instanceof u||(e=new u(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.irVersion&&e.hasOwnProperty("irVersion")&&!(c.isInteger(e.irVersion)||e.irVersion&&c.isInteger(e.irVersion.low)&&c.isInteger(e.irVersion.high)))return"irVersion: integer|Long expected";if(null!=e.opsetImport&&e.hasOwnProperty("opsetImport")){if(!Array.isArray(e.opsetImport))return"opsetImport: array expected";for(var t=0;t<e.opsetImport.length;++t)if(n=l.onnx.OperatorSetIdProto.verify(e.opsetImport[t]))return"opsetImport."+n}if(null!=e.producerName&&e.hasOwnProperty("producerName")&&!c.isString(e.producerName))return"producerName: string expected";if(null!=e.producerVersion&&e.hasOwnProperty("producerVersion")&&!c.isString(e.producerVersion))return"producerVersion: string expected";if(null!=e.domain&&e.hasOwnProperty("domain")&&!c.isString(e.domain))return"domain: string expected";if(null!=e.modelVersion&&e.hasOwnProperty("modelVersion")&&!(c.isInteger(e.modelVersion)||e.modelVersion&&c.isInteger(e.modelVersion.low)&&c.isInteger(e.modelVersion.high)))return"modelVersion: integer|Long expected";if(null!=e.docString&&e.hasOwnProperty("docString")&&!c.isString(e.docString))return"docString: string expected";if(null!=e.graph&&e.hasOwnProperty("graph")&&(n=l.onnx.GraphProto.verify(e.graph)))return"graph."+n;if(null!=e.metadataProps&&e.hasOwnProperty("metadataProps")){if(!Array.isArray(e.metadataProps))return"metadataProps: array expected";for(t=0;t<e.metadataProps.length;++t)if(n=l.onnx.StringStringEntryProto.verify(e.metadataProps[t]))return"metadataProps."+n}if(null!=e.trainingInfo&&e.hasOwnProperty("trainingInfo")){if(!Array.isArray(e.trainingInfo))return"trainingInfo: array expected";for(t=0;t<e.trainingInfo.length;++t)if(n=l.onnx.TrainingInfoProto.verify(e.trainingInfo[t]))return"trainingInfo."+n}if(null!=e.functions&&e.hasOwnProperty("functions")){if(!Array.isArray(e.functions))return"functions: array expected";for(t=0;t<e.functions.length;++t){var n;if(n=l.onnx.FunctionProto.verify(e.functions[t]))return"functions."+n}}return null},e.fromObject=function(e){if(e instanceof l.onnx.ModelProto)return e;var t=new l.onnx.ModelProto;if(null!=e.irVersion&&(c.Long?(t.irVersion=c.Long.fromValue(e.irVersion)).unsigned=!1:"string"==typeof e.irVersion?t.irVersion=parseInt(e.irVersion,10):"number"==typeof e.irVersion?t.irVersion=e.irVersion:"object"==typeof e.irVersion&&(t.irVersion=new c.LongBits(e.irVersion.low>>>0,e.irVersion.high>>>0).toNumber())),e.opsetImport){if(!Array.isArray(e.opsetImport))throw TypeError(".onnx.ModelProto.opsetImport: array expected");t.opsetImport=[];for(var n=0;n<e.opsetImport.length;++n){if("object"!=typeof e.opsetImport[n])throw TypeError(".onnx.ModelProto.opsetImport: object expected");t.opsetImport[n]=l.onnx.OperatorSetIdProto.fromObject(e.opsetImport[n])}}if(null!=e.producerName&&(t.producerName=String(e.producerName)),null!=e.producerVersion&&(t.producerVersion=String(e.producerVersion)),null!=e.domain&&(t.domain=String(e.domain)),null!=e.modelVersion&&(c.Long?(t.modelVersion=c.Long.fromValue(e.modelVersion)).unsigned=!1:"string"==typeof e.modelVersion?t.modelVersion=parseInt(e.modelVersion,10):"number"==typeof e.modelVersion?t.modelVersion=e.modelVersion:"object"==typeof e.modelVersion&&(t.modelVersion=new c.LongBits(e.modelVersion.low>>>0,e.modelVersion.high>>>0).toNumber())),null!=e.docString&&(t.docString=String(e.docString)),null!=e.graph){if("object"!=typeof e.graph)throw TypeError(".onnx.ModelProto.graph: object expected");t.graph=l.onnx.GraphProto.fromObject(e.graph)}if(e.metadataProps){if(!Array.isArray(e.metadataProps))throw TypeError(".onnx.ModelProto.metadataProps: array expected");for(t.metadataProps=[],n=0;n<e.metadataProps.length;++n){if("object"!=typeof e.metadataProps[n])throw TypeError(".onnx.ModelProto.metadataProps: object expected");t.metadataProps[n]=l.onnx.StringStringEntryProto.fromObject(e.metadataProps[n])}}if(e.trainingInfo){if(!Array.isArray(e.trainingInfo))throw TypeError(".onnx.ModelProto.trainingInfo: array expected");for(t.trainingInfo=[],n=0;n<e.trainingInfo.length;++n){if("object"!=typeof e.trainingInfo[n])throw TypeError(".onnx.ModelProto.trainingInfo: object expected");t.trainingInfo[n]=l.onnx.TrainingInfoProto.fromObject(e.trainingInfo[n])}}if(e.functions){if(!Array.isArray(e.functions))throw TypeError(".onnx.ModelProto.functions: array expected");for(t.functions=[],n=0;n<e.functions.length;++n){if("object"!=typeof e.functions[n])throw TypeError(".onnx.ModelProto.functions: object expected");t.functions[n]=l.onnx.FunctionProto.fromObject(e.functions[n])}}return t},e.toObject=function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.opsetImport=[],n.metadataProps=[],n.trainingInfo=[],n.functions=[]),t.defaults){if(c.Long){var r=new c.Long(0,0,!1);n.irVersion=t.longs===String?r.toString():t.longs===Number?r.toNumber():r}else n.irVersion=t.longs===String?"0":0;n.producerName="",n.producerVersion="",n.domain="",c.Long?(r=new c.Long(0,0,!1),n.modelVersion=t.longs===String?r.toString():t.longs===Number?r.toNumber():r):n.modelVersion=t.longs===String?"0":0,n.docString="",n.graph=null}if(null!=e.irVersion&&e.hasOwnProperty("irVersion")&&("number"==typeof e.irVersion?n.irVersion=t.longs===String?String(e.irVersion):e.irVersion:n.irVersion=t.longs===String?c.Long.prototype.toString.call(e.irVersion):t.longs===Number?new c.LongBits(e.irVersion.low>>>0,e.irVersion.high>>>0).toNumber():e.irVersion),null!=e.producerName&&e.hasOwnProperty("producerName")&&(n.producerName=e.producerName),null!=e.producerVersion&&e.hasOwnProperty("producerVersion")&&(n.producerVersion=e.producerVersion),null!=e.domain&&e.hasOwnProperty("domain")&&(n.domain=e.domain),null!=e.modelVersion&&e.hasOwnProperty("modelVersion")&&("number"==typeof e.modelVersion?n.modelVersion=t.longs===String?String(e.modelVersion):e.modelVersion:n.modelVersion=t.longs===String?c.Long.prototype.toString.call(e.modelVersion):t.longs===Number?new c.LongBits(e.modelVersion.low>>>0,e.modelVersion.high>>>0).toNumber():e.modelVersion),null!=e.docString&&e.hasOwnProperty("docString")&&(n.docString=e.docString),null!=e.graph&&e.hasOwnProperty("graph")&&(n.graph=l.onnx.GraphProto.toObject(e.graph,t)),e.opsetImport&&e.opsetImport.length){n.opsetImport=[];for(var o=0;o<e.opsetImport.length;++o)n.opsetImport[o]=l.onnx.OperatorSetIdProto.toObject(e.opsetImport[o],t)}if(e.metadataProps&&e.metadataProps.length)for(n.metadataProps=[],o=0;o<e.metadataProps.length;++o)n.metadataProps[o]=l.onnx.StringStringEntryProto.toObject(e.metadataProps[o],t);if(e.trainingInfo&&e.trainingInfo.length)for(n.trainingInfo=[],o=0;o<e.trainingInfo.length;++o)n.trainingInfo[o]=l.onnx.TrainingInfoProto.toObject(e.trainingInfo[o],t);if(e.functions&&e.functions.length)for(n.functions=[],o=0;o<e.functions.length;++o)n.functions[o]=l.onnx.FunctionProto.toObject(e.functions[o],t);return n},e.prototype.toJSON=function(){return this.constructor.toObject(this,a.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/onnx.ModelProto"},e}(),i.StringStringEntryProto=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.key="",e.prototype.value="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=s.create()),null!=e.key&&Object.hasOwnProperty.call(e,"key")&&t.uint32(10).string(e.key),null!=e.value&&Object.hasOwnProperty.call(e,"value")&&t.uint32(18).string(e.value),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof u||(e=u.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new l.onnx.StringStringEntryProto;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.key=e.string();break;case 2:r.value=e.string();break;default:e.skipType(7&o)}}return r},e.decodeDelimited=function(e){return e instanceof u||(e=new u(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.key&&e.hasOwnProperty("key")&&!c.isString(e.key)?"key: string expected":null!=e.value&&e.hasOwnProperty("value")&&!c.isString(e.value)?"value: string expected":null},e.fromObject=function(e){if(e instanceof l.onnx.StringStringEntryProto)return e;var t=new l.onnx.StringStringEntryProto;return null!=e.key&&(t.key=String(e.key)),null!=e.value&&(t.value=String(e.value)),t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.key="",n.value=""),null!=e.key&&e.hasOwnProperty("key")&&(n.key=e.key),null!=e.value&&e.hasOwnProperty("value")&&(n.value=e.value),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,a.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/onnx.StringStringEntryProto"},e}(),i.TensorAnnotation=function(){function e(e){if(this.quantParameterTensorNames=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.tensorName="",e.prototype.quantParameterTensorNames=c.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=s.create()),null!=e.tensorName&&Object.hasOwnProperty.call(e,"tensorName")&&t.uint32(10).string(e.tensorName),null!=e.quantParameterTensorNames&&e.quantParameterTensorNames.length)for(var n=0;n<e.quantParameterTensorNames.length;++n)l.onnx.StringStringEntryProto.encode(e.quantParameterTensorNames[n],t.uint32(18).fork()).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof u||(e=u.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new l.onnx.TensorAnnotation;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.tensorName=e.string();break;case 2:r.quantParameterTensorNames&&r.quantParameterTensorNames.length||(r.quantParameterTensorNames=[]),r.quantParameterTensorNames.push(l.onnx.StringStringEntryProto.decode(e,e.uint32()));break;default:e.skipType(7&o)}}return r},e.decodeDelimited=function(e){return e instanceof u||(e=new u(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.tensorName&&e.hasOwnProperty("tensorName")&&!c.isString(e.tensorName))return"tensorName: string expected";if(null!=e.quantParameterTensorNames&&e.hasOwnProperty("quantParameterTensorNames")){if(!Array.isArray(e.quantParameterTensorNames))return"quantParameterTensorNames: array expected";for(var t=0;t<e.quantParameterTensorNames.length;++t){var n=l.onnx.StringStringEntryProto.verify(e.quantParameterTensorNames[t]);if(n)return"quantParameterTensorNames."+n}}return null},e.fromObject=function(e){if(e instanceof l.onnx.TensorAnnotation)return e;var t=new l.onnx.TensorAnnotation;if(null!=e.tensorName&&(t.tensorName=String(e.tensorName)),e.quantParameterTensorNames){if(!Array.isArray(e.quantParameterTensorNames))throw TypeError(".onnx.TensorAnnotation.quantParameterTensorNames: array expected");t.quantParameterTensorNames=[];for(var n=0;n<e.quantParameterTensorNames.length;++n){if("object"!=typeof e.quantParameterTensorNames[n])throw TypeError(".onnx.TensorAnnotation.quantParameterTensorNames: object expected");t.quantParameterTensorNames[n]=l.onnx.StringStringEntryProto.fromObject(e.quantParameterTensorNames[n])}}return t},e.toObject=function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.quantParameterTensorNames=[]),t.defaults&&(n.tensorName=""),null!=e.tensorName&&e.hasOwnProperty("tensorName")&&(n.tensorName=e.tensorName),e.quantParameterTensorNames&&e.quantParameterTensorNames.length){n.quantParameterTensorNames=[];for(var r=0;r<e.quantParameterTensorNames.length;++r)n.quantParameterTensorNames[r]=l.onnx.StringStringEntryProto.toObject(e.quantParameterTensorNames[r],t)}return n},e.prototype.toJSON=function(){return this.constructor.toObject(this,a.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/onnx.TensorAnnotation"},e}(),i.GraphProto=function(){function e(e){if(this.node=[],this.initializer=[],this.sparseInitializer=[],this.input=[],this.output=[],this.valueInfo=[],this.quantizationAnnotation=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.node=c.emptyArray,e.prototype.name="",e.prototype.initializer=c.emptyArray,e.prototype.sparseInitializer=c.emptyArray,e.prototype.docString="",e.prototype.input=c.emptyArray,e.prototype.output=c.emptyArray,e.prototype.valueInfo=c.emptyArray,e.prototype.quantizationAnnotation=c.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=s.create()),null!=e.node&&e.node.length)for(var n=0;n<e.node.length;++n)l.onnx.NodeProto.encode(e.node[n],t.uint32(10).fork()).ldelim();if(null!=e.name&&Object.hasOwnProperty.call(e,"name")&&t.uint32(18).string(e.name),null!=e.initializer&&e.initializer.length)for(n=0;n<e.initializer.length;++n)l.onnx.TensorProto.encode(e.initializer[n],t.uint32(42).fork()).ldelim();if(null!=e.docString&&Object.hasOwnProperty.call(e,"docString")&&t.uint32(82).string(e.docString),null!=e.input&&e.input.length)for(n=0;n<e.input.length;++n)l.onnx.ValueInfoProto.encode(e.input[n],t.uint32(90).fork()).ldelim();if(null!=e.output&&e.output.length)for(n=0;n<e.output.length;++n)l.onnx.ValueInfoProto.encode(e.output[n],t.uint32(98).fork()).ldelim();if(null!=e.valueInfo&&e.valueInfo.length)for(n=0;n<e.valueInfo.length;++n)l.onnx.ValueInfoProto.encode(e.valueInfo[n],t.uint32(106).fork()).ldelim();if(null!=e.quantizationAnnotation&&e.quantizationAnnotation.length)for(n=0;n<e.quantizationAnnotation.length;++n)l.onnx.TensorAnnotation.encode(e.quantizationAnnotation[n],t.uint32(114).fork()).ldelim();if(null!=e.sparseInitializer&&e.sparseInitializer.length)for(n=0;n<e.sparseInitializer.length;++n)l.onnx.SparseTensorProto.encode(e.sparseInitializer[n],t.uint32(122).fork()).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof u||(e=u.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new l.onnx.GraphProto;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.node&&r.node.length||(r.node=[]),r.node.push(l.onnx.NodeProto.decode(e,e.uint32()));break;case 2:r.name=e.string();break;case 5:r.initializer&&r.initializer.length||(r.initializer=[]),r.initializer.push(l.onnx.TensorProto.decode(e,e.uint32()));break;case 15:r.sparseInitializer&&r.sparseInitializer.length||(r.sparseInitializer=[]),r.sparseInitializer.push(l.onnx.SparseTensorProto.decode(e,e.uint32()));break;case 10:r.docString=e.string();break;case 11:r.input&&r.input.length||(r.input=[]),r.input.push(l.onnx.ValueInfoProto.decode(e,e.uint32()));break;case 12:r.output&&r.output.length||(r.output=[]),r.output.push(l.onnx.ValueInfoProto.decode(e,e.uint32()));break;case 13:r.valueInfo&&r.valueInfo.length||(r.valueInfo=[]),r.valueInfo.push(l.onnx.ValueInfoProto.decode(e,e.uint32()));break;case 14:r.quantizationAnnotation&&r.quantizationAnnotation.length||(r.quantizationAnnotation=[]),r.quantizationAnnotation.push(l.onnx.TensorAnnotation.decode(e,e.uint32()));break;default:e.skipType(7&o)}}return r},e.decodeDelimited=function(e){return e instanceof u||(e=new u(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.node&&e.hasOwnProperty("node")){if(!Array.isArray(e.node))return"node: array expected";for(var t=0;t<e.node.length;++t)if(n=l.onnx.NodeProto.verify(e.node[t]))return"node."+n}if(null!=e.name&&e.hasOwnProperty("name")&&!c.isString(e.name))return"name: string expected";if(null!=e.initializer&&e.hasOwnProperty("initializer")){if(!Array.isArray(e.initializer))return"initializer: array expected";for(t=0;t<e.initializer.length;++t)if(n=l.onnx.TensorProto.verify(e.initializer[t]))return"initializer."+n}if(null!=e.sparseInitializer&&e.hasOwnProperty("sparseInitializer")){if(!Array.isArray(e.sparseInitializer))return"sparseInitializer: array expected";for(t=0;t<e.sparseInitializer.length;++t)if(n=l.onnx.SparseTensorProto.verify(e.sparseInitializer[t]))return"sparseInitializer."+n}if(null!=e.docString&&e.hasOwnProperty("docString")&&!c.isString(e.docString))return"docString: string expected";if(null!=e.input&&e.hasOwnProperty("input")){if(!Array.isArray(e.input))return"input: array expected";for(t=0;t<e.input.length;++t)if(n=l.onnx.ValueInfoProto.verify(e.input[t]))return"input."+n}if(null!=e.output&&e.hasOwnProperty("output")){if(!Array.isArray(e.output))return"output: array expected";for(t=0;t<e.output.length;++t)if(n=l.onnx.ValueInfoProto.verify(e.output[t]))return"output."+n}if(null!=e.valueInfo&&e.hasOwnProperty("valueInfo")){if(!Array.isArray(e.valueInfo))return"valueInfo: array expected";for(t=0;t<e.valueInfo.length;++t)if(n=l.onnx.ValueInfoProto.verify(e.valueInfo[t]))return"valueInfo."+n}if(null!=e.quantizationAnnotation&&e.hasOwnProperty("quantizationAnnotation")){if(!Array.isArray(e.quantizationAnnotation))return"quantizationAnnotation: array expected";for(t=0;t<e.quantizationAnnotation.length;++t){var n;if(n=l.onnx.TensorAnnotation.verify(e.quantizationAnnotation[t]))return"quantizationAnnotation."+n}}return null},e.fromObject=function(e){if(e instanceof l.onnx.GraphProto)return e;var t=new l.onnx.GraphProto;if(e.node){if(!Array.isArray(e.node))throw TypeError(".onnx.GraphProto.node: array expected");t.node=[];for(var n=0;n<e.node.length;++n){if("object"!=typeof e.node[n])throw TypeError(".onnx.GraphProto.node: object expected");t.node[n]=l.onnx.NodeProto.fromObject(e.node[n])}}if(null!=e.name&&(t.name=String(e.name)),e.initializer){if(!Array.isArray(e.initializer))throw TypeError(".onnx.GraphProto.initializer: array expected");for(t.initializer=[],n=0;n<e.initializer.length;++n){if("object"!=typeof e.initializer[n])throw TypeError(".onnx.GraphProto.initializer: object expected");t.initializer[n]=l.onnx.TensorProto.fromObject(e.initializer[n])}}if(e.sparseInitializer){if(!Array.isArray(e.sparseInitializer))throw TypeError(".onnx.GraphProto.sparseInitializer: array expected");for(t.sparseInitializer=[],n=0;n<e.sparseInitializer.length;++n){if("object"!=typeof e.sparseInitializer[n])throw TypeError(".onnx.GraphProto.sparseInitializer: object expected");t.sparseInitializer[n]=l.onnx.SparseTensorProto.fromObject(e.sparseInitializer[n])}}if(null!=e.docString&&(t.docString=String(e.docString)),e.input){if(!Array.isArray(e.input))throw TypeError(".onnx.GraphProto.input: array expected");for(t.input=[],n=0;n<e.input.length;++n){if("object"!=typeof e.input[n])throw TypeError(".onnx.GraphProto.input: object expected");t.input[n]=l.onnx.ValueInfoProto.fromObject(e.input[n])}}if(e.output){if(!Array.isArray(e.output))throw TypeError(".onnx.GraphProto.output: array expected");for(t.output=[],n=0;n<e.output.length;++n){if("object"!=typeof e.output[n])throw TypeError(".onnx.GraphProto.output: object expected");t.output[n]=l.onnx.ValueInfoProto.fromObject(e.output[n])}}if(e.valueInfo){if(!Array.isArray(e.valueInfo))throw TypeError(".onnx.GraphProto.valueInfo: array expected");for(t.valueInfo=[],n=0;n<e.valueInfo.length;++n){if("object"!=typeof e.valueInfo[n])throw TypeError(".onnx.GraphProto.valueInfo: object expected");t.valueInfo[n]=l.onnx.ValueInfoProto.fromObject(e.valueInfo[n])}}if(e.quantizationAnnotation){if(!Array.isArray(e.quantizationAnnotation))throw TypeError(".onnx.GraphProto.quantizationAnnotation: array expected");for(t.quantizationAnnotation=[],n=0;n<e.quantizationAnnotation.length;++n){if("object"!=typeof e.quantizationAnnotation[n])throw TypeError(".onnx.GraphProto.quantizationAnnotation: object expected");t.quantizationAnnotation[n]=l.onnx.TensorAnnotation.fromObject(e.quantizationAnnotation[n])}}return t},e.toObject=function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.node=[],n.initializer=[],n.input=[],n.output=[],n.valueInfo=[],n.quantizationAnnotation=[],n.sparseInitializer=[]),t.defaults&&(n.name="",n.docString=""),e.node&&e.node.length){n.node=[];for(var r=0;r<e.node.length;++r)n.node[r]=l.onnx.NodeProto.toObject(e.node[r],t)}if(null!=e.name&&e.hasOwnProperty("name")&&(n.name=e.name),e.initializer&&e.initializer.length)for(n.initializer=[],r=0;r<e.initializer.length;++r)n.initializer[r]=l.onnx.TensorProto.toObject(e.initializer[r],t);if(null!=e.docString&&e.hasOwnProperty("docString")&&(n.docString=e.docString),e.input&&e.input.length)for(n.input=[],r=0;r<e.input.length;++r)n.input[r]=l.onnx.ValueInfoProto.toObject(e.input[r],t);if(e.output&&e.output.length)for(n.output=[],r=0;r<e.output.length;++r)n.output[r]=l.onnx.ValueInfoProto.toObject(e.output[r],t);if(e.valueInfo&&e.valueInfo.length)for(n.valueInfo=[],r=0;r<e.valueInfo.length;++r)n.valueInfo[r]=l.onnx.ValueInfoProto.toObject(e.valueInfo[r],t);if(e.quantizationAnnotation&&e.quantizationAnnotation.length)for(n.quantizationAnnotation=[],r=0;r<e.quantizationAnnotation.length;++r)n.quantizationAnnotation[r]=l.onnx.TensorAnnotation.toObject(e.quantizationAnnotation[r],t);if(e.sparseInitializer&&e.sparseInitializer.length)for(n.sparseInitializer=[],r=0;r<e.sparseInitializer.length;++r)n.sparseInitializer[r]=l.onnx.SparseTensorProto.toObject(e.sparseInitializer[r],t);return n},e.prototype.toJSON=function(){return this.constructor.toObject(this,a.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/onnx.GraphProto"},e}(),i.TensorProto=function(){function e(e){if(this.dims=[],this.floatData=[],this.int32Data=[],this.stringData=[],this.int64Data=[],this.externalData=[],this.doubleData=[],this.uint64Data=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.dims=c.emptyArray,e.prototype.dataType=0,e.prototype.segment=null,e.prototype.floatData=c.emptyArray,e.prototype.int32Data=c.emptyArray,e.prototype.stringData=c.emptyArray,e.prototype.int64Data=c.emptyArray,e.prototype.name="",e.prototype.docString="",e.prototype.rawData=c.newBuffer([]),e.prototype.externalData=c.emptyArray,e.prototype.dataLocation=0,e.prototype.doubleData=c.emptyArray,e.prototype.uint64Data=c.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=s.create()),null!=e.dims&&e.dims.length){t.uint32(10).fork();for(var n=0;n<e.dims.length;++n)t.int64(e.dims[n]);t.ldelim()}if(null!=e.dataType&&Object.hasOwnProperty.call(e,"dataType")&&t.uint32(16).int32(e.dataType),null!=e.segment&&Object.hasOwnProperty.call(e,"segment")&&l.onnx.TensorProto.Segment.encode(e.segment,t.uint32(26).fork()).ldelim(),null!=e.floatData&&e.floatData.length){for(t.uint32(34).fork(),n=0;n<e.floatData.length;++n)t.float(e.floatData[n]);t.ldelim()}if(null!=e.int32Data&&e.int32Data.length){for(t.uint32(42).fork(),n=0;n<e.int32Data.length;++n)t.int32(e.int32Data[n]);t.ldelim()}if(null!=e.stringData&&e.stringData.length)for(n=0;n<e.stringData.length;++n)t.uint32(50).bytes(e.stringData[n]);if(null!=e.int64Data&&e.int64Data.length){for(t.uint32(58).fork(),n=0;n<e.int64Data.length;++n)t.int64(e.int64Data[n]);t.ldelim()}if(null!=e.name&&Object.hasOwnProperty.call(e,"name")&&t.uint32(66).string(e.name),null!=e.rawData&&Object.hasOwnProperty.call(e,"rawData")&&t.uint32(74).bytes(e.rawData),null!=e.doubleData&&e.doubleData.length){for(t.uint32(82).fork(),n=0;n<e.doubleData.length;++n)t.double(e.doubleData[n]);t.ldelim()}if(null!=e.uint64Data&&e.uint64Data.length){for(t.uint32(90).fork(),n=0;n<e.uint64Data.length;++n)t.uint64(e.uint64Data[n]);t.ldelim()}if(null!=e.docString&&Object.hasOwnProperty.call(e,"docString")&&t.uint32(98).string(e.docString),null!=e.externalData&&e.externalData.length)for(n=0;n<e.externalData.length;++n)l.onnx.StringStringEntryProto.encode(e.externalData[n],t.uint32(106).fork()).ldelim();return null!=e.dataLocation&&Object.hasOwnProperty.call(e,"dataLocation")&&t.uint32(112).int32(e.dataLocation),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof u||(e=u.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new l.onnx.TensorProto;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:if(r.dims&&r.dims.length||(r.dims=[]),2==(7&o))for(var i=e.uint32()+e.pos;e.pos<i;)r.dims.push(e.int64());else r.dims.push(e.int64());break;case 2:r.dataType=e.int32();break;case 3:r.segment=l.onnx.TensorProto.Segment.decode(e,e.uint32());break;case 4:if(r.floatData&&r.floatData.length||(r.floatData=[]),2==(7&o))for(i=e.uint32()+e.pos;e.pos<i;)r.floatData.push(e.float());else r.floatData.push(e.float());break;case 5:if(r.int32Data&&r.int32Data.length||(r.int32Data=[]),2==(7&o))for(i=e.uint32()+e.pos;e.pos<i;)r.int32Data.push(e.int32());else r.int32Data.push(e.int32());break;case 6:r.stringData&&r.stringData.length||(r.stringData=[]),r.stringData.push(e.bytes());break;case 7:if(r.int64Data&&r.int64Data.length||(r.int64Data=[]),2==(7&o))for(i=e.uint32()+e.pos;e.pos<i;)r.int64Data.push(e.int64());else r.int64Data.push(e.int64());break;case 8:r.name=e.string();break;case 12:r.docString=e.string();break;case 9:r.rawData=e.bytes();break;case 13:r.externalData&&r.externalData.length||(r.externalData=[]),r.externalData.push(l.onnx.StringStringEntryProto.decode(e,e.uint32()));break;case 14:r.dataLocation=e.int32();break;case 10:if(r.doubleData&&r.doubleData.length||(r.doubleData=[]),2==(7&o))for(i=e.uint32()+e.pos;e.pos<i;)r.doubleData.push(e.double());else r.doubleData.push(e.double());break;case 11:if(r.uint64Data&&r.uint64Data.length||(r.uint64Data=[]),2==(7&o))for(i=e.uint32()+e.pos;e.pos<i;)r.uint64Data.push(e.uint64());else r.uint64Data.push(e.uint64());break;default:e.skipType(7&o)}}return r},e.decodeDelimited=function(e){return e instanceof u||(e=new u(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.dims&&e.hasOwnProperty("dims")){if(!Array.isArray(e.dims))return"dims: array expected";for(var t=0;t<e.dims.length;++t)if(!(c.isInteger(e.dims[t])||e.dims[t]&&c.isInteger(e.dims[t].low)&&c.isInteger(e.dims[t].high)))return"dims: integer|Long[] expected"}if(null!=e.dataType&&e.hasOwnProperty("dataType")&&!c.isInteger(e.dataType))return"dataType: integer expected";if(null!=e.segment&&e.hasOwnProperty("segment")&&(n=l.onnx.TensorProto.Segment.verify(e.segment)))return"segment."+n;if(null!=e.floatData&&e.hasOwnProperty("floatData")){if(!Array.isArray(e.floatData))return"floatData: array expected";for(t=0;t<e.floatData.length;++t)if("number"!=typeof e.floatData[t])return"floatData: number[] expected"}if(null!=e.int32Data&&e.hasOwnProperty("int32Data")){if(!Array.isArray(e.int32Data))return"int32Data: array expected";for(t=0;t<e.int32Data.length;++t)if(!c.isInteger(e.int32Data[t]))return"int32Data: integer[] expected"}if(null!=e.stringData&&e.hasOwnProperty("stringData")){if(!Array.isArray(e.stringData))return"stringData: array expected";for(t=0;t<e.stringData.length;++t)if(!(e.stringData[t]&&"number"==typeof e.stringData[t].length||c.isString(e.stringData[t])))return"stringData: buffer[] expected"}if(null!=e.int64Data&&e.hasOwnProperty("int64Data")){if(!Array.isArray(e.int64Data))return"int64Data: array expected";for(t=0;t<e.int64Data.length;++t)if(!(c.isInteger(e.int64Data[t])||e.int64Data[t]&&c.isInteger(e.int64Data[t].low)&&c.isInteger(e.int64Data[t].high)))return"int64Data: integer|Long[] expected"}if(null!=e.name&&e.hasOwnProperty("name")&&!c.isString(e.name))return"name: string expected";if(null!=e.docString&&e.hasOwnProperty("docString")&&!c.isString(e.docString))return"docString: string expected";if(null!=e.rawData&&e.hasOwnProperty("rawData")&&!(e.rawData&&"number"==typeof e.rawData.length||c.isString(e.rawData)))return"rawData: buffer expected";if(null!=e.externalData&&e.hasOwnProperty("externalData")){if(!Array.isArray(e.externalData))return"externalData: array expected";for(t=0;t<e.externalData.length;++t){var n;if(n=l.onnx.StringStringEntryProto.verify(e.externalData[t]))return"externalData."+n}}if(null!=e.dataLocation&&e.hasOwnProperty("dataLocation"))switch(e.dataLocation){default:return"dataLocation: enum value expected";case 0:case 1:}if(null!=e.doubleData&&e.hasOwnProperty("doubleData")){if(!Array.isArray(e.doubleData))return"doubleData: array expected";for(t=0;t<e.doubleData.length;++t)if("number"!=typeof e.doubleData[t])return"doubleData: number[] expected"}if(null!=e.uint64Data&&e.hasOwnProperty("uint64Data")){if(!Array.isArray(e.uint64Data))return"uint64Data: array expected";for(t=0;t<e.uint64Data.length;++t)if(!(c.isInteger(e.uint64Data[t])||e.uint64Data[t]&&c.isInteger(e.uint64Data[t].low)&&c.isInteger(e.uint64Data[t].high)))return"uint64Data: integer|Long[] expected"}return null},e.fromObject=function(e){if(e instanceof l.onnx.TensorProto)return e;var t=new l.onnx.TensorProto;if(e.dims){if(!Array.isArray(e.dims))throw TypeError(".onnx.TensorProto.dims: array expected");t.dims=[];for(var n=0;n<e.dims.length;++n)c.Long?(t.dims[n]=c.Long.fromValue(e.dims[n])).unsigned=!1:"string"==typeof e.dims[n]?t.dims[n]=parseInt(e.dims[n],10):"number"==typeof e.dims[n]?t.dims[n]=e.dims[n]:"object"==typeof e.dims[n]&&(t.dims[n]=new c.LongBits(e.dims[n].low>>>0,e.dims[n].high>>>0).toNumber())}if(null!=e.dataType&&(t.dataType=0|e.dataType),null!=e.segment){if("object"!=typeof e.segment)throw TypeError(".onnx.TensorProto.segment: object expected");t.segment=l.onnx.TensorProto.Segment.fromObject(e.segment)}if(e.floatData){if(!Array.isArray(e.floatData))throw TypeError(".onnx.TensorProto.floatData: array expected");for(t.floatData=[],n=0;n<e.floatData.length;++n)t.floatData[n]=Number(e.floatData[n])}if(e.int32Data){if(!Array.isArray(e.int32Data))throw TypeError(".onnx.TensorProto.int32Data: array expected");for(t.int32Data=[],n=0;n<e.int32Data.length;++n)t.int32Data[n]=0|e.int32Data[n]}if(e.stringData){if(!Array.isArray(e.stringData))throw TypeError(".onnx.TensorProto.stringData: array expected");for(t.stringData=[],n=0;n<e.stringData.length;++n)"string"==typeof e.stringData[n]?c.base64.decode(e.stringData[n],t.stringData[n]=c.newBuffer(c.base64.length(e.stringData[n])),0):e.stringData[n].length>=0&&(t.stringData[n]=e.stringData[n])}if(e.int64Data){if(!Array.isArray(e.int64Data))throw TypeError(".onnx.TensorProto.int64Data: array expected");for(t.int64Data=[],n=0;n<e.int64Data.length;++n)c.Long?(t.int64Data[n]=c.Long.fromValue(e.int64Data[n])).unsigned=!1:"string"==typeof e.int64Data[n]?t.int64Data[n]=parseInt(e.int64Data[n],10):"number"==typeof e.int64Data[n]?t.int64Data[n]=e.int64Data[n]:"object"==typeof e.int64Data[n]&&(t.int64Data[n]=new c.LongBits(e.int64Data[n].low>>>0,e.int64Data[n].high>>>0).toNumber())}if(null!=e.name&&(t.name=String(e.name)),null!=e.docString&&(t.docString=String(e.docString)),null!=e.rawData&&("string"==typeof e.rawData?c.base64.decode(e.rawData,t.rawData=c.newBuffer(c.base64.length(e.rawData)),0):e.rawData.length>=0&&(t.rawData=e.rawData)),e.externalData){if(!Array.isArray(e.externalData))throw TypeError(".onnx.TensorProto.externalData: array expected");for(t.externalData=[],n=0;n<e.externalData.length;++n){if("object"!=typeof e.externalData[n])throw TypeError(".onnx.TensorProto.externalData: object expected");t.externalData[n]=l.onnx.StringStringEntryProto.fromObject(e.externalData[n])}}switch(e.dataLocation){default:if("number"==typeof e.dataLocation){t.dataLocation=e.dataLocation;break}break;case"DEFAULT":case 0:t.dataLocation=0;break;case"EXTERNAL":case 1:t.dataLocation=1}if(e.doubleData){if(!Array.isArray(e.doubleData))throw TypeError(".onnx.TensorProto.doubleData: array expected");for(t.doubleData=[],n=0;n<e.doubleData.length;++n)t.doubleData[n]=Number(e.doubleData[n])}if(e.uint64Data){if(!Array.isArray(e.uint64Data))throw TypeError(".onnx.TensorProto.uint64Data: array expected");for(t.uint64Data=[],n=0;n<e.uint64Data.length;++n)c.Long?(t.uint64Data[n]=c.Long.fromValue(e.uint64Data[n])).unsigned=!0:"string"==typeof e.uint64Data[n]?t.uint64Data[n]=parseInt(e.uint64Data[n],10):"number"==typeof e.uint64Data[n]?t.uint64Data[n]=e.uint64Data[n]:"object"==typeof e.uint64Data[n]&&(t.uint64Data[n]=new c.LongBits(e.uint64Data[n].low>>>0,e.uint64Data[n].high>>>0).toNumber(!0))}return t},e.toObject=function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.dims=[],n.floatData=[],n.int32Data=[],n.stringData=[],n.int64Data=[],n.doubleData=[],n.uint64Data=[],n.externalData=[]),t.defaults&&(n.dataType=0,n.segment=null,n.name="",t.bytes===String?n.rawData="":(n.rawData=[],t.bytes!==Array&&(n.rawData=c.newBuffer(n.rawData))),n.docString="",n.dataLocation=t.enums===String?"DEFAULT":0),e.dims&&e.dims.length){n.dims=[];for(var r=0;r<e.dims.length;++r)"number"==typeof e.dims[r]?n.dims[r]=t.longs===String?String(e.dims[r]):e.dims[r]:n.dims[r]=t.longs===String?c.Long.prototype.toString.call(e.dims[r]):t.longs===Number?new c.LongBits(e.dims[r].low>>>0,e.dims[r].high>>>0).toNumber():e.dims[r]}if(null!=e.dataType&&e.hasOwnProperty("dataType")&&(n.dataType=e.dataType),null!=e.segment&&e.hasOwnProperty("segment")&&(n.segment=l.onnx.TensorProto.Segment.toObject(e.segment,t)),e.floatData&&e.floatData.length)for(n.floatData=[],r=0;r<e.floatData.length;++r)n.floatData[r]=t.json&&!isFinite(e.floatData[r])?String(e.floatData[r]):e.floatData[r];if(e.int32Data&&e.int32Data.length)for(n.int32Data=[],r=0;r<e.int32Data.length;++r)n.int32Data[r]=e.int32Data[r];if(e.stringData&&e.stringData.length)for(n.stringData=[],r=0;r<e.stringData.length;++r)n.stringData[r]=t.bytes===String?c.base64.encode(e.stringData[r],0,e.stringData[r].length):t.bytes===Array?Array.prototype.slice.call(e.stringData[r]):e.stringData[r];if(e.int64Data&&e.int64Data.length)for(n.int64Data=[],r=0;r<e.int64Data.length;++r)"number"==typeof e.int64Data[r]?n.int64Data[r]=t.longs===String?String(e.int64Data[r]):e.int64Data[r]:n.int64Data[r]=t.longs===String?c.Long.prototype.toString.call(e.int64Data[r]):t.longs===Number?new c.LongBits(e.int64Data[r].low>>>0,e.int64Data[r].high>>>0).toNumber():e.int64Data[r];if(null!=e.name&&e.hasOwnProperty("name")&&(n.name=e.name),null!=e.rawData&&e.hasOwnProperty("rawData")&&(n.rawData=t.bytes===String?c.base64.encode(e.rawData,0,e.rawData.length):t.bytes===Array?Array.prototype.slice.call(e.rawData):e.rawData),e.doubleData&&e.doubleData.length)for(n.doubleData=[],r=0;r<e.doubleData.length;++r)n.doubleData[r]=t.json&&!isFinite(e.doubleData[r])?String(e.doubleData[r]):e.doubleData[r];if(e.uint64Data&&e.uint64Data.length)for(n.uint64Data=[],r=0;r<e.uint64Data.length;++r)"number"==typeof e.uint64Data[r]?n.uint64Data[r]=t.longs===String?String(e.uint64Data[r]):e.uint64Data[r]:n.uint64Data[r]=t.longs===String?c.Long.prototype.toString.call(e.uint64Data[r]):t.longs===Number?new c.LongBits(e.uint64Data[r].low>>>0,e.uint64Data[r].high>>>0).toNumber(!0):e.uint64Data[r];if(null!=e.docString&&e.hasOwnProperty("docString")&&(n.docString=e.docString),e.externalData&&e.externalData.length)for(n.externalData=[],r=0;r<e.externalData.length;++r)n.externalData[r]=l.onnx.StringStringEntryProto.toObject(e.externalData[r],t);return null!=e.dataLocation&&e.hasOwnProperty("dataLocation")&&(n.dataLocation=t.enums===String?void 0===l.onnx.TensorProto.DataLocation[e.dataLocation]?e.dataLocation:l.onnx.TensorProto.DataLocation[e.dataLocation]:e.dataLocation),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,a.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/onnx.TensorProto"},e.DataType=function(){var e={},t=Object.create(e);return t[e[0]="UNDEFINED"]=0,t[e[1]="FLOAT"]=1,t[e[2]="UINT8"]=2,t[e[3]="INT8"]=3,t[e[4]="UINT16"]=4,t[e[5]="INT16"]=5,t[e[6]="INT32"]=6,t[e[7]="INT64"]=7,t[e[8]="STRING"]=8,t[e[9]="BOOL"]=9,t[e[10]="FLOAT16"]=10,t[e[11]="DOUBLE"]=11,t[e[12]="UINT32"]=12,t[e[13]="UINT64"]=13,t[e[14]="COMPLEX64"]=14,t[e[15]="COMPLEX128"]=15,t[e[16]="BFLOAT16"]=16,t[e[17]="FLOAT8E4M3FN"]=17,t[e[18]="FLOAT8E4M3FNUZ"]=18,t[e[19]="FLOAT8E5M2"]=19,t[e[20]="FLOAT8E5M2FNUZ"]=20,t}(),e.Segment=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.begin=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.end=c.Long?c.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=s.create()),null!=e.begin&&Object.hasOwnProperty.call(e,"begin")&&t.uint32(8).int64(e.begin),null!=e.end&&Object.hasOwnProperty.call(e,"end")&&t.uint32(16).int64(e.end),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof u||(e=u.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new l.onnx.TensorProto.Segment;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.begin=e.int64();break;case 2:r.end=e.int64();break;default:e.skipType(7&o)}}return r},e.decodeDelimited=function(e){return e instanceof u||(e=new u(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.begin&&e.hasOwnProperty("begin")&&!(c.isInteger(e.begin)||e.begin&&c.isInteger(e.begin.low)&&c.isInteger(e.begin.high))?"begin: integer|Long expected":null!=e.end&&e.hasOwnProperty("end")&&!(c.isInteger(e.end)||e.end&&c.isInteger(e.end.low)&&c.isInteger(e.end.high))?"end: integer|Long expected":null},e.fromObject=function(e){if(e instanceof l.onnx.TensorProto.Segment)return e;var t=new l.onnx.TensorProto.Segment;return null!=e.begin&&(c.Long?(t.begin=c.Long.fromValue(e.begin)).unsigned=!1:"string"==typeof e.begin?t.begin=parseInt(e.begin,10):"number"==typeof e.begin?t.begin=e.begin:"object"==typeof e.begin&&(t.begin=new c.LongBits(e.begin.low>>>0,e.begin.high>>>0).toNumber())),null!=e.end&&(c.Long?(t.end=c.Long.fromValue(e.end)).unsigned=!1:"string"==typeof e.end?t.end=parseInt(e.end,10):"number"==typeof e.end?t.end=e.end:"object"==typeof e.end&&(t.end=new c.LongBits(e.end.low>>>0,e.end.high>>>0).toNumber())),t},e.toObject=function(e,t){t||(t={});var n={};if(t.defaults){if(c.Long){var r=new c.Long(0,0,!1);n.begin=t.longs===String?r.toString():t.longs===Number?r.toNumber():r}else n.begin=t.longs===String?"0":0;c.Long?(r=new c.Long(0,0,!1),n.end=t.longs===String?r.toString():t.longs===Number?r.toNumber():r):n.end=t.longs===String?"0":0}return null!=e.begin&&e.hasOwnProperty("begin")&&("number"==typeof e.begin?n.begin=t.longs===String?String(e.begin):e.begin:n.begin=t.longs===String?c.Long.prototype.toString.call(e.begin):t.longs===Number?new c.LongBits(e.begin.low>>>0,e.begin.high>>>0).toNumber():e.begin),null!=e.end&&e.hasOwnProperty("end")&&("number"==typeof e.end?n.end=t.longs===String?String(e.end):e.end:n.end=t.longs===String?c.Long.prototype.toString.call(e.end):t.longs===Number?new c.LongBits(e.end.low>>>0,e.end.high>>>0).toNumber():e.end),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,a.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/onnx.TensorProto.Segment"},e}(),e.DataLocation=function(){var e={},t=Object.create(e);return t[e[0]="DEFAULT"]=0,t[e[1]="EXTERNAL"]=1,t}(),e}(),i.SparseTensorProto=function(){function e(e){if(this.dims=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.values=null,e.prototype.indices=null,e.prototype.dims=c.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=s.create()),null!=e.values&&Object.hasOwnProperty.call(e,"values")&&l.onnx.TensorProto.encode(e.values,t.uint32(10).fork()).ldelim(),null!=e.indices&&Object.hasOwnProperty.call(e,"indices")&&l.onnx.TensorProto.encode(e.indices,t.uint32(18).fork()).ldelim(),null!=e.dims&&e.dims.length){t.uint32(26).fork();for(var n=0;n<e.dims.length;++n)t.int64(e.dims[n]);t.ldelim()}return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof u||(e=u.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new l.onnx.SparseTensorProto;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.values=l.onnx.TensorProto.decode(e,e.uint32());break;case 2:r.indices=l.onnx.TensorProto.decode(e,e.uint32());break;case 3:if(r.dims&&r.dims.length||(r.dims=[]),2==(7&o))for(var i=e.uint32()+e.pos;e.pos<i;)r.dims.push(e.int64());else r.dims.push(e.int64());break;default:e.skipType(7&o)}}return r},e.decodeDelimited=function(e){return e instanceof u||(e=new u(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";var t;if(null!=e.values&&e.hasOwnProperty("values")&&(t=l.onnx.TensorProto.verify(e.values)))return"values."+t;if(null!=e.indices&&e.hasOwnProperty("indices")&&(t=l.onnx.TensorProto.verify(e.indices)))return"indices."+t;if(null!=e.dims&&e.hasOwnProperty("dims")){if(!Array.isArray(e.dims))return"dims: array expected";for(var n=0;n<e.dims.length;++n)if(!(c.isInteger(e.dims[n])||e.dims[n]&&c.isInteger(e.dims[n].low)&&c.isInteger(e.dims[n].high)))return"dims: integer|Long[] expected"}return null},e.fromObject=function(e){if(e instanceof l.onnx.SparseTensorProto)return e;var t=new l.onnx.SparseTensorProto;if(null!=e.values){if("object"!=typeof e.values)throw TypeError(".onnx.SparseTensorProto.values: object expected");t.values=l.onnx.TensorProto.fromObject(e.values)}if(null!=e.indices){if("object"!=typeof e.indices)throw TypeError(".onnx.SparseTensorProto.indices: object expected");t.indices=l.onnx.TensorProto.fromObject(e.indices)}if(e.dims){if(!Array.isArray(e.dims))throw TypeError(".onnx.SparseTensorProto.dims: array expected");t.dims=[];for(var n=0;n<e.dims.length;++n)c.Long?(t.dims[n]=c.Long.fromValue(e.dims[n])).unsigned=!1:"string"==typeof e.dims[n]?t.dims[n]=parseInt(e.dims[n],10):"number"==typeof e.dims[n]?t.dims[n]=e.dims[n]:"object"==typeof e.dims[n]&&(t.dims[n]=new c.LongBits(e.dims[n].low>>>0,e.dims[n].high>>>0).toNumber())}return t},e.toObject=function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.dims=[]),t.defaults&&(n.values=null,n.indices=null),null!=e.values&&e.hasOwnProperty("values")&&(n.values=l.onnx.TensorProto.toObject(e.values,t)),null!=e.indices&&e.hasOwnProperty("indices")&&(n.indices=l.onnx.TensorProto.toObject(e.indices,t)),e.dims&&e.dims.length){n.dims=[];for(var r=0;r<e.dims.length;++r)"number"==typeof e.dims[r]?n.dims[r]=t.longs===String?String(e.dims[r]):e.dims[r]:n.dims[r]=t.longs===String?c.Long.prototype.toString.call(e.dims[r]):t.longs===Number?new c.LongBits(e.dims[r].low>>>0,e.dims[r].high>>>0).toNumber():e.dims[r]}return n},e.prototype.toJSON=function(){return this.constructor.toObject(this,a.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/onnx.SparseTensorProto"},e}(),i.TensorShapeProto=function(){function e(e){if(this.dim=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.dim=c.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=s.create()),null!=e.dim&&e.dim.length)for(var n=0;n<e.dim.length;++n)l.onnx.TensorShapeProto.Dimension.encode(e.dim[n],t.uint32(10).fork()).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof u||(e=u.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new l.onnx.TensorShapeProto;e.pos<n;){var o=e.uint32();o>>>3==1?(r.dim&&r.dim.length||(r.dim=[]),r.dim.push(l.onnx.TensorShapeProto.Dimension.decode(e,e.uint32()))):e.skipType(7&o)}return r},e.decodeDelimited=function(e){return e instanceof u||(e=new u(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.dim&&e.hasOwnProperty("dim")){if(!Array.isArray(e.dim))return"dim: array expected";for(var t=0;t<e.dim.length;++t){var n=l.onnx.TensorShapeProto.Dimension.verify(e.dim[t]);if(n)return"dim."+n}}return null},e.fromObject=function(e){if(e instanceof l.onnx.TensorShapeProto)return e;var t=new l.onnx.TensorShapeProto;if(e.dim){if(!Array.isArray(e.dim))throw TypeError(".onnx.TensorShapeProto.dim: array expected");t.dim=[];for(var n=0;n<e.dim.length;++n){if("object"!=typeof e.dim[n])throw TypeError(".onnx.TensorShapeProto.dim: object expected");t.dim[n]=l.onnx.TensorShapeProto.Dimension.fromObject(e.dim[n])}}return t},e.toObject=function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.dim=[]),e.dim&&e.dim.length){n.dim=[];for(var r=0;r<e.dim.length;++r)n.dim[r]=l.onnx.TensorShapeProto.Dimension.toObject(e.dim[r],t)}return n},e.prototype.toJSON=function(){return this.constructor.toObject(this,a.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/onnx.TensorShapeProto"},e.Dimension=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}var t;return e.prototype.dimValue=null,e.prototype.dimParam=null,e.prototype.denotation="",Object.defineProperty(e.prototype,"value",{get:c.oneOfGetter(t=["dimValue","dimParam"]),set:c.oneOfSetter(t)}),e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=s.create()),null!=e.dimValue&&Object.hasOwnProperty.call(e,"dimValue")&&t.uint32(8).int64(e.dimValue),null!=e.dimParam&&Object.hasOwnProperty.call(e,"dimParam")&&t.uint32(18).string(e.dimParam),null!=e.denotation&&Object.hasOwnProperty.call(e,"denotation")&&t.uint32(26).string(e.denotation),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof u||(e=u.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new l.onnx.TensorShapeProto.Dimension;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.dimValue=e.int64();break;case 2:r.dimParam=e.string();break;case 3:r.denotation=e.string();break;default:e.skipType(7&o)}}return r},e.decodeDelimited=function(e){return e instanceof u||(e=new u(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";var t={};if(null!=e.dimValue&&e.hasOwnProperty("dimValue")&&(t.value=1,!(c.isInteger(e.dimValue)||e.dimValue&&c.isInteger(e.dimValue.low)&&c.isInteger(e.dimValue.high))))return"dimValue: integer|Long expected";if(null!=e.dimParam&&e.hasOwnProperty("dimParam")){if(1===t.value)return"value: multiple values";if(t.value=1,!c.isString(e.dimParam))return"dimParam: string expected"}return null!=e.denotation&&e.hasOwnProperty("denotation")&&!c.isString(e.denotation)?"denotation: string expected":null},e.fromObject=function(e){if(e instanceof l.onnx.TensorShapeProto.Dimension)return e;var t=new l.onnx.TensorShapeProto.Dimension;return null!=e.dimValue&&(c.Long?(t.dimValue=c.Long.fromValue(e.dimValue)).unsigned=!1:"string"==typeof e.dimValue?t.dimValue=parseInt(e.dimValue,10):"number"==typeof e.dimValue?t.dimValue=e.dimValue:"object"==typeof e.dimValue&&(t.dimValue=new c.LongBits(e.dimValue.low>>>0,e.dimValue.high>>>0).toNumber())),null!=e.dimParam&&(t.dimParam=String(e.dimParam)),null!=e.denotation&&(t.denotation=String(e.denotation)),t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.denotation=""),null!=e.dimValue&&e.hasOwnProperty("dimValue")&&("number"==typeof e.dimValue?n.dimValue=t.longs===String?String(e.dimValue):e.dimValue:n.dimValue=t.longs===String?c.Long.prototype.toString.call(e.dimValue):t.longs===Number?new c.LongBits(e.dimValue.low>>>0,e.dimValue.high>>>0).toNumber():e.dimValue,t.oneofs&&(n.value="dimValue")),null!=e.dimParam&&e.hasOwnProperty("dimParam")&&(n.dimParam=e.dimParam,t.oneofs&&(n.value="dimParam")),null!=e.denotation&&e.hasOwnProperty("denotation")&&(n.denotation=e.denotation),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,a.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/onnx.TensorShapeProto.Dimension"},e}(),e}(),i.TypeProto=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}var t;return e.prototype.tensorType=null,e.prototype.sequenceType=null,e.prototype.mapType=null,e.prototype.optionalType=null,e.prototype.sparseTensorType=null,e.prototype.denotation="",Object.defineProperty(e.prototype,"value",{get:c.oneOfGetter(t=["tensorType","sequenceType","mapType","optionalType","sparseTensorType"]),set:c.oneOfSetter(t)}),e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=s.create()),null!=e.tensorType&&Object.hasOwnProperty.call(e,"tensorType")&&l.onnx.TypeProto.Tensor.encode(e.tensorType,t.uint32(10).fork()).ldelim(),null!=e.sequenceType&&Object.hasOwnProperty.call(e,"sequenceType")&&l.onnx.TypeProto.Sequence.encode(e.sequenceType,t.uint32(34).fork()).ldelim(),null!=e.mapType&&Object.hasOwnProperty.call(e,"mapType")&&l.onnx.TypeProto.Map.encode(e.mapType,t.uint32(42).fork()).ldelim(),null!=e.denotation&&Object.hasOwnProperty.call(e,"denotation")&&t.uint32(50).string(e.denotation),null!=e.sparseTensorType&&Object.hasOwnProperty.call(e,"sparseTensorType")&&l.onnx.TypeProto.SparseTensor.encode(e.sparseTensorType,t.uint32(66).fork()).ldelim(),null!=e.optionalType&&Object.hasOwnProperty.call(e,"optionalType")&&l.onnx.TypeProto.Optional.encode(e.optionalType,t.uint32(74).fork()).ldelim(),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof u||(e=u.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new l.onnx.TypeProto;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.tensorType=l.onnx.TypeProto.Tensor.decode(e,e.uint32());break;case 4:r.sequenceType=l.onnx.TypeProto.Sequence.decode(e,e.uint32());break;case 5:r.mapType=l.onnx.TypeProto.Map.decode(e,e.uint32());break;case 9:r.optionalType=l.onnx.TypeProto.Optional.decode(e,e.uint32());break;case 8:r.sparseTensorType=l.onnx.TypeProto.SparseTensor.decode(e,e.uint32());break;case 6:r.denotation=e.string();break;default:e.skipType(7&o)}}return r},e.decodeDelimited=function(e){return e instanceof u||(e=new u(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";var t={};if(null!=e.tensorType&&e.hasOwnProperty("tensorType")&&(t.value=1,n=l.onnx.TypeProto.Tensor.verify(e.tensorType)))return"tensorType."+n;if(null!=e.sequenceType&&e.hasOwnProperty("sequenceType")){if(1===t.value)return"value: multiple values";if(t.value=1,n=l.onnx.TypeProto.Sequence.verify(e.sequenceType))return"sequenceType."+n}if(null!=e.mapType&&e.hasOwnProperty("mapType")){if(1===t.value)return"value: multiple values";if(t.value=1,n=l.onnx.TypeProto.Map.verify(e.mapType))return"mapType."+n}if(null!=e.optionalType&&e.hasOwnProperty("optionalType")){if(1===t.value)return"value: multiple values";if(t.value=1,n=l.onnx.TypeProto.Optional.verify(e.optionalType))return"optionalType."+n}if(null!=e.sparseTensorType&&e.hasOwnProperty("sparseTensorType")){if(1===t.value)return"value: multiple values";var n;if(t.value=1,n=l.onnx.TypeProto.SparseTensor.verify(e.sparseTensorType))return"sparseTensorType."+n}return null!=e.denotation&&e.hasOwnProperty("denotation")&&!c.isString(e.denotation)?"denotation: string expected":null},e.fromObject=function(e){if(e instanceof l.onnx.TypeProto)return e;var t=new l.onnx.TypeProto;if(null!=e.tensorType){if("object"!=typeof e.tensorType)throw TypeError(".onnx.TypeProto.tensorType: object expected");t.tensorType=l.onnx.TypeProto.Tensor.fromObject(e.tensorType)}if(null!=e.sequenceType){if("object"!=typeof e.sequenceType)throw TypeError(".onnx.TypeProto.sequenceType: object expected");t.sequenceType=l.onnx.TypeProto.Sequence.fromObject(e.sequenceType)}if(null!=e.mapType){if("object"!=typeof e.mapType)throw TypeError(".onnx.TypeProto.mapType: object expected");t.mapType=l.onnx.TypeProto.Map.fromObject(e.mapType)}if(null!=e.optionalType){if("object"!=typeof e.optionalType)throw TypeError(".onnx.TypeProto.optionalType: object expected");t.optionalType=l.onnx.TypeProto.Optional.fromObject(e.optionalType)}if(null!=e.sparseTensorType){if("object"!=typeof e.sparseTensorType)throw TypeError(".onnx.TypeProto.sparseTensorType: object expected");t.sparseTensorType=l.onnx.TypeProto.SparseTensor.fromObject(e.sparseTensorType)}return null!=e.denotation&&(t.denotation=String(e.denotation)),t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.denotation=""),null!=e.tensorType&&e.hasOwnProperty("tensorType")&&(n.tensorType=l.onnx.TypeProto.Tensor.toObject(e.tensorType,t),t.oneofs&&(n.value="tensorType")),null!=e.sequenceType&&e.hasOwnProperty("sequenceType")&&(n.sequenceType=l.onnx.TypeProto.Sequence.toObject(e.sequenceType,t),t.oneofs&&(n.value="sequenceType")),null!=e.mapType&&e.hasOwnProperty("mapType")&&(n.mapType=l.onnx.TypeProto.Map.toObject(e.mapType,t),t.oneofs&&(n.value="mapType")),null!=e.denotation&&e.hasOwnProperty("denotation")&&(n.denotation=e.denotation),null!=e.sparseTensorType&&e.hasOwnProperty("sparseTensorType")&&(n.sparseTensorType=l.onnx.TypeProto.SparseTensor.toObject(e.sparseTensorType,t),t.oneofs&&(n.value="sparseTensorType")),null!=e.optionalType&&e.hasOwnProperty("optionalType")&&(n.optionalType=l.onnx.TypeProto.Optional.toObject(e.optionalType,t),t.oneofs&&(n.value="optionalType")),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,a.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/onnx.TypeProto"},e.Tensor=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.elemType=0,e.prototype.shape=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=s.create()),null!=e.elemType&&Object.hasOwnProperty.call(e,"elemType")&&t.uint32(8).int32(e.elemType),null!=e.shape&&Object.hasOwnProperty.call(e,"shape")&&l.onnx.TensorShapeProto.encode(e.shape,t.uint32(18).fork()).ldelim(),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof u||(e=u.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new l.onnx.TypeProto.Tensor;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.elemType=e.int32();break;case 2:r.shape=l.onnx.TensorShapeProto.decode(e,e.uint32());break;default:e.skipType(7&o)}}return r},e.decodeDelimited=function(e){return e instanceof u||(e=new u(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.elemType&&e.hasOwnProperty("elemType")&&!c.isInteger(e.elemType))return"elemType: integer expected";if(null!=e.shape&&e.hasOwnProperty("shape")){var t=l.onnx.TensorShapeProto.verify(e.shape);if(t)return"shape."+t}return null},e.fromObject=function(e){if(e instanceof l.onnx.TypeProto.Tensor)return e;var t=new l.onnx.TypeProto.Tensor;if(null!=e.elemType&&(t.elemType=0|e.elemType),null!=e.shape){if("object"!=typeof e.shape)throw TypeError(".onnx.TypeProto.Tensor.shape: object expected");t.shape=l.onnx.TensorShapeProto.fromObject(e.shape)}return t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.elemType=0,n.shape=null),null!=e.elemType&&e.hasOwnProperty("elemType")&&(n.elemType=e.elemType),null!=e.shape&&e.hasOwnProperty("shape")&&(n.shape=l.onnx.TensorShapeProto.toObject(e.shape,t)),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,a.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/onnx.TypeProto.Tensor"},e}(),e.Sequence=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.elemType=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=s.create()),null!=e.elemType&&Object.hasOwnProperty.call(e,"elemType")&&l.onnx.TypeProto.encode(e.elemType,t.uint32(10).fork()).ldelim(),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof u||(e=u.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new l.onnx.TypeProto.Sequence;e.pos<n;){var o=e.uint32();o>>>3==1?r.elemType=l.onnx.TypeProto.decode(e,e.uint32()):e.skipType(7&o)}return r},e.decodeDelimited=function(e){return e instanceof u||(e=new u(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.elemType&&e.hasOwnProperty("elemType")){var t=l.onnx.TypeProto.verify(e.elemType);if(t)return"elemType."+t}return null},e.fromObject=function(e){if(e instanceof l.onnx.TypeProto.Sequence)return e;var t=new l.onnx.TypeProto.Sequence;if(null!=e.elemType){if("object"!=typeof e.elemType)throw TypeError(".onnx.TypeProto.Sequence.elemType: object expected");t.elemType=l.onnx.TypeProto.fromObject(e.elemType)}return t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.elemType=null),null!=e.elemType&&e.hasOwnProperty("elemType")&&(n.elemType=l.onnx.TypeProto.toObject(e.elemType,t)),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,a.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/onnx.TypeProto.Sequence"},e}(),e.Map=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.keyType=0,e.prototype.valueType=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=s.create()),null!=e.keyType&&Object.hasOwnProperty.call(e,"keyType")&&t.uint32(8).int32(e.keyType),null!=e.valueType&&Object.hasOwnProperty.call(e,"valueType")&&l.onnx.TypeProto.encode(e.valueType,t.uint32(18).fork()).ldelim(),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof u||(e=u.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new l.onnx.TypeProto.Map;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.keyType=e.int32();break;case 2:r.valueType=l.onnx.TypeProto.decode(e,e.uint32());break;default:e.skipType(7&o)}}return r},e.decodeDelimited=function(e){return e instanceof u||(e=new u(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.keyType&&e.hasOwnProperty("keyType")&&!c.isInteger(e.keyType))return"keyType: integer expected";if(null!=e.valueType&&e.hasOwnProperty("valueType")){var t=l.onnx.TypeProto.verify(e.valueType);if(t)return"valueType."+t}return null},e.fromObject=function(e){if(e instanceof l.onnx.TypeProto.Map)return e;var t=new l.onnx.TypeProto.Map;if(null!=e.keyType&&(t.keyType=0|e.keyType),null!=e.valueType){if("object"!=typeof e.valueType)throw TypeError(".onnx.TypeProto.Map.valueType: object expected");t.valueType=l.onnx.TypeProto.fromObject(e.valueType)}return t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.keyType=0,n.valueType=null),null!=e.keyType&&e.hasOwnProperty("keyType")&&(n.keyType=e.keyType),null!=e.valueType&&e.hasOwnProperty("valueType")&&(n.valueType=l.onnx.TypeProto.toObject(e.valueType,t)),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,a.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/onnx.TypeProto.Map"},e}(),e.Optional=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.elemType=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=s.create()),null!=e.elemType&&Object.hasOwnProperty.call(e,"elemType")&&l.onnx.TypeProto.encode(e.elemType,t.uint32(10).fork()).ldelim(),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof u||(e=u.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new l.onnx.TypeProto.Optional;e.pos<n;){var o=e.uint32();o>>>3==1?r.elemType=l.onnx.TypeProto.decode(e,e.uint32()):e.skipType(7&o)}return r},e.decodeDelimited=function(e){return e instanceof u||(e=new u(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.elemType&&e.hasOwnProperty("elemType")){var t=l.onnx.TypeProto.verify(e.elemType);if(t)return"elemType."+t}return null},e.fromObject=function(e){if(e instanceof l.onnx.TypeProto.Optional)return e;var t=new l.onnx.TypeProto.Optional;if(null!=e.elemType){if("object"!=typeof e.elemType)throw TypeError(".onnx.TypeProto.Optional.elemType: object expected");t.elemType=l.onnx.TypeProto.fromObject(e.elemType)}return t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.elemType=null),null!=e.elemType&&e.hasOwnProperty("elemType")&&(n.elemType=l.onnx.TypeProto.toObject(e.elemType,t)),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,a.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/onnx.TypeProto.Optional"},e}(),e.SparseTensor=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.elemType=0,e.prototype.shape=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=s.create()),null!=e.elemType&&Object.hasOwnProperty.call(e,"elemType")&&t.uint32(8).int32(e.elemType),null!=e.shape&&Object.hasOwnProperty.call(e,"shape")&&l.onnx.TensorShapeProto.encode(e.shape,t.uint32(18).fork()).ldelim(),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof u||(e=u.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new l.onnx.TypeProto.SparseTensor;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.elemType=e.int32();break;case 2:r.shape=l.onnx.TensorShapeProto.decode(e,e.uint32());break;default:e.skipType(7&o)}}return r},e.decodeDelimited=function(e){return e instanceof u||(e=new u(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.elemType&&e.hasOwnProperty("elemType")&&!c.isInteger(e.elemType))return"elemType: integer expected";if(null!=e.shape&&e.hasOwnProperty("shape")){var t=l.onnx.TensorShapeProto.verify(e.shape);if(t)return"shape."+t}return null},e.fromObject=function(e){if(e instanceof l.onnx.TypeProto.SparseTensor)return e;var t=new l.onnx.TypeProto.SparseTensor;if(null!=e.elemType&&(t.elemType=0|e.elemType),null!=e.shape){if("object"!=typeof e.shape)throw TypeError(".onnx.TypeProto.SparseTensor.shape: object expected");t.shape=l.onnx.TensorShapeProto.fromObject(e.shape)}return t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.elemType=0,n.shape=null),null!=e.elemType&&e.hasOwnProperty("elemType")&&(n.elemType=e.elemType),null!=e.shape&&e.hasOwnProperty("shape")&&(n.shape=l.onnx.TensorShapeProto.toObject(e.shape,t)),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,a.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/onnx.TypeProto.SparseTensor"},e}(),e}(),i.OperatorSetIdProto=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.domain="",e.prototype.version=c.Long?c.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=s.create()),null!=e.domain&&Object.hasOwnProperty.call(e,"domain")&&t.uint32(10).string(e.domain),null!=e.version&&Object.hasOwnProperty.call(e,"version")&&t.uint32(16).int64(e.version),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof u||(e=u.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new l.onnx.OperatorSetIdProto;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.domain=e.string();break;case 2:r.version=e.int64();break;default:e.skipType(7&o)}}return r},e.decodeDelimited=function(e){return e instanceof u||(e=new u(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.domain&&e.hasOwnProperty("domain")&&!c.isString(e.domain)?"domain: string expected":null!=e.version&&e.hasOwnProperty("version")&&!(c.isInteger(e.version)||e.version&&c.isInteger(e.version.low)&&c.isInteger(e.version.high))?"version: integer|Long expected":null},e.fromObject=function(e){if(e instanceof l.onnx.OperatorSetIdProto)return e;var t=new l.onnx.OperatorSetIdProto;return null!=e.domain&&(t.domain=String(e.domain)),null!=e.version&&(c.Long?(t.version=c.Long.fromValue(e.version)).unsigned=!1:"string"==typeof e.version?t.version=parseInt(e.version,10):"number"==typeof e.version?t.version=e.version:"object"==typeof e.version&&(t.version=new c.LongBits(e.version.low>>>0,e.version.high>>>0).toNumber())),t},e.toObject=function(e,t){t||(t={});var n={};if(t.defaults)if(n.domain="",c.Long){var r=new c.Long(0,0,!1);n.version=t.longs===String?r.toString():t.longs===Number?r.toNumber():r}else n.version=t.longs===String?"0":0;return null!=e.domain&&e.hasOwnProperty("domain")&&(n.domain=e.domain),null!=e.version&&e.hasOwnProperty("version")&&("number"==typeof e.version?n.version=t.longs===String?String(e.version):e.version:n.version=t.longs===String?c.Long.prototype.toString.call(e.version):t.longs===Number?new c.LongBits(e.version.low>>>0,e.version.high>>>0).toNumber():e.version),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,a.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/onnx.OperatorSetIdProto"},e}(),i.OperatorStatus=function(){var e={},t=Object.create(e);return t[e[0]="EXPERIMENTAL"]=0,t[e[1]="STABLE"]=1,t}(),i.FunctionProto=function(){function e(e){if(this.input=[],this.output=[],this.attribute=[],this.attributeProto=[],this.node=[],this.opsetImport=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.name="",e.prototype.input=c.emptyArray,e.prototype.output=c.emptyArray,e.prototype.attribute=c.emptyArray,e.prototype.attributeProto=c.emptyArray,e.prototype.node=c.emptyArray,e.prototype.docString="",e.prototype.opsetImport=c.emptyArray,e.prototype.domain="",e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=s.create()),null!=e.name&&Object.hasOwnProperty.call(e,"name")&&t.uint32(10).string(e.name),null!=e.input&&e.input.length)for(var n=0;n<e.input.length;++n)t.uint32(34).string(e.input[n]);if(null!=e.output&&e.output.length)for(n=0;n<e.output.length;++n)t.uint32(42).string(e.output[n]);if(null!=e.attribute&&e.attribute.length)for(n=0;n<e.attribute.length;++n)t.uint32(50).string(e.attribute[n]);if(null!=e.node&&e.node.length)for(n=0;n<e.node.length;++n)l.onnx.NodeProto.encode(e.node[n],t.uint32(58).fork()).ldelim();if(null!=e.docString&&Object.hasOwnProperty.call(e,"docString")&&t.uint32(66).string(e.docString),null!=e.opsetImport&&e.opsetImport.length)for(n=0;n<e.opsetImport.length;++n)l.onnx.OperatorSetIdProto.encode(e.opsetImport[n],t.uint32(74).fork()).ldelim();if(null!=e.domain&&Object.hasOwnProperty.call(e,"domain")&&t.uint32(82).string(e.domain),null!=e.attributeProto&&e.attributeProto.length)for(n=0;n<e.attributeProto.length;++n)l.onnx.AttributeProto.encode(e.attributeProto[n],t.uint32(90).fork()).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof u||(e=u.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new l.onnx.FunctionProto;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.name=e.string();break;case 4:r.input&&r.input.length||(r.input=[]),r.input.push(e.string());break;case 5:r.output&&r.output.length||(r.output=[]),r.output.push(e.string());break;case 6:r.attribute&&r.attribute.length||(r.attribute=[]),r.attribute.push(e.string());break;case 11:r.attributeProto&&r.attributeProto.length||(r.attributeProto=[]),r.attributeProto.push(l.onnx.AttributeProto.decode(e,e.uint32()));break;case 7:r.node&&r.node.length||(r.node=[]),r.node.push(l.onnx.NodeProto.decode(e,e.uint32()));break;case 8:r.docString=e.string();break;case 9:r.opsetImport&&r.opsetImport.length||(r.opsetImport=[]),r.opsetImport.push(l.onnx.OperatorSetIdProto.decode(e,e.uint32()));break;case 10:r.domain=e.string();break;default:e.skipType(7&o)}}return r},e.decodeDelimited=function(e){return e instanceof u||(e=new u(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.name&&e.hasOwnProperty("name")&&!c.isString(e.name))return"name: string expected";if(null!=e.input&&e.hasOwnProperty("input")){if(!Array.isArray(e.input))return"input: array expected";for(var t=0;t<e.input.length;++t)if(!c.isString(e.input[t]))return"input: string[] expected"}if(null!=e.output&&e.hasOwnProperty("output")){if(!Array.isArray(e.output))return"output: array expected";for(t=0;t<e.output.length;++t)if(!c.isString(e.output[t]))return"output: string[] expected"}if(null!=e.attribute&&e.hasOwnProperty("attribute")){if(!Array.isArray(e.attribute))return"attribute: array expected";for(t=0;t<e.attribute.length;++t)if(!c.isString(e.attribute[t]))return"attribute: string[] expected"}if(null!=e.attributeProto&&e.hasOwnProperty("attributeProto")){if(!Array.isArray(e.attributeProto))return"attributeProto: array expected";for(t=0;t<e.attributeProto.length;++t)if(n=l.onnx.AttributeProto.verify(e.attributeProto[t]))return"attributeProto."+n}if(null!=e.node&&e.hasOwnProperty("node")){if(!Array.isArray(e.node))return"node: array expected";for(t=0;t<e.node.length;++t)if(n=l.onnx.NodeProto.verify(e.node[t]))return"node."+n}if(null!=e.docString&&e.hasOwnProperty("docString")&&!c.isString(e.docString))return"docString: string expected";if(null!=e.opsetImport&&e.hasOwnProperty("opsetImport")){if(!Array.isArray(e.opsetImport))return"opsetImport: array expected";for(t=0;t<e.opsetImport.length;++t){var n;if(n=l.onnx.OperatorSetIdProto.verify(e.opsetImport[t]))return"opsetImport."+n}}return null!=e.domain&&e.hasOwnProperty("domain")&&!c.isString(e.domain)?"domain: string expected":null},e.fromObject=function(e){if(e instanceof l.onnx.FunctionProto)return e;var t=new l.onnx.FunctionProto;if(null!=e.name&&(t.name=String(e.name)),e.input){if(!Array.isArray(e.input))throw TypeError(".onnx.FunctionProto.input: array expected");t.input=[];for(var n=0;n<e.input.length;++n)t.input[n]=String(e.input[n])}if(e.output){if(!Array.isArray(e.output))throw TypeError(".onnx.FunctionProto.output: array expected");for(t.output=[],n=0;n<e.output.length;++n)t.output[n]=String(e.output[n])}if(e.attribute){if(!Array.isArray(e.attribute))throw TypeError(".onnx.FunctionProto.attribute: array expected");for(t.attribute=[],n=0;n<e.attribute.length;++n)t.attribute[n]=String(e.attribute[n])}if(e.attributeProto){if(!Array.isArray(e.attributeProto))throw TypeError(".onnx.FunctionProto.attributeProto: array expected");for(t.attributeProto=[],n=0;n<e.attributeProto.length;++n){if("object"!=typeof e.attributeProto[n])throw TypeError(".onnx.FunctionProto.attributeProto: object expected");t.attributeProto[n]=l.onnx.AttributeProto.fromObject(e.attributeProto[n])}}if(e.node){if(!Array.isArray(e.node))throw TypeError(".onnx.FunctionProto.node: array expected");for(t.node=[],n=0;n<e.node.length;++n){if("object"!=typeof e.node[n])throw TypeError(".onnx.FunctionProto.node: object expected");t.node[n]=l.onnx.NodeProto.fromObject(e.node[n])}}if(null!=e.docString&&(t.docString=String(e.docString)),e.opsetImport){if(!Array.isArray(e.opsetImport))throw TypeError(".onnx.FunctionProto.opsetImport: array expected");for(t.opsetImport=[],n=0;n<e.opsetImport.length;++n){if("object"!=typeof e.opsetImport[n])throw TypeError(".onnx.FunctionProto.opsetImport: object expected");t.opsetImport[n]=l.onnx.OperatorSetIdProto.fromObject(e.opsetImport[n])}}return null!=e.domain&&(t.domain=String(e.domain)),t},e.toObject=function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.input=[],n.output=[],n.attribute=[],n.node=[],n.opsetImport=[],n.attributeProto=[]),t.defaults&&(n.name="",n.docString="",n.domain=""),null!=e.name&&e.hasOwnProperty("name")&&(n.name=e.name),e.input&&e.input.length){n.input=[];for(var r=0;r<e.input.length;++r)n.input[r]=e.input[r]}if(e.output&&e.output.length)for(n.output=[],r=0;r<e.output.length;++r)n.output[r]=e.output[r];if(e.attribute&&e.attribute.length)for(n.attribute=[],r=0;r<e.attribute.length;++r)n.attribute[r]=e.attribute[r];if(e.node&&e.node.length)for(n.node=[],r=0;r<e.node.length;++r)n.node[r]=l.onnx.NodeProto.toObject(e.node[r],t);if(null!=e.docString&&e.hasOwnProperty("docString")&&(n.docString=e.docString),e.opsetImport&&e.opsetImport.length)for(n.opsetImport=[],r=0;r<e.opsetImport.length;++r)n.opsetImport[r]=l.onnx.OperatorSetIdProto.toObject(e.opsetImport[r],t);if(null!=e.domain&&e.hasOwnProperty("domain")&&(n.domain=e.domain),e.attributeProto&&e.attributeProto.length)for(n.attributeProto=[],r=0;r<e.attributeProto.length;++r)n.attributeProto[r]=l.onnx.AttributeProto.toObject(e.attributeProto[r],t);return n},e.prototype.toJSON=function(){return this.constructor.toObject(this,a.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/onnx.FunctionProto"},e}(),i),e.exports=l},3474:function(e,t,n){var _scriptDir,r=(_scriptDir="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0,"undefined"!=typeof __filename&&(_scriptDir=_scriptDir||__filename),function(e={}){function t(){return k.buffer!=j.buffer&&q(),j}function r(){return k.buffer!=j.buffer&&q(),L}function o(){return k.buffer!=j.buffer&&q(),F}function i(){return k.buffer!=j.buffer&&q(),N}function a(){return k.buffer!=j.buffer&&q(),B}function u(){return k.buffer!=j.buffer&&q(),U}function s(){return k.buffer!=j.buffer&&q(),W}var c,l,p;c||(c=void 0!==e?e:{}),c.ready=new Promise(((e,t)=>{l=e,p=t}));var f,d,h,g=Object.assign({},c),y="./this.program",m=(e,t)=>{throw t},v="object"==typeof window,b="function"==typeof importScripts,w="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,_=c.ENVIRONMENT_IS_PTHREAD||!1,x="";function T(e){return c.locateFile?c.locateFile(e,x):x+e}if(w){var S=n(1384),P=n(908);let t;x=b?P.dirname(x)+"/":__dirname+"/",f=(e,t)=>(e=e.startsWith("file://")?new URL(e):P.normalize(e),S.readFileSync(e,t?void 0:"utf8")),h=e=>((e=f(e,!0)).buffer||(e=new Uint8Array(e)),e),d=(e,t,n,r=!0)=>{e=e.startsWith("file://")?new URL(e):P.normalize(e),S.readFile(e,r?void 0:"utf8",((e,o)=>{e?n(e):t(r?o.buffer:o)}))},!c.thisProgram&&1<process.argv.length&&(y=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),m=(e,t)=>{throw process.exitCode=e,t},c.inspect=()=>"[Emscripten Module object]";try{t=n(9925)}catch(e){throw console.error('The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?'),e}global.Worker=t.Worker}else(v||b)&&(b?x=self.location.href:"undefined"!=typeof document&&document.currentScript&&(x=document.currentScript.src),_scriptDir&&(x=_scriptDir),x=0!==x.indexOf("blob:")?x.substr(0,x.replace(/[?#].*/,"").lastIndexOf("/")+1):"",w||(f=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},b&&(h=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),d=(e,t,n)=>{var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=()=>{200==r.status||0==r.status&&r.response?t(r.response):n()},r.onerror=n,r.send(null)}));w&&"undefined"==typeof performance&&(global.performance=n(6953).performance);var A=console.log.bind(console),O=console.warn.bind(console);w&&(A=(...e)=>S.writeSync(1,e.join(" ")+"\n"),O=(...e)=>S.writeSync(2,e.join(" ")+"\n"));var I,E=c.print||A,C=c.printErr||O;Object.assign(c,g),g=null,c.thisProgram&&(y=c.thisProgram),c.quit&&(m=c.quit),c.wasmBinary&&(I=c.wasmBinary);var D=c.noExitRuntime||!0;"object"!=typeof WebAssembly&&ie("no native wasm support detected");var k,R,M,j,L,F,N,B,U,z,G,V,W,H=!1;function q(){var e=k.buffer;c.HEAP8=j=new Int8Array(e),c.HEAP16=F=new Int16Array(e),c.HEAP32=B=new Int32Array(e),c.HEAPU8=L=new Uint8Array(e),c.HEAPU16=N=new Uint16Array(e),c.HEAPU32=U=new Uint32Array(e),c.HEAPF32=z=new Float32Array(e),c.HEAPF64=W=new Float64Array(e),c.HEAP64=G=new BigInt64Array(e),c.HEAPU64=V=new BigUint64Array(e)}var K=c.INITIAL_MEMORY||16777216;if(5242880<=K||ie("INITIAL_MEMORY should be larger than STACK_SIZE, was "+K+"! (STACK_SIZE=5242880)"),_)k=c.wasmMemory;else if(c.wasmMemory)k=c.wasmMemory;else if(!((k=new WebAssembly.Memory({initial:K/65536,maximum:65536,shared:!0})).buffer instanceof SharedArrayBuffer))throw C("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),w&&C("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and/or recent version)"),Error("bad memory");q(),K=k.buffer.byteLength;var X,Y=[],J=[],Z=[],$=0;function Q(){return D||0<$}function ee(){var e=c.preRun.shift();Y.unshift(e)}var te,ne=0,re=null,oe=null;function ie(e){throw c.onAbort&&c.onAbort(e),C(e="Aborted("+e+")"),H=!0,M=1,e=new WebAssembly.RuntimeError(e+". Build with -sASSERTIONS for more info."),p(e),e}function ae(e){return e.startsWith("data:application/octet-stream;base64,")}function ue(e){try{if(e==te&&I)return new Uint8Array(I);if(h)return h(e);throw"both async and sync fetching of the wasm failed"}catch(e){ie(e)}}function se(e,t,n){return function(e){if(!I&&(v||b)){if("function"==typeof fetch&&!e.startsWith("file://"))return fetch(e,{credentials:"same-origin"}).then((t=>{if(!t.ok)throw"failed to load wasm binary file at '"+e+"'";return t.arrayBuffer()})).catch((()=>ue(e)));if(d)return new Promise(((t,n)=>{d(e,(e=>t(new Uint8Array(e))),n)}))}return Promise.resolve().then((()=>ue(e)))}(e).then((e=>WebAssembly.instantiate(e,t))).then((e=>e)).then(n,(e=>{C("failed to asynchronously prepare wasm: "+e),ie(e)}))}function ce(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function le(e){e.terminate(),e.onmessage=()=>{}}function pe(e){(e=be.hb[e])||ie(),be.Lb(e)}function fe(e){var t=be.Db();if(!t)return 6;be.kb.push(t),be.hb[e.jb]=t,t.jb=e.jb;var n={cmd:"run",start_routine:e.Mb,arg:e.Bb,pthread_ptr:e.jb};return w&&t.unref(),t.postMessage(n,e.Sb),0}ae(te="ort-wasm-threaded.wasm")||(te=T(te));var de="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function he(e,t,n){var r=(t>>>=0)+n;for(n=t;e[n]&&!(n>=r);)++n;if(16<n-t&&e.buffer&&de)return de.decode(e.buffer instanceof SharedArrayBuffer?e.slice(t,n):e.subarray(t,n));for(r="";t<n;){var o=e[t++];if(128&o){var i=63&e[t++];if(192==(224&o))r+=String.fromCharCode((31&o)<<6|i);else{var a=63&e[t++];65536>(o=224==(240&o)?(15&o)<<12|i<<6|a:(7&o)<<18|i<<12|a<<6|63&e[t++])?r+=String.fromCharCode(o):(o-=65536,r+=String.fromCharCode(55296|o>>10,56320|1023&o))}}else r+=String.fromCharCode(o)}return r}function ge(e,t){return(e>>>=0)?he(r(),e,t):""}function ye(e){if(_)return Rt(1,1,e);M=e,Q()||(be.Nb(),c.onExit&&c.onExit(e),H=!0),m(e,new ce(e))}function me(e){if(M=e,_)throw _e(e),"unwind";ye(e)}function ve(e){e instanceof ce||"unwind"==e||m(1,e)}var be={nb:[],kb:[],zb:[],hb:{},tb:function(){_&&be.Fb()},Vb:function(){},Fb:function(){be.receiveObjectTransfer=be.Kb,be.threadInitTLS=be.yb,be.setExitStatus=be.xb,D=!1},xb:function(e){M=e},Xb:["$terminateWorker"],Nb:function(){for(var e of be.kb)le(e);for(e of be.nb)le(e);be.nb=[],be.kb=[],be.hb=[]},Lb:function(e){var t=e.jb;delete be.hb[t],be.nb.push(e),be.kb.splice(be.kb.indexOf(e),1),e.jb=0,on(t)},Kb:function(){},yb:function(){be.zb.forEach((e=>e()))},Jb:e=>new Promise((t=>{e.onmessage=n=>{var r=(n=n.data).cmd;if(e.jb&&(be.Cb=e.jb),n.targetThread&&n.targetThread!=$t()){var o=be.hb[n.Wb];o?o.postMessage(n,n.transferList):C('Internal error! Worker sent a message "'+r+'" to target pthread '+n.targetThread+", but that thread no longer exists!")}else"checkMailbox"===r?yt():"spawnThread"===r?fe(n):"cleanupThread"===r?pe(n.thread):"killThread"===r?(n=n.thread,r=be.hb[n],delete be.hb[n],le(r),on(n),be.kb.splice(be.kb.indexOf(r),1),r.jb=0):"cancelThread"===r?be.hb[n.thread].postMessage({cmd:"cancel"}):"loaded"===r?(e.loaded=!0,t(e)):"print"===r?E("Thread "+n.threadId+": "+n.text):"printErr"===r?C("Thread "+n.threadId+": "+n.text):"alert"===r?alert("Thread "+n.threadId+": "+n.text):"setimmediate"===n.target?e.postMessage(n):"callHandler"===r?c[n.handler](...n.args):r&&C("worker sent an unknown command "+r);be.Cb=void 0},e.onerror=e=>{throw C("worker sent an error! "+e.filename+":"+e.lineno+": "+e.message),e},w&&(e.on("message",(function(t){e.onmessage({data:t})})),e.on("error",(function(t){e.onerror(t)})));var n,r=[];for(n of["onExit","onAbort","print","printErr"])c.hasOwnProperty(n)&&r.push(n);e.postMessage({cmd:"load",handlers:r,urlOrBlob:c.mainScriptUrlOrBlob||_scriptDir,wasmMemory:k,wasmModule:R})})),Ib:function(e){e()},Ab:function(){var e=T("ort-wasm-threaded.worker.js");e=new Worker(e),be.nb.push(e)},Db:function(){return 0==be.nb.length&&(be.Ab(),be.Jb(be.nb[0])),be.nb.pop()}};function we(e){for(;0<e.length;)e.shift()(c)}function _e(e){if(_)return Rt(2,0,e);me(e)}c.PThread=be,c.establishStackSpace=function(){var e=$t(),t=a()[e+52>>2>>>0];cn(t,t-(e=a()[e+56>>2>>>0])),pn(t)};var xe=[];function Te(e){this.gb=e-24,this.ub=function(e){u()[this.gb+4>>2>>>0]=e},this.qb=function(e){u()[this.gb+8>>2>>>0]=e},this.tb=function(e,t){this.pb(),this.ub(e),this.qb(t)},this.pb=function(){u()[this.gb+16>>2>>>0]=0}}function Se(e,t,n,r){return _?Rt(3,1,e,t,n,r):Pe(e,t,n,r)}function Pe(e,t,n,r){if("undefined"==typeof SharedArrayBuffer)return C("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var o=[];return _&&0===o.length?Se(e,t,n,r):(e={Mb:n,jb:e,Bb:r,Sb:o},_?(e.Ub="spawnThread",postMessage(e,o),0):fe(e))}function Ae(e,t,n){return _?Rt(4,1,e,t,n):0}function Oe(e,t){if(_)return Rt(5,1,e,t)}function Ie(e){for(var t=0,n=0;n<e.length;++n){var r=e.charCodeAt(n);127>=r?t++:2047>=r?t+=2:55296<=r&&57343>=r?(t+=4,++n):t+=3}return t}function Ee(e,t,n,r){if(!(0<r))return 0;var o=n>>>=0;r=n+r-1;for(var i=0;i<e.length;++i){var a=e.charCodeAt(i);if(55296<=a&&57343>=a&&(a=65536+((1023&a)<<10)|1023&e.charCodeAt(++i)),127>=a){if(n>=r)break;t[n++>>>0]=a}else{if(2047>=a){if(n+1>=r)break;t[n++>>>0]=192|a>>6}else{if(65535>=a){if(n+2>=r)break;t[n++>>>0]=224|a>>12}else{if(n+3>=r)break;t[n++>>>0]=240|a>>18,t[n++>>>0]=128|a>>12&63}t[n++>>>0]=128|a>>6&63}t[n++>>>0]=128|63&a}}return t[n>>>0]=0,n-o}function Ce(e,t,n){return Ee(e,r(),t,n)}function De(e,t){if(_)return Rt(6,1,e,t)}function ke(e,t,n){if(_)return Rt(7,1,e,t,n)}function Re(e,t,n){return _?Rt(8,1,e,t,n):0}function Me(e,t){if(_)return Rt(9,1,e,t)}function je(e,t,n){if(_)return Rt(10,1,e,t,n)}function Le(e,t,n,r){if(_)return Rt(11,1,e,t,n,r)}function Fe(e,t,n,r){if(_)return Rt(12,1,e,t,n,r)}function Ne(e,t,n,r){if(_)return Rt(13,1,e,t,n,r)}function Be(e){if(_)return Rt(14,1,e)}function Ue(e,t){if(_)return Rt(15,1,e,t)}function ze(e,t,n){if(_)return Rt(16,1,e,t,n)}function Ge(e){if(null===e)return"null";var t=typeof e;return"object"===t||"array"===t||"function"===t?e.toString():""+e}c.invokeEntryPoint=function(e,t){var n=xe[e];n||(e>=xe.length&&(xe.length=e+1),xe[e]=n=X.get(e)),e=n(t),Q()?be.xb(e):un(e)};var Ve=void 0;function We(e){for(var t="";r()[e>>>0];)t+=Ve[r()[e++>>>0]];return t}var He={},qe={},Ke={};function Xe(e){if(void 0===e)return"_unknown";var t=(e=e.replace(/[^a-zA-Z0-9_]/g,"$")).charCodeAt(0);return 48<=t&&57>=t?"_"+e:e}function Ye(e,t){return{[e=Xe(e)]:function(){return t.apply(this,arguments)}}[e]}function Je(e){var t=Error,n=Ye(e,(function(t){this.name=e,this.message=t,void 0!==(t=Error(t).stack)&&(this.stack=this.toString()+"\n"+t.replace(/^Error(:[^\n]*)?\n/,""))}));return n.prototype=Object.create(t.prototype),n.prototype.constructor=n,n.prototype.toString=function(){return void 0===this.message?this.name:this.name+": "+this.message},n}var Ze=void 0;function $e(e){throw new Ze(e)}function Qe(e,t,n={}){if(!("argPackAdvance"in t))throw new TypeError("registerType registeredInstance requires argPackAdvance");var r=t.name;if(e||$e('type "'+r+'" must have a positive integer typeid pointer'),qe.hasOwnProperty(e)){if(n.Eb)return;$e("Cannot register type '"+r+"' twice")}qe[e]=t,delete Ke[e],He.hasOwnProperty(e)&&(t=He[e],delete He[e],t.forEach((e=>e())))}function et(e,n,s){switch(n){case 0:return s?function(e){return t()[e>>>0]}:function(e){return r()[e>>>0]};case 1:return s?function(e){return o()[e>>>1]}:function(e){return i()[e>>>1]};case 2:return s?function(e){return a()[e>>>2]}:function(e){return u()[e>>>2]};case 3:return s?function(e){return G[e>>3]}:function(e){return V[e>>3]};default:throw new TypeError("Unknown integer type: "+e)}}function tt(e){switch(e){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+e)}}var nt=new function(){this.gb=[void 0],this.pb=[],this.get=function(e){return this.gb[e]},this.ub=function(e){let t=this.pb.pop()||this.gb.length;return this.gb[t]=e,t},this.Hb=function(e){this.gb[e]=void 0,this.pb.push(e)}};function rt(e){e>=nt.qb&&0==--nt.get(e).wb&&nt.Hb(e)}var ot=e=>(e||$e("Cannot use deleted val. handle = "+e),nt.get(e).value),it=e=>{switch(e){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:return nt.ub({wb:1,value:e})}};function at(e){return this.fromWireType(a()[e>>2>>>0])}function ut(e,t){switch(t){case 2:return function(e){var t=this.fromWireType;return k.buffer!=j.buffer&&q(),t.call(this,z[e>>>2])};case 3:return function(e){return this.fromWireType(s()[e>>>3])};default:throw new TypeError("Unknown float type: "+e)}}var st="undefined"!=typeof TextDecoder?new TextDecoder("utf-16le"):void 0;function ct(e,t){for(var n=e>>1,a=n+t/2;!(n>=a)&&i()[n>>>0];)++n;if(32<(n<<=1)-e&&st)return st.decode(r().slice(e,n));for(n="",a=0;!(a>=t/2);++a){var u=o()[e+2*a>>1>>>0];if(0==u)break;n+=String.fromCharCode(u)}return n}function lt(e,t,n){if(void 0===n&&(n=2147483647),2>n)return 0;var r=t;n=(n-=2)<2*e.length?n/2:e.length;for(var i=0;i<n;++i){var a=e.charCodeAt(i);o()[t>>1>>>0]=a,t+=2}return o()[t>>1>>>0]=0,t-r}function pt(e){return 2*e.length}function ft(e,t){for(var n=0,r="";!(n>=t/4);){var o=a()[e+4*n>>2>>>0];if(0==o)break;++n,65536<=o?(o-=65536,r+=String.fromCharCode(55296|o>>10,56320|1023&o)):r+=String.fromCharCode(o)}return r}function dt(e,t,n){if(void 0===n&&(n=2147483647),4>n)return 0;var r=t>>>=0;n=r+n-4;for(var o=0;o<e.length;++o){var i=e.charCodeAt(o);if(55296<=i&&57343>=i&&(i=65536+((1023&i)<<10)|1023&e.charCodeAt(++o)),a()[t>>2>>>0]=i,(t+=4)+4>n)break}return a()[t>>2>>>0]=0,t-r}function ht(e){for(var t=0,n=0;n<e.length;++n){var r=e.charCodeAt(n);55296<=r&&57343>=r&&++n,t+=4}return t}function gt(e){"function"==typeof Atomics.Tb&&(Atomics.Tb(a(),e>>2,e).value.then(yt),e+=128,Atomics.store(a(),e>>2,1))}function yt(){var e=$t();e&&(gt(e),function(e){if(!H)try{if(sn(),!Q())try{_?un(M):me(M)}catch(e){ve(e)}}catch(e){ve(e)}}())}function mt(e,t){var n=qe[e];if(void 0===n){var r=We(e=tn(e));en(e),$e(t+" has unknown type "+r)}return n}c.__emscripten_thread_mailbox_await=gt,c.checkMailbox=yt;var vt={};function bt(e){var t=vt[e];return void 0===t?We(e):t}var wt=[];function _t(){return"object"==typeof globalThis?globalThis:Function("return this")()}var xt=[],Tt={};function St(e){return u()[e>>>2]+4294967296*a()[e+4>>>2]}function Pt(e){return 0==e%4&&(0!=e%100||0==e%400)}var At,Ot=[0,31,60,91,121,152,182,213,244,274,305,335],It=[0,31,59,90,120,151,181,212,243,273,304,334];function Et(e){return(Pt(e.getFullYear())?Ot:It)[e.getMonth()]+e.getDate()-1}function Ct(e,t,n,r,o,i,a){return _?Rt(17,1,e,t,n,r,o,i,a):-52}function Dt(e,t,n,r,o,i){if(_)return Rt(18,1,e,t,n,r,o,i)}function kt(e){var t=Ie(e)+1,n=Qt(t);return n&&Ce(e,n,t),n}function Rt(e,t){var n=arguments.length-2,r=arguments;return function(e){var t=ln();return e=e(),pn(t),e}((()=>{for(var o=2*n,i=fn(8*o),a=i>>3,u=0;u<n;u++){var c=r[2+u];"bigint"==typeof c?(G[a+2*u]=1n,G[a+2*u+1]=c):(G[a+2*u]=0n,s()[a+2*u+1>>>0]=c)}return rn(e,o,i,t)}))}At=w?()=>{var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}:()=>performance.timeOrigin+performance.now();var Mt,jt=[],Lt={};function Ft(){if(!Mt){var e,t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:y||"./this.program"};for(e in Lt)void 0===Lt[e]?delete t[e]:t[e]=Lt[e];var n=[];for(e in t)n.push(e+"="+t[e]);Mt=n}return Mt}function Nt(e,n){if(_)return Rt(19,1,e,n);var r=0;return Ft().forEach((function(o,i){var a=n+r;for(i=u()[e+4*i>>2>>>0]=a,a=0;a<o.length;++a)t()[i++>>0>>>0]=o.charCodeAt(a);t()[i>>0>>>0]=0,r+=o.length+1})),0}function Bt(e,t){if(_)return Rt(20,1,e,t);var n=Ft();u()[e>>2>>>0]=n.length;var r=0;return n.forEach((function(e){r+=e.length+1})),u()[t>>2>>>0]=r,0}function Ut(e){return _?Rt(21,1,e):52}function zt(e,t,n,r){return _?Rt(22,1,e,t,n,r):52}function Gt(e,t,n,r){return _?Rt(23,1,e,t,n,r):70}var Vt=[null,[],[]];function Wt(e,t,n,o){if(_)return Rt(24,1,e,t,n,o);for(var i=0,a=0;a<n;a++){var s=u()[t>>2>>>0],c=u()[t+4>>2>>>0];t+=8;for(var l=0;l<c;l++){var p=r()[s+l>>>0],f=Vt[e];0===p||10===p?((1===e?E:C)(he(f,0)),f.length=0):f.push(p)}i+=c}return u()[o>>2>>>0]=i,0}var Ht=[31,29,31,30,31,30,31,31,30,31,30,31],qt=[31,28,31,30,31,30,31,31,30,31,30,31];function Kt(e,n,r,o){function i(e,t,n){for(e="number"==typeof e?e.toString():e||"";e.length<t;)e=n[0]+e;return e}function u(e,t){return i(e,t,"0")}function s(e,t){function n(e){return 0>e?-1:0<e?1:0}var r;return 0===(r=n(e.getFullYear()-t.getFullYear()))&&0===(r=n(e.getMonth()-t.getMonth()))&&(r=n(e.getDate()-t.getDate())),r}function c(e){switch(e.getDay()){case 0:return new Date(e.getFullYear()-1,11,29);case 1:return e;case 2:return new Date(e.getFullYear(),0,3);case 3:return new Date(e.getFullYear(),0,2);case 4:return new Date(e.getFullYear(),0,1);case 5:return new Date(e.getFullYear()-1,11,31);case 6:return new Date(e.getFullYear()-1,11,30)}}function l(e){var t=e.lb;for(e=new Date(new Date(e.mb+1900,0,1).getTime());0<t;){var n=e.getMonth(),r=(Pt(e.getFullYear())?Ht:qt)[n];if(!(t>r-e.getDate())){e.setDate(e.getDate()+t);break}t-=r-e.getDate()+1,e.setDate(1),11>n?e.setMonth(n+1):(e.setMonth(0),e.setFullYear(e.getFullYear()+1))}return n=new Date(e.getFullYear()+1,0,4),t=c(new Date(e.getFullYear(),0,4)),n=c(n),0>=s(t,e)?0>=s(n,e)?e.getFullYear()+1:e.getFullYear():e.getFullYear()-1}var p=a()[o+40>>2>>>0];for(var f in o={Qb:a()[o>>2>>>0],Pb:a()[o+4>>2>>>0],rb:a()[o+8>>2>>>0],vb:a()[o+12>>2>>>0],sb:a()[o+16>>2>>>0],mb:a()[o+20>>2>>>0],ib:a()[o+24>>2>>>0],lb:a()[o+28>>2>>>0],Yb:a()[o+32>>2>>>0],Ob:a()[o+36>>2>>>0],Rb:p?ge(p):""},r=ge(r),p={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})r=r.replace(new RegExp(f,"g"),p[f]);var d="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),h="January February March April May June July August September October November December".split(" ");for(f in p={"%a":function(e){return d[e.ib].substring(0,3)},"%A":function(e){return d[e.ib]},"%b":function(e){return h[e.sb].substring(0,3)},"%B":function(e){return h[e.sb]},"%C":function(e){return u((e.mb+1900)/100|0,2)},"%d":function(e){return u(e.vb,2)},"%e":function(e){return i(e.vb,2," ")},"%g":function(e){return l(e).toString().substring(2)},"%G":function(e){return l(e)},"%H":function(e){return u(e.rb,2)},"%I":function(e){return 0==(e=e.rb)?e=12:12<e&&(e-=12),u(e,2)},"%j":function(e){for(var t=0,n=0;n<=e.sb-1;t+=(Pt(e.mb+1900)?Ht:qt)[n++]);return u(e.vb+t,3)},"%m":function(e){return u(e.sb+1,2)},"%M":function(e){return u(e.Pb,2)},"%n":function(){return"\n"},"%p":function(e){return 0<=e.rb&&12>e.rb?"AM":"PM"},"%S":function(e){return u(e.Qb,2)},"%t":function(){return"\t"},"%u":function(e){return e.ib||7},"%U":function(e){return u(Math.floor((e.lb+7-e.ib)/7),2)},"%V":function(e){var t=Math.floor((e.lb+7-(e.ib+6)%7)/7);if(2>=(e.ib+371-e.lb-2)%7&&t++,t)53==t&&(4==(n=(e.ib+371-e.lb)%7)||3==n&&Pt(e.mb)||(t=1));else{t=52;var n=(e.ib+7-e.lb-1)%7;(4==n||5==n&&Pt(e.mb%400-1))&&t++}return u(t,2)},"%w":function(e){return e.ib},"%W":function(e){return u(Math.floor((e.lb+7-(e.ib+6)%7)/7),2)},"%y":function(e){return(e.mb+1900).toString().substring(2)},"%Y":function(e){return e.mb+1900},"%z":function(e){var t=0<=(e=e.Ob);return e=Math.abs(e)/60,(t?"+":"-")+String("0000"+(e/60*100+e%60)).slice(-4)},"%Z":function(e){return e.Rb},"%%":function(){return"%"}},r=r.replace(/%%/g,"\0\0"),p)r.includes(f)&&(r=r.replace(new RegExp(f,"g"),p[f](o)));return f=function(e){var t=Array(Ie(e)+1);return Ee(e,t,0,t.length),t}(r=r.replace(/\0\0/g,"%")),f.length>n?0:(function(e,n){t().set(e,n>>>0)}(f,e),f.length-1)}be.tb();for(var Xt=Array(256),Yt=0;256>Yt;++Yt)Xt[Yt]=String.fromCharCode(Yt);Ve=Xt,Ze=c.BindingError=Je("BindingError"),c.InternalError=Je("InternalError"),nt.gb.push({value:void 0},{value:null},{value:!0},{value:!1}),nt.qb=nt.gb.length,c.count_emval_handles=function(){for(var e=0,t=nt.qb;t<nt.gb.length;++t)void 0!==nt.gb[t]&&++e;return e};var Jt=[null,ye,_e,Se,Ae,Oe,De,ke,Re,Me,je,Le,Fe,Ne,Be,Ue,ze,Ct,Dt,Nt,Bt,Ut,zt,Gt,Wt],Zt={b:function(e,t,n){throw new Te(e).tb(t,n),e},ra:function(){ie("To use dlopen, you need enable dynamic linking, see https://emscripten.org/docs/compiling/Dynamic-Linking.html")},ga:function(e){nn(e,!b,1,!v),be.yb()},D:function(e){_?postMessage({cmd:"cleanupThread",thread:e}):pe(e)},W:Pe,y:Ae,na:Oe,S:De,U:ke,L:Re,ka:Me,ba:je,ja:Le,F:Fe,T:Ne,Q:Be,la:Ue,R:ze,I:function(e,t,n,r,o){t=We(t),n=tt(n);var i=-1!=t.indexOf("u");i&&(o=(1n<<64n)-1n),Qe(e,{name:t,fromWireType:function(e){return e},toWireType:function(e,n){if("bigint"!=typeof n&&"number"!=typeof n)throw new TypeError('Cannot convert "'+Ge(n)+'" to '+this.name);if(n<r||n>o)throw new TypeError('Passing a number "'+Ge(n)+'" from JS side to C/C++ side to an argument of type "'+t+'", which is outside the valid range ['+r+", "+o+"]!");return n},argPackAdvance:8,readValueFromPointer:et(t,n,!i),ob:null})},ta:function(e,n,r,i,u){var s=tt(r);Qe(e,{name:n=We(n),fromWireType:function(e){return!!e},toWireType:function(e,t){return t?i:u},argPackAdvance:8,readValueFromPointer:function(e){if(1===r)var i=t();else if(2===r)i=o();else{if(4!==r)throw new TypeError("Unknown boolean type size: "+n);i=a()}return this.fromWireType(i[e>>>s])},ob:null})},sa:function(e,t){Qe(e,{name:t=We(t),fromWireType:function(e){var t=ot(e);return rt(e),t},toWireType:function(e,t){return it(t)},argPackAdvance:8,readValueFromPointer:at,ob:null})},H:function(e,t,n){n=tt(n),Qe(e,{name:t=We(t),fromWireType:function(e){return e},toWireType:function(e,t){return t},argPackAdvance:8,readValueFromPointer:ut(t,n),ob:null})},u:function(e,t,n,r,o){t=We(t),-1===o&&(o=4294967295),o=tt(n);var i=e=>e;if(0===r){var a=32-8*n;i=e=>e<<a>>>a}n=t.includes("unsigned")?function(e,t){return t>>>0}:function(e,t){return t},Qe(e,{name:t,fromWireType:i,toWireType:n,argPackAdvance:8,readValueFromPointer:et(t,o,0!==r),ob:null})},m:function(e,t,n){function r(e){e>>=2;var t=u();return new o(t.buffer,t[e+1>>>0],t[e>>>0])}var o=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,BigInt64Array,BigUint64Array][t];Qe(e,{name:n=We(n),fromWireType:r,argPackAdvance:8,readValueFromPointer:r},{Eb:!0})},J:function(e,t){var n="std::string"===(t=We(t));Qe(e,{name:t,fromWireType:function(e){var t=u()[e>>2>>>0],o=e+4;if(n)for(var i=o,a=0;a<=t;++a){var s=o+a;if(a==t||0==r()[s>>>0]){if(i=ge(i,s-i),void 0===c)var c=i;else c+=String.fromCharCode(0),c+=i;i=s+1}}else{for(c=Array(t),a=0;a<t;++a)c[a]=String.fromCharCode(r()[o+a>>>0]);c=c.join("")}return en(e),c},toWireType:function(e,t){t instanceof ArrayBuffer&&(t=new Uint8Array(t));var o="string"==typeof t;o||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int8Array||$e("Cannot pass non-string to std::string");var i=n&&o?Ie(t):t.length,a=Qt(4+i+1),s=a+4>>>0;if(u()[a>>2>>>0]=i,n&&o)Ce(t,s,i+1);else if(o)for(o=0;o<i;++o){var c=t.charCodeAt(o);255<c&&(en(s),$e("String has UTF-16 code units that do not fit in 8 bits")),r()[s+o>>>0]=c}else for(o=0;o<i;++o)r()[s+o>>>0]=t[o];return null!==e&&e.push(en,a),a},argPackAdvance:8,readValueFromPointer:at,ob:function(e){en(e)}})},A:function(e,t,n){if(n=We(n),2===t)var r=ct,o=lt,a=pt,s=()=>i(),c=1;else 4===t&&(r=ft,o=dt,a=ht,s=()=>u(),c=2);Qe(e,{name:n,fromWireType:function(e){for(var n,o=u()[e>>>2],i=s(),a=e+4,l=0;l<=o;++l){var p=e+4+l*t;l!=o&&0!=i[p>>>c]||(a=r(a,p-a),void 0===n?n=a:(n+=String.fromCharCode(0),n+=a),a=p+t)}return en(e),n},toWireType:function(e,r){"string"!=typeof r&&$e("Cannot pass non-string to C++ string type "+n);var i=a(r),s=Qt(4+i+t);return s>>>=0,u()[s>>>2]=i>>c,o(r,s+4,i+t),null!==e&&e.push(en,s),s},argPackAdvance:8,readValueFromPointer:at,ob:function(e){en(e)}})},ua:function(e,t){Qe(e,{Gb:!0,name:t=We(t),argPackAdvance:0,fromWireType:function(){},toWireType:function(){}})},X:function(){return 131072},qa:function(){return!0},O:function(e,t){e==t?setTimeout((()=>yt())):_?postMessage({targetThread:e,cmd:"checkMailbox"}):(e=be.hb[e])&&e.postMessage({cmd:"checkMailbox"})},ea:function(){return-1},fa:gt,pa:function(e){w&&be.hb[e].ref()},r:function(e,t,n){e=ot(e),t=mt(t,"emval::as");var r=[],o=it(r);return u()[n>>2>>>0]=o,t.toWireType(r,e)},i:function(e,t,n,r,o){e=wt[e],t=ot(t),n=bt(n);var i=[];return u()[r>>2>>>0]=it(i),e(t,n,i,o)},s:function(e,t,n,r){(e=wt[e])(t=ot(t),n=bt(n),null,r)},c:rt,K:function(e,t){return(e=ot(e))==ot(t)},o:function(e){return 0===e?it(_t()):(e=bt(e),it(_t()[e]))},g:function(e,t){var n=function(e,t){for(var n=Array(e),r=0;r<e;++r)n[r]=mt(u()[t+4*r>>2>>>0],"parameter "+r);return n}(e,t),r=n[0];t=r.name+"_$"+n.slice(1).map((function(e){return e.name})).join("_")+"$";var o=xt[t];if(void 0!==o)return o;o=["retType"];for(var i=[r],a="",s=0;s<e-1;++s)a+=(0!==s?", ":"")+"arg"+s,o.push("argType"+s),i.push(n[1+s]);var c="return function "+Xe("methodCaller_"+t)+"(handle, name, destructors, args) {\n",l=0;for(s=0;s<e-1;++s)c+="    var arg"+s+" = argType"+s+".readValueFromPointer(args"+(l?"+"+l:"")+");\n",l+=n[s+1].argPackAdvance;for(c+="    var rv = handle[name]("+a+");\n",s=0;s<e-1;++s)n[s+1].deleteObject&&(c+="    argType"+s+".deleteObject(arg"+s+");\n");return r.Gb||(c+="    return retType.toWireType(destructors, rv);\n"),o.push(c+"};\n"),e=function(e){var t=Function;if(!(t instanceof Function))throw new TypeError("new_ called with constructor type "+typeof t+" which is not a function");var n=Ye(t.name||"unknownFunctionName",(function(){}));return n.prototype=t.prototype,n=new n,(e=t.apply(n,e))instanceof Object?e:n}(o).apply(null,i),o=function(e){var t=wt.length;return wt.push(e),t}(e),xt[t]=o},t:function(e,t){return e=ot(e),t=ot(t),it(e[t])},d:function(e){4<e&&(nt.get(e).wb+=1)},x:function(e,t,n,r){e=ot(e);var o=Tt[t];return o||(o=function(e){for(var t="",n=0;n<e;++n)t+=(0!==n?", ":"")+"arg"+n;var r="return function emval_allocator_"+e+"(constructor, argTypes, args) {\n  var HEAPU32 = getMemory();\n";for(n=0;n<e;++n)r+="var argType"+n+" = requireRegisteredType(HEAPU32[((argTypes)>>2)], 'parameter "+n+"');\nvar arg"+n+" = argType"+n+".readValueFromPointer(args);\nargs += argType"+n+"['argPackAdvance'];\nargTypes += 4;\n";return new Function("requireRegisteredType","Module","valueToHandle","getMemory",r+"var obj = new constructor("+t+");\nreturn valueToHandle(obj);\n}\n")(mt,c,it,(()=>u()))}(t),Tt[t]=o),o(e,n,r)},v:function(){return it([])},l:function(e){e=ot(e);for(var t=Array(e.length),n=0;n<e.length;n++)t[n]=e[n];return it(t)},e:function(e){return it(bt(e))},k:function(){return it({})},h:function(e){for(var t=ot(e);t.length;){var n=t.pop();t.pop()(n)}rt(e)},j:function(e,t,n){e=ot(e),t=ot(t),n=ot(n),e[t]=n},f:function(e,t){return e=(e=mt(e,"_emval_take_value")).readValueFromPointer(t),it(e)},_:function(e,t){e=new Date(1e3*St(e)),a()[t>>2>>>0]=e.getUTCSeconds(),a()[t+4>>2>>>0]=e.getUTCMinutes(),a()[t+8>>2>>>0]=e.getUTCHours(),a()[t+12>>2>>>0]=e.getUTCDate(),a()[t+16>>2>>>0]=e.getUTCMonth(),a()[t+20>>2>>>0]=e.getUTCFullYear()-1900,a()[t+24>>2>>>0]=e.getUTCDay(),e=(e.getTime()-Date.UTC(e.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,a()[t+28>>2>>>0]=e},$:function(e,t){e=new Date(1e3*St(e)),a()[t>>2>>>0]=e.getSeconds(),a()[t+4>>2>>>0]=e.getMinutes(),a()[t+8>>2>>>0]=e.getHours(),a()[t+12>>2>>>0]=e.getDate(),a()[t+16>>2>>>0]=e.getMonth(),a()[t+20>>2>>>0]=e.getFullYear()-1900,a()[t+24>>2>>>0]=e.getDay();var n=0|Et(e);a()[t+28>>2>>>0]=n,a()[t+36>>2>>>0]=-60*e.getTimezoneOffset(),n=new Date(e.getFullYear(),6,1).getTimezoneOffset();var r=new Date(e.getFullYear(),0,1).getTimezoneOffset();e=0|(n!=r&&e.getTimezoneOffset()==Math.min(r,n)),a()[t+32>>2>>>0]=e},aa:function(e){var t=new Date(a()[e+20>>2>>>0]+1900,a()[e+16>>2>>>0],a()[e+12>>2>>>0],a()[e+8>>2>>>0],a()[e+4>>2>>>0],a()[e>>2>>>0],0),n=a()[e+32>>2>>>0],r=t.getTimezoneOffset(),o=new Date(t.getFullYear(),6,1).getTimezoneOffset(),i=new Date(t.getFullYear(),0,1).getTimezoneOffset(),u=Math.min(i,o);return 0>n?a()[e+32>>2>>>0]=Number(o!=i&&u==r):0<n!=(u==r)&&(o=Math.max(i,o),t.setTime(t.getTime()+6e4*((0<n?u:o)-r))),a()[e+24>>2>>>0]=t.getDay(),n=0|Et(t),a()[e+28>>2>>>0]=n,a()[e>>2>>>0]=t.getSeconds(),a()[e+4>>2>>>0]=t.getMinutes(),a()[e+8>>2>>>0]=t.getHours(),a()[e+12>>2>>>0]=t.getDate(),a()[e+16>>2>>>0]=t.getMonth(),a()[e+20>>2>>>0]=t.getYear(),t.getTime()/1e3|0},Y:Ct,Z:Dt,N:function(e,t,n){function r(e){return(e=e.toTimeString().match(/\(([A-Za-z ]+)\)$/))?e[1]:"GMT"}var o=(new Date).getFullYear(),i=new Date(o,0,1),s=new Date(o,6,1);o=i.getTimezoneOffset();var c=s.getTimezoneOffset(),l=Math.max(o,c);u()[e>>2>>>0]=60*l,a()[t>>2>>>0]=Number(o!=c),e=r(i),t=r(s),e=kt(e),t=kt(t),c<o?(u()[n>>2>>>0]=e,u()[n+4>>2>>>0]=t):(u()[n>>2>>>0]=t,u()[n+4>>2>>>0]=e)},n:function(){ie("")},va:function(){ie("To use dlopen, you need enable dynamic linking, see https://emscripten.org/docs/compiling/Dynamic-Linking.html")},E:function(){},G:function(){return Date.now()},oa:function(){throw $+=1,"unwind"},P:function(){return 4294901760},q:At,w:function(){return w?n(3993).cpus().length:navigator.hardwareConcurrency},da:function(e,t,n){t/=2,jt.length=t,n>>=3;for(var r=0;r<t;r++)jt[r]=G[n+2*r]?G[n+2*r+1]:s()[n+2*r+1>>>0];return Jt[e].apply(null,jt)},M:function(e){var t=r().length;if((e>>>=0)<=t||4294901760<e)return!1;for(var n=1;4>=n;n*=2){var o=t*(1+.2/n);o=Math.min(o,e+100663296);var i=Math,a=i.min;o=Math.max(e,o),o+=(65536-o%65536)%65536;e:{var u=k.buffer;try{k.grow(a.call(i,4294901760,o)-u.byteLength+65535>>>16),q();var s=1;break e}catch(e){}s=void 0}if(s)return!0}return!1},ha:Nt,ia:Bt,V:me,z:Ut,C:zt,ca:Gt,B:Wt,a:k||c.wasmMemory,ma:Kt,p:function(e,t,n,r){return Kt(e,t,n,r)}};!function(){function e(e,t){return e=e.exports,c.asm=e,be.zb.push(c.asm.Ua),X=c.asm.Xa,J.unshift(c.asm.wa),R=t,be.Ib((()=>{if(ne--,c.monitorRunDependencies&&c.monitorRunDependencies(ne),0==ne&&(null!==re&&(clearInterval(re),re=null),oe)){var e=oe;oe=null,e()}})),e}var t={a:Zt};if(ne++,c.monitorRunDependencies&&c.monitorRunDependencies(ne),c.instantiateWasm)try{return c.instantiateWasm(t,e)}catch(e){C("Module.instantiateWasm callback failed with error: "+e),p(e)}(function(e,t){var n=te;return I||"function"!=typeof WebAssembly.instantiateStreaming||ae(n)||n.startsWith("file://")||w||"function"!=typeof fetch?se(n,e,t):fetch(n,{credentials:"same-origin"}).then((r=>WebAssembly.instantiateStreaming(r,e).then(t,(function(r){return C("wasm streaming compile failed: "+r),C("falling back to ArrayBuffer instantiation"),se(n,e,t)}))))})(t,(function(t){e(t.instance,t.module)})).catch(p)}(),c._OrtInit=function(){return(c._OrtInit=c.asm.xa).apply(null,arguments)},c._OrtGetLastError=function(){return(c._OrtGetLastError=c.asm.ya).apply(null,arguments)},c._OrtCreateSessionOptions=function(){return(c._OrtCreateSessionOptions=c.asm.za).apply(null,arguments)},c._OrtAppendExecutionProvider=function(){return(c._OrtAppendExecutionProvider=c.asm.Aa).apply(null,arguments)},c._OrtAddSessionConfigEntry=function(){return(c._OrtAddSessionConfigEntry=c.asm.Ba).apply(null,arguments)},c._OrtReleaseSessionOptions=function(){return(c._OrtReleaseSessionOptions=c.asm.Ca).apply(null,arguments)},c._OrtCreateSession=function(){return(c._OrtCreateSession=c.asm.Da).apply(null,arguments)},c._OrtReleaseSession=function(){return(c._OrtReleaseSession=c.asm.Ea).apply(null,arguments)},c._OrtGetInputOutputCount=function(){return(c._OrtGetInputOutputCount=c.asm.Fa).apply(null,arguments)},c._OrtGetInputName=function(){return(c._OrtGetInputName=c.asm.Ga).apply(null,arguments)},c._OrtGetOutputName=function(){return(c._OrtGetOutputName=c.asm.Ha).apply(null,arguments)},c._OrtFree=function(){return(c._OrtFree=c.asm.Ia).apply(null,arguments)},c._OrtCreateTensor=function(){return(c._OrtCreateTensor=c.asm.Ja).apply(null,arguments)},c._OrtGetTensorData=function(){return(c._OrtGetTensorData=c.asm.Ka).apply(null,arguments)},c._OrtReleaseTensor=function(){return(c._OrtReleaseTensor=c.asm.La).apply(null,arguments)},c._OrtCreateRunOptions=function(){return(c._OrtCreateRunOptions=c.asm.Ma).apply(null,arguments)},c._OrtAddRunConfigEntry=function(){return(c._OrtAddRunConfigEntry=c.asm.Na).apply(null,arguments)},c._OrtReleaseRunOptions=function(){return(c._OrtReleaseRunOptions=c.asm.Oa).apply(null,arguments)},c._OrtRun=function(){return(c._OrtRun=c.asm.Pa).apply(null,arguments)},c._OrtEndProfiling=function(){return(c._OrtEndProfiling=c.asm.Qa).apply(null,arguments)};var $t=c._pthread_self=function(){return($t=c._pthread_self=c.asm.Ra).apply(null,arguments)},Qt=c._malloc=function(){return(Qt=c._malloc=c.asm.Sa).apply(null,arguments)},en=c._free=function(){return(en=c._free=c.asm.Ta).apply(null,arguments)};function tn(){return(tn=c.asm.Va).apply(null,arguments)}c.__emscripten_tls_init=function(){return(c.__emscripten_tls_init=c.asm.Ua).apply(null,arguments)},c.__embind_initialize_bindings=function(){return(c.__embind_initialize_bindings=c.asm.Wa).apply(null,arguments)};var nn=c.__emscripten_thread_init=function(){return(nn=c.__emscripten_thread_init=c.asm.Ya).apply(null,arguments)};function rn(){return(rn=c.asm._a).apply(null,arguments)}function on(){return(on=c.asm.$a).apply(null,arguments)}c.__emscripten_thread_crashed=function(){return(c.__emscripten_thread_crashed=c.asm.Za).apply(null,arguments)};var an,un=c.__emscripten_thread_exit=function(){return(un=c.__emscripten_thread_exit=c.asm.ab).apply(null,arguments)},sn=c.__emscripten_check_mailbox=function(){return(sn=c.__emscripten_check_mailbox=c.asm.bb).apply(null,arguments)};function cn(){return(cn=c.asm.cb).apply(null,arguments)}function ln(){return(ln=c.asm.db).apply(null,arguments)}function pn(){return(pn=c.asm.eb).apply(null,arguments)}function fn(){return(fn=c.asm.fb).apply(null,arguments)}function dn(){function e(){if(!an&&(an=!0,c.calledRun=!0,!H)&&(_||we(J),l(c),c.onRuntimeInitialized&&c.onRuntimeInitialized(),!_)){if(c.postRun)for("function"==typeof c.postRun&&(c.postRun=[c.postRun]);c.postRun.length;){var e=c.postRun.shift();Z.unshift(e)}we(Z)}}if(!(0<ne))if(_)l(c),_||we(J),startWorker(c);else{if(c.preRun)for("function"==typeof c.preRun&&(c.preRun=[c.preRun]);c.preRun.length;)ee();we(Y),0<ne||(c.setStatus?(c.setStatus("Running..."),setTimeout((function(){setTimeout((function(){c.setStatus("")}),1),e()}),1)):e())}}if(c.keepRuntimeAlive=Q,c.wasmMemory=k,c.stackAlloc=fn,c.stackSave=ln,c.stackRestore=pn,c.UTF8ToString=ge,c.stringToUTF8=Ce,c.lengthBytesUTF8=Ie,c.ExitStatus=ce,c.PThread=be,oe=function e(){an||dn(),an||(oe=e)},c.preInit)for("function"==typeof c.preInit&&(c.preInit=[c.preInit]);0<c.preInit.length;)c.preInit.pop()();return dn(),e.ready});e.exports=r},932:function(e,t,n){var _scriptDir,r=(_scriptDir="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0,"undefined"!=typeof __filename&&(_scriptDir=_scriptDir||__filename),function(e={}){var t,r,o;t||(t=void 0!==e?e:{}),t.ready=new Promise(((e,t)=>{r=e,o=t}));var i,a,u,s=Object.assign({},t),c="./this.program",l="object"==typeof window,p="function"==typeof importScripts,f="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,d="";if(f){var h=n(1384),g=n(908);d=p?g.dirname(d)+"/":__dirname+"/",i=(e,t)=>(e=e.startsWith("file://")?new URL(e):g.normalize(e),h.readFileSync(e,t?void 0:"utf8")),u=e=>((e=i(e,!0)).buffer||(e=new Uint8Array(e)),e),a=(e,t,n,r=!0)=>{e=e.startsWith("file://")?new URL(e):g.normalize(e),h.readFile(e,r?void 0:"utf8",((e,o)=>{e?n(e):t(r?o.buffer:o)}))},!t.thisProgram&&1<process.argv.length&&(c=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),t.inspect=()=>"[Emscripten Module object]"}else(l||p)&&(p?d=self.location.href:"undefined"!=typeof document&&document.currentScript&&(d=document.currentScript.src),_scriptDir&&(d=_scriptDir),d=0!==d.indexOf("blob:")?d.substr(0,d.replace(/[?#].*/,"").lastIndexOf("/")+1):"",i=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},p&&(u=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),a=(e,t,n)=>{var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=()=>{200==r.status||0==r.status&&r.response?t(r.response):n()},r.onerror=n,r.send(null)});var y,m=t.print||console.log.bind(console),v=t.printErr||console.warn.bind(console);Object.assign(t,s),s=null,t.thisProgram&&(c=t.thisProgram),t.wasmBinary&&(y=t.wasmBinary),t.noExitRuntime,"object"!=typeof WebAssembly&&U("no native wasm support detected");var b,w,_,x,T,S,P,A,O,I,E,C=!1;function D(){var e=b.buffer;t.HEAP8=w=new Int8Array(e),t.HEAP16=x=new Int16Array(e),t.HEAP32=S=new Int32Array(e),t.HEAPU8=_=new Uint8Array(e),t.HEAPU16=T=new Uint16Array(e),t.HEAPU32=P=new Uint32Array(e),t.HEAPF32=A=new Float32Array(e),t.HEAPF64=E=new Float64Array(e),t.HEAP64=O=new BigInt64Array(e),t.HEAPU64=I=new BigUint64Array(e)}var k=[],R=[],M=[];function j(){var e=t.preRun.shift();k.unshift(e)}var L,F=0,N=null,B=null;function U(e){throw t.onAbort&&t.onAbort(e),v(e="Aborted("+e+")"),C=!0,e=new WebAssembly.RuntimeError(e+". Build with -sASSERTIONS for more info."),o(e),e}function z(e){return e.startsWith("data:application/octet-stream;base64,")}if(!z(L="ort-wasm.wasm")){var G=L;L=t.locateFile?t.locateFile(G,d):d+G}function V(e){try{if(e==L&&y)return new Uint8Array(y);if(u)return u(e);throw"both async and sync fetching of the wasm failed"}catch(e){U(e)}}function W(e,t,n){return function(e){if(!y&&(l||p)){if("function"==typeof fetch&&!e.startsWith("file://"))return fetch(e,{credentials:"same-origin"}).then((t=>{if(!t.ok)throw"failed to load wasm binary file at '"+e+"'";return t.arrayBuffer()})).catch((()=>V(e)));if(a)return new Promise(((t,n)=>{a(e,(e=>t(new Uint8Array(e))),n)}))}return Promise.resolve().then((()=>V(e)))}(e).then((e=>WebAssembly.instantiate(e,t))).then((e=>e)).then(n,(e=>{v("failed to asynchronously prepare wasm: "+e),U(e)}))}function H(e){for(;0<e.length;)e.shift()(t)}function q(e){this.Ja=e-24,this.Wa=function(e){P[this.Ja+4>>2>>>0]=e},this.Va=function(e){P[this.Ja+8>>2>>>0]=e},this.Ra=function(e,t){this.Sa(),this.Wa(e),this.Va(t)},this.Sa=function(){P[this.Ja+16>>2>>>0]=0}}var K="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function X(e,t,n){var r=(t>>>=0)+n;for(n=t;e[n]&&!(n>=r);)++n;if(16<n-t&&e.buffer&&K)return K.decode(e.subarray(t,n));for(r="";t<n;){var o=e[t++];if(128&o){var i=63&e[t++];if(192==(224&o))r+=String.fromCharCode((31&o)<<6|i);else{var a=63&e[t++];65536>(o=224==(240&o)?(15&o)<<12|i<<6|a:(7&o)<<18|i<<12|a<<6|63&e[t++])?r+=String.fromCharCode(o):(o-=65536,r+=String.fromCharCode(55296|o>>10,56320|1023&o))}}else r+=String.fromCharCode(o)}return r}function Y(e,t){return(e>>>=0)?X(_,e,t):""}function J(e){for(var t=0,n=0;n<e.length;++n){var r=e.charCodeAt(n);127>=r?t++:2047>=r?t+=2:55296<=r&&57343>=r?(t+=4,++n):t+=3}return t}function Z(e,t,n,r){if(!(0<r))return 0;var o=n>>>=0;r=n+r-1;for(var i=0;i<e.length;++i){var a=e.charCodeAt(i);if(55296<=a&&57343>=a&&(a=65536+((1023&a)<<10)|1023&e.charCodeAt(++i)),127>=a){if(n>=r)break;t[n++>>>0]=a}else{if(2047>=a){if(n+1>=r)break;t[n++>>>0]=192|a>>6}else{if(65535>=a){if(n+2>=r)break;t[n++>>>0]=224|a>>12}else{if(n+3>=r)break;t[n++>>>0]=240|a>>18,t[n++>>>0]=128|a>>12&63}t[n++>>>0]=128|a>>6&63}t[n++>>>0]=128|63&a}}return t[n>>>0]=0,n-o}function $(e,t,n){return Z(e,_,t,n)}function Q(e){if(null===e)return"null";var t=typeof e;return"object"===t||"array"===t||"function"===t?e.toString():""+e}var ee=void 0;function te(e){for(var t="";_[e>>>0];)t+=ee[_[e++>>>0]];return t}var ne={},re={},oe={};function ie(e){if(void 0===e)return"_unknown";var t=(e=e.replace(/[^a-zA-Z0-9_]/g,"$")).charCodeAt(0);return 48<=t&&57>=t?"_"+e:e}function ae(e,t){return{[e=ie(e)]:function(){return t.apply(this,arguments)}}[e]}function ue(e){var t=Error,n=ae(e,(function(t){this.name=e,this.message=t,void 0!==(t=Error(t).stack)&&(this.stack=this.toString()+"\n"+t.replace(/^Error(:[^\n]*)?\n/,""))}));return n.prototype=Object.create(t.prototype),n.prototype.constructor=n,n.prototype.toString=function(){return void 0===this.message?this.name:this.name+": "+this.message},n}var se=void 0;function ce(e){throw new se(e)}function le(e,t,n={}){if(!("argPackAdvance"in t))throw new TypeError("registerType registeredInstance requires argPackAdvance");var r=t.name;if(e||ce('type "'+r+'" must have a positive integer typeid pointer'),re.hasOwnProperty(e)){if(n.Za)return;ce("Cannot register type '"+r+"' twice")}re[e]=t,delete oe[e],ne.hasOwnProperty(e)&&(t=ne[e],delete ne[e],t.forEach((e=>e())))}function pe(e,t,n){switch(t){case 0:return n?function(e){return w[e>>>0]}:function(e){return _[e>>>0]};case 1:return n?function(e){return x[e>>>1]}:function(e){return T[e>>>1]};case 2:return n?function(e){return S[e>>>2]}:function(e){return P[e>>>2]};case 3:return n?function(e){return O[e>>3]}:function(e){return I[e>>3]};default:throw new TypeError("Unknown integer type: "+e)}}function fe(e){switch(e){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+e)}}var de=new function(){this.Ja=[void 0],this.Ra=[],this.get=function(e){return this.Ja[e]},this.Va=function(e){let t=this.Ra.pop()||this.Ja.length;return this.Ja[t]=e,t},this.Wa=function(e){this.Ja[e]=void 0,this.Ra.push(e)}};function he(e){e>=de.Sa&&0==--de.get(e).Ya&&de.Wa(e)}var ge=e=>(e||ce("Cannot use deleted val. handle = "+e),de.get(e).value),ye=e=>{switch(e){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:return de.Va({Ya:1,value:e})}};function me(e){return this.fromWireType(S[e>>2>>>0])}function ve(e,t){switch(t){case 2:return function(e){return this.fromWireType(A[e>>>2])};case 3:return function(e){return this.fromWireType(E[e>>>3])};default:throw new TypeError("Unknown float type: "+e)}}var be="undefined"!=typeof TextDecoder?new TextDecoder("utf-16le"):void 0;function we(e,t){for(var n=e>>1,r=n+t/2;!(n>=r)&&T[n>>>0];)++n;if(32<(n<<=1)-e&&be)return be.decode(_.subarray(e>>>0,n>>>0));for(n="",r=0;!(r>=t/2);++r){var o=x[e+2*r>>1>>>0];if(0==o)break;n+=String.fromCharCode(o)}return n}function _e(e,t,n){if(void 0===n&&(n=2147483647),2>n)return 0;var r=t;n=(n-=2)<2*e.length?n/2:e.length;for(var o=0;o<n;++o)x[t>>1>>>0]=e.charCodeAt(o),t+=2;return x[t>>1>>>0]=0,t-r}function xe(e){return 2*e.length}function Te(e,t){for(var n=0,r="";!(n>=t/4);){var o=S[e+4*n>>2>>>0];if(0==o)break;++n,65536<=o?(o-=65536,r+=String.fromCharCode(55296|o>>10,56320|1023&o)):r+=String.fromCharCode(o)}return r}function Se(e,t,n){if(void 0===n&&(n=2147483647),4>n)return 0;var r=t>>>=0;n=r+n-4;for(var o=0;o<e.length;++o){var i=e.charCodeAt(o);if(55296<=i&&57343>=i&&(i=65536+((1023&i)<<10)|1023&e.charCodeAt(++o)),S[t>>2>>>0]=i,(t+=4)+4>n)break}return S[t>>2>>>0]=0,t-r}function Pe(e){for(var t=0,n=0;n<e.length;++n){var r=e.charCodeAt(n);55296<=r&&57343>=r&&++n,t+=4}return t}function Ae(e,t){var n=re[e];if(void 0===n){var r=te(e=$e(e));Ze(e),ce(t+" has unknown type "+r)}return n}var Oe={};function Ie(e){var t=Oe[e];return void 0===t?te(e):t}var Ee=[];function Ce(){return"object"==typeof globalThis?globalThis:Function("return this")()}var De=[],ke={};function Re(e){return 0==e%4&&(0!=e%100||0==e%400)}var Me,je=[0,31,60,91,121,152,182,213,244,274,305,335],Le=[0,31,59,90,120,151,181,212,243,273,304,334];function Fe(e){return(Re(e.getFullYear())?je:Le)[e.getMonth()]+e.getDate()-1}function Ne(e){var t=J(e)+1,n=Je(t);return n&&$(e,n,t),n}Me=f?()=>{var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}:()=>performance.now();var Be={};function Ue(){if(!ze){var e,t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:c||"./this.program"};for(e in Be)void 0===Be[e]?delete t[e]:t[e]=Be[e];var n=[];for(e in t)n.push(e+"="+t[e]);ze=n}return ze}var ze,Ge=[null,[],[]],Ve=[31,29,31,30,31,30,31,31,30,31,30,31],We=[31,28,31,30,31,30,31,31,30,31,30,31];function He(e,t,n,r){function o(e,t,n){for(e="number"==typeof e?e.toString():e||"";e.length<t;)e=n[0]+e;return e}function i(e,t){return o(e,t,"0")}function a(e,t){function n(e){return 0>e?-1:0<e?1:0}var r;return 0===(r=n(e.getFullYear()-t.getFullYear()))&&0===(r=n(e.getMonth()-t.getMonth()))&&(r=n(e.getDate()-t.getDate())),r}function u(e){switch(e.getDay()){case 0:return new Date(e.getFullYear()-1,11,29);case 1:return e;case 2:return new Date(e.getFullYear(),0,3);case 3:return new Date(e.getFullYear(),0,2);case 4:return new Date(e.getFullYear(),0,1);case 5:return new Date(e.getFullYear()-1,11,31);case 6:return new Date(e.getFullYear()-1,11,30)}}function s(e){var t=e.Oa;for(e=new Date(new Date(e.Pa+1900,0,1).getTime());0<t;){var n=e.getMonth(),r=(Re(e.getFullYear())?Ve:We)[n];if(!(t>r-e.getDate())){e.setDate(e.getDate()+t);break}t-=r-e.getDate()+1,e.setDate(1),11>n?e.setMonth(n+1):(e.setMonth(0),e.setFullYear(e.getFullYear()+1))}return n=new Date(e.getFullYear()+1,0,4),t=u(new Date(e.getFullYear(),0,4)),n=u(n),0>=a(t,e)?0>=a(n,e)?e.getFullYear()+1:e.getFullYear():e.getFullYear()-1}var c=S[r+40>>2>>>0];for(var l in r={cb:S[r>>2>>>0],bb:S[r+4>>2>>>0],Ta:S[r+8>>2>>>0],Xa:S[r+12>>2>>>0],Ua:S[r+16>>2>>>0],Pa:S[r+20>>2>>>0],Na:S[r+24>>2>>>0],Oa:S[r+28>>2>>>0],fb:S[r+32>>2>>>0],ab:S[r+36>>2>>>0],eb:c?Y(c):""},n=Y(n),c={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})n=n.replace(new RegExp(l,"g"),c[l]);var p="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),f="January February March April May June July August September October November December".split(" ");for(l in c={"%a":function(e){return p[e.Na].substring(0,3)},"%A":function(e){return p[e.Na]},"%b":function(e){return f[e.Ua].substring(0,3)},"%B":function(e){return f[e.Ua]},"%C":function(e){return i((e.Pa+1900)/100|0,2)},"%d":function(e){return i(e.Xa,2)},"%e":function(e){return o(e.Xa,2," ")},"%g":function(e){return s(e).toString().substring(2)},"%G":function(e){return s(e)},"%H":function(e){return i(e.Ta,2)},"%I":function(e){return 0==(e=e.Ta)?e=12:12<e&&(e-=12),i(e,2)},"%j":function(e){for(var t=0,n=0;n<=e.Ua-1;t+=(Re(e.Pa+1900)?Ve:We)[n++]);return i(e.Xa+t,3)},"%m":function(e){return i(e.Ua+1,2)},"%M":function(e){return i(e.bb,2)},"%n":function(){return"\n"},"%p":function(e){return 0<=e.Ta&&12>e.Ta?"AM":"PM"},"%S":function(e){return i(e.cb,2)},"%t":function(){return"\t"},"%u":function(e){return e.Na||7},"%U":function(e){return i(Math.floor((e.Oa+7-e.Na)/7),2)},"%V":function(e){var t=Math.floor((e.Oa+7-(e.Na+6)%7)/7);if(2>=(e.Na+371-e.Oa-2)%7&&t++,t)53==t&&(4==(n=(e.Na+371-e.Oa)%7)||3==n&&Re(e.Pa)||(t=1));else{t=52;var n=(e.Na+7-e.Oa-1)%7;(4==n||5==n&&Re(e.Pa%400-1))&&t++}return i(t,2)},"%w":function(e){return e.Na},"%W":function(e){return i(Math.floor((e.Oa+7-(e.Na+6)%7)/7),2)},"%y":function(e){return(e.Pa+1900).toString().substring(2)},"%Y":function(e){return e.Pa+1900},"%z":function(e){var t=0<=(e=e.ab);return e=Math.abs(e)/60,(t?"+":"-")+String("0000"+(e/60*100+e%60)).slice(-4)},"%Z":function(e){return e.eb},"%%":function(){return"%"}},n=n.replace(/%%/g,"\0\0"),c)n.includes(l)&&(n=n.replace(new RegExp(l,"g"),c[l](r)));return l=function(e){var t=Array(J(e)+1);return Z(e,t,0,t.length),t}(n=n.replace(/\0\0/g,"%")),l.length>t?0:(w.set(l,e>>>0),l.length-1)}for(var qe=Array(256),Ke=0;256>Ke;++Ke)qe[Ke]=String.fromCharCode(Ke);ee=qe,se=t.BindingError=ue("BindingError"),t.InternalError=ue("InternalError"),de.Ja.push({value:void 0},{value:null},{value:!0},{value:!1}),de.Sa=de.Ja.length,t.count_emval_handles=function(){for(var e=0,t=de.Sa;t<de.Ja.length;++t)void 0!==de.Ja[t]&&++e;return e};var Xe={a:function(e,t,n){throw new q(e).Ra(t,n),e},da:function(){U("To use dlopen, you need enable dynamic linking, see https://emscripten.org/docs/compiling/Dynamic-Linking.html")},v:function(){return 0},ba:function(){},N:function(){},P:function(){},H:function(){return 0},$:function(){},V:function(){},_:function(){},A:function(){},O:function(){},L:function(){},aa:function(){},M:function(){},D:function(e,t,n,r,o){t=te(t),n=fe(n);var i=-1!=t.indexOf("u");i&&(o=(1n<<64n)-1n),le(e,{name:t,fromWireType:function(e){return e},toWireType:function(e,n){if("bigint"!=typeof n&&"number"!=typeof n)throw new TypeError('Cannot convert "'+Q(n)+'" to '+this.name);if(n<r||n>o)throw new TypeError('Passing a number "'+Q(n)+'" from JS side to C/C++ side to an argument of type "'+t+'", which is outside the valid range ['+r+", "+o+"]!");return n},argPackAdvance:8,readValueFromPointer:pe(t,n,!i),Qa:null})},ga:function(e,t,n,r,o){var i=fe(n);le(e,{name:t=te(t),fromWireType:function(e){return!!e},toWireType:function(e,t){return t?r:o},argPackAdvance:8,readValueFromPointer:function(e){if(1===n)var r=w;else if(2===n)r=x;else{if(4!==n)throw new TypeError("Unknown boolean type size: "+t);r=S}return this.fromWireType(r[e>>>i])},Qa:null})},fa:function(e,t){le(e,{name:t=te(t),fromWireType:function(e){var t=ge(e);return he(e),t},toWireType:function(e,t){return ye(t)},argPackAdvance:8,readValueFromPointer:me,Qa:null})},C:function(e,t,n){n=fe(n),le(e,{name:t=te(t),fromWireType:function(e){return e},toWireType:function(e,t){return t},argPackAdvance:8,readValueFromPointer:ve(t,n),Qa:null})},p:function(e,t,n,r,o){t=te(t),-1===o&&(o=4294967295),o=fe(n);var i=e=>e;if(0===r){var a=32-8*n;i=e=>e<<a>>>a}n=t.includes("unsigned")?function(e,t){return t>>>0}:function(e,t){return t},le(e,{name:t,fromWireType:i,toWireType:n,argPackAdvance:8,readValueFromPointer:pe(t,o,0!==r),Qa:null})},l:function(e,t,n){function r(e){e>>=2;var t=P;return new o(t.buffer,t[e+1>>>0],t[e>>>0])}var o=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,BigInt64Array,BigUint64Array][t];le(e,{name:n=te(n),fromWireType:r,argPackAdvance:8,readValueFromPointer:r},{Za:!0})},E:function(e,t){var n="std::string"===(t=te(t));le(e,{name:t,fromWireType:function(e){var t=P[e>>2>>>0],r=e+4;if(n)for(var o=r,i=0;i<=t;++i){var a=r+i;if(i==t||0==_[a>>>0]){if(o=Y(o,a-o),void 0===u)var u=o;else u+=String.fromCharCode(0),u+=o;o=a+1}}else{for(u=Array(t),i=0;i<t;++i)u[i]=String.fromCharCode(_[r+i>>>0]);u=u.join("")}return Ze(e),u},toWireType:function(e,t){t instanceof ArrayBuffer&&(t=new Uint8Array(t));var r="string"==typeof t;r||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int8Array||ce("Cannot pass non-string to std::string");var o=n&&r?J(t):t.length,i=Je(4+o+1),a=i+4>>>0;if(P[i>>2>>>0]=o,n&&r)$(t,a,o+1);else if(r)for(r=0;r<o;++r){var u=t.charCodeAt(r);255<u&&(Ze(a),ce("String has UTF-16 code units that do not fit in 8 bits")),_[a+r>>>0]=u}else for(r=0;r<o;++r)_[a+r>>>0]=t[r];return null!==e&&e.push(Ze,i),i},argPackAdvance:8,readValueFromPointer:me,Qa:function(e){Ze(e)}})},x:function(e,t,n){if(n=te(n),2===t)var r=we,o=_e,i=xe,a=()=>T,u=1;else 4===t&&(r=Te,o=Se,i=Pe,a=()=>P,u=2);le(e,{name:n,fromWireType:function(e){for(var n,o=P[e>>>2],i=a(),s=e+4,c=0;c<=o;++c){var l=e+4+c*t;c!=o&&0!=i[l>>>u]||(s=r(s,l-s),void 0===n?n=s:(n+=String.fromCharCode(0),n+=s),s=l+t)}return Ze(e),n},toWireType:function(e,r){"string"!=typeof r&&ce("Cannot pass non-string to C++ string type "+n);var a=i(r),s=Je(4+a+t);return P[(s>>>=0)>>>2]=a>>u,o(r,s+4,a+t),null!==e&&e.push(Ze,s),s},argPackAdvance:8,readValueFromPointer:me,Qa:function(e){Ze(e)}})},ha:function(e,t){le(e,{$a:!0,name:t=te(t),argPackAdvance:0,fromWireType:function(){},toWireType:function(){}})},ca:function(){return!0},o:function(e,t,n){e=ge(e),t=Ae(t,"emval::as");var r=[],o=ye(r);return P[n>>2>>>0]=o,t.toWireType(r,e)},h:function(e,t,n,r,o){e=Ee[e],t=ge(t),n=Ie(n);var i=[];return P[r>>2>>>0]=ye(i),e(t,n,i,o)},q:function(e,t,n,r){(e=Ee[e])(t=ge(t),n=Ie(n),null,r)},b:he,F:function(e,t){return(e=ge(e))==ge(t)},u:function(e){return 0===e?ye(Ce()):(e=Ie(e),ye(Ce()[e]))},g:function(e,t){var n=function(e,t){for(var n=Array(e),r=0;r<e;++r)n[r]=Ae(P[t+4*r>>2>>>0],"parameter "+r);return n}(e,t),r=n[0];t=r.name+"_$"+n.slice(1).map((function(e){return e.name})).join("_")+"$";var o=De[t];if(void 0!==o)return o;o=["retType"];for(var i=[r],a="",u=0;u<e-1;++u)a+=(0!==u?", ":"")+"arg"+u,o.push("argType"+u),i.push(n[1+u]);var s="return function "+ie("methodCaller_"+t)+"(handle, name, destructors, args) {\n",c=0;for(u=0;u<e-1;++u)s+="    var arg"+u+" = argType"+u+".readValueFromPointer(args"+(c?"+"+c:"")+");\n",c+=n[u+1].argPackAdvance;for(s+="    var rv = handle[name]("+a+");\n",u=0;u<e-1;++u)n[u+1].deleteObject&&(s+="    argType"+u+".deleteObject(arg"+u+");\n");return r.$a||(s+="    return retType.toWireType(destructors, rv);\n"),o.push(s+"};\n"),e=function(e){var t=Function;if(!(t instanceof Function))throw new TypeError("new_ called with constructor type "+typeof t+" which is not a function");var n=ae(t.name||"unknownFunctionName",(function(){}));return n.prototype=t.prototype,n=new n,(e=t.apply(n,e))instanceof Object?e:n}(o).apply(null,i),o=function(e){var t=Ee.length;return Ee.push(e),t}(e),De[t]=o},r:function(e,t){return e=ge(e),t=ge(t),ye(e[t])},c:function(e){4<e&&(de.get(e).Ya+=1)},G:function(e,n,r,o){e=ge(e);var i=ke[n];return i||(i=function(e){for(var n="",r=0;r<e;++r)n+=(0!==r?", ":"")+"arg"+r;var o="return function emval_allocator_"+e+"(constructor, argTypes, args) {\n  var HEAPU32 = getMemory();\n";for(r=0;r<e;++r)o+="var argType"+r+" = requireRegisteredType(HEAPU32[((argTypes)>>2)], 'parameter "+r+"');\nvar arg"+r+" = argType"+r+".readValueFromPointer(args);\nargs += argType"+r+"['argPackAdvance'];\nargTypes += 4;\n";return new Function("requireRegisteredType","Module","valueToHandle","getMemory",o+"var obj = new constructor("+n+");\nreturn valueToHandle(obj);\n}\n")(Ae,t,ye,(()=>P))}(n),ke[n]=i),i(e,r,o)},s:function(){return ye([])},k:function(e){e=ge(e);for(var t=Array(e.length),n=0;n<e.length;n++)t[n]=e[n];return ye(t)},d:function(e){return ye(Ie(e))},j:function(){return ye({})},f:function(e){for(var t=ge(e);t.length;){var n=t.pop();t.pop()(n)}he(e)},i:function(e,t,n){e=ge(e),t=ge(t),n=ge(n),e[t]=n},e:function(e,t){return e=(e=Ae(e,"_emval_take_value")).readValueFromPointer(t),ye(e)},S:function(e,t){e=new Date(1e3*(P[e>>>2]+4294967296*S[e+4>>>2])),S[t>>2>>>0]=e.getUTCSeconds(),S[t+4>>2>>>0]=e.getUTCMinutes(),S[t+8>>2>>>0]=e.getUTCHours(),S[t+12>>2>>>0]=e.getUTCDate(),S[t+16>>2>>>0]=e.getUTCMonth(),S[t+20>>2>>>0]=e.getUTCFullYear()-1900,S[t+24>>2>>>0]=e.getUTCDay(),S[t+28>>2>>>0]=(e.getTime()-Date.UTC(e.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},T:function(e,t){e=new Date(1e3*(P[e>>>2]+4294967296*S[e+4>>>2])),S[t>>2>>>0]=e.getSeconds(),S[t+4>>2>>>0]=e.getMinutes(),S[t+8>>2>>>0]=e.getHours(),S[t+12>>2>>>0]=e.getDate(),S[t+16>>2>>>0]=e.getMonth(),S[t+20>>2>>>0]=e.getFullYear()-1900,S[t+24>>2>>>0]=e.getDay(),S[t+28>>2>>>0]=0|Fe(e),S[t+36>>2>>>0]=-60*e.getTimezoneOffset();var n=new Date(e.getFullYear(),6,1).getTimezoneOffset(),r=new Date(e.getFullYear(),0,1).getTimezoneOffset();S[t+32>>2>>>0]=0|(n!=r&&e.getTimezoneOffset()==Math.min(r,n))},U:function(e){var t=new Date(S[e+20>>2>>>0]+1900,S[e+16>>2>>>0],S[e+12>>2>>>0],S[e+8>>2>>>0],S[e+4>>2>>>0],S[e>>2>>>0],0),n=S[e+32>>2>>>0],r=t.getTimezoneOffset(),o=new Date(t.getFullYear(),6,1).getTimezoneOffset(),i=new Date(t.getFullYear(),0,1).getTimezoneOffset(),a=Math.min(i,o);return 0>n?S[e+32>>2>>>0]=Number(o!=i&&a==r):0<n!=(a==r)&&(o=Math.max(i,o),t.setTime(t.getTime()+6e4*((0<n?a:o)-r))),S[e+24>>2>>>0]=t.getDay(),S[e+28>>2>>>0]=0|Fe(t),S[e>>2>>>0]=t.getSeconds(),S[e+4>>2>>>0]=t.getMinutes(),S[e+8>>2>>>0]=t.getHours(),S[e+12>>2>>>0]=t.getDate(),S[e+16>>2>>>0]=t.getMonth(),S[e+20>>2>>>0]=t.getYear(),t.getTime()/1e3|0},Q:function(){return-52},R:function(){},J:function(e,t,n){function r(e){return(e=e.toTimeString().match(/\(([A-Za-z ]+)\)$/))?e[1]:"GMT"}var o=(new Date).getFullYear(),i=new Date(o,0,1),a=new Date(o,6,1);o=i.getTimezoneOffset();var u=a.getTimezoneOffset();P[e>>2>>>0]=60*Math.max(o,u),S[t>>2>>>0]=Number(o!=u),e=r(i),t=r(a),e=Ne(e),t=Ne(t),u<o?(P[n>>2>>>0]=e,P[n+4>>2>>>0]=t):(P[n>>2>>>0]=t,P[n+4>>2>>>0]=e)},t:function(){U("")},ia:function(){U("To use dlopen, you need enable dynamic linking, see https://emscripten.org/docs/compiling/Dynamic-Linking.html")},B:function(){return Date.now()},K:function(){return 4294901760},n:Me,Z:function(e,t,n){_.copyWithin(e>>>0,t>>>0,t+n>>>0)},I:function(e){var t=_.length;if(4294901760<(e>>>=0))return!1;for(var n=1;4>=n;n*=2){var r=t*(1+.2/n);r=Math.min(r,e+100663296);var o=Math,i=o.min;r=Math.max(e,r),r+=(65536-r%65536)%65536;e:{var a=b.buffer;try{b.grow(i.call(o,4294901760,r)-a.byteLength+65535>>>16),D();var u=1;break e}catch(e){}u=void 0}if(u)return!0}return!1},X:function(e,t){var n=0;return Ue().forEach((function(r,o){var i=t+n;for(o=P[e+4*o>>2>>>0]=i,i=0;i<r.length;++i)w[o++>>0>>>0]=r.charCodeAt(i);w[o>>0>>>0]=0,n+=r.length+1})),0},Y:function(e,t){var n=Ue();P[e>>2>>>0]=n.length;var r=0;return n.forEach((function(e){r+=e.length+1})),P[t>>2>>>0]=r,0},w:function(){return 52},z:function(){return 52},W:function(){return 70},y:function(e,t,n,r){for(var o=0,i=0;i<n;i++){var a=P[t>>2>>>0],u=P[t+4>>2>>>0];t+=8;for(var s=0;s<u;s++){var c=_[a+s>>>0],l=Ge[e];0===c||10===c?((1===e?m:v)(X(l,0)),l.length=0):l.push(c)}o+=u}return P[r>>2>>>0]=o,0},ea:He,m:function(e,t,n,r){return He(e,t,n,r)}};!function(){function e(e){if(e=e.exports,t.asm=e,b=t.asm.ja,D(),R.unshift(t.asm.ka),F--,t.monitorRunDependencies&&t.monitorRunDependencies(F),0==F&&(null!==N&&(clearInterval(N),N=null),B)){var n=B;B=null,n()}return e}var n={a:Xe};if(F++,t.monitorRunDependencies&&t.monitorRunDependencies(F),t.instantiateWasm)try{return t.instantiateWasm(n,e)}catch(e){v("Module.instantiateWasm callback failed with error: "+e),o(e)}(function(e,t){var n=L;return y||"function"!=typeof WebAssembly.instantiateStreaming||z(n)||n.startsWith("file://")||f||"function"!=typeof fetch?W(n,e,t):fetch(n,{credentials:"same-origin"}).then((r=>WebAssembly.instantiateStreaming(r,e).then(t,(function(r){return v("wasm streaming compile failed: "+r),v("falling back to ArrayBuffer instantiation"),W(n,e,t)}))))})(n,(function(t){e(t.instance)})).catch(o)}(),t._OrtInit=function(){return(t._OrtInit=t.asm.la).apply(null,arguments)},t._OrtGetLastError=function(){return(t._OrtGetLastError=t.asm.ma).apply(null,arguments)},t._OrtCreateSessionOptions=function(){return(t._OrtCreateSessionOptions=t.asm.na).apply(null,arguments)},t._OrtAppendExecutionProvider=function(){return(t._OrtAppendExecutionProvider=t.asm.oa).apply(null,arguments)},t._OrtAddSessionConfigEntry=function(){return(t._OrtAddSessionConfigEntry=t.asm.pa).apply(null,arguments)},t._OrtReleaseSessionOptions=function(){return(t._OrtReleaseSessionOptions=t.asm.qa).apply(null,arguments)},t._OrtCreateSession=function(){return(t._OrtCreateSession=t.asm.ra).apply(null,arguments)},t._OrtReleaseSession=function(){return(t._OrtReleaseSession=t.asm.sa).apply(null,arguments)},t._OrtGetInputOutputCount=function(){return(t._OrtGetInputOutputCount=t.asm.ta).apply(null,arguments)},t._OrtGetInputName=function(){return(t._OrtGetInputName=t.asm.ua).apply(null,arguments)},t._OrtGetOutputName=function(){return(t._OrtGetOutputName=t.asm.va).apply(null,arguments)},t._OrtFree=function(){return(t._OrtFree=t.asm.wa).apply(null,arguments)},t._OrtCreateTensor=function(){return(t._OrtCreateTensor=t.asm.xa).apply(null,arguments)},t._OrtGetTensorData=function(){return(t._OrtGetTensorData=t.asm.ya).apply(null,arguments)},t._OrtReleaseTensor=function(){return(t._OrtReleaseTensor=t.asm.za).apply(null,arguments)},t._OrtCreateRunOptions=function(){return(t._OrtCreateRunOptions=t.asm.Aa).apply(null,arguments)},t._OrtAddRunConfigEntry=function(){return(t._OrtAddRunConfigEntry=t.asm.Ba).apply(null,arguments)},t._OrtReleaseRunOptions=function(){return(t._OrtReleaseRunOptions=t.asm.Ca).apply(null,arguments)},t._OrtRun=function(){return(t._OrtRun=t.asm.Da).apply(null,arguments)},t._OrtEndProfiling=function(){return(t._OrtEndProfiling=t.asm.Ea).apply(null,arguments)};var Ye,Je=t._malloc=function(){return(Je=t._malloc=t.asm.Fa).apply(null,arguments)},Ze=t._free=function(){return(Ze=t._free=t.asm.Ga).apply(null,arguments)};function $e(){return($e=t.asm.Ha).apply(null,arguments)}function Qe(){return(Qe=t.asm.Ka).apply(null,arguments)}function et(){return(et=t.asm.La).apply(null,arguments)}function tt(){return(tt=t.asm.Ma).apply(null,arguments)}function nt(){function e(){if(!Ye&&(Ye=!0,t.calledRun=!0,!C)){if(H(R),r(t),t.onRuntimeInitialized&&t.onRuntimeInitialized(),t.postRun)for("function"==typeof t.postRun&&(t.postRun=[t.postRun]);t.postRun.length;){var e=t.postRun.shift();M.unshift(e)}H(M)}}if(!(0<F)){if(t.preRun)for("function"==typeof t.preRun&&(t.preRun=[t.preRun]);t.preRun.length;)j();H(k),0<F||(t.setStatus?(t.setStatus("Running..."),setTimeout((function(){setTimeout((function(){t.setStatus("")}),1),e()}),1)):e())}}if(t.__embind_initialize_bindings=function(){return(t.__embind_initialize_bindings=t.asm.Ia).apply(null,arguments)},t.stackAlloc=tt,t.stackSave=Qe,t.stackRestore=et,t.UTF8ToString=Y,t.stringToUTF8=$,t.lengthBytesUTF8=J,B=function e(){Ye||nt(),Ye||(B=e)},t.preInit)for("function"==typeof t.preInit&&(t.preInit=[t.preInit]);0<t.preInit.length;)t.preInit.pop()();return nt(),e.ready});e.exports=r},4537:function(e){"use strict";e.exports=function(e,t){for(var n=new Array(arguments.length-1),r=0,o=2,i=!0;o<arguments.length;)n[r++]=arguments[o++];return new Promise((function(o,a){n[r]=function(e){if(i)if(i=!1,e)a(e);else{for(var t=new Array(arguments.length-1),n=0;n<t.length;)t[n++]=arguments[n];o.apply(null,t)}};try{e.apply(t||null,n)}catch(e){i&&(i=!1,a(e))}}))}},7419:function(e,t){"use strict";var n=t;n.length=function(e){var t=e.length;if(!t)return 0;for(var n=0;--t%4>1&&"="===e.charAt(t);)++n;return Math.ceil(3*e.length)/4-n};for(var r=new Array(64),o=new Array(123),i=0;i<64;)o[r[i]=i<26?i+65:i<52?i+71:i<62?i-4:i-59|43]=i++;n.encode=function(e,t,n){for(var o,i=null,a=[],u=0,s=0;t<n;){var c=e[t++];switch(s){case 0:a[u++]=r[c>>2],o=(3&c)<<4,s=1;break;case 1:a[u++]=r[o|c>>4],o=(15&c)<<2,s=2;break;case 2:a[u++]=r[o|c>>6],a[u++]=r[63&c],s=0}u>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,a)),u=0)}return s&&(a[u++]=r[o],a[u++]=61,1===s&&(a[u++]=61)),i?(u&&i.push(String.fromCharCode.apply(String,a.slice(0,u))),i.join("")):String.fromCharCode.apply(String,a.slice(0,u))};var a="invalid encoding";n.decode=function(e,t,n){for(var r,i=n,u=0,s=0;s<e.length;){var c=e.charCodeAt(s++);if(61===c&&u>1)break;if(void 0===(c=o[c]))throw Error(a);switch(u){case 0:r=c,u=1;break;case 1:t[n++]=r<<2|(48&c)>>4,r=c,u=2;break;case 2:t[n++]=(15&r)<<4|(60&c)>>2,r=c,u=3;break;case 3:t[n++]=(3&r)<<6|c,u=0}}if(1===u)throw Error(a);return n-i},n.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}},9211:function(e){"use strict";function t(){this._listeners={}}e.exports=t,t.prototype.on=function(e,t,n){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:n||this}),this},t.prototype.off=function(e,t){if(void 0===e)this._listeners={};else if(void 0===t)this._listeners[e]=[];else for(var n=this._listeners[e],r=0;r<n.length;)n[r].fn===t?n.splice(r,1):++r;return this},t.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var n=[],r=1;r<arguments.length;)n.push(arguments[r++]);for(r=0;r<t.length;)t[r].fn.apply(t[r++].ctx,n)}return this}},945:function(e){"use strict";function t(e){return"undefined"!=typeof Float32Array?function(){var t=new Float32Array([-0]),n=new Uint8Array(t.buffer),r=128===n[3];function o(e,r,o){t[0]=e,r[o]=n[0],r[o+1]=n[1],r[o+2]=n[2],r[o+3]=n[3]}function i(e,r,o){t[0]=e,r[o]=n[3],r[o+1]=n[2],r[o+2]=n[1],r[o+3]=n[0]}function a(e,r){return n[0]=e[r],n[1]=e[r+1],n[2]=e[r+2],n[3]=e[r+3],t[0]}function u(e,r){return n[3]=e[r],n[2]=e[r+1],n[1]=e[r+2],n[0]=e[r+3],t[0]}e.writeFloatLE=r?o:i,e.writeFloatBE=r?i:o,e.readFloatLE=r?a:u,e.readFloatBE=r?u:a}():function(){function t(e,t,n,r){var o=t<0?1:0;if(o&&(t=-t),0===t)e(1/t>0?0:2147483648,n,r);else if(isNaN(t))e(2143289344,n,r);else if(t>34028234663852886e22)e((o<<31|2139095040)>>>0,n,r);else if(t<11754943508222875e-54)e((o<<31|Math.round(t/1401298464324817e-60))>>>0,n,r);else{var i=Math.floor(Math.log(t)/Math.LN2);e((o<<31|i+127<<23|8388607&Math.round(t*Math.pow(2,-i)*8388608))>>>0,n,r)}}function a(e,t,n){var r=e(t,n),o=2*(r>>31)+1,i=r>>>23&255,a=8388607&r;return 255===i?a?NaN:o*(1/0):0===i?1401298464324817e-60*o*a:o*Math.pow(2,i-150)*(a+8388608)}e.writeFloatLE=t.bind(null,n),e.writeFloatBE=t.bind(null,r),e.readFloatLE=a.bind(null,o),e.readFloatBE=a.bind(null,i)}(),"undefined"!=typeof Float64Array?function(){var t=new Float64Array([-0]),n=new Uint8Array(t.buffer),r=128===n[7];function o(e,r,o){t[0]=e,r[o]=n[0],r[o+1]=n[1],r[o+2]=n[2],r[o+3]=n[3],r[o+4]=n[4],r[o+5]=n[5],r[o+6]=n[6],r[o+7]=n[7]}function i(e,r,o){t[0]=e,r[o]=n[7],r[o+1]=n[6],r[o+2]=n[5],r[o+3]=n[4],r[o+4]=n[3],r[o+5]=n[2],r[o+6]=n[1],r[o+7]=n[0]}function a(e,r){return n[0]=e[r],n[1]=e[r+1],n[2]=e[r+2],n[3]=e[r+3],n[4]=e[r+4],n[5]=e[r+5],n[6]=e[r+6],n[7]=e[r+7],t[0]}function u(e,r){return n[7]=e[r],n[6]=e[r+1],n[5]=e[r+2],n[4]=e[r+3],n[3]=e[r+4],n[2]=e[r+5],n[1]=e[r+6],n[0]=e[r+7],t[0]}e.writeDoubleLE=r?o:i,e.writeDoubleBE=r?i:o,e.readDoubleLE=r?a:u,e.readDoubleBE=r?u:a}():function(){function t(e,t,n,r,o,i){var a=r<0?1:0;if(a&&(r=-r),0===r)e(0,o,i+t),e(1/r>0?0:2147483648,o,i+n);else if(isNaN(r))e(0,o,i+t),e(2146959360,o,i+n);else if(r>17976931348623157e292)e(0,o,i+t),e((a<<31|2146435072)>>>0,o,i+n);else{var u;if(r<22250738585072014e-324)e((u=r/5e-324)>>>0,o,i+t),e((a<<31|u/4294967296)>>>0,o,i+n);else{var s=Math.floor(Math.log(r)/Math.LN2);1024===s&&(s=1023),e(4503599627370496*(u=r*Math.pow(2,-s))>>>0,o,i+t),e((a<<31|s+1023<<20|1048576*u&1048575)>>>0,o,i+n)}}}function a(e,t,n,r,o){var i=e(r,o+t),a=e(r,o+n),u=2*(a>>31)+1,s=a>>>20&2047,c=4294967296*(1048575&a)+i;return 2047===s?c?NaN:u*(1/0):0===s?5e-324*u*c:u*Math.pow(2,s-1075)*(c+4503599627370496)}e.writeDoubleLE=t.bind(null,n,0,4),e.writeDoubleBE=t.bind(null,r,4,0),e.readDoubleLE=a.bind(null,o,0,4),e.readDoubleBE=a.bind(null,i,4,0)}(),e}function n(e,t,n){t[n]=255&e,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24}function r(e,t,n){t[n]=e>>>24,t[n+1]=e>>>16&255,t[n+2]=e>>>8&255,t[n+3]=255&e}function o(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function i(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}e.exports=t(t)},7199:function(module){"use strict";function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}module.exports=inquire},6662:function(e){"use strict";e.exports=function(e,t,n){var r=n||8192,o=r>>>1,i=null,a=r;return function(n){if(n<1||n>o)return e(n);a+n>r&&(i=e(r),a=0);var u=t.call(i,a,a+=n);return 7&a&&(a=1+(7|a)),u}}},4997:function(e,t){"use strict";var n=t;n.length=function(e){for(var t=0,n=0,r=0;r<e.length;++r)(n=e.charCodeAt(r))<128?t+=1:n<2048?t+=2:55296==(64512&n)&&56320==(64512&e.charCodeAt(r+1))?(++r,t+=4):t+=3;return t},n.read=function(e,t,n){if(n-t<1)return"";for(var r,o=null,i=[],a=0;t<n;)(r=e[t++])<128?i[a++]=r:r>191&&r<224?i[a++]=(31&r)<<6|63&e[t++]:r>239&&r<365?(r=((7&r)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,i[a++]=55296+(r>>10),i[a++]=56320+(1023&r)):i[a++]=(15&r)<<12|(63&e[t++])<<6|63&e[t++],a>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,i)),a=0);return o?(a&&o.push(String.fromCharCode.apply(String,i.slice(0,a))),o.join("")):String.fromCharCode.apply(String,i.slice(0,a))},n.write=function(e,t,n){for(var r,o,i=n,a=0;a<e.length;++a)(r=e.charCodeAt(a))<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=63&r|128):55296==(64512&r)&&56320==(64512&(o=e.charCodeAt(a+1)))?(r=65536+((1023&r)<<10)+(1023&o),++a,t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=63&r|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=63&r|128);return n-i}},3442:function(e,t){"use strict";t.__esModule=!0;var n=function(){function e(t){if(!t)throw new TypeError("Invalid argument; `value` has no value.");this.value=e.EMPTY,t&&e.isGuid(t)&&(this.value=t)}return e.isGuid=function(t){var n=t.toString();return t&&(t instanceof e||e.validator.test(n))},e.create=function(){return new e([e.gen(2),e.gen(1),e.gen(1),e.gen(1),e.gen(3)].join("-"))},e.createEmpty=function(){return new e("emptyguid")},e.parse=function(t){return new e(t)},e.raw=function(){return[e.gen(2),e.gen(1),e.gen(1),e.gen(1),e.gen(3)].join("-")},e.gen=function(e){for(var t="",n=0;n<e;n++)t+=(65536*(1+Math.random())|0).toString(16).substring(1);return t},e.prototype.equals=function(t){return e.isGuid(t)&&this.value===t.toString()},e.prototype.isEmpty=function(){return this.value===e.EMPTY},e.prototype.toString=function(){return this.value},e.prototype.toJSON=function(){return{value:this.value}},e.validator=new RegExp("^[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}$","i"),e.EMPTY="00000000-0000-0000-0000-000000000000",e}();t.Guid=n},2100:function(e,t,n){"use strict";e.exports=n(9482)},9482:function(e,t,n){"use strict";var r=t;function o(){r.util._configure(),r.Writer._configure(r.BufferWriter),r.Reader._configure(r.BufferReader)}r.build="minimal",r.Writer=n(1173),r.BufferWriter=n(3155),r.Reader=n(1408),r.BufferReader=n(593),r.util=n(9693),r.rpc=n(5994),r.roots=n(5054),r.configure=o,o()},1408:function(e,t,n){"use strict";e.exports=s;var r,o=n(9693),i=o.LongBits,a=o.utf8;function u(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function s(e){this.buf=e,this.pos=0,this.len=e.length}var c,l="undefined"!=typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new s(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new s(e);throw Error("illegal buffer")},p=function(){return o.Buffer?function(e){return(s.create=function(e){return o.Buffer.isBuffer(e)?new r(e):l(e)})(e)}:l};function f(){var e=new i(0,0),t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw u(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw u(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function d(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function h(){if(this.pos+8>this.len)throw u(this,8);return new i(d(this.buf,this.pos+=4),d(this.buf,this.pos+=4))}s.create=p(),s.prototype._slice=o.Array.prototype.subarray||o.Array.prototype.slice,s.prototype.uint32=(c=4294967295,function(){if(c=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return c;if((this.pos+=5)>this.len)throw this.pos=this.len,u(this,10);return c}),s.prototype.int32=function(){return 0|this.uint32()},s.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},s.prototype.bool=function(){return 0!==this.uint32()},s.prototype.fixed32=function(){if(this.pos+4>this.len)throw u(this,4);return d(this.buf,this.pos+=4)},s.prototype.sfixed32=function(){if(this.pos+4>this.len)throw u(this,4);return 0|d(this.buf,this.pos+=4)},s.prototype.float=function(){if(this.pos+4>this.len)throw u(this,4);var e=o.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},s.prototype.double=function(){if(this.pos+8>this.len)throw u(this,4);var e=o.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},s.prototype.bytes=function(){var e=this.uint32(),t=this.pos,n=this.pos+e;if(n>this.len)throw u(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,n):t===n?new this.buf.constructor(0):this._slice.call(this.buf,t,n)},s.prototype.string=function(){var e=this.bytes();return a.read(e,0,e.length)},s.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw u(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw u(this)}while(128&this.buf[this.pos++]);return this},s.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},s._configure=function(e){r=e,s.create=p(),r._configure();var t=o.Long?"toLong":"toNumber";o.merge(s.prototype,{int64:function(){return f.call(this)[t](!1)},uint64:function(){return f.call(this)[t](!0)},sint64:function(){return f.call(this).zzDecode()[t](!1)},fixed64:function(){return h.call(this)[t](!0)},sfixed64:function(){return h.call(this)[t](!1)}})}},593:function(e,t,n){"use strict";e.exports=i;var r=n(1408);(i.prototype=Object.create(r.prototype)).constructor=i;var o=n(9693);function i(e){r.call(this,e)}i._configure=function(){o.Buffer&&(i.prototype._slice=o.Buffer.prototype.slice)},i.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},i._configure()},5054:function(e){"use strict";e.exports={}},5994:function(e,t,n){"use strict";t.Service=n(7948)},7948:function(e,t,n){"use strict";e.exports=o;var r=n(9693);function o(e,t,n){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");r.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(n)}(o.prototype=Object.create(r.EventEmitter.prototype)).constructor=o,o.prototype.rpcCall=function e(t,n,o,i,a){if(!i)throw TypeError("request must be specified");var u=this;if(!a)return r.asPromise(e,u,t,n,o,i);if(u.rpcImpl)try{return u.rpcImpl(t,n[u.requestDelimited?"encodeDelimited":"encode"](i).finish(),(function(e,n){if(e)return u.emit("error",e,t),a(e);if(null!==n){if(!(n instanceof o))try{n=o[u.responseDelimited?"decodeDelimited":"decode"](n)}catch(e){return u.emit("error",e,t),a(e)}return u.emit("data",n,t),a(null,n)}u.end(!0)}))}catch(e){return u.emit("error",e,t),void setTimeout((function(){a(e)}),0)}else setTimeout((function(){a(Error("already ended"))}),0)},o.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},1945:function(e,t,n){"use strict";e.exports=o;var r=n(9693);function o(e,t){this.lo=e>>>0,this.hi=t>>>0}var i=o.zero=new o(0,0);i.toNumber=function(){return 0},i.zzEncode=i.zzDecode=function(){return this},i.length=function(){return 1};var a=o.zeroHash="\0\0\0\0\0\0\0\0";o.fromNumber=function(e){if(0===e)return i;var t=e<0;t&&(e=-e);var n=e>>>0,r=(e-n)/4294967296>>>0;return t&&(r=~r>>>0,n=~n>>>0,++n>4294967295&&(n=0,++r>4294967295&&(r=0))),new o(n,r)},o.from=function(e){if("number"==typeof e)return o.fromNumber(e);if(r.isString(e)){if(!r.Long)return o.fromNumber(parseInt(e,10));e=r.Long.fromString(e)}return e.low||e.high?new o(e.low>>>0,e.high>>>0):i},o.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,n=~this.hi>>>0;return t||(n=n+1>>>0),-(t+4294967296*n)}return this.lo+4294967296*this.hi},o.prototype.toLong=function(e){return r.Long?new r.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}};var u=String.prototype.charCodeAt;o.fromHash=function(e){return e===a?i:new o((u.call(e,0)|u.call(e,1)<<8|u.call(e,2)<<16|u.call(e,3)<<24)>>>0,(u.call(e,4)|u.call(e,5)<<8|u.call(e,6)<<16|u.call(e,7)<<24)>>>0)},o.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},o.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},o.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},o.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return 0===n?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:n<128?9:10}},9693:function(e,t,n){"use strict";var r=t;function o(e,t,n){for(var r=Object.keys(t),o=0;o<r.length;++o)void 0!==e[r[o]]&&n||(e[r[o]]=t[r[o]]);return e}function i(e){function t(e,n){if(!(this instanceof t))return new t(e,n);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),n&&o(this,n)}return t.prototype=Object.create(Error.prototype,{constructor:{value:t,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return e},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),t}r.asPromise=n(4537),r.base64=n(7419),r.EventEmitter=n(9211),r.float=n(945),r.inquire=n(7199),r.utf8=n(4997),r.pool=n(6662),r.LongBits=n(1945),r.isNode=Boolean("undefined"!=typeof global&&global&&global.process&&global.process.versions&&global.process.versions.node),r.global=r.isNode&&global||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||this,r.emptyArray=Object.freeze?Object.freeze([]):[],r.emptyObject=Object.freeze?Object.freeze({}):{},r.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},r.isString=function(e){return"string"==typeof e||e instanceof String},r.isObject=function(e){return e&&"object"==typeof e},r.isset=r.isSet=function(e,t){var n=e[t];return!(null==n||!e.hasOwnProperty(t))&&("object"!=typeof n||(Array.isArray(n)?n.length:Object.keys(n).length)>0)},r.Buffer=function(){try{var e=r.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(e){return null}}(),r._Buffer_from=null,r._Buffer_allocUnsafe=null,r.newBuffer=function(e){return"number"==typeof e?r.Buffer?r._Buffer_allocUnsafe(e):new r.Array(e):r.Buffer?r._Buffer_from(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},r.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,r.Long=r.global.dcodeIO&&r.global.dcodeIO.Long||r.global.Long||r.inquire("long"),r.key2Re=/^true|false|0|1$/,r.key32Re=/^-?(?:0|[1-9][0-9]*)$/,r.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,r.longToHash=function(e){return e?r.LongBits.from(e).toHash():r.LongBits.zeroHash},r.longFromHash=function(e,t){var n=r.LongBits.fromHash(e);return r.Long?r.Long.fromBits(n.lo,n.hi,t):n.toNumber(Boolean(t))},r.merge=o,r.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},r.newError=i,r.ProtocolError=i("ProtocolError"),r.oneOfGetter=function(e){for(var t={},n=0;n<e.length;++n)t[e[n]]=1;return function(){for(var e=Object.keys(this),n=e.length-1;n>-1;--n)if(1===t[e[n]]&&void 0!==this[e[n]]&&null!==this[e[n]])return e[n]}},r.oneOfSetter=function(e){return function(t){for(var n=0;n<e.length;++n)e[n]!==t&&delete this[e[n]]}},r.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},r._configure=function(){var e=r.Buffer;e?(r._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,n){return new e(t,n)},r._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):r._Buffer_from=r._Buffer_allocUnsafe=null}},1173:function(e,t,n){"use strict";e.exports=p;var r,o=n(9693),i=o.LongBits,a=o.base64,u=o.utf8;function s(e,t,n){this.fn=e,this.len=t,this.next=void 0,this.val=n}function c(){}function l(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function p(){this.len=0,this.head=new s(c,0,0),this.tail=this.head,this.states=null}var f=function(){return o.Buffer?function(){return(p.create=function(){return new r})()}:function(){return new p}};function d(e,t,n){t[n]=255&e}function h(e,t){this.len=e,this.next=void 0,this.val=t}function g(e,t,n){for(;e.hi;)t[n++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[n++]=127&e.lo|128,e.lo=e.lo>>>7;t[n++]=e.lo}function y(e,t,n){t[n]=255&e,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24}p.create=f(),p.alloc=function(e){return new o.Array(e)},o.Array!==Array&&(p.alloc=o.pool(p.alloc,o.Array.prototype.subarray)),p.prototype._push=function(e,t,n){return this.tail=this.tail.next=new s(e,t,n),this.len+=t,this},h.prototype=Object.create(s.prototype),h.prototype.fn=function(e,t,n){for(;e>127;)t[n++]=127&e|128,e>>>=7;t[n]=e},p.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new h((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},p.prototype.int32=function(e){return e<0?this._push(g,10,i.fromNumber(e)):this.uint32(e)},p.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},p.prototype.uint64=function(e){var t=i.from(e);return this._push(g,t.length(),t)},p.prototype.int64=p.prototype.uint64,p.prototype.sint64=function(e){var t=i.from(e).zzEncode();return this._push(g,t.length(),t)},p.prototype.bool=function(e){return this._push(d,1,e?1:0)},p.prototype.fixed32=function(e){return this._push(y,4,e>>>0)},p.prototype.sfixed32=p.prototype.fixed32,p.prototype.fixed64=function(e){var t=i.from(e);return this._push(y,4,t.lo)._push(y,4,t.hi)},p.prototype.sfixed64=p.prototype.fixed64,p.prototype.float=function(e){return this._push(o.float.writeFloatLE,4,e)},p.prototype.double=function(e){return this._push(o.float.writeDoubleLE,8,e)};var m=o.Array.prototype.set?function(e,t,n){t.set(e,n)}:function(e,t,n){for(var r=0;r<e.length;++r)t[n+r]=e[r]};p.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(d,1,0);if(o.isString(e)){var n=p.alloc(t=a.length(e));a.decode(e,n,0),e=n}return this.uint32(t)._push(m,t,e)},p.prototype.string=function(e){var t=u.length(e);return t?this.uint32(t)._push(u.write,t,e):this._push(d,1,0)},p.prototype.fork=function(){return this.states=new l(this),this.head=this.tail=new s(c,0,0),this.len=0,this},p.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new s(c,0,0),this.len=0),this},p.prototype.ldelim=function(){var e=this.head,t=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=e.next,this.tail=t,this.len+=n),this},p.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),n=0;e;)e.fn(e.val,t,n),n+=e.len,e=e.next;return t},p._configure=function(e){r=e,p.create=f(),r._configure()}},3155:function(e,t,n){"use strict";e.exports=i;var r=n(1173);(i.prototype=Object.create(r.prototype)).constructor=i;var o=n(9693);function i(){r.call(this)}function a(e,t,n){e.length<40?o.utf8.write(e,t,n):t.utf8Write?t.utf8Write(e,n):t.write(e,n)}i._configure=function(){i.alloc=o._Buffer_allocUnsafe,i.writeBytesBuffer=o.Buffer&&o.Buffer.prototype instanceof Uint8Array&&"set"===o.Buffer.prototype.set.name?function(e,t,n){t.set(e,n)}:function(e,t,n){if(e.copy)e.copy(t,n,0,e.length);else for(var r=0;r<e.length;)t[n++]=e[r++]}},i.prototype.bytes=function(e){o.isString(e)&&(e=o._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(i.writeBytesBuffer,t,e),this},i.prototype.string=function(e){var t=o.Buffer.byteLength(e);return this.uint32(t),t&&this._push(a,t,e),this},i._configure()},4154:function(e){"use strict";e.exports='"use strict";var e={},a="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node;if(a){var r=require("worker_threads"),t=r.parentPort;t.on("message",(e=>onmessage({data:e})));var s=require("fs");Object.assign(global,{self:global,require:require,Module:e,location:{href:__filename},Worker:r.Worker,importScripts:function(e){(0,eval)(s.readFileSync(e,"utf8")+"//# sourceURL="+e)},postMessage:function(e){t.postMessage(e)},performance:global.performance||{now:function(){return Date.now()}}})}var o=!1,n=function(){var e=Array.prototype.slice.call(arguments).join(" ");a?s.writeSync(2,e+"\\n"):console.error(e)};self.alert=function(){var a=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:a,threadId:e._pthread_self()})},e.instantiateWasm=(a,r)=>{var t=e.wasmModule;return e.wasmModule=null,r(new WebAssembly.Instance(t,a))},self.onunhandledrejection=e=>{throw e.reason??e},self.onmessage=function a(r){try{if("load"===r.data.cmd){let s=[];self.onmessage=e=>s.push(e),self.startWorker=r=>{e=r,postMessage({cmd:"loaded"});for(let e of s)a(e);self.onmessage=a},e.wasmModule=r.data.wasmModule;for(const a of r.data.handlers)e[a]=function(){postMessage({cmd:"callHandler",handler:a,args:[...arguments]})};if(e.wasmMemory=r.data.wasmMemory,e.buffer=e.wasmMemory.buffer,e.ENVIRONMENT_IS_PTHREAD=!0,"string"==typeof r.data.urlOrBlob)importScripts(r.data.urlOrBlob);else{var t=URL.createObjectURL(r.data.urlOrBlob);importScripts(t),URL.revokeObjectURL(t)}ortWasmThreaded(e)}else if("run"===r.data.cmd){e.__emscripten_thread_init(r.data.pthread_ptr,0,0,1),e.__emscripten_thread_mailbox_await(r.data.pthread_ptr),e.establishStackSpace(),e.PThread.receiveObjectTransfer(r.data),e.PThread.threadInitTLS(),o||(e.__embind_initialize_bindings(),o=!0);try{e.invokeEntryPoint(r.data.start_routine,r.data.arg)}catch(e){if("unwind"!=e)throw e}}else"cancel"===r.data.cmd?e._pthread_self()&&e.__emscripten_thread_exit(-1):"setimmediate"===r.data.target||("checkMailbox"===r.data.cmd?o&&e.checkMailbox():r.data.cmd&&(n("worker.js received unknown command "+r.data.cmd),n(r.data)))}catch(a){throw e.__emscripten_thread_crashed&&e.__emscripten_thread_crashed(),a}};\n'},7067:function(){},1296:function(){},1384:function(){},3993:function(){},908:function(){},6953:function(){},9925:function(){},2806:function(){},6449:function(){},2850:function(){},5381:function(){},685:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resolveBackend=t.registerBackend=void 0;const n={},r=[];t.registerBackend=(e,t,o)=>{if(!t||"function"!=typeof t.init||"function"!=typeof t.createSessionHandler)throw new TypeError("not a valid backend");{const i=n[e];if(void 0===i)n[e]={backend:t,priority:o};else{if(i.priority>o)return;if(i.priority===o&&i.backend!==t)throw new Error(`cannot register backend "${e}" using priority ${o}`)}if(o>=0){const t=r.indexOf(e);-1!==t&&r.splice(t,1);for(let t=0;t<r.length;t++)if(n[r[t]].priority<=o)return void r.splice(t,0,e);r.push(e)}}},t.resolveBackend=async e=>{const t=0===e.length?r:e,o=[];for(const e of t){const t=n[e];if(t){if(t.initialized)return t.backend;if(t.aborted)continue;const n=!!t.initPromise;try{return n||(t.initPromise=t.backend.init()),await t.initPromise,t.initialized=!0,t.backend}catch(r){n||o.push({name:e,err:r}),t.aborted=!0}finally{delete t.initPromise}}}throw new Error(`no available backend found. ERR: ${o.map((e=>`[${e.name}] ${e.err}`)).join(", ")}`)}},4798:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerBackend=void 0;var r=n(685);Object.defineProperty(t,"registerBackend",{enumerable:!0,get:function(){return r.registerBackend}})},3121:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.env=void 0;const r=n(9104);let o="warning";t.env={wasm:{},webgl:{},webgpu:{},versions:{common:r.version},set logLevel(e){if(void 0!==e){if("string"!=typeof e||-1===["verbose","info","warning","error","fatal"].indexOf(e))throw new Error(`Unsupported logging level: ${e}`);o=e}},get logLevel(){return o}},Object.defineProperty(t.env,"logLevel",{enumerable:!0})},2457:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.env=void 0;const r=n(3121);t.env=r.env},2235:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(4798),t),o(n(2457),t),o(n(3974),t),o(n(963),t),o(n(7852),t)},8036:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InferenceSession=void 0;const r=n(685),o=n(963);class i{constructor(e){this.handler=e}async run(e,t,n){const r={};let i={};if("object"!=typeof e||null===e||e instanceof o.Tensor||Array.isArray(e))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let a=!0;if("object"==typeof t){if(null===t)throw new TypeError("Unexpected argument[1]: cannot be null.");if(t instanceof o.Tensor)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(t)){if(0===t.length)throw new TypeError("'fetches' cannot be an empty array.");a=!1;for(const e of t){if("string"!=typeof e)throw new TypeError("'fetches' must be a string array or an object.");if(-1===this.outputNames.indexOf(e))throw new RangeError(`'fetches' contains invalid output name: ${e}.`);r[e]=null}if("object"==typeof n&&null!==n)i=n;else if(void 0!==n)throw new TypeError("'options' must be an object.")}else{let e=!1;const u=Object.getOwnPropertyNames(t);for(const n of this.outputNames)if(-1!==u.indexOf(n)){const i=t[n];(null===i||i instanceof o.Tensor)&&(e=!0,a=!1,r[n]=i)}if(e){if("object"==typeof n&&null!==n)i=n;else if(void 0!==n)throw new TypeError("'options' must be an object.")}else i=t}}else if(void 0!==t)throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(const t of this.inputNames)if(void 0===e[t])throw new Error(`input '${t}' is missing in 'feeds'.`);if(a)for(const e of this.outputNames)r[e]=null;const u=await this.handler.run(e,r,i),s={};for(const e in u)Object.hasOwnProperty.call(u,e)&&(s[e]=new o.Tensor(u[e].type,u[e].data,u[e].dims));return s}async release(){return this.handler.dispose()}static async create(e,t,n,o){let a,u={};if("string"==typeof e){if(a=e,"object"==typeof t&&null!==t)u=t;else if(void 0!==t)throw new TypeError("'options' must be an object.")}else if(e instanceof Uint8Array){if(a=e,"object"==typeof t&&null!==t)u=t;else if(void 0!==t)throw new TypeError("'options' must be an object.")}else{if(!(e instanceof ArrayBuffer||"undefined"!=typeof SharedArrayBuffer&&e instanceof SharedArrayBuffer))throw new TypeError("Unexpected argument[0]: must be 'path' or 'buffer'.");{const r=e;let i=0,s=e.byteLength;if("object"==typeof t&&null!==t)u=t;else if("number"==typeof t){if(i=t,!Number.isSafeInteger(i))throw new RangeError("'byteOffset' must be an integer.");if(i<0||i>=r.byteLength)throw new RangeError(`'byteOffset' is out of range [0, ${r.byteLength}).`);if(s=e.byteLength-i,"number"==typeof n){if(s=n,!Number.isSafeInteger(s))throw new RangeError("'byteLength' must be an integer.");if(s<=0||i+s>r.byteLength)throw new RangeError(`'byteLength' is out of range (0, ${r.byteLength-i}].`);if("object"==typeof o&&null!==o)u=o;else if(void 0!==o)throw new TypeError("'options' must be an object.")}else if(void 0!==n)throw new TypeError("'byteLength' must be a number.")}else if(void 0!==t)throw new TypeError("'options' must be an object.");a=new Uint8Array(r,i,s)}}const s=(u.executionProviders||[]).map((e=>"string"==typeof e?e:e.name)),c=await(0,r.resolveBackend)(s),l=await c.createSessionHandler(a,u);return new i(l)}startProfiling(){this.handler.startProfiling()}endProfiling(){this.handler.endProfiling()}get inputNames(){return this.handler.inputNames}get outputNames(){return this.handler.outputNames}}t.InferenceSession=i},3974:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InferenceSession=void 0;const r=n(8036);t.InferenceSession=r.InferenceSession},7852:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},2350:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tensorToImageData=t.tensorToDataURL=void 0,t.tensorToDataURL=(e,t)=>{const n=document.createElement("canvas");n.width=e.dims[3],n.height=e.dims[2];const r=n.getContext("2d");if(null!=r){let o,i;void 0!==t?.tensorLayout&&"NHWC"===t.tensorLayout?(o=e.dims[2],i=e.dims[3]):(o=e.dims[3],i=e.dims[2]);const a=void 0!==t?.format?t.format:"RGB",u=t?.norm;let s,c;void 0===u||void 0===u.mean?s=[255,255,255,255]:"number"==typeof u.mean?s=[u.mean,u.mean,u.mean,u.mean]:(s=[u.mean[0],u.mean[1],u.mean[2],0],void 0!==u.mean[3]&&(s[3]=u.mean[3])),void 0===u||void 0===u.bias?c=[0,0,0,0]:"number"==typeof u.bias?c=[u.bias,u.bias,u.bias,u.bias]:(c=[u.bias[0],u.bias[1],u.bias[2],0],void 0!==u.bias[3]&&(c[3]=u.bias[3]));const l=i*o;let p=0,f=l,d=2*l,h=-1;"RGBA"===a?(p=0,f=l,d=2*l,h=3*l):"RGB"===a?(p=0,f=l,d=2*l):"RBG"===a&&(p=0,d=l,f=2*l);for(let t=0;t<i;t++)for(let n=0;n<o;n++){const o=(e.data[p++]-c[0])*s[0],i=(e.data[f++]-c[1])*s[1],a=(e.data[d++]-c[2])*s[2],u=-1===h?255:(e.data[h++]-c[3])*s[3];r.fillStyle="rgba("+o+","+i+","+a+","+u+")",r.fillRect(n,t,1,1)}return n.toDataURL()}throw new Error("Can not access image data")},t.tensorToImageData=(e,t)=>{const n=document.createElement("canvas").getContext("2d");let r;if(null==n)throw new Error("Can not access image data");{let o,i,a;void 0!==t?.tensorLayout&&"NHWC"===t.tensorLayout?(o=e.dims[2],i=e.dims[1],a=e.dims[3]):(o=e.dims[3],i=e.dims[2],a=e.dims[1]);const u=void 0!==t&&void 0!==t.format?t.format:"RGB",s=t?.norm;let c,l;void 0===s||void 0===s.mean?c=[255,255,255,255]:"number"==typeof s.mean?c=[s.mean,s.mean,s.mean,s.mean]:(c=[s.mean[0],s.mean[1],s.mean[2],255],void 0!==s.mean[3]&&(c[3]=s.mean[3])),void 0===s||void 0===s.bias?l=[0,0,0,0]:"number"==typeof s.bias?l=[s.bias,s.bias,s.bias,s.bias]:(l=[s.bias[0],s.bias[1],s.bias[2],0],void 0!==s.bias[3]&&(l[3]=s.bias[3]));const p=i*o;if(void 0!==t&&(void 0!==t.format&&4===a&&"RGBA"!==t.format||3===a&&"RGB"!==t.format&&"BGR"!==t.format))throw new Error("Tensor format doesn't match input tensor dims");const f=4;let d=0,h=1,g=2,y=3,m=0,v=p,b=2*p,w=-1;"RGBA"===u?(m=0,v=p,b=2*p,w=3*p):"RGB"===u?(m=0,v=p,b=2*p):"RBG"===u&&(m=0,b=p,v=2*p),r=n.createImageData(o,i);for(let t=0;t<i*o;d+=f,h+=f,g+=f,y+=f,t++)r.data[d]=(e.data[m++]-l[0])*c[0],r.data[h]=(e.data[v++]-l[1])*c[1],r.data[g]=(e.data[b++]-l[2])*c[2],r.data[y]=-1===w?255:(e.data[w++]-l[3])*c[3]}return r}},4866:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tensorFromImage=t.bufferToTensor=void 0;const r=n(963);t.bufferToTensor=(e,t)=>{if(void 0===e)throw new Error("Image buffer must be defined");if(void 0===t.height||void 0===t.width)throw new Error("Image height and width must be defined");if("NHWC"===t.tensorLayout)throw new Error("NHWC Tensor layout is not supported yet");const{height:n,width:o}=t,i=t.norm??{mean:255,bias:0};let a,u;a="number"==typeof i.mean?[i.mean,i.mean,i.mean,i.mean]:[i.mean[0],i.mean[1],i.mean[2],i.mean[3]??255],u="number"==typeof i.bias?[i.bias,i.bias,i.bias,i.bias]:[i.bias[0],i.bias[1],i.bias[2],i.bias[3]??0];const s=void 0!==t.format?t.format:"RGBA",c=void 0!==t.tensorFormat&&void 0!==t.tensorFormat?t.tensorFormat:"RGB",l=n*o,p="RGBA"===c?new Float32Array(4*l):new Float32Array(3*l);let f=4,d=0,h=1,g=2,y=3,m=0,v=l,b=2*l,w=-1;"RGB"===s&&(f=3,d=0,h=1,g=2,y=-1),"RGBA"===c?w=3*l:"RBG"===c?(m=0,b=l,v=2*l):"BGR"===c&&(b=0,v=l,m=2*l);for(let t=0;t<l;t++,d+=f,g+=f,h+=f,y+=f)p[m++]=(e[d]+u[0])/a[0],p[v++]=(e[h]+u[1])/a[1],p[b++]=(e[g]+u[2])/a[2],-1!==w&&-1!==y&&(p[w++]=(e[y]+u[3])/a[3]);return"RGBA"===c?new r.Tensor("float32",p,[1,4,n,o]):new r.Tensor("float32",p,[1,3,n,o])},t.tensorFromImage=async(e,n)=>{const r="undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement,o="undefined"!=typeof ImageData&&e instanceof ImageData,i="undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap,a="string"==typeof e;let u,s=n??{};if(r){const t=document.createElement("canvas");t.width=e.width,t.height=e.height;const r=t.getContext("2d");if(null==r)throw new Error("Can not access image data");{let t=e.height,o=e.width;if(void 0!==n&&void 0!==n.resizedHeight&&void 0!==n.resizedWidth&&(t=n.resizedHeight,o=n.resizedWidth),void 0!==n){if(s=n,void 0!==n.tensorFormat)throw new Error("Image input config format must be RGBA for HTMLImageElement");s.tensorFormat="RGBA",s.height=t,s.width=o}else s.tensorFormat="RGBA",s.height=t,s.width=o;r.drawImage(e,0,0),u=r.getImageData(0,0,o,t).data}}else{if(!o){if(i){if(void 0===n)throw new Error("Please provide image config with format for Imagebitmap");const r=document.createElement("canvas").getContext("2d");if(null!=r){const n=e.height,o=e.width;return r.drawImage(e,0,0,o,n),u=r.getImageData(0,0,o,n).data,s.height=n,s.width=o,(0,t.bufferToTensor)(u,s)}throw new Error("Can not access image data")}if(a)return new Promise(((n,r)=>{const o=document.createElement("canvas"),i=o.getContext("2d");if(!e||!i)return r();const a=new Image;a.crossOrigin="Anonymous",a.src=e,a.onload=()=>{o.width=a.width,o.height=a.height,i.drawImage(a,0,0,o.width,o.height);const e=i.getImageData(0,0,o.width,o.height);s.height=o.height,s.width=o.width,n((0,t.bufferToTensor)(e.data,s))}}));throw new Error("Input data provided is not supported - aborted tensor creation")}{let t,r;if(void 0!==n&&void 0!==n.resizedWidth&&void 0!==n.resizedHeight?(t=n.resizedHeight,r=n.resizedWidth):(t=e.height,r=e.width),void 0!==n&&(s=n),s.format="RGBA",s.height=t,s.width=r,void 0!==n){const n=document.createElement("canvas");n.width=r,n.height=t;const o=n.getContext("2d");if(null==o)throw new Error("Can not access image data");o.putImageData(e,0,0),u=o.getImageData(0,0,r,t).data}else u=e.data}}if(void 0!==u)return(0,t.bufferToTensor)(u,s);throw new Error("Input data provided is not supported - aborted tensor creation")}},5957:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Tensor=void 0;const r=n(2350),o=n(4866),i=n(106),a=new Map([["float32",Float32Array],["uint8",Uint8Array],["int8",Int8Array],["uint16",Uint16Array],["float16",Uint16Array],["int16",Int16Array],["int32",Int32Array],["bool",Uint8Array],["float64",Float64Array],["uint32",Uint32Array]]),u=new Map([[Float32Array,"float32"],[Uint8Array,"uint8"],[Int8Array,"int8"],[Uint16Array,"uint16"],[Int16Array,"int16"],[Int32Array,"int32"],[Float64Array,"float64"],[Uint32Array,"uint32"]]);let s=!1;t.Tensor=class{constructor(e,t,n){let r,o,c;if((()=>{if(!s){s=!0;const e="undefined"!=typeof BigInt64Array&&"function"==typeof BigInt64Array.from,t="undefined"!=typeof BigUint64Array&&"function"==typeof BigUint64Array.from;e&&(a.set("int64",BigInt64Array),u.set(BigInt64Array,"int64")),t&&(a.set("uint64",BigUint64Array),u.set(BigUint64Array,"uint64"))}})(),"string"==typeof e)if(r=e,c=n,"string"===e){if(!Array.isArray(t))throw new TypeError("A string tensor's data must be a string array.");o=t}else{const n=a.get(e);if(void 0===n)throw new TypeError(`Unsupported tensor type: ${e}.`);if(Array.isArray(t)){if("float16"===e)throw new TypeError("Creating a float16 tensor from number array is not supported. Please use Uint16Array as data.");o="uint64"===e||"int64"===e?n.from(t,BigInt):n.from(t)}else{if(!(t instanceof n))throw new TypeError(`A ${r} tensor's data must be type of ${n}`);o=t}}else if(c=t,Array.isArray(e)){if(0===e.length)throw new TypeError("Tensor type cannot be inferred from an empty array.");const t=typeof e[0];if("string"===t)r="string",o=e;else{if("boolean"!==t)throw new TypeError(`Invalid element type of data array: ${t}.`);r="bool",o=Uint8Array.from(e)}}else{const t=u.get(e.constructor);if(void 0===t)throw new TypeError(`Unsupported type for tensor data: ${e.constructor}.`);r=t,o=e}if(void 0===c)c=[o.length];else if(!Array.isArray(c))throw new TypeError("A tensor's dims must be a number array");const l=(0,i.calculateSize)(c);if(l!==o.length)throw new Error(`Tensor's size(${l}) does not match data length(${o.length}).`);this.dims=c,this.type=r,this.data=o,this.size=l}static async fromImage(e,t){return(0,o.tensorFromImage)(e,t)}toDataURL(e){return(0,r.tensorToDataURL)(this,e)}toImageData(e){return(0,r.tensorToImageData)(this,e)}reshape(e){return(0,i.tensorReshape)(this,e)}}},106:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tensorReshape=t.calculateSize=void 0;const r=n(963);t.calculateSize=e=>{let t=1;for(let n=0;n<e.length;n++){const r=e[n];if("number"!=typeof r||!Number.isSafeInteger(r))throw new TypeError(`dims[${n}] must be an integer, got: ${r}`);if(r<0)throw new RangeError(`dims[${n}] must be a non-negative integer, got: ${r}`);t*=r}return t},t.tensorReshape=(e,t)=>new r.Tensor(e.type,e.data,t)},963:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Tensor=void 0;const r=n(5957);t.Tensor=r.Tensor},9104:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.version=void 0,t.version="1.16.0"},1583:function(e,t){var n,r=function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=null;try{t=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(e){}function n(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function r(e){return!0===(e&&e.__isLong__)}function o(e){var t=Math.clz32(e&-e);return e?31-t:t}n.prototype.__isLong__,Object.defineProperty(n.prototype,"__isLong__",{value:!0}),n.isLong=r;var i={},a={};function u(e,t){var n,r,o;return t?(o=0<=(e>>>=0)&&e<256)&&(r=a[e])?r:(n=c(e,0,!0),o&&(a[e]=n),n):(o=-128<=(e|=0)&&e<128)&&(r=i[e])?r:(n=c(e,e<0?-1:0,!1),o&&(i[e]=n),n)}function s(e,t){if(isNaN(e))return t?v:m;if(t){if(e<0)return v;if(e>=h)return T}else{if(e<=-g)return S;if(e+1>=g)return x}return e<0?s(-e,t).neg():c(e%d|0,e/d|0,t)}function c(e,t,r){return new n(e,t,r)}n.fromInt=u,n.fromNumber=s,n.fromBits=c;var l=Math.pow;function p(e,t,n){if(0===e.length)throw Error("empty string");if("number"==typeof t?(n=t,t=!1):t=!!t,"NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return t?v:m;if((n=n||10)<2||36<n)throw RangeError("radix");var r;if((r=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return p(e.substring(1),t,n).neg();for(var o=s(l(n,8)),i=m,a=0;a<e.length;a+=8){var u=Math.min(8,e.length-a),c=parseInt(e.substring(a,a+u),n);if(u<8){var f=s(l(n,u));i=i.mul(f).add(s(c))}else i=(i=i.mul(o)).add(s(c))}return i.unsigned=t,i}function f(e,t){return"number"==typeof e?s(e,t):"string"==typeof e?p(e,t):c(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}n.fromString=p,n.fromValue=f;var d=4294967296,h=d*d,g=h/2,y=u(1<<24),m=u(0);n.ZERO=m;var v=u(0,!0);n.UZERO=v;var b=u(1);n.ONE=b;var w=u(1,!0);n.UONE=w;var _=u(-1);n.NEG_ONE=_;var x=c(-1,2147483647,!1);n.MAX_VALUE=x;var T=c(-1,-1,!0);n.MAX_UNSIGNED_VALUE=T;var S=c(0,-2147483648,!1);n.MIN_VALUE=S;var P=n.prototype;P.toInt=function(){return this.unsigned?this.low>>>0:this.low},P.toNumber=function(){return this.unsigned?(this.high>>>0)*d+(this.low>>>0):this.high*d+(this.low>>>0)},P.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(S)){var t=s(e),n=this.div(t),r=n.mul(t).sub(this);return n.toString(e)+r.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var o=s(l(e,6),this.unsigned),i=this,a="";;){var u=i.div(o),c=(i.sub(u.mul(o)).toInt()>>>0).toString(e);if((i=u).isZero())return c+a;for(;c.length<6;)c="0"+c;a=""+c+a}},P.getHighBits=function(){return this.high},P.getHighBitsUnsigned=function(){return this.high>>>0},P.getLowBits=function(){return this.low},P.getLowBitsUnsigned=function(){return this.low>>>0},P.getNumBitsAbs=function(){if(this.isNegative())return this.eq(S)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},P.isZero=function(){return 0===this.high&&0===this.low},P.eqz=P.isZero,P.isNegative=function(){return!this.unsigned&&this.high<0},P.isPositive=function(){return this.unsigned||this.high>=0},P.isOdd=function(){return 1==(1&this.low)},P.isEven=function(){return 0==(1&this.low)},P.equals=function(e){return r(e)||(e=f(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&this.high===e.high&&this.low===e.low},P.eq=P.equals,P.notEquals=function(e){return!this.eq(e)},P.neq=P.notEquals,P.ne=P.notEquals,P.lessThan=function(e){return this.comp(e)<0},P.lt=P.lessThan,P.lessThanOrEqual=function(e){return this.comp(e)<=0},P.lte=P.lessThanOrEqual,P.le=P.lessThanOrEqual,P.greaterThan=function(e){return this.comp(e)>0},P.gt=P.greaterThan,P.greaterThanOrEqual=function(e){return this.comp(e)>=0},P.gte=P.greaterThanOrEqual,P.ge=P.greaterThanOrEqual,P.compare=function(e){if(r(e)||(e=f(e)),this.eq(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},P.comp=P.compare,P.negate=function(){return!this.unsigned&&this.eq(S)?S:this.not().add(b)},P.neg=P.negate,P.add=function(e){r(e)||(e=f(e));var t=this.high>>>16,n=65535&this.high,o=this.low>>>16,i=65535&this.low,a=e.high>>>16,u=65535&e.high,s=e.low>>>16,l=0,p=0,d=0,h=0;return d+=(h+=i+(65535&e.low))>>>16,p+=(d+=o+s)>>>16,l+=(p+=n+u)>>>16,l+=t+a,c((d&=65535)<<16|(h&=65535),(l&=65535)<<16|(p&=65535),this.unsigned)},P.subtract=function(e){return r(e)||(e=f(e)),this.add(e.neg())},P.sub=P.subtract,P.multiply=function(e){if(this.isZero())return this;if(r(e)||(e=f(e)),t)return c(t.mul(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned);if(e.isZero())return this.unsigned?v:m;if(this.eq(S))return e.isOdd()?S:m;if(e.eq(S))return this.isOdd()?S:m;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(y)&&e.lt(y))return s(this.toNumber()*e.toNumber(),this.unsigned);var n=this.high>>>16,o=65535&this.high,i=this.low>>>16,a=65535&this.low,u=e.high>>>16,l=65535&e.high,p=e.low>>>16,d=65535&e.low,h=0,g=0,b=0,w=0;return b+=(w+=a*d)>>>16,g+=(b+=i*d)>>>16,b&=65535,g+=(b+=a*p)>>>16,h+=(g+=o*d)>>>16,g&=65535,h+=(g+=i*p)>>>16,g&=65535,h+=(g+=a*l)>>>16,h+=n*d+o*p+i*l+a*u,c((b&=65535)<<16|(w&=65535),(h&=65535)<<16|(g&=65535),this.unsigned)},P.mul=P.multiply,P.divide=function(e){if(r(e)||(e=f(e)),e.isZero())throw Error("division by zero");var n,o,i;if(t)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?c((this.unsigned?t.div_u:t.div_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?v:m;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return v;if(e.gt(this.shru(1)))return w;i=v}else{if(this.eq(S))return e.eq(b)||e.eq(_)?S:e.eq(S)?b:(n=this.shr(1).div(e).shl(1)).eq(m)?e.isNegative()?b:_:(o=this.sub(e.mul(n)),i=n.add(o.div(e)));if(e.eq(S))return this.unsigned?v:m;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();i=m}for(o=this;o.gte(e);){n=Math.max(1,Math.floor(o.toNumber()/e.toNumber()));for(var a=Math.ceil(Math.log(n)/Math.LN2),u=a<=48?1:l(2,a-48),p=s(n),d=p.mul(e);d.isNegative()||d.gt(o);)d=(p=s(n-=u,this.unsigned)).mul(e);p.isZero()&&(p=b),i=i.add(p),o=o.sub(d)}return i},P.div=P.divide,P.modulo=function(e){return r(e)||(e=f(e)),t?c((this.unsigned?t.rem_u:t.rem_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},P.mod=P.modulo,P.rem=P.modulo,P.not=function(){return c(~this.low,~this.high,this.unsigned)},P.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32},P.clz=P.countLeadingZeros,P.countTrailingZeros=function(){return this.low?o(this.low):o(this.high)+32},P.ctz=P.countTrailingZeros,P.and=function(e){return r(e)||(e=f(e)),c(this.low&e.low,this.high&e.high,this.unsigned)},P.or=function(e){return r(e)||(e=f(e)),c(this.low|e.low,this.high|e.high,this.unsigned)},P.xor=function(e){return r(e)||(e=f(e)),c(this.low^e.low,this.high^e.high,this.unsigned)},P.shiftLeft=function(e){return r(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?c(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):c(0,this.low<<e-32,this.unsigned)},P.shl=P.shiftLeft,P.shiftRight=function(e){return r(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?c(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):c(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},P.shr=P.shiftRight,P.shiftRightUnsigned=function(e){return r(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?c(this.low>>>e|this.high<<32-e,this.high>>>e,this.unsigned):c(32===e?this.high:this.high>>>e-32,0,this.unsigned)},P.shru=P.shiftRightUnsigned,P.shr_u=P.shiftRightUnsigned,P.rotateLeft=function(e){var t;return r(e)&&(e=e.toInt()),0==(e&=63)?this:32===e?c(this.high,this.low,this.unsigned):e<32?(t=32-e,c(this.low<<e|this.high>>>t,this.high<<e|this.low>>>t,this.unsigned)):(t=32-(e-=32),c(this.high<<e|this.low>>>t,this.low<<e|this.high>>>t,this.unsigned))},P.rotl=P.rotateLeft,P.rotateRight=function(e){var t;return r(e)&&(e=e.toInt()),0==(e&=63)?this:32===e?c(this.high,this.low,this.unsigned):e<32?(t=32-e,c(this.high<<t|this.low>>>e,this.low<<t|this.high>>>e,this.unsigned)):(t=32-(e-=32),c(this.low<<t|this.high>>>e,this.high<<t|this.low>>>e,this.unsigned))},P.rotr=P.rotateRight,P.toSigned=function(){return this.unsigned?c(this.low,this.high,!1):this},P.toUnsigned=function(){return this.unsigned?this:c(this.low,this.high,!0)},P.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},P.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},P.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},n.fromBytes=function(e,t,r){return r?n.fromBytesLE(e,t):n.fromBytesBE(e,t)},n.fromBytesLE=function(e,t){return new n(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},n.fromBytesBE=function(e,t){return new n(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)};var A=n;return e.default=A,"default"in e?e.default:e}({});void 0===(n=function(){return r}.apply(t,[]))||(e.exports=n)},5686:function(e,t,n){"use strict";n.r(t),n.d(t,{flatbuffers:function(){return r}});var r={};r.Offset,r.Table,r.SIZEOF_SHORT=2,r.SIZEOF_INT=4,r.FILE_IDENTIFIER_LENGTH=4,r.SIZE_PREFIX_LENGTH=4,r.Encoding={UTF8_BYTES:1,UTF16_STRING:2},r.int32=new Int32Array(2),r.float32=new Float32Array(r.int32.buffer),r.float64=new Float64Array(r.int32.buffer),r.isLittleEndian=1===new Uint16Array(new Uint8Array([1,0]).buffer)[0],r.Long=function(e,t){this.low=0|e,this.high=0|t},r.Long.create=function(e,t){return 0==e&&0==t?r.Long.ZERO:new r.Long(e,t)},r.Long.prototype.toFloat64=function(){return(this.low>>>0)+4294967296*this.high},r.Long.prototype.equals=function(e){return this.low==e.low&&this.high==e.high},r.Long.ZERO=new r.Long(0,0),r.Builder=function(e){if(e)t=e;else var t=1024;this.bb=r.ByteBuffer.allocate(t),this.space=t,this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},r.Builder.prototype.clear=function(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},r.Builder.prototype.forceDefaults=function(e){this.force_defaults=e},r.Builder.prototype.dataBuffer=function(){return this.bb},r.Builder.prototype.asUint8Array=function(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())},r.Builder.prototype.prep=function(e,t){e>this.minalign&&(this.minalign=e);for(var n=1+~(this.bb.capacity()-this.space+t)&e-1;this.space<n+e+t;){var o=this.bb.capacity();this.bb=r.Builder.growByteBuffer(this.bb),this.space+=this.bb.capacity()-o}this.pad(n)},r.Builder.prototype.pad=function(e){for(var t=0;t<e;t++)this.bb.writeInt8(--this.space,0)},r.Builder.prototype.writeInt8=function(e){this.bb.writeInt8(this.space-=1,e)},r.Builder.prototype.writeInt16=function(e){this.bb.writeInt16(this.space-=2,e)},r.Builder.prototype.writeInt32=function(e){this.bb.writeInt32(this.space-=4,e)},r.Builder.prototype.writeInt64=function(e){this.bb.writeInt64(this.space-=8,e)},r.Builder.prototype.writeFloat32=function(e){this.bb.writeFloat32(this.space-=4,e)},r.Builder.prototype.writeFloat64=function(e){this.bb.writeFloat64(this.space-=8,e)},r.Builder.prototype.addInt8=function(e){this.prep(1,0),this.writeInt8(e)},r.Builder.prototype.addInt16=function(e){this.prep(2,0),this.writeInt16(e)},r.Builder.prototype.addInt32=function(e){this.prep(4,0),this.writeInt32(e)},r.Builder.prototype.addInt64=function(e){this.prep(8,0),this.writeInt64(e)},r.Builder.prototype.addFloat32=function(e){this.prep(4,0),this.writeFloat32(e)},r.Builder.prototype.addFloat64=function(e){this.prep(8,0),this.writeFloat64(e)},r.Builder.prototype.addFieldInt8=function(e,t,n){(this.force_defaults||t!=n)&&(this.addInt8(t),this.slot(e))},r.Builder.prototype.addFieldInt16=function(e,t,n){(this.force_defaults||t!=n)&&(this.addInt16(t),this.slot(e))},r.Builder.prototype.addFieldInt32=function(e,t,n){(this.force_defaults||t!=n)&&(this.addInt32(t),this.slot(e))},r.Builder.prototype.addFieldInt64=function(e,t,n){!this.force_defaults&&t.equals(n)||(this.addInt64(t),this.slot(e))},r.Builder.prototype.addFieldFloat32=function(e,t,n){(this.force_defaults||t!=n)&&(this.addFloat32(t),this.slot(e))},r.Builder.prototype.addFieldFloat64=function(e,t,n){(this.force_defaults||t!=n)&&(this.addFloat64(t),this.slot(e))},r.Builder.prototype.addFieldOffset=function(e,t,n){(this.force_defaults||t!=n)&&(this.addOffset(t),this.slot(e))},r.Builder.prototype.addFieldStruct=function(e,t,n){t!=n&&(this.nested(t),this.slot(e))},r.Builder.prototype.nested=function(e){if(e!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")},r.Builder.prototype.notNested=function(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")},r.Builder.prototype.slot=function(e){this.vtable[e]=this.offset()},r.Builder.prototype.offset=function(){return this.bb.capacity()-this.space},r.Builder.growByteBuffer=function(e){var t=e.capacity();if(3221225472&t)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");var n=t<<1,o=r.ByteBuffer.allocate(n);return o.setPosition(n-t),o.bytes().set(e.bytes(),n-t),o},r.Builder.prototype.addOffset=function(e){this.prep(r.SIZEOF_INT,0),this.writeInt32(this.offset()-e+r.SIZEOF_INT)},r.Builder.prototype.startObject=function(e){this.notNested(),null==this.vtable&&(this.vtable=[]),this.vtable_in_use=e;for(var t=0;t<e;t++)this.vtable[t]=0;this.isNested=!0,this.object_start=this.offset()},r.Builder.prototype.endObject=function(){if(null==this.vtable||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);for(var e=this.offset(),t=this.vtable_in_use-1;t>=0&&0==this.vtable[t];t--);for(var n=t+1;t>=0;t--)this.addInt16(0!=this.vtable[t]?e-this.vtable[t]:0);this.addInt16(e-this.object_start);var o=(n+2)*r.SIZEOF_SHORT;this.addInt16(o);var i=0,a=this.space;e:for(t=0;t<this.vtables.length;t++){var u=this.bb.capacity()-this.vtables[t];if(o==this.bb.readInt16(u)){for(var s=r.SIZEOF_SHORT;s<o;s+=r.SIZEOF_SHORT)if(this.bb.readInt16(a+s)!=this.bb.readInt16(u+s))continue e;i=this.vtables[t];break}}return i?(this.space=this.bb.capacity()-e,this.bb.writeInt32(this.space,i-e)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-e,this.offset()-e)),this.isNested=!1,e},r.Builder.prototype.finish=function(e,t,n){var o=n?r.SIZE_PREFIX_LENGTH:0;if(t){var i=t;if(this.prep(this.minalign,r.SIZEOF_INT+r.FILE_IDENTIFIER_LENGTH+o),i.length!=r.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+r.FILE_IDENTIFIER_LENGTH);for(var a=r.FILE_IDENTIFIER_LENGTH-1;a>=0;a--)this.writeInt8(i.charCodeAt(a))}this.prep(this.minalign,r.SIZEOF_INT+o),this.addOffset(e),o&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)},r.Builder.prototype.finishSizePrefixed=function(e,t){this.finish(e,t,!0)},r.Builder.prototype.requiredField=function(e,t){var n=this.bb.capacity()-e,r=n-this.bb.readInt32(n);if(0==this.bb.readInt16(r+t))throw new Error("FlatBuffers: field "+t+" must be set")},r.Builder.prototype.startVector=function(e,t,n){this.notNested(),this.vector_num_elems=t,this.prep(r.SIZEOF_INT,e*t),this.prep(n,e*t)},r.Builder.prototype.endVector=function(){return this.writeInt32(this.vector_num_elems),this.offset()},r.Builder.prototype.createString=function(e){if(e instanceof Uint8Array)var t=e;else{t=[];for(var n=0;n<e.length;){var r,o=e.charCodeAt(n++);(r=o<55296||o>=56320?o:(o<<10)+e.charCodeAt(n++)+-56613888)<128?t.push(r):(r<2048?t.push(r>>6&31|192):(r<65536?t.push(r>>12&15|224):t.push(r>>18&7|240,r>>12&63|128),t.push(r>>6&63|128)),t.push(63&r|128))}}this.addInt8(0),this.startVector(1,t.length,1),this.bb.setPosition(this.space-=t.length),n=0;for(var i=this.space,a=this.bb.bytes();n<t.length;n++)a[i++]=t[n];return this.endVector()},r.Builder.prototype.createLong=function(e,t){return r.Long.create(e,t)},r.ByteBuffer=function(e){this.bytes_=e,this.position_=0},r.ByteBuffer.allocate=function(e){return new r.ByteBuffer(new Uint8Array(e))},r.ByteBuffer.prototype.clear=function(){this.position_=0},r.ByteBuffer.prototype.bytes=function(){return this.bytes_},r.ByteBuffer.prototype.position=function(){return this.position_},r.ByteBuffer.prototype.setPosition=function(e){this.position_=e},r.ByteBuffer.prototype.capacity=function(){return this.bytes_.length},r.ByteBuffer.prototype.readInt8=function(e){return this.readUint8(e)<<24>>24},r.ByteBuffer.prototype.readUint8=function(e){return this.bytes_[e]},r.ByteBuffer.prototype.readInt16=function(e){return this.readUint16(e)<<16>>16},r.ByteBuffer.prototype.readUint16=function(e){return this.bytes_[e]|this.bytes_[e+1]<<8},r.ByteBuffer.prototype.readInt32=function(e){return this.bytes_[e]|this.bytes_[e+1]<<8|this.bytes_[e+2]<<16|this.bytes_[e+3]<<24},r.ByteBuffer.prototype.readUint32=function(e){return this.readInt32(e)>>>0},r.ByteBuffer.prototype.readInt64=function(e){return new r.Long(this.readInt32(e),this.readInt32(e+4))},r.ByteBuffer.prototype.readUint64=function(e){return new r.Long(this.readUint32(e),this.readUint32(e+4))},r.ByteBuffer.prototype.readFloat32=function(e){return r.int32[0]=this.readInt32(e),r.float32[0]},r.ByteBuffer.prototype.readFloat64=function(e){return r.int32[r.isLittleEndian?0:1]=this.readInt32(e),r.int32[r.isLittleEndian?1:0]=this.readInt32(e+4),r.float64[0]},r.ByteBuffer.prototype.writeInt8=function(e,t){this.bytes_[e]=t},r.ByteBuffer.prototype.writeUint8=function(e,t){this.bytes_[e]=t},r.ByteBuffer.prototype.writeInt16=function(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8},r.ByteBuffer.prototype.writeUint16=function(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8},r.ByteBuffer.prototype.writeInt32=function(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8,this.bytes_[e+2]=t>>16,this.bytes_[e+3]=t>>24},r.ByteBuffer.prototype.writeUint32=function(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8,this.bytes_[e+2]=t>>16,this.bytes_[e+3]=t>>24},r.ByteBuffer.prototype.writeInt64=function(e,t){this.writeInt32(e,t.low),this.writeInt32(e+4,t.high)},r.ByteBuffer.prototype.writeUint64=function(e,t){this.writeUint32(e,t.low),this.writeUint32(e+4,t.high)},r.ByteBuffer.prototype.writeFloat32=function(e,t){r.float32[0]=t,this.writeInt32(e,r.int32[0])},r.ByteBuffer.prototype.writeFloat64=function(e,t){r.float64[0]=t,this.writeInt32(e,r.int32[r.isLittleEndian?0:1]),this.writeInt32(e+4,r.int32[r.isLittleEndian?1:0])},r.ByteBuffer.prototype.getBufferIdentifier=function(){if(this.bytes_.length<this.position_+r.SIZEOF_INT+r.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");for(var e="",t=0;t<r.FILE_IDENTIFIER_LENGTH;t++)e+=String.fromCharCode(this.readInt8(this.position_+r.SIZEOF_INT+t));return e},r.ByteBuffer.prototype.__offset=function(e,t){var n=e-this.readInt32(e);return t<this.readInt16(n)?this.readInt16(n+t):0},r.ByteBuffer.prototype.__union=function(e,t){return e.bb_pos=t+this.readInt32(t),e.bb=this,e},r.ByteBuffer.prototype.__string=function(e,t){e+=this.readInt32(e);var n=this.readInt32(e),o="",i=0;if(e+=r.SIZEOF_INT,t===r.Encoding.UTF8_BYTES)return this.bytes_.subarray(e,e+n);for(;i<n;){var a,u=this.readUint8(e+i++);if(u<192)a=u;else{var s=this.readUint8(e+i++);if(u<224)a=(31&u)<<6|63&s;else{var c=this.readUint8(e+i++);a=u<240?(15&u)<<12|(63&s)<<6|63&c:(7&u)<<18|(63&s)<<12|(63&c)<<6|63&this.readUint8(e+i++)}}a<65536?o+=String.fromCharCode(a):(a-=65536,o+=String.fromCharCode(55296+(a>>10),56320+(1023&a)))}return o},r.ByteBuffer.prototype.__indirect=function(e){return e+this.readInt32(e)},r.ByteBuffer.prototype.__vector=function(e){return e+this.readInt32(e)+r.SIZEOF_INT},r.ByteBuffer.prototype.__vector_len=function(e){return this.readInt32(e+this.readInt32(e))},r.ByteBuffer.prototype.__has_identifier=function(e){if(e.length!=r.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+r.FILE_IDENTIFIER_LENGTH);for(var t=0;t<r.FILE_IDENTIFIER_LENGTH;t++)if(e.charCodeAt(t)!=this.readInt8(this.position_+r.SIZEOF_INT+t))return!1;return!0},r.ByteBuffer.prototype.createLong=function(e,t){return r.Long.create(e,t)}}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(n.exports,n,n.exports,__webpack_require__),n.exports}__webpack_require__.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=function(e,t){for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__=__webpack_require__(1057);return __webpack_exports__}()}));
//# sourceMappingURL=ort.es5.min.js.map